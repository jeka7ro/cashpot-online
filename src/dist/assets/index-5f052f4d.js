import{r as h,a as ll,b as ya}from"./vendor-b69f2a9f.js";import{u as Ge,N as wa,a as sl,L as xr,b as qt,R as nl,c as we,B as ol}from"./router-c483c27c.js";import{E as ka,a as Fe,B as $e,b as Ee,M as Je,U as Xe,G as Me,C as Tt,P as Mt,A as et,T as kt,F as ie,S as $t,c as ot,d as il,e as cl,f as dl,g as ml,L as ul,h as sa,i as hl,j as Ce,k as ye,D as De,l as it,m as Le,n as Ue,o as gt,p as br,q as ft,X as gr,r as ht,s as We,R as He,t as Ca,u as Va,H as Sa,v as Ja,Z as Bt,w as vt,x as pl,y as Ha,z as fe,I as Rt,J as xl,K as bl,N as Ie,O as zt,Q as La,V as Ia,W as Ye,Y as Wa,_ as Dt,$ as fr,a0 as gl,a1 as fl,a2 as vr,a3 as Ut,a4 as ja,a5 as Ot,a6 as vl,a7 as Ya,a8 as mt,a9 as Nl,aa as Xa,ab as yl,ac as wl,ad as Wt,ae as yt}from"./icons-02aa52f8.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var Nr={exports:{}},na={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=h,Cl=Symbol.for("react.element"),Sl=Symbol.for("react.fragment"),_l=Object.prototype.hasOwnProperty,El=kl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Al={key:!0,ref:!0,__self:!0,__source:!0};function yr(a,l,r){var s,o={},i=null,n=null;r!==void 0&&(i=""+r),l.key!==void 0&&(i=""+l.key),l.ref!==void 0&&(n=l.ref);for(s in l)_l.call(l,s)&&!Al.hasOwnProperty(s)&&(o[s]=l[s]);if(a&&a.defaultProps)for(s in l=a.defaultProps,l)o[s]===void 0&&(o[s]=l[s]);return{$$typeof:Cl,type:a,key:i,ref:n,props:o,_owner:El.current}}na.Fragment=Sl;na.jsx=yr;na.jsxs=yr;Nr.exports=na;var Ra=Nr.exports;const be=Ra.Fragment,e=Ra.jsx,t=Ra.jsxs;var _a={},Ka=ll;_a.createRoot=Ka.createRoot,_a.hydrateRoot=Ka.hydrateRoot;let Dl={data:""},Tl=a=>{if(typeof window=="object"){let l=(a?a.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return l.nonce=window.__nonce__,l.parentNode||(a||document.head).appendChild(l),l.firstChild}return a||Dl},zl=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Pl=/\/\*[^]*?\*\/|  +/g,Za=/\n+/g,bt=(a,l)=>{let r="",s="",o="";for(let i in a){let n=a[i];i[0]=="@"?i[1]=="i"?r=i+" "+n+";":s+=i[1]=="f"?bt(n,i):i+"{"+bt(n,i[1]=="k"?"":l)+"}":typeof n=="object"?s+=bt(n,l?l.replace(/([^,])+/g,m=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,m):m?m+" "+p:p)):i):n!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=bt.p?bt.p(i,n):i+":"+n+";")}return r+(l&&o?l+"{"+o+"}":o)+s},dt={},wr=a=>{if(typeof a=="object"){let l="";for(let r in a)l+=r+wr(a[r]);return l}return a},Fl=(a,l,r,s,o)=>{let i=wr(a),n=dt[i]||(dt[i]=(p=>{let c=0,d=11;for(;c<p.length;)d=101*d+p.charCodeAt(c++)>>>0;return"go"+d})(i));if(!dt[n]){let p=i!==a?a:(c=>{let d,b,u=[{}];for(;d=zl.exec(c.replace(Pl,""));)d[4]?u.shift():d[3]?(b=d[3].replace(Za," ").trim(),u.unshift(u[0][b]=u[0][b]||{})):u[0][d[1]]=d[2].replace(Za," ").trim();return u[0]})(a);dt[n]=bt(o?{["@keyframes "+n]:p}:p,r?"":"."+n)}let m=r&&dt.g?dt.g:null;return r&&(dt.g=dt[n]),((p,c,d,b)=>{b?c.data=c.data.replace(b,p):c.data.indexOf(p)===-1&&(c.data=d?p+c.data:c.data+p)})(dt[n],l,s,m),n},Ll=(a,l,r)=>a.reduce((s,o,i)=>{let n=l[i];if(n&&n.call){let m=n(r),p=m&&m.props&&m.props.className||/^go/.test(m)&&m;n=p?"."+p:m&&typeof m=="object"?m.props?"":bt(m,""):m===!1?"":m}return s+o+(n??"")},"");function oa(a){let l=this||{},r=a.call?a(l.p):a;return Fl(r.unshift?r.raw?Ll(r,[].slice.call(arguments,1),l.p):r.reduce((s,o)=>Object.assign(s,o&&o.call?o(l.p):o),{}):r,Tl(l.target),l.g,l.o,l.k)}let kr,Ea,Aa;oa.bind({g:1});let pt=oa.bind({k:1});function Il(a,l,r,s){bt.p=l,kr=a,Ea=r,Aa=s}function Nt(a,l){let r=this||{};return function(){let s=arguments;function o(i,n){let m=Object.assign({},i),p=m.className||o.className;r.p=Object.assign({theme:Ea&&Ea()},m),r.o=/ *go\d+/.test(p),m.className=oa.apply(r,s)+(p?" "+p:""),l&&(m.ref=n);let c=a;return a[0]&&(c=m.as||a,delete m.as),Aa&&c[0]&&Aa(m),kr(c,m)}return l?l(o):o}}var jl=a=>typeof a=="function",aa=(a,l)=>jl(a)?a(l):a,Rl=(()=>{let a=0;return()=>(++a).toString()})(),Cr=(()=>{let a;return()=>{if(a===void 0&&typeof window<"u"){let l=matchMedia("(prefers-reduced-motion: reduce)");a=!l||l.matches}return a}})(),Ol=20,Oa="default",Sr=(a,l)=>{let{toastLimit:r}=a.settings;switch(l.type){case 0:return{...a,toasts:[l.toast,...a.toasts].slice(0,r)};case 1:return{...a,toasts:a.toasts.map(n=>n.id===l.toast.id?{...n,...l.toast}:n)};case 2:let{toast:s}=l;return Sr(a,{type:a.toasts.find(n=>n.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=l;return{...a,toasts:a.toasts.map(n=>n.id===o||o===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return l.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(n=>n.id!==l.toastId)};case 5:return{...a,pausedAt:l.time};case 6:let i=l.time-(a.pausedAt||0);return{...a,pausedAt:void 0,toasts:a.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+i}))}}},Kt=[],_r={toasts:[],pausedAt:void 0,settings:{toastLimit:Ol}},nt={},Er=(a,l=Oa)=>{nt[l]=Sr(nt[l]||_r,a),Kt.forEach(([r,s])=>{r===l&&s(nt[l])})},Ar=a=>Object.keys(nt).forEach(l=>Er(a,l)),Ml=a=>Object.keys(nt).find(l=>nt[l].toasts.some(r=>r.id===a)),ia=(a=Oa)=>l=>{Er(l,a)},$l={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Bl=(a={},l=Oa)=>{let[r,s]=h.useState(nt[l]||_r),o=h.useRef(nt[l]);h.useEffect(()=>(o.current!==nt[l]&&s(nt[l]),Kt.push([l,s]),()=>{let n=Kt.findIndex(([m])=>m===l);n>-1&&Kt.splice(n,1)}),[l]);let i=r.toasts.map(n=>{var m,p,c;return{...a,...a[n.type],...n,removeDelay:n.removeDelay||((m=a[n.type])==null?void 0:m.removeDelay)||(a==null?void 0:a.removeDelay),duration:n.duration||((p=a[n.type])==null?void 0:p.duration)||(a==null?void 0:a.duration)||$l[n.type],style:{...a.style,...(c=a[n.type])==null?void 0:c.style,...n.style}}});return{...r,toasts:i}},Ul=(a,l="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:l,ariaProps:{role:"status","aria-live":"polite"},message:a,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Rl()}),Gt=a=>(l,r)=>{let s=Ul(l,a,r);return ia(s.toasterId||Ml(s.id))({type:2,toast:s}),s.id},X=(a,l)=>Gt("blank")(a,l);X.error=Gt("error");X.success=Gt("success");X.loading=Gt("loading");X.custom=Gt("custom");X.dismiss=(a,l)=>{let r={type:3,toastId:a};l?ia(l)(r):Ar(r)};X.dismissAll=a=>X.dismiss(void 0,a);X.remove=(a,l)=>{let r={type:4,toastId:a};l?ia(l)(r):Ar(r)};X.removeAll=a=>X.remove(void 0,a);X.promise=(a,l,r)=>{let s=X.loading(l.loading,{...r,...r==null?void 0:r.loading});return typeof a=="function"&&(a=a()),a.then(o=>{let i=l.success?aa(l.success,o):void 0;return i?X.success(i,{id:s,...r,...r==null?void 0:r.success}):X.dismiss(s),o}).catch(o=>{let i=l.error?aa(l.error,o):void 0;i?X.error(i,{id:s,...r,...r==null?void 0:r.error}):X.dismiss(s)}),a};var ql=1e3,Gl=(a,l="default")=>{let{toasts:r,pausedAt:s}=Bl(a,l),o=h.useRef(new Map).current,i=h.useCallback((b,u=ql)=>{if(o.has(b))return;let z=setTimeout(()=>{o.delete(b),n({type:4,toastId:b})},u);o.set(b,z)},[]);h.useEffect(()=>{if(s)return;let b=Date.now(),u=r.map(z=>{if(z.duration===1/0)return;let g=(z.duration||0)+z.pauseDuration-(b-z.createdAt);if(g<0){z.visible&&X.dismiss(z.id);return}return setTimeout(()=>X.dismiss(z.id,l),g)});return()=>{u.forEach(z=>z&&clearTimeout(z))}},[r,s,l]);let n=h.useCallback(ia(l),[l]),m=h.useCallback(()=>{n({type:5,time:Date.now()})},[n]),p=h.useCallback((b,u)=>{n({type:1,toast:{id:b,height:u}})},[n]),c=h.useCallback(()=>{s&&n({type:6,time:Date.now()})},[s,n]),d=h.useCallback((b,u)=>{let{reverseOrder:z=!1,gutter:g=8,defaultPosition:v}=u||{},y=r.filter(x=>(x.position||v)===(b.position||v)&&x.height),T=y.findIndex(x=>x.id===b.id),j=y.filter((x,w)=>w<T&&x.visible).length;return y.filter(x=>x.visible).slice(...z?[j+1]:[0,j]).reduce((x,w)=>x+(w.height||0)+g,0)},[r]);return h.useEffect(()=>{r.forEach(b=>{if(b.dismissed)i(b.id,b.removeDelay);else{let u=o.get(b.id);u&&(clearTimeout(u),o.delete(b.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:p,startPause:m,endPause:c,calculateOffset:d}}},Vl=pt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Jl=pt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hl=pt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Wl=Nt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Jl} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${a=>a.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Hl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Yl=pt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Xl=Nt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${a=>a.secondary||"#e0e0e0"};
  border-right-color: ${a=>a.primary||"#616161"};
  animation: ${Yl} 1s linear infinite;
`,Kl=pt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Zl=pt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ql=Nt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Kl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Zl} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${a=>a.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,es=Nt("div")`
  position: absolute;
`,ts=Nt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,as=pt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rs=Nt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${as} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ls=({toast:a})=>{let{icon:l,type:r,iconTheme:s}=a;return l!==void 0?typeof l=="string"?h.createElement(rs,null,l):l:r==="blank"?null:h.createElement(ts,null,h.createElement(Xl,{...s}),r!=="loading"&&h.createElement(es,null,r==="error"?h.createElement(Wl,{...s}):h.createElement(Ql,{...s})))},ss=a=>`
0% {transform: translate3d(0,${a*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ns=a=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${a*-150}%,-1px) scale(.6); opacity:0;}
`,os="0%{opacity:0;} 100%{opacity:1;}",is="0%{opacity:1;} 100%{opacity:0;}",cs=Nt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ds=Nt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ms=(a,l)=>{let r=a.includes("top")?1:-1,[s,o]=Cr()?[os,is]:[ss(r),ns(r)];return{animation:l?`${pt(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pt(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},us=h.memo(({toast:a,position:l,style:r,children:s})=>{let o=a.height?ms(a.position||l||"top-center",a.visible):{opacity:0},i=h.createElement(ls,{toast:a}),n=h.createElement(ds,{...a.ariaProps},aa(a.message,a));return h.createElement(cs,{className:a.className,style:{...o,...r,...a.style}},typeof s=="function"?s({icon:i,message:n}):h.createElement(h.Fragment,null,i,n))});Il(h.createElement);var hs=({id:a,className:l,style:r,onHeightUpdate:s,children:o})=>{let i=h.useCallback(n=>{if(n){let m=()=>{let p=n.getBoundingClientRect().height;s(a,p)};m(),new MutationObserver(m).observe(n,{subtree:!0,childList:!0,characterData:!0})}},[a,s]);return h.createElement("div",{ref:i,className:l,style:r},o)},ps=(a,l)=>{let r=a.includes("top"),s=r?{top:0}:{bottom:0},o=a.includes("center")?{justifyContent:"center"}:a.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Cr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${l*(r?1:-1)}px)`,...s,...o}},xs=oa`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Yt=16,bs=({reverseOrder:a,position:l="top-center",toastOptions:r,gutter:s,children:o,toasterId:i,containerStyle:n,containerClassName:m})=>{let{toasts:p,handlers:c}=Gl(r,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Yt,left:Yt,right:Yt,bottom:Yt,pointerEvents:"none",...n},className:m,onMouseEnter:c.startPause,onMouseLeave:c.endPause},p.map(d=>{let b=d.position||l,u=c.calculateOffset(d,{reverseOrder:a,gutter:s,defaultPosition:l}),z=ps(b,u);return h.createElement(hs,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?xs:"",style:z},d.type==="custom"?aa(d.message,d):o?o(d):h.createElement(us,{toast:d,position:b}))}))},Be=X;const Dr=h.createContext(),gs=()=>{const a=h.useContext(Dr);if(!a)throw new Error("useTheme must be used within a ThemeProvider");return a},fs=({children:a})=>{const[l,r]=h.useState(()=>localStorage.getItem("theme")||"light");h.useEffect(()=>{localStorage.setItem("theme",l),l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]);const s=()=>{r(o=>o==="light"?"dark":"light")};return e(Dr.Provider,{value:{theme:l,setTheme:r,toggleTheme:s},children:a})};function Tr(a,l){return function(){return a.apply(l,arguments)}}const{toString:vs}=Object.prototype,{getPrototypeOf:Ma}=Object,{iterator:ca,toStringTag:zr}=Symbol,da=(a=>l=>{const r=vs.call(l);return a[r]||(a[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),tt=a=>(a=a.toLowerCase(),l=>da(l)===a),ma=a=>l=>typeof l===a,{isArray:Ft}=Array,Pt=ma("undefined");function Vt(a){return a!==null&&!Pt(a)&&a.constructor!==null&&!Pt(a.constructor)&&qe(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const Pr=tt("ArrayBuffer");function Ns(a){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(a):l=a&&a.buffer&&Pr(a.buffer),l}const ys=ma("string"),qe=ma("function"),Fr=ma("number"),Jt=a=>a!==null&&typeof a=="object",ws=a=>a===!0||a===!1,Zt=a=>{if(da(a)!=="object")return!1;const l=Ma(a);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(zr in a)&&!(ca in a)},ks=a=>{if(!Jt(a)||Vt(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},Cs=tt("Date"),Ss=tt("File"),_s=tt("Blob"),Es=tt("FileList"),As=a=>Jt(a)&&qe(a.pipe),Ds=a=>{let l;return a&&(typeof FormData=="function"&&a instanceof FormData||qe(a.append)&&((l=da(a))==="formdata"||l==="object"&&qe(a.toString)&&a.toString()==="[object FormData]"))},Ts=tt("URLSearchParams"),[zs,Ps,Fs,Ls]=["ReadableStream","Request","Response","Headers"].map(tt),Is=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ht(a,l,{allOwnKeys:r=!1}={}){if(a===null||typeof a>"u")return;let s,o;if(typeof a!="object"&&(a=[a]),Ft(a))for(s=0,o=a.length;s<o;s++)l.call(null,a[s],s,a);else{if(Vt(a))return;const i=r?Object.getOwnPropertyNames(a):Object.keys(a),n=i.length;let m;for(s=0;s<n;s++)m=i[s],l.call(null,a[m],m,a)}}function Lr(a,l){if(Vt(a))return null;l=l.toLowerCase();const r=Object.keys(a);let s=r.length,o;for(;s-- >0;)if(o=r[s],l===o.toLowerCase())return o;return null}const wt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ir=a=>!Pt(a)&&a!==wt;function Da(){const{caseless:a,skipUndefined:l}=Ir(this)&&this||{},r={},s=(o,i)=>{const n=a&&Lr(r,i)||i;Zt(r[n])&&Zt(o)?r[n]=Da(r[n],o):Zt(o)?r[n]=Da({},o):Ft(o)?r[n]=o.slice():(!l||!Pt(o))&&(r[n]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&Ht(arguments[o],s);return r}const js=(a,l,r,{allOwnKeys:s}={})=>(Ht(l,(o,i)=>{r&&qe(o)?a[i]=Tr(o,r):a[i]=o},{allOwnKeys:s}),a),Rs=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),Os=(a,l,r,s)=>{a.prototype=Object.create(l.prototype,s),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:l.prototype}),r&&Object.assign(a.prototype,r)},Ms=(a,l,r,s)=>{let o,i,n;const m={};if(l=l||{},a==null)return l;do{for(o=Object.getOwnPropertyNames(a),i=o.length;i-- >0;)n=o[i],(!s||s(n,a,l))&&!m[n]&&(l[n]=a[n],m[n]=!0);a=r!==!1&&Ma(a)}while(a&&(!r||r(a,l))&&a!==Object.prototype);return l},$s=(a,l,r)=>{a=String(a),(r===void 0||r>a.length)&&(r=a.length),r-=l.length;const s=a.indexOf(l,r);return s!==-1&&s===r},Bs=a=>{if(!a)return null;if(Ft(a))return a;let l=a.length;if(!Fr(l))return null;const r=new Array(l);for(;l-- >0;)r[l]=a[l];return r},Us=(a=>l=>a&&l instanceof a)(typeof Uint8Array<"u"&&Ma(Uint8Array)),qs=(a,l)=>{const s=(a&&a[ca]).call(a);let o;for(;(o=s.next())&&!o.done;){const i=o.value;l.call(a,i[0],i[1])}},Gs=(a,l)=>{let r;const s=[];for(;(r=a.exec(l))!==null;)s.push(r);return s},Vs=tt("HTMLFormElement"),Js=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,o){return s.toUpperCase()+o}),Qa=(({hasOwnProperty:a})=>(l,r)=>a.call(l,r))(Object.prototype),Hs=tt("RegExp"),jr=(a,l)=>{const r=Object.getOwnPropertyDescriptors(a),s={};Ht(r,(o,i)=>{let n;(n=l(o,i,a))!==!1&&(s[i]=n||o)}),Object.defineProperties(a,s)},Ws=a=>{jr(a,(l,r)=>{if(qe(a)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=a[r];if(qe(s)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ys=(a,l)=>{const r={},s=o=>{o.forEach(i=>{r[i]=!0})};return Ft(a)?s(a):s(String(a).split(l)),r},Xs=()=>{},Ks=(a,l)=>a!=null&&Number.isFinite(a=+a)?a:l;function Zs(a){return!!(a&&qe(a.append)&&a[zr]==="FormData"&&a[ca])}const Qs=a=>{const l=new Array(10),r=(s,o)=>{if(Jt(s)){if(l.indexOf(s)>=0)return;if(Vt(s))return s;if(!("toJSON"in s)){l[o]=s;const i=Ft(s)?[]:{};return Ht(s,(n,m)=>{const p=r(n,o+1);!Pt(p)&&(i[m]=p)}),l[o]=void 0,i}}return s};return r(a,0)},en=tt("AsyncFunction"),tn=a=>a&&(Jt(a)||qe(a))&&qe(a.then)&&qe(a.catch),Rr=((a,l)=>a?setImmediate:l?((r,s)=>(wt.addEventListener("message",({source:o,data:i})=>{o===wt&&i===r&&s.length&&s.shift()()},!1),o=>{s.push(o),wt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",qe(wt.postMessage)),an=typeof queueMicrotask<"u"?queueMicrotask.bind(wt):typeof process<"u"&&process.nextTick||Rr,rn=a=>a!=null&&qe(a[ca]),$={isArray:Ft,isArrayBuffer:Pr,isBuffer:Vt,isFormData:Ds,isArrayBufferView:Ns,isString:ys,isNumber:Fr,isBoolean:ws,isObject:Jt,isPlainObject:Zt,isEmptyObject:ks,isReadableStream:zs,isRequest:Ps,isResponse:Fs,isHeaders:Ls,isUndefined:Pt,isDate:Cs,isFile:Ss,isBlob:_s,isRegExp:Hs,isFunction:qe,isStream:As,isURLSearchParams:Ts,isTypedArray:Us,isFileList:Es,forEach:Ht,merge:Da,extend:js,trim:Is,stripBOM:Rs,inherits:Os,toFlatObject:Ms,kindOf:da,kindOfTest:tt,endsWith:$s,toArray:Bs,forEachEntry:qs,matchAll:Gs,isHTMLForm:Vs,hasOwnProperty:Qa,hasOwnProp:Qa,reduceDescriptors:jr,freezeMethods:Ws,toObjectSet:Ys,toCamelCase:Js,noop:Xs,toFiniteNumber:Ks,findKey:Lr,global:wt,isContextDefined:Ir,isSpecCompliantForm:Zs,toJSONObject:Qs,isAsyncFn:en,isThenable:tn,setImmediate:Rr,asap:an,isIterable:rn};function oe(a,l,r,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",l&&(this.code=l),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}$.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Or=oe.prototype,Mr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{Mr[a]={value:a}});Object.defineProperties(oe,Mr);Object.defineProperty(Or,"isAxiosError",{value:!0});oe.from=(a,l,r,s,o,i)=>{const n=Object.create(Or);$.toFlatObject(a,n,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const m=a&&a.message?a.message:"Error",p=l==null&&a?a.code:l;return oe.call(n,m,p,r,s,o),a&&n.cause==null&&Object.defineProperty(n,"cause",{value:a,configurable:!0}),n.name=a&&a.name||"Error",i&&Object.assign(n,i),n};const ln=null;function Ta(a){return $.isPlainObject(a)||$.isArray(a)}function $r(a){return $.endsWith(a,"[]")?a.slice(0,-2):a}function er(a,l,r){return a?a.concat(l).map(function(o,i){return o=$r(o),!r&&i?"["+o+"]":o}).join(r?".":""):l}function sn(a){return $.isArray(a)&&!a.some(Ta)}const nn=$.toFlatObject($,{},null,function(l){return/^is[A-Z]/.test(l)});function ua(a,l,r){if(!$.isObject(a))throw new TypeError("target must be an object");l=l||new FormData,r=$.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!$.isUndefined(y[v])});const s=r.metaTokens,o=r.visitor||d,i=r.dots,n=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(l);if(!$.isFunction(o))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if($.isDate(g))return g.toISOString();if($.isBoolean(g))return g.toString();if(!p&&$.isBlob(g))throw new oe("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(g)||$.isTypedArray(g)?p&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,v,y){let T=g;if(g&&!y&&typeof g=="object"){if($.endsWith(v,"{}"))v=s?v:v.slice(0,-2),g=JSON.stringify(g);else if($.isArray(g)&&sn(g)||($.isFileList(g)||$.endsWith(v,"[]"))&&(T=$.toArray(g)))return v=$r(v),T.forEach(function(x,w){!($.isUndefined(x)||x===null)&&l.append(n===!0?er([v],w,i):n===null?v:v+"[]",c(x))}),!1}return Ta(g)?!0:(l.append(er(y,v,i),c(g)),!1)}const b=[],u=Object.assign(nn,{defaultVisitor:d,convertValue:c,isVisitable:Ta});function z(g,v){if(!$.isUndefined(g)){if(b.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));b.push(g),$.forEach(g,function(T,j){(!($.isUndefined(T)||T===null)&&o.call(l,T,$.isString(j)?j.trim():j,v,u))===!0&&z(T,v?v.concat(j):[j])}),b.pop()}}if(!$.isObject(a))throw new TypeError("data must be an object");return z(a),l}function tr(a){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(s){return l[s]})}function $a(a,l){this._pairs=[],a&&ua(a,this,l)}const Br=$a.prototype;Br.append=function(l,r){this._pairs.push([l,r])};Br.toString=function(l){const r=l?function(s){return l.call(this,s,tr)}:tr;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function on(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ur(a,l,r){if(!l)return a;const s=r&&r.encode||on;$.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(l,r):i=$.isURLSearchParams(l)?l.toString():new $a(l,r).toString(s),i){const n=a.indexOf("#");n!==-1&&(a=a.slice(0,n)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}class cn{constructor(){this.handlers=[]}use(l,r,s){return this.handlers.push({fulfilled:l,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){$.forEach(this.handlers,function(s){s!==null&&l(s)})}}const ar=cn,qr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dn=typeof URLSearchParams<"u"?URLSearchParams:$a,mn=typeof FormData<"u"?FormData:null,un=typeof Blob<"u"?Blob:null,hn={isBrowser:!0,classes:{URLSearchParams:dn,FormData:mn,Blob:un},protocols:["http","https","file","blob","url","data"]},Ba=typeof window<"u"&&typeof document<"u",za=typeof navigator=="object"&&navigator||void 0,pn=Ba&&(!za||["ReactNative","NativeScript","NS"].indexOf(za.product)<0),xn=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),bn=Ba&&window.location.href||"http://localhost",gn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ba,hasStandardBrowserEnv:pn,hasStandardBrowserWebWorkerEnv:xn,navigator:za,origin:bn},Symbol.toStringTag,{value:"Module"})),Oe={...gn,...hn};function fn(a,l){return ua(a,new Oe.classes.URLSearchParams,{visitor:function(r,s,o,i){return Oe.isNode&&$.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...l})}function vn(a){return $.matchAll(/\w+|\[(\w*)]/g,a).map(l=>l[0]==="[]"?"":l[1]||l[0])}function Nn(a){const l={},r=Object.keys(a);let s;const o=r.length;let i;for(s=0;s<o;s++)i=r[s],l[i]=a[i];return l}function Gr(a){function l(r,s,o,i){let n=r[i++];if(n==="__proto__")return!0;const m=Number.isFinite(+n),p=i>=r.length;return n=!n&&$.isArray(o)?o.length:n,p?($.hasOwnProp(o,n)?o[n]=[o[n],s]:o[n]=s,!m):((!o[n]||!$.isObject(o[n]))&&(o[n]=[]),l(r,s,o[n],i)&&$.isArray(o[n])&&(o[n]=Nn(o[n])),!m)}if($.isFormData(a)&&$.isFunction(a.entries)){const r={};return $.forEachEntry(a,(s,o)=>{l(vn(s),o,r,0)}),r}return null}function yn(a,l,r){if($.isString(a))try{return(l||JSON.parse)(a),$.trim(a)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(a)}const Ua={transitional:qr,adapter:["xhr","http","fetch"],transformRequest:[function(l,r){const s=r.getContentType()||"",o=s.indexOf("application/json")>-1,i=$.isObject(l);if(i&&$.isHTMLForm(l)&&(l=new FormData(l)),$.isFormData(l))return o?JSON.stringify(Gr(l)):l;if($.isArrayBuffer(l)||$.isBuffer(l)||$.isStream(l)||$.isFile(l)||$.isBlob(l)||$.isReadableStream(l))return l;if($.isArrayBufferView(l))return l.buffer;if($.isURLSearchParams(l))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let m;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return fn(l,this.formSerializer).toString();if((m=$.isFileList(l))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return ua(m?{"files[]":l}:l,p&&new p,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),yn(l)):l}],transformResponse:[function(l){const r=this.transitional||Ua.transitional,s=r&&r.forcedJSONParsing,o=this.responseType==="json";if($.isResponse(l)||$.isReadableStream(l))return l;if(l&&$.isString(l)&&(s&&!this.responseType||o)){const n=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(l,this.parseReviver)}catch(m){if(n)throw m.name==="SyntaxError"?oe.from(m,oe.ERR_BAD_RESPONSE,this,null,this.response):m}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oe.classes.FormData,Blob:Oe.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],a=>{Ua.headers[a]={}});const qa=Ua,wn=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kn=a=>{const l={};let r,s,o;return a&&a.split(`
`).forEach(function(n){o=n.indexOf(":"),r=n.substring(0,o).trim().toLowerCase(),s=n.substring(o+1).trim(),!(!r||l[r]&&wn[r])&&(r==="set-cookie"?l[r]?l[r].push(s):l[r]=[s]:l[r]=l[r]?l[r]+", "+s:s)}),l},rr=Symbol("internals");function jt(a){return a&&String(a).trim().toLowerCase()}function Qt(a){return a===!1||a==null?a:$.isArray(a)?a.map(Qt):String(a)}function Cn(a){const l=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(a);)l[s[1]]=s[2];return l}const Sn=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function fa(a,l,r,s,o){if($.isFunction(s))return s.call(this,l,r);if(o&&(l=r),!!$.isString(l)){if($.isString(s))return l.indexOf(s)!==-1;if($.isRegExp(s))return s.test(l)}}function _n(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,r,s)=>r.toUpperCase()+s)}function En(a,l){const r=$.toCamelCase(" "+l);["get","set","has"].forEach(s=>{Object.defineProperty(a,s+r,{value:function(o,i,n){return this[s].call(this,l,o,i,n)},configurable:!0})})}class ha{constructor(l){l&&this.set(l)}set(l,r,s){const o=this;function i(m,p,c){const d=jt(p);if(!d)throw new Error("header name must be a non-empty string");const b=$.findKey(o,d);(!b||o[b]===void 0||c===!0||c===void 0&&o[b]!==!1)&&(o[b||p]=Qt(m))}const n=(m,p)=>$.forEach(m,(c,d)=>i(c,d,p));if($.isPlainObject(l)||l instanceof this.constructor)n(l,r);else if($.isString(l)&&(l=l.trim())&&!Sn(l))n(kn(l),r);else if($.isObject(l)&&$.isIterable(l)){let m={},p,c;for(const d of l){if(!$.isArray(d))throw TypeError("Object iterator must return a key-value pair");m[c=d[0]]=(p=m[c])?$.isArray(p)?[...p,d[1]]:[p,d[1]]:d[1]}n(m,r)}else l!=null&&i(r,l,s);return this}get(l,r){if(l=jt(l),l){const s=$.findKey(this,l);if(s){const o=this[s];if(!r)return o;if(r===!0)return Cn(o);if($.isFunction(r))return r.call(this,o,s);if($.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,r){if(l=jt(l),l){const s=$.findKey(this,l);return!!(s&&this[s]!==void 0&&(!r||fa(this,this[s],s,r)))}return!1}delete(l,r){const s=this;let o=!1;function i(n){if(n=jt(n),n){const m=$.findKey(s,n);m&&(!r||fa(s,s[m],m,r))&&(delete s[m],o=!0)}}return $.isArray(l)?l.forEach(i):i(l),o}clear(l){const r=Object.keys(this);let s=r.length,o=!1;for(;s--;){const i=r[s];(!l||fa(this,this[i],i,l,!0))&&(delete this[i],o=!0)}return o}normalize(l){const r=this,s={};return $.forEach(this,(o,i)=>{const n=$.findKey(s,i);if(n){r[n]=Qt(o),delete r[i];return}const m=l?_n(i):String(i).trim();m!==i&&delete r[i],r[m]=Qt(o),s[m]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const r=Object.create(null);return $.forEach(this,(s,o)=>{s!=null&&s!==!1&&(r[o]=l&&$.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,r])=>l+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...r){const s=new this(l);return r.forEach(o=>s.set(o)),s}static accessor(l){const s=(this[rr]=this[rr]={accessors:{}}).accessors,o=this.prototype;function i(n){const m=jt(n);s[m]||(En(o,n),s[m]=!0)}return $.isArray(l)?l.forEach(i):i(l),this}}ha.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(ha.prototype,({value:a},l)=>{let r=l[0].toUpperCase()+l.slice(1);return{get:()=>a,set(s){this[r]=s}}});$.freezeMethods(ha);const Qe=ha;function va(a,l){const r=this||qa,s=l||r,o=Qe.from(s.headers);let i=s.data;return $.forEach(a,function(m){i=m.call(r,i,o.normalize(),l?l.status:void 0)}),o.normalize(),i}function Vr(a){return!!(a&&a.__CANCEL__)}function Lt(a,l,r){oe.call(this,a??"canceled",oe.ERR_CANCELED,l,r),this.name="CanceledError"}$.inherits(Lt,oe,{__CANCEL__:!0});function Jr(a,l,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?a(r):l(new oe("Request failed with status code "+r.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function An(a){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return l&&l[1]||""}function Dn(a,l){a=a||10;const r=new Array(a),s=new Array(a);let o=0,i=0,n;return l=l!==void 0?l:1e3,function(p){const c=Date.now(),d=s[i];n||(n=c),r[o]=p,s[o]=c;let b=i,u=0;for(;b!==o;)u+=r[b++],b=b%a;if(o=(o+1)%a,o===i&&(i=(i+1)%a),c-n<l)return;const z=d&&c-d;return z?Math.round(u*1e3/z):void 0}}function Tn(a,l){let r=0,s=1e3/l,o,i;const n=(c,d=Date.now())=>{r=d,o=null,i&&(clearTimeout(i),i=null),a(...c)};return[(...c)=>{const d=Date.now(),b=d-r;b>=s?n(c,d):(o=c,i||(i=setTimeout(()=>{i=null,n(o)},s-b)))},()=>o&&n(o)]}const ra=(a,l,r=3)=>{let s=0;const o=Dn(50,250);return Tn(i=>{const n=i.loaded,m=i.lengthComputable?i.total:void 0,p=n-s,c=o(p),d=n<=m;s=n;const b={loaded:n,total:m,progress:m?n/m:void 0,bytes:p,rate:c||void 0,estimated:c&&m&&d?(m-n)/c:void 0,event:i,lengthComputable:m!=null,[l?"download":"upload"]:!0};a(b)},r)},lr=(a,l)=>{const r=a!=null;return[s=>l[0]({lengthComputable:r,total:a,loaded:s}),l[1]]},sr=a=>(...l)=>$.asap(()=>a(...l)),zn=Oe.hasStandardBrowserEnv?((a,l)=>r=>(r=new URL(r,Oe.origin),a.protocol===r.protocol&&a.host===r.host&&(l||a.port===r.port)))(new URL(Oe.origin),Oe.navigator&&/(msie|trident)/i.test(Oe.navigator.userAgent)):()=>!0,Pn=Oe.hasStandardBrowserEnv?{write(a,l,r,s,o,i){const n=[a+"="+encodeURIComponent(l)];$.isNumber(r)&&n.push("expires="+new Date(r).toGMTString()),$.isString(s)&&n.push("path="+s),$.isString(o)&&n.push("domain="+o),i===!0&&n.push("secure"),document.cookie=n.join("; ")},read(a){const l=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fn(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function Ln(a,l){return l?a.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):a}function Hr(a,l,r){let s=!Fn(l);return a&&(s||r==!1)?Ln(a,l):l}const nr=a=>a instanceof Qe?{...a}:a;function Ct(a,l){l=l||{};const r={};function s(c,d,b,u){return $.isPlainObject(c)&&$.isPlainObject(d)?$.merge.call({caseless:u},c,d):$.isPlainObject(d)?$.merge({},d):$.isArray(d)?d.slice():d}function o(c,d,b,u){if($.isUndefined(d)){if(!$.isUndefined(c))return s(void 0,c,b,u)}else return s(c,d,b,u)}function i(c,d){if(!$.isUndefined(d))return s(void 0,d)}function n(c,d){if($.isUndefined(d)){if(!$.isUndefined(c))return s(void 0,c)}else return s(void 0,d)}function m(c,d,b){if(b in l)return s(c,d);if(b in a)return s(void 0,c)}const p={url:i,method:i,data:i,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:m,headers:(c,d,b)=>o(nr(c),nr(d),b,!0)};return $.forEach(Object.keys({...a,...l}),function(d){const b=p[d]||o,u=b(a[d],l[d],d);$.isUndefined(u)&&b!==m||(r[d]=u)}),r}const Wr=a=>{const l=Ct({},a);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:i,headers:n,auth:m}=l;if(l.headers=n=Qe.from(n),l.url=Ur(Hr(l.baseURL,l.url,l.allowAbsoluteUrls),a.params,a.paramsSerializer),m&&n.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),$.isFormData(r)){if(Oe.hasStandardBrowserEnv||Oe.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if($.isFunction(r.getHeaders)){const p=r.getHeaders(),c=["content-type","content-length"];Object.entries(p).forEach(([d,b])=>{c.includes(d.toLowerCase())&&n.set(d,b)})}}if(Oe.hasStandardBrowserEnv&&(s&&$.isFunction(s)&&(s=s(l)),s||s!==!1&&zn(l.url))){const p=o&&i&&Pn.read(i);p&&n.set(o,p)}return l},In=typeof XMLHttpRequest<"u",jn=In&&function(a){return new Promise(function(r,s){const o=Wr(a);let i=o.data;const n=Qe.from(o.headers).normalize();let{responseType:m,onUploadProgress:p,onDownloadProgress:c}=o,d,b,u,z,g;function v(){z&&z(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(o.method.toUpperCase(),o.url,!0),y.timeout=o.timeout;function T(){if(!y)return;const x=Qe.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),L={data:!m||m==="text"||m==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:a,request:y};Jr(function(q){r(q),v()},function(q){s(q),v()},L),y=null}"onloadend"in y?y.onloadend=T:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(T)},y.onabort=function(){y&&(s(new oe("Request aborted",oe.ECONNABORTED,a,y)),y=null)},y.onerror=function(w){const L=w&&w.message?w.message:"Network Error",S=new oe(L,oe.ERR_NETWORK,a,y);S.event=w||null,s(S),y=null},y.ontimeout=function(){let w=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const L=o.transitional||qr;o.timeoutErrorMessage&&(w=o.timeoutErrorMessage),s(new oe(w,L.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,a,y)),y=null},i===void 0&&n.setContentType(null),"setRequestHeader"in y&&$.forEach(n.toJSON(),function(w,L){y.setRequestHeader(L,w)}),$.isUndefined(o.withCredentials)||(y.withCredentials=!!o.withCredentials),m&&m!=="json"&&(y.responseType=o.responseType),c&&([u,g]=ra(c,!0),y.addEventListener("progress",u)),p&&y.upload&&([b,z]=ra(p),y.upload.addEventListener("progress",b),y.upload.addEventListener("loadend",z)),(o.cancelToken||o.signal)&&(d=x=>{y&&(s(!x||x.type?new Lt(null,a,y):x),y.abort(),y=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const j=An(o.url);if(j&&Oe.protocols.indexOf(j)===-1){s(new oe("Unsupported protocol "+j+":",oe.ERR_BAD_REQUEST,a));return}y.send(i||null)})},Rn=(a,l)=>{const{length:r}=a=a?a.filter(Boolean):[];if(l||r){let s=new AbortController,o;const i=function(c){if(!o){o=!0,m();const d=c instanceof Error?c:this.reason;s.abort(d instanceof oe?d:new Lt(d instanceof Error?d.message:d))}};let n=l&&setTimeout(()=>{n=null,i(new oe(`timeout ${l} of ms exceeded`,oe.ETIMEDOUT))},l);const m=()=>{a&&(n&&clearTimeout(n),n=null,a.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),a=null)};a.forEach(c=>c.addEventListener("abort",i));const{signal:p}=s;return p.unsubscribe=()=>$.asap(m),p}},On=Rn,Mn=function*(a,l){let r=a.byteLength;if(!l||r<l){yield a;return}let s=0,o;for(;s<r;)o=s+l,yield a.slice(s,o),s=o},$n=async function*(a,l){for await(const r of Bn(a))yield*Mn(r,l)},Bn=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const l=a.getReader();try{for(;;){const{done:r,value:s}=await l.read();if(r)break;yield s}}finally{await l.cancel()}},or=(a,l,r,s)=>{const o=$n(a,l);let i=0,n,m=p=>{n||(n=!0,s&&s(p))};return new ReadableStream({async pull(p){try{const{done:c,value:d}=await o.next();if(c){m(),p.close();return}let b=d.byteLength;if(r){let u=i+=b;r(u)}p.enqueue(new Uint8Array(d))}catch(c){throw m(c),c}},cancel(p){return m(p),o.return()}},{highWaterMark:2})},ir=64*1024,{isFunction:Xt}=$,Un=(({Request:a,Response:l})=>({Request:a,Response:l}))($.global),{ReadableStream:cr,TextEncoder:dr}=$.global,mr=(a,...l)=>{try{return!!a(...l)}catch{return!1}},qn=a=>{a=$.merge.call({skipUndefined:!0},Un,a);const{fetch:l,Request:r,Response:s}=a,o=l?Xt(l):typeof fetch=="function",i=Xt(r),n=Xt(s);if(!o)return!1;const m=o&&Xt(cr),p=o&&(typeof dr=="function"?(g=>v=>g.encode(v))(new dr):async g=>new Uint8Array(await new r(g).arrayBuffer())),c=i&&m&&mr(()=>{let g=!1;const v=new r(Oe.origin,{body:new cr,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),d=n&&m&&mr(()=>$.isReadableStream(new s("").body)),b={stream:d&&(g=>g.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!b[g]&&(b[g]=(v,y)=>{let T=v&&v[g];if(T)return T.call(v);throw new oe(`Response type '${g}' is not supported`,oe.ERR_NOT_SUPPORT,y)})});const u=async g=>{if(g==null)return 0;if($.isBlob(g))return g.size;if($.isSpecCompliantForm(g))return(await new r(Oe.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if($.isArrayBufferView(g)||$.isArrayBuffer(g))return g.byteLength;if($.isURLSearchParams(g)&&(g=g+""),$.isString(g))return(await p(g)).byteLength},z=async(g,v)=>{const y=$.toFiniteNumber(g.getContentLength());return y??u(v)};return async g=>{let{url:v,method:y,data:T,signal:j,cancelToken:x,timeout:w,onDownloadProgress:L,onUploadProgress:S,responseType:q,headers:E,withCredentials:A="same-origin",fetchOptions:B}=Wr(g),D=l||fetch;q=q?(q+"").toLowerCase():"text";let R=On([j,x&&x.toAbortSignal()],w),N=null;const f=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let C;try{if(S&&c&&y!=="get"&&y!=="head"&&(C=await z(E,T))!==0){let K=new r(v,{method:"POST",body:T,duplex:"half"}),te;if($.isFormData(T)&&(te=K.headers.get("content-type"))&&E.setContentType(te),K.body){const[ue,M]=lr(C,ra(sr(S)));T=or(K.body,ir,ue,M)}}$.isString(A)||(A=A?"include":"omit");const _=i&&"credentials"in r.prototype,I={...B,signal:R,method:y.toUpperCase(),headers:E.normalize().toJSON(),body:T,duplex:"half",credentials:_?A:void 0};N=i&&new r(v,I);let O=await(i?D(N,B):D(v,I));const P=d&&(q==="stream"||q==="response");if(d&&(L||P&&f)){const K={};["status","statusText","headers"].forEach(W=>{K[W]=O[W]});const te=$.toFiniteNumber(O.headers.get("content-length")),[ue,M]=L&&lr(te,ra(sr(L),!0))||[];O=new s(or(O.body,ir,ue,()=>{M&&M(),f&&f()}),K)}q=q||"text";let Y=await b[$.findKey(b,q)||"text"](O,g);return!P&&f&&f(),await new Promise((K,te)=>{Jr(K,te,{data:Y,headers:Qe.from(O.headers),status:O.status,statusText:O.statusText,config:g,request:N})})}catch(_){throw f&&f(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,g,N),{cause:_.cause||_}):oe.from(_,_&&_.code,g,N)}}},Gn=new Map,Yr=a=>{let l=a?a.env:{};const{fetch:r,Request:s,Response:o}=l,i=[s,o,r];let n=i.length,m=n,p,c,d=Gn;for(;m--;)p=i[m],c=d.get(p),c===void 0&&d.set(p,c=m?new Map:qn(l)),d=c;return c};Yr();const Pa={http:ln,xhr:jn,fetch:{get:Yr}};$.forEach(Pa,(a,l)=>{if(a){try{Object.defineProperty(a,"name",{value:l})}catch{}Object.defineProperty(a,"adapterName",{value:l})}});const ur=a=>`- ${a}`,Vn=a=>$.isFunction(a)||a===null||a===!1,Xr={getAdapter:(a,l)=>{a=$.isArray(a)?a:[a];const{length:r}=a;let s,o;const i={};for(let n=0;n<r;n++){s=a[n];let m;if(o=s,!Vn(s)&&(o=Pa[(m=String(s)).toLowerCase()],o===void 0))throw new oe(`Unknown adapter '${m}'`);if(o&&($.isFunction(o)||(o=o.get(l))))break;i[m||"#"+n]=o}if(!o){const n=Object.entries(i).map(([p,c])=>`adapter ${p} `+(c===!1?"is not supported by the environment":"is not available in the build"));let m=r?n.length>1?`since :
`+n.map(ur).join(`
`):" "+ur(n[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return o},adapters:Pa};function Na(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Lt(null,a)}function hr(a){return Na(a),a.headers=Qe.from(a.headers),a.data=va.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),Xr.getAdapter(a.adapter||qa.adapter,a)(a).then(function(s){return Na(a),s.data=va.call(a,a.transformResponse,s),s.headers=Qe.from(s.headers),s},function(s){return Vr(s)||(Na(a),s&&s.response&&(s.response.data=va.call(a,a.transformResponse,s.response),s.response.headers=Qe.from(s.response.headers))),Promise.reject(s)})}const Kr="1.12.2",pa={};["object","boolean","number","function","string","symbol"].forEach((a,l)=>{pa[a]=function(s){return typeof s===a||"a"+(l<1?"n ":" ")+a}});const pr={};pa.transitional=function(l,r,s){function o(i,n){return"[Axios v"+Kr+"] Transitional option '"+i+"'"+n+(s?". "+s:"")}return(i,n,m)=>{if(l===!1)throw new oe(o(n," has been removed"+(r?" in "+r:"")),oe.ERR_DEPRECATED);return r&&!pr[n]&&(pr[n]=!0,console.warn(o(n," has been deprecated since v"+r+" and will be removed in the near future"))),l?l(i,n,m):!0}};pa.spelling=function(l){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${l}`),!0)};function Jn(a,l,r){if(typeof a!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const s=Object.keys(a);let o=s.length;for(;o-- >0;){const i=s[o],n=l[i];if(n){const m=a[i],p=m===void 0||n(m,i,a);if(p!==!0)throw new oe("option "+i+" must be "+p,oe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new oe("Unknown option "+i,oe.ERR_BAD_OPTION)}}const ea={assertOptions:Jn,validators:pa},st=ea.validators;class la{constructor(l){this.defaults=l||{},this.interceptors={request:new ar,response:new ar}}async request(l,r){try{return await this._request(l,r)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(l,r){typeof l=="string"?(r=r||{},r.url=l):r=l||{},r=Ct(this.defaults,r);const{transitional:s,paramsSerializer:o,headers:i}=r;s!==void 0&&ea.assertOptions(s,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),o!=null&&($.isFunction(o)?r.paramsSerializer={serialize:o}:ea.assertOptions(o,{encode:st.function,serialize:st.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ea.assertOptions(r,{baseUrl:st.spelling("baseURL"),withXsrfToken:st.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let n=i&&$.merge(i.common,i[r.method]);i&&$.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=Qe.concat(n,i);const m=[];let p=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(p=p&&v.synchronous,m.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,b=0,u;if(!p){const g=[hr.bind(this),void 0];for(g.unshift(...m),g.push(...c),u=g.length,d=Promise.resolve(r);b<u;)d=d.then(g[b++],g[b++]);return d}u=m.length;let z=r;for(;b<u;){const g=m[b++],v=m[b++];try{z=g(z)}catch(y){v.call(this,y);break}}try{d=hr.call(this,z)}catch(g){return Promise.reject(g)}for(b=0,u=c.length;b<u;)d=d.then(c[b++],c[b++]);return d}getUri(l){l=Ct(this.defaults,l);const r=Hr(l.baseURL,l.url,l.allowAbsoluteUrls);return Ur(r,l.params,l.paramsSerializer)}}$.forEach(["delete","get","head","options"],function(l){la.prototype[l]=function(r,s){return this.request(Ct(s||{},{method:l,url:r,data:(s||{}).data}))}});$.forEach(["post","put","patch"],function(l){function r(s){return function(i,n,m){return this.request(Ct(m||{},{method:l,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}la.prototype[l]=r(),la.prototype[l+"Form"]=r(!0)});const ta=la;class Ga{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(o=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](o);s._listeners=null}),this.promise.then=o=>{let i;const n=new Promise(m=>{s.subscribe(m),i=m}).then(o);return n.cancel=function(){s.unsubscribe(i)},n},l(function(i,n,m){s.reason||(s.reason=new Lt(i,n,m),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const r=this._listeners.indexOf(l);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const l=new AbortController,r=s=>{l.abort(s)};return this.subscribe(r),l.signal.unsubscribe=()=>this.unsubscribe(r),l.signal}static source(){let l;return{token:new Ga(function(o){l=o}),cancel:l}}}const Hn=Ga;function Wn(a){return function(r){return a.apply(null,r)}}function Yn(a){return $.isObject(a)&&a.isAxiosError===!0}const Fa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fa).forEach(([a,l])=>{Fa[l]=a});const Xn=Fa;function Zr(a){const l=new ta(a),r=Tr(ta.prototype.request,l);return $.extend(r,ta.prototype,l,{allOwnKeys:!0}),$.extend(r,l,null,{allOwnKeys:!0}),r.create=function(o){return Zr(Ct(a,o))},r}const Te=Zr(qa);Te.Axios=ta;Te.CanceledError=Lt;Te.CancelToken=Hn;Te.isCancel=Vr;Te.VERSION=Kr;Te.toFormData=ua;Te.AxiosError=oe;Te.Cancel=Te.CanceledError;Te.all=function(l){return Promise.all(l)};Te.spread=Wn;Te.isAxiosError=Yn;Te.mergeConfig=Ct;Te.AxiosHeaders=Qe;Te.formToJSON=a=>Gr($.isHTMLForm(a)?new FormData(a):a);Te.getAdapter=Xr.getAdapter;Te.HttpStatusCode=Xn;Te.default=Te;const ke=Te,Qr=h.createContext(),xa=()=>{const a=h.useContext(Qr);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},Kn=({children:a})=>{const[l,r]=h.useState(null),[s,o]=h.useState(!0),[i,n]=h.useState(localStorage.getItem("token"));h.useEffect(()=>{i?ke.defaults.headers.common.Authorization=`Bearer ${i}`:delete ke.defaults.headers.common.Authorization},[i]),h.useEffect(()=>{(async()=>{if(i)try{const z=(await ke.get("/api/users",{timeout:3e4})).data,g=z.find(v=>v.username==="admin")||z[0];if(g)r({id:g.id.toString(),username:g.username,email:g.email,fullName:g.full_name||g.username,role:g.role,avatar:g.avatar,status:"active",lastLogin:new Date().toISOString()});else{const v={id:"1",username:"admin",email:"admin@cashpot-v7.com",fullName:"Administrator Sistem",role:"admin",avatar:null,status:"active",lastLogin:new Date().toISOString()};r(v)}}catch(u){console.error("Auth verification failed:",u),u.code==="ECONNABORTED"&&Be.error("Timeout la verificare autentificare"),localStorage.removeItem("token"),n(null),r(null)}else window.location.pathname!=="/login"&&window.location.replace("/login");o(!1)})()},[i]);const d={user:l,token:i,loading:s,login:async(b,u)=>{var z,g;try{o(!0);const v=await ke.post("/api/auth/login",{username:b,password:u}),{token:y,user:T}=v.data;return localStorage.setItem("token",y),n(y),r(T),Be.success(`Bun venit, ${T.fullName}!`),{success:!0}}catch(v){const y=((g=(z=v.response)==null?void 0:z.data)==null?void 0:g.message)||"Eroare la autentificare";return Be.error(y),{success:!1,error:y}}finally{o(!1)}},logout:()=>{localStorage.removeItem("token"),n(null),r(null),delete ke.defaults.headers.common.Authorization,Be.success("V-ați deconectat cu succes!")},updateUser:b=>{r(b)},isAuthenticated:!!l};return e(Qr.Provider,{value:d,children:a})},el=h.createContext(),de=()=>{const a=h.useContext(el);if(!a)throw new Error("useData must be used within DataProvider");return a},Zn=({children:a})=>{const[l,r]=h.useState([]),[s,o]=h.useState([]),[i,n]=h.useState([]),[m,p]=h.useState([]),[c,d]=h.useState([]),[b,u]=h.useState([]),[z,g]=h.useState([]),[v,y]=h.useState([]),[T,j]=h.useState([]),[x,w]=h.useState([]),[L,S]=h.useState([]),[q,E]=h.useState([]),[A,B]=h.useState([]),[D,R]=h.useState([]),[N,f]=h.useState([]),[C,_]=h.useState([]),[I,O]=h.useState([]),[P,Y]=h.useState(!1),K={totalCompanies:l.length,totalLocations:s.length,totalProviders:i.length,totalCabinets:c.length,totalGameMixes:b.length,totalSlots:z.length,totalWarehouse:v.length,totalMetrology:T.length,totalJackpots:x.length,totalInvoices:L.length,totalOnjnReports:q.length,totalLegalDocuments:A.length,totalUsers:D.length,totalGames:N.length},te={companies:{state:l,setState:r},locations:{state:s,setState:o},providers:{state:i,setState:n},platforms:{state:m,setState:p},cabinets:{state:c,setState:d},gameMixes:{state:b,setState:u},slots:{state:z,setState:g},warehouse:{state:v,setState:y},metrology:{state:T,setState:j},jackpots:{state:x,setState:w},invoices:{state:L,setState:S},onjnReports:{state:q,setState:E},legalDocuments:{state:A,setState:B},users:{state:D,setState:R},games:{state:N,setState:f},proprietari:{state:C,setState:_},contracts:{state:I,setState:O}},ue=async()=>{console.log("🚀 Starting to fetch all data in parallel..."),Y(!0);try{const ne=Object.keys(te),ce=["companies","locations","providers","slots"],he=ne.filter(Q=>!ce.includes(Q)),ee=ce.map(Q=>ke.get(`/api/${Q}`,{timeout:1e4}).catch(Ne=>(console.error(`❌ Error fetching ${Q}:`,Ne),{data:[]})));console.log(`📡 Making ${ee.length} priority requests...`),(await Promise.all(ee)).forEach((Q,Ne)=>{const ge=ce[Ne],ze=Array.isArray(Q.data)?Q.data:[];console.log(`✅ ${ge}: ${ze.length} items`),te[ge].setState(ze)}),console.log("⚡ Priority data loaded!");const Z=he.map(Q=>ke.get(`/api/${Q}`,{timeout:1e4}).catch(Ne=>(console.error(`❌ Error fetching ${Q}:`,Ne),{data:[]})));console.log(`📡 Loading ${Z.length} remaining entities in background...`),(await Promise.all(Z)).forEach((Q,Ne)=>{const ge=he[Ne],ze=Array.isArray(Q.data)?Q.data:[];console.log(`✅ ${ge}: ${ze.length} items`),te[ge].setState(ze)}),console.log("⚡ All data loaded!")}catch(ne){console.error("Error fetching data:",ne),Be.error("Eroare la încărcarea datelor")}finally{Y(!1)}};h.useEffect(()=>{console.log("🚀 DataContext useEffect triggered"),ue()},[]);const M=async(ne,ce)=>{try{const he=await ke.post(`/api/${ne}`,ce);if(he.data){const ee=he.data;if(ee.compression){const{originalSize:H,compressedSize:Z,compressionRatio:le,savedBytes:Q}=ee.compression,Ne=(H/1024/1024).toFixed(2),ge=(Z/1024/1024).toFixed(2),ze=(Q/1024).toFixed(2);Be.success(`Adăugat cu succes! PDF comprimat: ${Ne}MB → ${ge}MB (${le}% reducere, ${ze}KB economisite)`,{duration:6e3})}else Be.success("Adăugat cu succes!");return te[ne].setState(H=>[ee,...H]),{success:!0,data:ee}}}catch(he){return console.error(`Error creating ${ne}:`,he),Be.error("Eroare la adăugare!"),{success:!1,error:he.message}}},W=async(ne,ce,he)=>{try{const ee=await ke.put(`/api/${ne}/${ce}`,he);if(ee.data){const H=ee.data;if(H.compression){const{originalSize:Z,compressedSize:le,compressionRatio:Q,savedBytes:Ne}=H.compression,ge=(Z/1024/1024).toFixed(2),ze=(le/1024/1024).toFixed(2),Ve=(Ne/1024).toFixed(2);Be.success(`Actualizat cu succes! PDF comprimat: ${ge}MB → ${ze}MB (${Q}% reducere, ${Ve}KB economisite)`,{duration:6e3})}else Be.success("Actualizat cu succes!");return te[ne].setState(Z=>Z.map(le=>le.id===ce?{...le,...H}:le)),{success:!0,data:H}}}catch(ee){return console.error(`Error updating ${ne}:`,ee),Be.error("Eroare la actualizare!"),{success:!1,error:ee.message}}},U=async(ne,ce)=>{try{return await ke.delete(`/api/${ne}/${ce}`),te[ne].setState(he=>he.filter(ee=>ee.id!==ce)),Be.success("Șters cu succes!"),{success:!0}}catch(he){return console.error(`Error deleting ${ne}:`,he),Be.error("Eroare la ștergere!"),{success:!1,error:he.message}}},k=ne=>{const ce=te[ne].state,he=Object.keys(ce[0]||{});let ee=`<?xml version="1.0"?>
`;ee+=`<?mso-application progid="Excel.Sheet"?>
`,ee+=`<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
`,ee+=` xmlns:o="urn:schemas-microsoft-com:office:office"
`,ee+=` xmlns:x="urn:schemas-microsoft-com:office:excel"
`,ee+=` xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
`,ee+=` xmlns:html="http://www.w3.org/TR/REC-html40">
`,ee+=`<Worksheet ss:Name="Sheet1">
`,ee+=`<Table>
`,ee+=`<Row>
`,he.forEach(Q=>{ee+=`<Cell><Data ss:Type="String">${J(Q)}</Data></Cell>
`}),ee+=`</Row>
`,ce.forEach(Q=>{ee+=`<Row>
`,he.forEach(Ne=>{const ge=Q[Ne];ge==null?ee+=`<Cell><Data ss:Type="String"></Data></Cell>
`:typeof ge=="number"?ee+=`<Cell><Data ss:Type="Number">${ge}</Data></Cell>
`:ee+=`<Cell><Data ss:Type="String">${J(String(ge))}</Data></Cell>
`}),ee+=`</Row>
`}),ee+=`</Table>
`,ee+=`</Worksheet>
`,ee+="</Workbook>";const H=new Blob([ee],{type:"application/vnd.ms-excel"}),Z=URL.createObjectURL(H),le=document.createElement("a");le.href=Z,le.download=`${ne}-${new Date().toISOString().split("T")[0]}.xls`,le.click(),URL.revokeObjectURL(Z),Be.success("Exportat în Excel cu succes!")},J=ne=>String(ne).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),_e={companies:l,locations:s,providers:i,platforms:m,cabinets:c,gameMixes:b,slots:z,warehouse:v,metrology:T,jackpots:x,invoices:L,onjnReports:q,legalDocuments:A,users:D,games:N,proprietari:C,contracts:I,loading:P,statistics:K,createItem:M,updateItem:W,deleteItem:U,exportData:ne=>{k(ne)},exportToExcel:k,exportToPDF:ne=>{const ce=te[ne].state,he=Object.keys(ce[0]||{});let ee=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; }
          table { border-collapse: collapse; width: 100%; margin-top: 20px; }
          th { background-color: #4CAF50; color: white; padding: 12px; text-align: left; border: 1px solid #ddd; }
          td { padding: 10px; border: 1px solid #ddd; }
          tr:nth-child(even) { background-color: #f2f2f2; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 12px; }
        </style>
      </head>
      <body>
        <h1>Raport ${ne.toUpperCase()}</h1>
        <p>Generat la: ${new Date().toLocaleString("ro-RO")}</p>
        <table>
          <thead>
            <tr>
              ${he.map(Z=>`<th>${Z}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
    `;ce.forEach(Z=>{ee+="<tr>",he.forEach(le=>{const Q=Z[le],Ne=Q==null?"":typeof Q=="object"?JSON.stringify(Q):String(Q);ee+=`<td>${Ne}</td>`}),ee+="</tr>"}),ee+=`
          </tbody>
        </table>
        <div class="footer">
          Total înregistrări: ${ce.length}
        </div>
      </body>
      </html>
    `;const H=window.open("","","width=1200,height=800");H.document.write(ee),H.document.close(),setTimeout(()=>{H.print(),Be.success('PDF generat! Folosește "Salvează ca PDF" în dialogul de printare.')},250)},refreshData:ue};return e(el.Provider,{value:_e,children:a})},Qn=()=>{var L,S,q,E,A,B,D,R,N,f,C,_,I,O;const a=Ge(),{login:l,isAuthenticated:r,loading:s}=xa(),[o,i]=h.useState({username:"",password:""}),[n,m]=h.useState(!1),[p,c]=h.useState(!1),[d,b]=h.useState(!1),[u,z]=h.useState({logo:{type:"upload",url:"",file:null},loginImage:{type:"upload",url:"",file:null},loginButtonColor:{primary:"#FF7A00",secondary:"#FF9500",useGradient:!1},loginPageColor:{primary:"#FFFFFF",secondary:"#F5F5F5",useGradient:!1},loginCardColor:{primary:"#8B5CF6",secondary:"#A855F7",useGradient:!0},loginTextColor:{title:"#1e293b",labels:"#334155",text:"#64748b"},loginTexts:{title:"Welcome Back",emailLabel:"Email Address",passwordLabel:"Password",buttonText:"Sign In to CASHPOT",forgotPassword:"Forgot your password?",termsText:"By signing in, you agree to our Terms of Service and Privacy Policy",joinText:"New to CASHPOT? Create Account",supportText:"Need assistance? Contact our support team"}});h.useEffect(()=>{const P=localStorage.getItem("appSettings");if(P){const K=JSON.parse(P);z({logo:K.logo||u.logo,loginImage:K.loginImage||u.loginImage,loginButtonColor:K.loginButtonColor||u.loginButtonColor,loginPageColor:K.loginPageColor||u.loginPageColor,loginCardColor:K.loginCardColor||u.loginCardColor,loginTextColor:K.loginTextColor||u.loginTextColor,loginTexts:K.loginTexts||u.loginTexts})}const Y=localStorage.getItem("savedCredentials");if(Y){const K=JSON.parse(Y);i({username:K.username||"",password:K.password||""}),b(!0)}},[]),h.useEffect(()=>{r&&a("/dashboard",{replace:!0})},[r,a]);const g=P=>{i({...o,[P.target.name]:P.target.value})},v=async P=>{P.preventDefault(),c(!0),(await l(o.username,o.password)).success&&(d?localStorage.setItem("savedCredentials",JSON.stringify({username:o.username,password:o.password})):localStorage.removeItem("savedCredentials"),a("/dashboard",{replace:!0})),c(!1)};if(r)return e(wa,{to:"/dashboard",replace:!0});const y=u.logo.file||u.logo.url||"/favicon.svg",T=u.loginImage.file||u.loginImage.url||"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=1200&q=80",j=u.loginButtonColor.useGradient?{background:`linear-gradient(to right, ${u.loginButtonColor.primary}, ${u.loginButtonColor.secondary})`}:{backgroundColor:u.loginButtonColor.primary},x=u.loginPageColor.useGradient?{background:`linear-gradient(to right, ${u.loginPageColor.primary}, ${u.loginPageColor.secondary})`}:{backgroundColor:u.loginPageColor.primary},w=(L=u.loginCardColor)!=null&&L.useGradient?{background:`linear-gradient(to right, ${u.loginCardColor.primary}, ${u.loginCardColor.secondary})`}:{backgroundColor:((S=u.loginCardColor)==null?void 0:S.primary)||"#8B5CF6"};return t("div",{className:"min-h-screen flex",children:[e("div",{className:"w-full lg:w-1/2 flex items-center justify-center pt-16",style:x,children:t("div",{className:"w-full max-w-lg px-8 lg:px-16",children:[t("div",{className:"rounded-2xl shadow-2xl p-16",style:w,children:[t("div",{className:"flex flex-col items-center mb-12",children:[e("img",{src:y,alt:"Logo",className:"h-20 md:h-24 object-contain mb-4",onError:P=>{P.target.src="/favicon.svg"}}),e("h1",{className:"text-2xl md:text-3xl font-bold text-white text-center",children:((q=u.loginTexts)==null?void 0:q.title)||"Welcome Back"}),e("p",{className:"text-white/80 text-center mt-2",children:"Access your CASHPOT dashboard"})]}),t("form",{onSubmit:v,className:"space-y-6",children:[t("div",{className:"space-y-2",children:[t("label",{className:"block text-sm font-semibold text-white",children:[((E=u.loginTexts)==null?void 0:E.emailLabel)||"Email",e("span",{className:"text-red-300",children:"*"})]}),e("input",{type:"text",name:"username",value:o.username,onChange:g,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"your@email.com",required:!0,disabled:p})]}),t("div",{className:"space-y-2",children:[t("label",{className:"block text-sm font-semibold text-white",children:[((A=u.loginTexts)==null?void 0:A.passwordLabel)||"Password",e("span",{className:"text-red-300",children:"*"})]}),t("div",{className:"relative",children:[e("input",{type:n?"text":"password",name:"password",value:o.password,onChange:g,className:"w-full px-4 py-3 pr-12 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"••••••••",required:!0,disabled:p}),e("button",{type:"button",onClick:()=>m(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",disabled:p,children:n?e(ka,{size:20}):e(Fe,{size:20})})]})]}),e("div",{className:"flex items-center justify-between",children:t("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e("input",{type:"checkbox",checked:d,onChange:P=>b(P.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2",disabled:p}),e("span",{className:"text-sm text-white font-medium",children:"Remember Password"})]})}),e("button",{type:"submit",disabled:p||s,className:"w-full py-3 rounded-lg text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:j,children:p||s?t("div",{className:"flex items-center justify-center space-x-2",children:[e("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e("span",{children:((B=u.loginTexts)==null?void 0:B.buttonText)||"Log In"})]}):((D=u.loginTexts)==null?void 0:D.buttonText)||"Log In"})]})]}),e("div",{className:"mt-8 text-center",children:e("a",{href:"#",className:"text-sm text-orange-500 hover:text-orange-600 font-medium hover:underline",children:((R=u.loginTexts)==null?void 0:R.forgotPassword)||"Forgot Password?"})}),e("div",{className:"mt-6 text-xs text-center",style:{color:((N=u.loginTextColor)==null?void 0:N.text)||"#64748b"},children:((f=u.loginTexts)==null?void 0:f.termsText)||"By clicking login you agree to the terms of the Club Membership Agreement and the Independent Partner Agreement"}),e("div",{className:"mt-4 text-center text-sm",style:{color:((C=u.loginTextColor)==null?void 0:C.text)||"#64748b"},children:e("span",{dangerouslySetInnerHTML:{__html:(((_=u.loginTexts)==null?void 0:_.joinText)||"New to CASHPOT? Create Account").replace(/Create Account/g,'<a href="#" class="text-orange-500 hover:text-orange-600 font-semibold hover:underline">Create Account</a>')}})}),e("div",{className:"mt-4 text-xs text-center",style:{color:((I=u.loginTextColor)==null?void 0:I.text)||"#64748b"},children:((O=u.loginTexts)==null?void 0:O.supportText)||"Need help? Contact us at login-support@in.group"})]})}),e("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-8",style:x,children:e("div",{className:"w-full h-full rounded-3xl overflow-hidden shadow-2xl",children:e("img",{src:T,alt:"Login Background",className:"w-full h-full object-cover",onError:P=>{P.target.src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=1200&q=80"}})})})]})},xe=({children:a})=>{const[l,r]=h.useState(!0),[s,o]=h.useState(new Date),{user:i,logout:n}=xa(),{companies:m,locations:p,providers:c,platforms:d,cabinets:b,gameMixes:u,slots:z,warehouse:g,metrology:v,jackpots:y,invoices:T,onjnReports:j,legalDocuments:x,users:w}=de(),{theme:L,toggleTheme:S}=gs(),q=sl(),[E,A]=ya.useState({logo:{type:"upload",url:"",file:null},headerColor:{primary:"#2563eb",secondary:"#4f46e5",useGradient:!0},appTitle:"CASHPOT V7",appSubtitle:"Gaming Management System"});ya.useEffect(()=>{const R=localStorage.getItem("appSettings");if(R){const N=JSON.parse(R);A({logo:N.logo||E.logo,headerColor:N.headerColor||E.headerColor,appTitle:N.appTitle||E.appTitle,appSubtitle:N.appSubtitle||E.appSubtitle})}},[]),h.useEffect(()=>{const R=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(R)},[]);const B=[{id:"dashboard",label:"Dashboard",icon:$e,path:"/dashboard",count:null},{id:"companies",label:"Companii",icon:Ee,path:"/companies",count:m.length},{id:"locations",label:"Locații",icon:Je,path:"/locations",count:p.length},{id:"providers",label:"Furnizori",icon:Xe,path:"/providers",count:c.length},{id:"cabinets",label:"Cabinete",icon:Me,path:"/cabinets",count:b.length},{id:"game-mixes",label:"Game Mixes",icon:Tt,path:"/game-mixes",count:u.length},{id:"slots",label:"Sloturi",icon:$e,path:"/slots",count:z.length},{id:"warehouse",label:"Depozit",icon:Mt,path:"/warehouse",count:g.length},{id:"metrology",label:"Metrologie CVT",icon:et,path:"/metrology",count:v.length},{id:"jackpots",label:"Jackpots",icon:kt,path:"/jackpots",count:y.length},{id:"invoices",label:"Facturi",icon:ie,path:"/invoices",count:T.length},{id:"onjn-reports",label:"Rapoarte ONJN",icon:$t,path:"/onjn-reports",count:j.length},{id:"legal-documents",label:"Documente Legale",icon:ie,path:"/legal-documents",count:x.length},{id:"users",label:"Utilizatori",icon:Xe,path:"/users",count:w.length},{id:"settings",label:"Setări",icon:ot,path:"/settings",count:null}];B.find(R=>R.path===q.pathname);const D=L==="dark"?{background:"linear-gradient(to right, #1e293b, #0f172a)"}:E.headerColor.useGradient?{background:`linear-gradient(to right, ${E.headerColor.primary}, ${E.headerColor.secondary})`}:{backgroundColor:E.headerColor.primary};return t("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[e("div",{className:`fixed top-0 left-0 right-0 backdrop-blur-xl border-b text-white px-4 md:px-6 py-2 md:py-3 z-30 shadow-2xl ${L==="dark"?"border-slate-700/50 shadow-slate-900/20":"border-white/20 shadow-blue-500/10"}`,style:D,children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e("button",{onClick:()=>r(!l),className:`p-2 rounded-xl transition-all duration-200 hover:shadow-lg ${L==="dark"?"hover:bg-slate-700/80":"hover:bg-slate-100/80"}`,children:e(il,{size:20})}),t("div",{className:"flex items-center",children:[E.logo.file||E.logo.url?e("img",{src:E.logo.file||E.logo.url,alt:"Logo",className:"h-8 md:h-12 object-contain",onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}):null,e("div",{className:"w-8 h-8 md:w-12 md:h-12 bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 rounded-2xl flex items-center justify-center shadow-xl shadow-orange-500/30 ring-2 ring-orange-200/50",style:{display:E.logo.file||E.logo.url?"none":"flex"},children:e("span",{className:"text-white font-bold text-base md:text-xl",children:"C"})})]})]}),t("div",{className:"flex items-center space-x-2 md:space-x-4",children:[t("div",{className:"hidden md:block text-right",children:[e("div",{className:"text-white font-semibold text-sm",children:s.toLocaleString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),e("div",{className:"text-white/70 text-xs",children:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"🖥️ Local":"☁️ Online"})]}),e("button",{onClick:S,className:"p-2 rounded-xl hover:bg-white/20 transition-all duration-200 hover:shadow-lg group",title:L==="dark"?"Light Mode":"Dark Mode",children:L==="dark"?e(cl,{size:18,className:"group-hover:scale-110 transition-transform text-white"}):e(dl,{size:18,className:"group-hover:scale-110 transition-transform text-white"})}),t("button",{className:"p-2 rounded-xl hover:bg-white/20 transition-all duration-200 hover:shadow-lg relative hidden sm:block group",children:[e(ml,{size:18,className:"group-hover:scale-110 transition-transform text-white"}),e("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-full shadow-lg animate-pulse"})]}),t("div",{className:"flex items-center space-x-3 md:space-x-4",children:[i!=null&&i.avatar?e("img",{src:i.avatar,alt:(i==null?void 0:i.fullName)||(i==null?void 0:i.username)||"Admin",className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 border-white/50 dark:border-slate-500/50 shadow-xl object-cover"}):e("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold text-base md:text-lg border-2 border-white/50 dark:border-slate-500/50 shadow-xl",children:((i==null?void 0:i.fullName)||(i==null?void 0:i.username)||"A").charAt(0).toUpperCase()}),e("div",{className:"text-sm md:text-base hidden sm:block",children:e("div",{className:"font-semibold text-white",children:(i==null?void 0:i.fullName)||(i==null?void 0:i.username)||"Admin"})})]}),e("button",{onClick:n,className:"p-2 bg-gradient-to-r from-red-500 to-red-600 rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-lg hover:shadow-red-500/25 group",children:e(ul,{size:16,className:"group-hover:scale-110 transition-transform"})})]})]})}),e("div",{className:`${l?"w-64 md:w-72":"w-0 md:w-20"} bg-white/70 dark:bg-slate-800/90 backdrop-blur-xl border-r border-white/30 dark:border-slate-700/50 transition-all duration-300 flex flex-col mt-14 md:mt-20 shadow-2xl shadow-slate-500/10 dark:shadow-slate-900/20 fixed md:relative z-20 h-full ${l?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:e("div",{className:"flex-1 sidebar-scroll p-2 md:p-3",style:{maxHeight:"calc(100vh - 5rem)"},children:e("nav",{className:"space-y-1",children:B.map(R=>{const N=q.pathname===R.path;return t(xr,{to:R.path,onDoubleClick:()=>r(!l),className:`w-full flex items-center ${l?"justify-between":"justify-center"} p-2 md:p-3 rounded-2xl text-left transition-all duration-200 group ${N?"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-600 text-white shadow-xl shadow-blue-500/25 ring-2 ring-blue-200/50":"text-slate-700 dark:text-slate-300 hover:bg-white/60 dark:hover:bg-slate-700/60 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]"}`,title:l?"":R.label,children:[t("div",{className:`flex items-center ${l?"space-x-3":"justify-center"}`,children:[e(R.icon,{className:`text-lg md:text-xl transition-transform group-hover:scale-110 ${N?"drop-shadow-lg":""}`}),l&&e("span",{className:`font-semibold text-sm md:text-base transition-colors ${N?"text-white":"text-slate-700 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`,children:R.label})]}),l&&R.count!==null&&e("span",{className:`text-xs px-3 md:px-4 py-1.5 md:py-2 rounded-full font-bold transition-all duration-200 ${N?"bg-white/20 text-white backdrop-blur-sm border border-white/30":"bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-slate-600 dark:to-slate-700 text-blue-700 dark:text-slate-300 group-hover:from-blue-200 group-hover:to-indigo-200 dark:group-hover:from-slate-500 dark:group-hover:to-slate-600"}`,children:R.count})]},R.id)})})})}),l&&e("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-10 md:hidden",onClick:()=>r(!1)}),e("div",{className:"flex-1 flex flex-col overflow-hidden mt-14 md:mt-20 bg-white dark:bg-slate-900",children:e("div",{className:"flex-1 overflow-auto p-6 md:p-8 bg-slate-50 dark:bg-slate-900",children:a})})]})},ut=({title:a,value:l,icon:r,color:s,change:o,changeType:i,loading:n,size:m="medium"})=>{const p={blue:"from-blue-500 to-indigo-500",green:"from-green-500 to-emerald-500",purple:"from-purple-500 to-violet-500",orange:"from-orange-500 to-amber-500",indigo:"from-indigo-500 to-blue-500",emerald:"from-emerald-500 to-green-500",slate:"from-slate-500 to-gray-500",cyan:"from-cyan-500 to-blue-500",yellow:"from-yellow-500 to-orange-500",red:"from-red-500 to-pink-500",gray:"from-gray-500 to-slate-500"},c={xs:{container:"p-3",icon:"w-6 h-6",title:"text-xs",value:"text-lg",change:"text-xs"},small:{container:"p-4",icon:"w-8 h-8",title:"text-sm",value:"text-xl",change:"text-xs"},medium:{container:"p-6",icon:"w-12 h-12",title:"text-base",value:"text-3xl",change:"text-sm"},large:{container:"p-8",icon:"w-16 h-16",title:"text-lg",value:"text-4xl",change:"text-base"},"extra-large":{container:"p-10",icon:"w-20 h-20",title:"text-xl",value:"text-5xl",change:"text-lg"}},d=c[m]||c.medium,b={blue:"shadow-blue-500/25",green:"shadow-green-500/25",purple:"shadow-purple-500/25",orange:"shadow-orange-500/25",indigo:"shadow-indigo-500/25",emerald:"shadow-emerald-500/25",slate:"shadow-slate-500/25",cyan:"shadow-cyan-500/25",yellow:"shadow-yellow-500/25",red:"shadow-red-500/25",gray:"shadow-gray-500/25"};return n?t("div",{className:`card ${d.container} animate-pulse`,children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-24"}),e("div",{className:`${d.icon} bg-slate-200 dark:bg-slate-700 rounded-2xl`})]}),t("div",{className:"space-y-2",children:[e("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-16"}),e("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-20"})]})]}):t("div",{className:`card ${d.container} hover:shadow-2xl transition-all duration-300 hover:scale-105 group`,children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:`${d.title} font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider`,children:a}),e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${p[s]} shadow-lg ${b[s]}`,children:e(r,{className:`${d.icon} text-white`})})]}),t("div",{className:"space-y-2",children:[e("div",{className:`${d.value} font-bold text-slate-800 dark:text-slate-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors`,children:(l==null?void 0:l.toLocaleString())||0}),o&&t("div",{className:`flex items-center space-x-1 ${d.change} font-semibold ${i==="positive"?"text-green-600":"text-red-600"}`,children:[i==="positive"?e(sa,{className:"w-4 h-4"}):e(hl,{className:"w-4 h-4"}),e("span",{children:o}),e("span",{className:"text-slate-500 dark:text-slate-400",children:"vs. luna trecută"})]})]})]})},eo=()=>{const a=[{title:"Adaugă Companie",description:"Creează o companie nouă",icon:Ee,path:"/companies",color:"blue",action:"add"},{title:"Adaugă Furnizor",description:"Creează un furnizor nou",icon:Xe,path:"/providers",color:"green",action:"add"},{title:"Adaugă Cabinet",description:"Creează un cabinet nou",icon:Me,path:"/cabinets",color:"purple",action:"add"},{title:"Generează Raport",description:"Creează un raport ONJN",icon:ie,path:"/onjn-reports",color:"orange",action:"report"},{title:"Importă Date",description:"Importă date din Excel/CSV",icon:ye,path:"/dashboard",color:"indigo",action:"import"},{title:"Exportă Date",description:"Exportă date în Excel/CSV",icon:De,path:"/dashboard",color:"emerald",action:"export"}],l={blue:"from-blue-500 to-indigo-500",green:"from-green-500 to-emerald-500",purple:"from-purple-500 to-violet-500",orange:"from-orange-500 to-amber-500",indigo:"from-indigo-500 to-blue-500",emerald:"from-emerald-500 to-green-500"},r={blue:"shadow-blue-500/25",green:"shadow-green-500/25",purple:"shadow-purple-500/25",orange:"shadow-orange-500/25",indigo:"shadow-indigo-500/25",emerald:"shadow-emerald-500/25"};return t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Acțiuni Rapide"}),e(ot,{className:"w-6 h-6 text-slate-500 dark:text-slate-400"})]}),e("div",{className:"space-y-3",children:a.map((s,o)=>e(xr,{to:s.path,className:"block p-4 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 rounded-2xl hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-900/30 dark:hover:to-indigo-900/30 transition-all duration-200 hover:shadow-lg group",children:t("div",{className:"flex items-center space-x-4",children:[e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${l[s.color]} shadow-lg ${r[s.color]} group-hover:scale-110 transition-transform`,children:e(s.icon,{className:"w-5 h-5 text-white"})}),t("div",{className:"flex-1",children:[e("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 group-hover:text-blue-700 dark:group-hover:text-blue-400 transition-colors",children:s.title}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.description})]}),e(Ce,{className:"w-5 h-5 text-slate-400 dark:text-slate-500 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})]})},o))})]})},to=()=>{const{companies:a,locations:l,providers:r,cabinets:s,slots:o,warehouse:i,metrology:n,jackpots:m,invoices:p,onjnReports:c,legalDocuments:d}=de(),b=()=>{const j=[];return a.slice(0,2).forEach(x=>{j.push({id:`company-${x.id}`,type:"create",entity:"Companie",name:x.name,user:x.created_by||"Admin",time:u(x.created_at),icon:Ee,color:"blue"})}),l.slice(0,2).forEach(x=>{j.push({id:`location-${x.id}`,type:"create",entity:"Locație",name:x.name,user:x.created_by||"Admin",time:u(x.created_at),icon:Je,color:"green"})}),r.slice(0,1).forEach(x=>{j.push({id:`provider-${x.id}`,type:"update",entity:"Furnizor",name:x.name,user:x.updated_by||"Admin",time:u(x.updated_at||x.created_at),icon:Xe,color:"purple"})}),d.slice(0,2).forEach(x=>{j.push({id:`legal-${x.id}`,type:"create",entity:"Document Legal",name:x.name,user:x.created_by||"Admin",time:u(x.created_at),icon:ie,color:"orange"})}),o.slice(0,1).forEach(x=>{j.push({id:`slot-${x.id}`,type:"create",entity:"Slot",name:x.name||x.serial_number,user:x.created_by||"Admin",time:u(x.created_at),icon:$e,color:"emerald"})}),j.sort((x,w)=>new Date(w.time)-new Date(x.time)).slice(0,6)},u=j=>{if(!j)return"Acum câteva minute";const x=new Date,w=new Date(j),L=Math.floor((x-w)/(1e3*60));if(L<1)return"Acum câteva secunde";if(L<60)return`Acum ${L} minute`;const S=Math.floor(L/60);if(S<24)return`Acum ${S} ore`;const q=Math.floor(S/24);return q<7?`Acum ${q} zile`:w.toLocaleDateString("ro-RO")},z=b(),g=j=>{switch(j){case"create":return Ce;case"update":return Ue;case"delete":return Le;case"report":return ie;case"jackpot":return kt;default:return et}},v=j=>{switch(j){case"create":return"Creat";case"update":return"Actualizat";case"delete":return"Șters";case"report":return"Generat";case"jackpot":return"Câștigat";default:return"Modificat"}},y=j=>{switch(j){case"create":return"text-green-600 bg-green-100";case"update":return"text-blue-600 bg-blue-100";case"delete":return"text-red-600 bg-red-100";case"report":return"text-orange-600 bg-orange-100";case"jackpot":return"text-yellow-600 bg-yellow-100";default:return"text-slate-600 bg-slate-100"}},T={blue:"from-blue-500 to-indigo-500",green:"from-green-500 to-emerald-500",purple:"from-purple-500 to-violet-500",orange:"from-orange-500 to-amber-500",yellow:"from-yellow-500 to-orange-500",red:"from-red-500 to-pink-500"};return t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Activitate Recentă"}),e(et,{className:"w-6 h-6 text-blue-500 dark:text-blue-400"})]}),e("div",{className:"space-y-4",children:z.map(j=>{const x=g(j.type),w=j.icon;return t("div",{className:"flex items-center space-x-4 p-4 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 rounded-2xl hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-900/30 dark:hover:to-indigo-900/30 transition-all duration-200 group",children:[t("div",{className:"relative",children:[e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${T[j.color]} shadow-lg`,children:e(w,{className:"w-5 h-5 text-white"})}),e("div",{className:`absolute -top-1 -right-1 p-1 rounded-full ${y(j.type)}`,children:e(x,{className:"w-3 h-3"})})]}),t("div",{className:"flex-1 min-w-0",children:[t("div",{className:"flex items-center space-x-2 mb-1",children:[e("span",{className:"font-semibold text-slate-800 dark:text-slate-200 group-hover:text-blue-700 dark:group-hover:text-blue-400 transition-colors",children:j.name}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${y(j.type)}`,children:v(j.type)})]}),t("div",{className:"flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e("span",{children:j.entity}),e("span",{children:"•"}),t("span",{children:["de ",j.user]}),e("span",{children:"•"}),t("div",{className:"flex items-center space-x-1",children:[e(it,{className:"w-3 h-3"}),e("span",{children:j.time})]})]})]})]},j.id)})}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:e("button",{className:"w-full py-3 text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:"Vezi toată activitatea →"})})]})},ao=()=>{const{loading:a,companies:l,locations:r,providers:s,legalDocuments:o}=de(),i=()=>{const u=[],z=l.length>0||r.length>0||s.length>0;u.push({name:"Baza de Date AWS RDS",status:z?"healthy":"warning",description:z?`Conectivitate optimă la PostgreSQL - ${l.length+r.length+s.length} înregistrări`:"Conectare în curs...",icon:gt,color:z?"green":"yellow"}),u.push({name:"API Backend",status:"healthy",description:"Toate endpoint-urile sunt disponibile",icon:et,color:"green"}),u.push({name:"Sistem Principal",status:"healthy",description:"Toate serviciile funcționează normal",icon:br,color:"green"});const g=l.length+r.length+s.length+o.length;u.push({name:"Integritate Date",status:g>0?"healthy":"warning",description:g>0?`${g} înregistrări active în sistem`:"Nu există date în sistem",icon:$t,color:g>0?"green":"yellow"});const v=n();return u.push({name:"Ultima Activitate",status:"healthy",description:v,icon:it,color:"green"}),u},n=()=>{const u=[...l,...r,...s,...o];if(u.length===0)return"Sistem nou - fără activitate";const z=u.filter(x=>x.created_at||x.updated_at).sort((x,w)=>{const L=new Date(x.updated_at||x.created_at);return new Date(w.updated_at||w.created_at)-L});if(z.length===0)return"Sistem nou - fără activitate";const g=z[0],v=new Date(g.updated_at||g.created_at),T=Math.floor((new Date-v)/(1e3*60));if(T<1)return"Acum câteva secunde";if(T<60)return`Acum ${T} minute`;const j=Math.floor(T/60);return j<24?`Acum ${j} ore`:v.toLocaleDateString("ro-RO")},m=i(),p=u=>{switch(u){case"healthy":return ft;case"warning":return ht;case"error":return gr;default:return ft}},c=u=>{switch(u){case"healthy":return"text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30";case"warning":return"text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30";case"error":return"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30";default:return"text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"}},d=u=>{switch(u){case"healthy":return"Funcțional";case"warning":return"Atenție";case"error":return"Eroare";default:return"Necunoscut"}},b=u=>{switch(u){case"green":return"from-green-500 to-emerald-500 shadow-green-500/25";case"yellow":return"from-yellow-500 to-orange-500 shadow-yellow-500/25";case"red":return"from-red-500 to-pink-500 shadow-red-500/25";default:return"from-slate-500 to-gray-500 shadow-slate-500/25"}};return t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Starea Sistemului"}),t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:"Operațional"})]})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map((u,z)=>{const g=p(u.status),v=u.icon;return e("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 rounded-2xl hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-900/30 dark:hover:to-indigo-900/30 transition-all duration-200 group",children:t("div",{className:"flex items-start space-x-3",children:[e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${b(u.color)} shadow-lg`,children:e(v,{className:"w-5 h-5 text-white"})}),t("div",{className:"flex-1 min-w-0",children:[t("div",{className:"flex items-center space-x-2 mb-2",children:[e("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 group-hover:text-blue-700 dark:group-hover:text-blue-400 transition-colors",children:u.name}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c(u.status)}`,children:d(u.status)})]}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.description})]}),e(g,{className:`w-5 h-5 ${c(u.status).split(" ")[0]}`})]})},z)})}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e("span",{className:"font-semibold",children:"Uptime:"})," 99.9% (Ultimele 30 zile)"]}),t("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e("span",{className:"font-semibold",children:"Ultima verificare:"})," ",new Date().toLocaleTimeString("ro-RO")]})]})})]})},ro=()=>{const[a,l]=h.useState([]),[r,s]=h.useState(!1),[o,i]=h.useState(null),[n,m]=h.useState(new Date().getMonth()),[p,c]=h.useState(new Date().getFullYear()),d=[{id:1,title:"Comitetul de Supraveghere",date:"2025-10-16",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 16 octombrie 2025 (joi)"},{id:2,title:"Comitetul de Supraveghere",date:"2025-10-29",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 29 octombrie 2025 (miercuri)"},{id:3,title:"Comitetul de Supraveghere",date:"2025-11-13",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 13 noiembrie 2025 (joi)"},{id:4,title:"Comitetul de Supraveghere",date:"2025-11-27",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 27 noiembrie 2025 (joi)"},{id:5,title:"Comitetul de Supraveghere",date:"2025-12-11",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 11 decembrie 2025 (joi)"},{id:6,title:"Comitetul de Supraveghere",date:"2025-12-18",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 18 decembrie 2025 (joi)"},{id:7,title:"Comitetul de Supraveghere",date:"2026-01-15",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 15 ianuarie 2026 (joi)"},{id:8,title:"Comitetul de Supraveghere",date:"2026-01-29",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 29 ianuarie 2026 (joi)"}];h.useEffect(()=>{b()},[]);const b=async()=>{s(!0),i(null);try{await new Promise(A=>setTimeout(A,1e3));const S=new Date,q=new Date(S.getTime()+90*24*60*60*1e3),E=d.filter(A=>{const B=new Date(A.date);return B>=S&&B<=q});l(E)}catch(S){i("Eroare la încărcarea calendarului ONJN"),console.error("Error loading ONJN calendar:",S)}finally{s(!1)}},u=S=>{switch(S){case"Programată":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"În desfășurare":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300";case"Finalizată":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"Anulată":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300"}},z=S=>{switch(S){case"Supraveghere":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"Autorizare":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300";case"Metrologie":return"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300";case"Control":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300"}},g=S=>new Date(S).toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"}),v=S=>S,y=()=>{n===0?(m(11),c(p-1)):m(n-1)},T=()=>{n===11?(m(0),c(p+1)):m(n+1)},j=()=>{m(new Date().getMonth()),c(new Date().getFullYear())},x=()=>{const S=new Date(p,n,1),E=new Date(p,n+1,0).getDate(),A=S.getDay();return{daysInMonth:E,startingDayOfWeek:A,year:p,month:n}},w=S=>{const{year:q,month:E}=x(),A=`${q}-${String(E+1).padStart(2,"0")}-${String(S).padStart(2,"0")}`;return d.some(B=>B.date===A)},L=S=>{const{year:q,month:E}=x(),A=`${q}-${String(E+1).padStart(2,"0")}-${String(S).padStart(2,"0")}`;return d.find(B=>B.date===A)};return t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg",children:e(We,{className:"w-5 h-5 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Ședințe ONJN"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Următoarele 3 luni"})]})]}),e("button",{onClick:b,disabled:r,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Actualizează calendarul",children:e(He,{className:`w-4 h-4 ${r?"animate-spin":""}`})})]}),r?e("div",{className:"flex items-center justify-center py-8",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):o?e("div",{className:"flex items-center justify-center py-8",children:t("div",{className:"text-center",children:[e(ht,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),e("p",{className:"text-red-600 font-medium",children:o})]})}):a.length===0?t("div",{className:"text-center py-8",children:[e(We,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),e("p",{className:"text-slate-500",children:"Nu există ședințe ale Comitetului de Supraveghere în următoarele 3 luni"})]}):t("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[a.slice(0,3).map(S=>e("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-800/50 dark:to-blue-900/20 border border-slate-200 dark:border-slate-700 rounded-xl p-4 hover:shadow-md transition-shadow",children:t("div",{className:"flex items-start justify-between",children:[t("div",{className:"flex-1",children:[t("div",{className:"flex items-center space-x-2 mb-2",children:[e("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:S.title}),e("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z(S.type)}`,children:S.type}),e("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(S.status)}`,children:S.status})]}),e("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-3 line-clamp-2",children:S.description}),t("div",{className:"grid grid-cols-1 gap-2",children:[t("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e(We,{className:"w-3 h-3"}),e("span",{className:"text-xs font-medium",children:g(S.date)})]}),t("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e(it,{className:"w-3 h-3"}),e("span",{className:"text-xs font-medium",children:v(S.time)})]}),t("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e(Je,{className:"w-3 h-3"}),e("span",{className:"text-xs font-medium truncate",children:S.location})]})]})]}),e("button",{onClick:()=>window.open("https://onjn.gov.ro/structura-organizatorica/autorizare/","_blank"),className:"ml-2 p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Vezi pe site-ul ONJN",children:e(Ca,{className:"w-4 h-4"})})]})},S.id)),a.length>3&&e("div",{className:"text-center pt-2",children:t("button",{onClick:()=>window.open("/metrology","_blank"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:["Vezi toate ședințele (",a.length,")"]})})]})]}),t("div",{className:"card p-6",children:[e("div",{className:"mb-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg",children:e(We,{className:"w-5 h-5 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Calendar Evenimente"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(p,n).toLocaleDateString("ro-RO",{month:"long",year:"numeric"})})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:y,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Luna anterioară",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e("button",{onClick:j,className:"px-3 py-1 text-xs font-medium text-indigo-600 hover:text-white hover:bg-indigo-600 border border-indigo-200 rounded-lg transition-colors",title:"Azi",children:"Azi"}),e("button",{onClick:T,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Luna următoare",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}),t("div",{className:"space-y-2",children:[e("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["D","L","M","M","J","V","S"].map((S,q)=>e("div",{className:"text-center text-xs font-bold text-slate-600 dark:text-slate-400 py-2",children:S},q))}),e("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const{daysInMonth:S,startingDayOfWeek:q,year:E,month:A}=x(),B=[],D=new Date().getDate(),R=new Date().getMonth(),N=new Date().getFullYear();for(let f=0;f<q;f++)B.push(e("div",{className:"aspect-square"},`empty-${f}`));for(let f=1;f<=S;f++){const C=f===D&&A===R&&E===N,_=w(f),I=L(f);B.push(e("div",{className:`aspect-square flex items-center justify-center text-sm rounded-lg transition-all ${C?"bg-blue-600 text-white font-bold":_?"bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-semibold hover:shadow-md cursor-pointer":"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:I?`${I.title} - ${I.time}`:"",children:f},f))}return B})()}),e("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between text-xs",children:[t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-4 h-4 bg-blue-600 rounded"}),e("span",{className:"text-slate-600 dark:text-slate-400",children:"Astăzi"})]}),t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-4 h-4 bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 rounded"}),e("span",{className:"text-slate-600 dark:text-slate-400",children:"Ședință ONJN"})]})]})})]})]})]})},tl=({compact:a=!1})=>{const[l,r]=h.useState(null),[s,o]=h.useState(null),[i,n]=h.useState(!1),[m,p]=h.useState(!1),[c,d]=h.useState({type:"",text:""});h.useEffect(()=>{b()},[]);const b=async()=>{n(!0);try{const v=await(await fetch("/api/backup/status")).json();v.success&&r(v.data);const T=await(await fetch("/api/backup/stats")).json();T.success&&o(T.data)}catch(g){console.error("Error loading backup info:",g),d({type:"error",text:"Eroare la încărcarea informațiilor despre backup"})}finally{n(!1)}},u=async()=>{p(!0),d({type:"",text:""});try{const v=await(await fetch("/api/backup/create",{method:"POST",headers:{"Content-Type":"application/json"}})).json();v.success?(d({type:"success",text:"Backup creat cu succes!"}),b()):d({type:"error",text:v.message||"Eroare la crearea backup-ului"})}catch(g){console.error("Error creating backup:",g),d({type:"error",text:"Eroare la crearea backup-ului"})}finally{p(!1)}},z=async()=>{try{const v=await(await fetch("/api/backup/export")).blob(),y=window.URL.createObjectURL(v),T=document.createElement("a");T.href=y,T.download=`cashpot_backup_${new Date().toISOString().split("T")[0]}.sql`,document.body.appendChild(T),T.click(),window.URL.revokeObjectURL(y),document.body.removeChild(T),d({type:"success",text:"Backup descărcat cu succes!"})}catch(g){console.error("Error downloading backup:",g),d({type:"error",text:"Eroare la descărcarea backup-ului"})}};return i&&!l?e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-center py-8",children:[e(He,{className:"w-6 h-6 text-blue-500 dark:text-blue-400 animate-spin"}),e("span",{className:"ml-2 text-slate-600 dark:text-slate-400",children:"Se încarcă informațiile..."})]})}):a?t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:e(gt,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t("div",{children:[e("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Backup Bază de Date"}),t("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[(s==null?void 0:s.totalRecords)||0," înregistrări • ",(s==null?void 0:s.databaseSize)||"N/A"]})]})]}),e("button",{onClick:b,className:"p-2 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e(He,{className:`w-5 h-5 ${i?"animate-spin":""}`})})]}),t("div",{className:"space-y-3 mb-6",children:[t("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t("div",{className:"flex items-center space-x-2",children:[l!=null&&l.s3Enabled?e(Va,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):e(Sa,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stocare"})]}),e("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:(l==null?void 0:l.storageLocation)||"Local"})]}),t("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t("div",{className:"flex items-center space-x-2",children:[e(it,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Auto Backup"})]}),e("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:l!=null&&l.autoBackupEnabled?`La ${l==null?void 0:l.backupIntervalHours}h`:"Dezactivat"})]})]}),c.text&&t("div",{className:`mb-4 p-3 rounded-lg flex items-center space-x-2 ${c.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:[c.type==="success"?e(ft,{className:"w-4 h-4"}):e(ht,{className:"w-4 h-4"}),e("span",{className:"text-sm",children:c.text})]}),t("div",{className:"grid grid-cols-2 gap-3",children:[e("button",{onClick:u,disabled:m,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:m?t(be,{children:[e(He,{className:"w-4 h-4 animate-spin"}),e("span",{className:"text-sm",children:"Creare..."})]}):t(be,{children:[e(ye,{className:"w-4 h-4"}),e("span",{className:"text-sm",children:"Creează Backup"})]})}),t("button",{onClick:z,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e(De,{className:"w-4 h-4"}),e("span",{className:"text-sm",children:"Descarcă"})]})]})]}):t("div",{className:"space-y-6",children:[t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-8",children:[t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Backup Bază de Date"}),e("p",{className:"text-slate-600",children:"Gestionează backup-urile bazei de date și exportă datele"})]}),e("button",{onClick:b,className:"p-3 text-slate-400 hover:text-slate-600 transition-colors",children:e(He,{className:`w-6 h-6 ${i?"animate-spin":""}`})})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:t("div",{className:"flex items-center space-x-3 mb-3",children:[e(gt,{className:"w-8 h-8 text-blue-600"}),t("div",{children:[e("p",{className:"text-sm text-blue-600 font-medium",children:"Total Înregistrări"}),e("p",{className:"text-2xl font-bold text-blue-800",children:(s==null?void 0:s.totalRecords)||0})]})]})}),e("div",{className:"p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100",children:t("div",{className:"flex items-center space-x-3 mb-3",children:[e(br,{className:"w-8 h-8 text-green-600"}),t("div",{children:[e("p",{className:"text-sm text-green-600 font-medium",children:"Dimensiune BD"}),e("p",{className:"text-2xl font-bold text-green-800",children:(s==null?void 0:s.databaseSize)||"N/A"})]})]})}),e("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-100",children:t("div",{className:"flex items-center space-x-3 mb-3",children:[l!=null&&l.s3Enabled?e(Va,{className:"w-8 h-8 text-purple-600"}):e(Sa,{className:"w-8 h-8 text-purple-600"}),t("div",{children:[e("p",{className:"text-sm text-purple-600 font-medium",children:"Stocare"}),e("p",{className:"text-lg font-bold text-purple-800",children:(l==null?void 0:l.storageLocation)||"Local"})]})]})})]}),t("div",{className:"p-6 bg-slate-50 rounded-xl mb-8",children:[e("h3",{className:"font-bold text-slate-800 mb-4",children:"Configurare Backup"}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"Auto Backup:"}),e("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l!=null&&l.autoBackupEnabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:l!=null&&l.autoBackupEnabled?"Activ":"Inactiv"})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"Interval Backup:"}),t("span",{className:"font-medium text-slate-800",children:[(l==null?void 0:l.backupIntervalHours)||6," ore"]})]}),(l==null?void 0:l.s3Enabled)&&t(be,{children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"S3 Bucket:"}),e("span",{className:"font-medium text-slate-800",children:l==null?void 0:l.bucketName})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"Regiune:"}),e("span",{className:"font-medium text-slate-800",children:l==null?void 0:l.region})]})]})]})]}),c.text&&t("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${c.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:[c.type==="success"?e(ft,{className:"w-5 h-5"}):e(ht,{className:"w-5 h-5"}),e("span",{children:c.text})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e("button",{onClick:u,disabled:m,className:"flex items-center justify-center space-x-2 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?t(be,{children:[e(He,{className:"w-5 h-5 animate-spin"}),e("span",{children:"Se creează backup..."})]}):t(be,{children:[e(ye,{className:"w-5 h-5"}),e("span",{children:"Creează Backup Manual"})]})}),t("button",{onClick:z,className:"flex items-center justify-center space-x-2 px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e(De,{className:"w-5 h-5"}),e("span",{children:"Descarcă Backup SQL"})]})]})]}),(s==null?void 0:s.tableStats)&&t("div",{className:"card p-8",children:[e("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Statistici pe Tabele"}),e("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(s.tableStats).map(([g,v])=>t("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e("p",{className:"text-sm text-slate-600 capitalize",children:g.replace("_"," ")}),e("p",{className:"text-2xl font-bold text-slate-800",children:v})]},g))})]})]})},lo=()=>{const[a,l]=h.useState(!1),r={EUR_2024_OCT:4.9759,EUR_2025_OCT:5.082,lastUpdated_2024:"2024-10-01",lastUpdated_2025:"2025-10-01",source:"JOUE/BNR"};return t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl",children:e(sa,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t("div",{children:[e("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Curs Valutar ONJN"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cursuri de referință"})]})]}),e("button",{onClick:()=>{l(!0),setTimeout(()=>{l(!1)},1e3)},className:"p-2 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e(He,{className:`w-5 h-5 ${a?"animate-spin":""}`})})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-xl border border-blue-100 dark:border-blue-800/50",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-blue-600 rounded-lg",children:e(Ja,{className:"w-4 h-4 text-white"})}),t("div",{children:[e("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"EUR - Oct 2024"}),e("p",{className:"text-xs text-blue-500 dark:text-blue-300",children:"Prima zi lucrătoare"})]})]}),t("div",{className:"text-right",children:[e("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:r.EUR_2024_OCT.toFixed(4)}),e("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"RON"})]})]})}),e("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl border border-green-100 dark:border-green-800/50",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-green-600 rounded-lg",children:e(Ja,{className:"w-4 h-4 text-white"})}),t("div",{children:[e("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"EUR - 1 Oct 2025"}),e("p",{className:"text-xs text-green-500 dark:text-green-300",children:"1 Octombrie 2025"})]})]}),t("div",{className:"text-right",children:[e("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:r.EUR_2025_OCT.toFixed(4)}),e("p",{className:"text-xs text-green-600 dark:text-green-400",children:"RON"})]})]})})]}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[t("div",{className:"flex items-center space-x-2",children:[e(We,{className:"w-4 h-4"}),e("span",{children:"Cursuri oficiale JOUE/BNR"})]}),t("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 font-medium",children:["Sursa: ",r.source]})]})})]})},so=()=>{const a=Ge(),[l,r]=h.useState([]),[s,o]=h.useState(!0),[i,n]=h.useState({total:0,providers:0,topGames:[]});h.useEffect(()=>{m()},[]);const m=async()=>{o(!0);try{const c=await fetch("/api/games");if(c.ok){const d=await c.json();r(d);const b=[...new Set(d.map(z=>z.provider))],u=d.slice(0,5);n({total:d.length,providers:b.length,topGames:u})}}catch(c){console.error("Error loading games:",c)}finally{o(!1)}},p=c=>{switch(c){case"low":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"low - medium":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"medium":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300";case"high":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300"}};return s?e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-3 mb-6",children:[e("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl shadow-lg",children:e(Me,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Jocuri din Librărie"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Se încarcă..."})]})]})}):t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl shadow-lg shadow-pink-500/25",children:e(Me,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Jocuri din Librărie"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Top jocuri disponibile"})]})]}),t("button",{onClick:()=>a("/game-mixes/games-library"),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/25 transition-all",children:[e(Fe,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:"Vezi Tot"})]})]}),t("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:[t("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Jocuri"}),e(sa,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})]}),e("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:i.total})]}),t("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-xl border border-purple-200 dark:border-purple-800",children:[t("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Furnizori"}),e(Bt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})]}),e("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:i.providers})]})]}),t("div",{className:"space-y-3",children:[e("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Top 5 Jocuri"}),i.topGames.map((c,d)=>t("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 rounded-xl border border-slate-200 dark:border-slate-600 hover:shadow-md transition-all cursor-pointer",onClick:()=>a(`/game-mixes/games-library/${c.game_id}`),children:[t("div",{className:"flex items-center space-x-3 flex-1",children:[t("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold shadow-lg",children:["#",d+1]}),c.image_url?e("img",{src:c.image_url,alt:c.name,className:"w-12 h-12 rounded-lg object-cover border-2 border-white dark:border-slate-600 shadow-sm",onError:b=>{b.target.style.display="none"}}):null,t("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-semibold text-slate-800 dark:text-slate-100 truncate",children:c.name}),e("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:c.provider})]})]}),c.volatility&&c.volatility!=="n/a"&&e("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${p(c.volatility)}`,children:c.volatility})]},c.game_id))]}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400",children:[e("span",{children:"Ultima actualizare: acum"}),t("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:[i.total," jocuri disponibile"]})]})})]})},no=()=>{const{statistics:a,loading:l}=de(),{user:r}=xa(),[s,o]=h.useState(!1),[i,n]=h.useState(null),[m,p]=h.useState([]),[c,d]=h.useState([]),[b,u]=h.useState(()=>{const M=localStorage.getItem("cardSizes");return M?JSON.parse(M):{companies:"medium",locations:"medium",providers:"medium",cabinets:"medium",gameMixes:"medium",slots:"medium",games:"medium",warehouse:"medium",metrology:"medium",jackpots:"medium",invoices:"medium",onjnReports:"medium",legalDocuments:"medium",users:"medium"}}),[z,g]=h.useState(()=>{const M=localStorage.getItem("widgetSizes");return M?JSON.parse(M):{quickActions:"medium",recentActivity:"medium",databaseBackup:"medium",currencyRate:"small",onjnCalendar:"large",systemHealth:"large",gamesLibrary:"large",performanceCharts:"extra-large"}}),v={statCards:[{id:"companies",title:"Companii",visible:!1,order:1},{id:"locations",title:"Locații",visible:!1,order:2},{id:"providers",title:"Furnizori",visible:!1,order:3},{id:"cabinets",title:"Cabinete",visible:!1,order:4},{id:"gameMixes",title:"Game Mixes",visible:!1,order:5},{id:"slots",title:"Sloturi",visible:!1,order:6},{id:"games",title:"Librărie Jocuri",visible:!1,order:7},{id:"warehouse",title:"Depozit",visible:!1,order:8},{id:"metrology",title:"Metrologie",visible:!1,order:9},{id:"jackpots",title:"Jackpots",visible:!1,order:10},{id:"invoices",title:"Facturi",visible:!1,order:11},{id:"onjnReports",title:"Rapoarte ONJN",visible:!1,order:12},{id:"legalDocuments",title:"Documente Legale",visible:!1,order:13},{id:"users",title:"Utilizatori",visible:!1,order:14}],widgets:[{id:"quickActions",title:"Acțiuni Rapide",visible:!0,order:1},{id:"recentActivity",title:"Activitate Recentă",visible:!0,order:2},{id:"databaseBackup",title:"Backup Bază de Date",visible:!0,order:3},{id:"currencyRate",title:"Curs Valutar ONJN",visible:!0,order:4},{id:"onjnCalendar",title:"Calendar ONJN",visible:!0,order:5},{id:"systemHealth",title:"Sănătate Sistem",visible:!0,order:6},{id:"gamesLibrary",title:"Jocuri din Librărie",visible:!0,order:7},{id:"performanceCharts",title:"Grafice Performanță",visible:!0,order:8}]};h.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{const J=(await ke.get(`/api/users/${r.id}`,{timeout:5e3})).data.preferences||{};if(J.dashboard){console.log("✅ Loaded dashboard preferences from server:",J.dashboard),n(J.dashboard),J.dashboard.cardSizes&&u(J.dashboard.cardSizes),J.dashboard.widgetSizes&&g(J.dashboard.widgetSizes),localStorage.setItem("dashboardConfig",JSON.stringify(J.dashboard));return}}catch(U){console.error("Error loading preferences from server:",U)}const W=localStorage.getItem("dashboardConfig");if(W)try{const U=JSON.parse(W);console.log("📱 Loaded dashboard preferences from localStorage:",U),n(U),U.cardSizes&&u(U.cardSizes),U.widgetSizes&&g(U.widgetSizes)}catch(U){console.error("Error parsing localStorage config:",U),n(v)}else console.log("🆕 Using default dashboard configuration"),n(v)})()},[r==null?void 0:r.id]);const y=async()=>{const M={...i,cardSizes:b,widgetSizes:z};try{console.log("💾 Saving dashboard preferences to server for user:",r.id),await ke.put(`/api/users/${r.id}/preferences`,{preferences:{dashboard:M}}),localStorage.setItem("dashboardConfig",JSON.stringify(M)),console.log("✅ Dashboard preferences saved successfully!"),X.success("Configurația dashboard-ului a fost salvată cu succes!"),o(!1),p([]),d([])}catch(W){console.error("❌ Error saving dashboard preferences:",W),localStorage.setItem("dashboardConfig",JSON.stringify(M)),X.success("Configurația a fost salvată local!"),o(!1),p([]),d([])}},T=()=>{n(v),localStorage.removeItem("dashboardConfig"),p([]),d([]),u({companies:"medium",locations:"medium",providers:"medium",cabinets:"medium",gameMixes:"medium",slots:"medium",warehouse:"medium",metrology:"medium",jackpots:"medium",invoices:"medium",onjnReports:"medium",legalDocuments:"medium",users:"medium"}),localStorage.removeItem("cardSizes"),o(!1)},j=async()=>{if(r!=null&&r.id)try{console.log("🔄 Force syncing preferences from server...");const U=(await ke.get(`/api/users/${r.id}`,{timeout:5e3})).data.preferences||{};U.dashboard?(console.log("✅ Force loaded dashboard preferences from server:",U.dashboard),n(U.dashboard),U.dashboard.cardSizes&&u(U.dashboard.cardSizes),U.dashboard.widgetSizes&&g(U.dashboard.widgetSizes),localStorage.setItem("dashboardConfig",JSON.stringify(U.dashboard)),X.success("Preferințele au fost sincronizate de pe server!")):(console.log("ℹ️ No dashboard preferences found on server"),X.info("Nu există preferințe salvate pe server"))}catch(M){console.error("❌ Error force syncing preferences:",M),X.error("Eroare la sincronizarea preferințelor de pe server")}},x=M=>{n(W=>({...W,statCards:W.statCards.map(U=>U.id===M?{...U,visible:!U.visible}:U)}))},w=M=>{n(W=>({...W,widgets:W.widgets.map(U=>U.id===M?{...U,visible:!U.visible}:U)}))},L=M=>{n(W=>{const U=[...W.statCards],k=U.findIndex(J=>J.id===M);return k>0&&([U[k],U[k-1]]=[U[k-1],U[k]],U.forEach((J,se)=>J.order=se+1)),{...W,statCards:U}})},S=M=>{n(W=>{const U=[...W.statCards],k=U.findIndex(J=>J.id===M);return k<U.length-1&&([U[k],U[k+1]]=[U[k+1],U[k]],U.forEach((J,se)=>J.order=se+1)),{...W,statCards:U}})},q=M=>{n(W=>{const U=[...W.widgets],k=U.findIndex(J=>J.id===M);return k>0&&([U[k],U[k-1]]=[U[k-1],U[k]],U.forEach((J,se)=>J.order=se+1)),{...W,widgets:U}})},E=M=>{n(W=>{const U=[...W.widgets],k=U.findIndex(J=>J.id===M);return k<U.length-1&&([U[k],U[k+1]]=[U[k+1],U[k]],U.forEach((J,se)=>J.order=se+1)),{...W,widgets:U}})},A=(M,W)=>{u(U=>{const k={...U,[M]:W};return localStorage.setItem("cardSizes",JSON.stringify(k)),k})},B=(M,W)=>{g(U=>{const k={...U,[M]:W};return localStorage.setItem("widgetSizes",JSON.stringify(k)),k})},D=M=>{p(W=>W.includes(M)?W.filter(U=>U!==M):[...W,M])},R=M=>{d(W=>W.includes(M)?W.filter(U=>U!==M):[...W,M])},N=()=>{p(i.statCards.map(M=>M.id))},f=()=>{p([])},C=M=>{u(W=>{const U={...W};return m.forEach(k=>{U[k]=M}),localStorage.setItem("cardSizes",JSON.stringify(U)),U})},_=()=>{n(M=>{const W=M.statCards.map(U=>m.includes(U.id)?{...U,visible:!U.visible}:U);return{...M,statCards:W}})},I=()=>{d(i.widgets.map(M=>M.id))},O=()=>{d([])},P=M=>{g(W=>{const U={...W};return c.forEach(k=>{U[k]=M}),localStorage.setItem("widgetSizes",JSON.stringify(U)),U})},Y=()=>{n(M=>{const W=M.widgets.map(U=>c.includes(U.id)?{...U,visible:!U.visible}:U);return{...M,widgets:W}})},K=M=>{switch(M){case"xs":return"dashboard-card-xs";case"small":return"dashboard-card-small";case"medium":return"dashboard-card-medium";case"large":return"dashboard-card-large";case"extra-large":return"dashboard-card-xl";default:return"dashboard-card-medium"}},te=M=>{switch(M){case"xs":return"dashboard-widget-xs";case"small":return"dashboard-widget-small";case"medium":return"dashboard-widget-medium";case"large":return"dashboard-widget-large";case"extra-large":return"dashboard-widget-xl";default:return"dashboard-widget-medium"}},ue={companies:{title:"Companii",value:(a==null?void 0:a.totalCompanies)||0,icon:Ee,color:"blue",change:"+12%",changeType:"positive"},locations:{title:"Locații",value:(a==null?void 0:a.totalLocations)||0,icon:Je,color:"green",change:"+8%",changeType:"positive"},providers:{title:"Furnizori",value:(a==null?void 0:a.totalProviders)||0,icon:Xe,color:"purple",change:"+5%",changeType:"positive"},cabinets:{title:"Cabinete",value:(a==null?void 0:a.totalCabinets)||0,icon:Me,color:"orange",change:"+15%",changeType:"positive"},gameMixes:{title:"Game Mixes",value:(a==null?void 0:a.totalGameMixes)||0,icon:ot,color:"indigo",change:"+3%",changeType:"positive"},slots:{title:"Sloturi",value:(a==null?void 0:a.totalSlots)||0,icon:$e,color:"emerald",change:"+22%",changeType:"positive"},warehouse:{title:"Depozit",value:(a==null?void 0:a.totalWarehouse)||0,icon:Mt,color:"slate",change:"+7%",changeType:"positive"},metrology:{title:"Metrologie",value:(a==null?void 0:a.totalMetrology)||0,icon:et,color:"cyan",change:"+2%",changeType:"positive"},jackpots:{title:"Jackpots",value:(a==null?void 0:a.totalJackpots)||0,icon:kt,color:"yellow",change:"+18%",changeType:"positive"},invoices:{title:"Facturi",value:(a==null?void 0:a.totalInvoices)||0,icon:ie,color:"red",change:"+9%",changeType:"positive"},onjnReports:{title:"Rapoarte ONJN",value:(a==null?void 0:a.totalOnjnReports)||0,icon:$t,color:"blue",change:"+4%",changeType:"positive"},legalDocuments:{title:"Documente Legale",value:(a==null?void 0:a.totalLegalDocuments)||0,icon:ie,color:"gray",change:"+6%",changeType:"positive"},users:{title:"Utilizatori",value:(a==null?void 0:a.totalUsers)||0,icon:Xe,color:"purple",change:"+1%",changeType:"positive"},games:{title:"Librărie Jocuri",value:(a==null?void 0:a.totalGames)||0,icon:Me,color:"pink",change:"+18%",changeType:"positive"}};return i?e(xe,{children:t("div",{className:"space-y-8",children:[e("div",{className:"card p-8",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[t("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent mb-2",children:["Bun venit, ",(r==null?void 0:r.fullName)||"Administrator","!"]}),e("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"Panoul principal al sistemului CASHPOT V7"}),t("div",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:["Ultima actualizare: ",new Date().toLocaleString("ro-RO")]})]}),t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"flex items-center space-x-2",children:s?i&&t("div",{className:"flex items-center space-x-2",children:[t("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e(vt,{className:"w-4 h-4"}),e("span",{children:"Salvează"})]}),t("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[e(pl,{className:"w-4 h-4"}),e("span",{children:"Resetează"})]}),e("button",{onClick:()=>{o(!1),p([]),d([])},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:e("span",{children:"Anulează"})})]}):t(be,{children:[t("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e(ot,{className:"w-4 h-4"}),e("span",{children:"Configurează Dashboard"})]}),t("button",{onClick:j,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Sincronizează preferințele de pe server",children:[e(He,{className:"w-4 h-4"}),e("span",{children:"Sincronizează"})]})]})}),t("div",{className:"text-right",children:[e("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"v7.0.1"}),e("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Build: 29.09.2025, 11:15"})]})]})]})}),i&&t("div",{className:"space-y-6",children:[s&&i&&t("div",{className:"card p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Configurează Cardurile de Statistici"}),t("div",{className:"flex items-center space-x-2",children:[m.length>0&&t(be,{children:[t("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[m.length," selectate"]}),t("select",{onChange:M=>{M.target.value&&(C(M.target.value),M.target.value="")},className:"px-3 py-1 text-xs border border-blue-300 dark:border-blue-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e("option",{value:"",children:"Mărime pentru toate"}),e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:_,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Toggle Vizibilitate"}),e("button",{onClick:f,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Deselectează Tot"})]}),e("button",{onClick:m.length===i.statCards.length?f:N,className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:m.length===i.statCards.length?"Deselectează Tot":"Selectează Tot"})]})]}),e("div",{className:"space-y-2",children:i.statCards.sort((M,W)=>M.order-W.order).map((M,W)=>t("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${m.includes(M.id)?"bg-blue-100 dark:bg-blue-900/40 border-blue-400 dark:border-blue-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"checkbox",checked:m.includes(M.id),onChange:()=>D(M.id),className:"w-4 h-4 text-blue-600 bg-white dark:bg-slate-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 focus:ring-2"}),e(Ha,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.title})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>L(M.id),disabled:W===0,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în sus",children:"↑"}),e("button",{onClick:()=>S(M.id),disabled:W===i.statCards.length-1,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în jos",children:"↓"}),t("select",{value:b[M.id],onChange:U=>A(M.id,U.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",title:"Mărimea cardului",children:[e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:()=>x(M.id),className:`p-2 rounded-lg transition-colors ${M.visible?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:M.visible?"Ascunde cardul":"Afișează cardul",children:M.visible?e(Fe,{className:"w-4 h-4"}):e(ka,{className:"w-4 h-4"})})]})]},M.id))})]}),e("div",{className:"dashboard-grid-stats",children:i.statCards.filter(M=>M.visible).sort((M,W)=>M.order-W.order).map(M=>{const W=ue[M.id],U=b[M.id]||"medium",k=K(U);return e("div",{className:k,children:e(ut,{title:W.title,value:W.value,icon:W.icon,color:W.color,change:W.change,changeType:W.changeType,loading:l.companies,size:U})},M.id)})}),s&&i&&t("div",{className:"card p-6 bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800",children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-purple-800 dark:text-purple-300",children:"Configurează Widget-urile"}),t("div",{className:"flex items-center space-x-2",children:[c.length>0&&t(be,{children:[t("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:[c.length," selectate"]}),t("select",{onChange:M=>{M.target.value&&(P(M.target.value),M.target.value="")},className:"px-3 py-1 text-xs border border-purple-300 dark:border-purple-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500",children:[e("option",{value:"",children:"Mărime pentru toate"}),e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:Y,className:"px-3 py-1 text-xs bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Toggle Vizibilitate"}),e("button",{onClick:O,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Deselectează Tot"})]}),e("button",{onClick:c.length===i.widgets.length?O:I,className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:c.length===i.widgets.length?"Deselectează Tot":"Selectează Tot"})]})]}),e("div",{className:"space-y-2",children:i.widgets.sort((M,W)=>M.order-W.order).map((M,W)=>t("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${c.includes(M.id)?"bg-purple-100 dark:bg-purple-900/40 border-purple-400 dark:border-purple-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"checkbox",checked:c.includes(M.id),onChange:()=>R(M.id),className:"w-4 h-4 text-purple-600 bg-white dark:bg-slate-700 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 focus:ring-2"}),e(Ha,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.title})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>q(M.id),disabled:W===0,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în sus",children:"↑"}),e("button",{onClick:()=>E(M.id),disabled:W===i.widgets.length-1,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în jos",children:"↓"}),t("select",{value:z[M.id]||"medium",onChange:U=>B(M.id,U.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",title:"Mărimea widget-ului",children:[e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:()=>w(M.id),className:`p-2 rounded-lg transition-colors ${M.visible?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:M.visible?"Ascunde widgetul":"Afișează widgetul",children:M.visible?e(Fe,{className:"w-4 h-4"}):e(ka,{className:"w-4 h-4"})})]})]},M.id))})]}),e("div",{className:"dashboard-grid-widgets",children:i&&i.widgets.filter(M=>M.visible).sort((M,W)=>M.order-W.order).map(M=>{const W=z[M.id]||"medium",U=te(W);return e("div",{className:U,children:(()=>{switch(M.id){case"quickActions":return e(eo,{});case"recentActivity":return e(to,{});case"databaseBackup":return e(tl,{compact:!0});case"currencyRate":return e(lo,{});case"onjnCalendar":return e(ro,{});case"systemHealth":return e(ao,{});case"gamesLibrary":return e(so,{});default:return null}})()},M.id)})}),i&&i.widgets.find(M=>M.id==="performanceCharts"&&M.visible)&&t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Performanță Sistem"}),e(sa,{className:"w-6 h-6 text-green-500"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-2xl",children:[e("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"CPU Usage"}),e("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"23%"})]}),t("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-2xl",children:[e("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Memory Usage"}),e("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:"67%"})]}),t("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 rounded-2xl",children:[e("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Disk Usage"}),e("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold",children:"45%"})]})]})]}),t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Activitate Recentă"}),e(et,{className:"w-6 h-6 text-blue-500"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center space-x-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t("div",{className:"flex-1",children:[e("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Sistem pornit"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Acum 2 minute"})]})]}),t("div",{className:"flex items-center space-x-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),t("div",{className:"flex-1",children:[e("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Backup completat"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Acum 1 oră"})]})]}),t("div",{className:"flex items-center space-x-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),t("div",{className:"flex-1",children:[e("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Actualizare disponibilă"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Acum 3 ore"})]})]})]})]})]})]})]})}):e("div",{children:"Loading..."})},je=({data:a,columns:l,onEdit:r,onDelete:s,onView:o,onViewContracts:i,onViewProprietari:n,loading:m=!1,searchTerm:p="",onSearchChange:c,itemsPerPage:d=15,selectedItems:b=[],onSelectAll:u,onSelectItem:z,moduleColor:g="blue"})=>{const[v,y]=h.useState(1),[T,j]=h.useState(""),[x,w]=h.useState("asc"),L={blue:{header:"from-blue-50/80 to-blue-100/80 dark:from-blue-900/20 dark:to-blue-800/20",text:"text-blue-800 dark:text-blue-200",hover:"hover:bg-blue-100/60 dark:hover:bg-blue-700/30",accent:"text-blue-600"},green:{header:"from-emerald-50/80 to-emerald-100/80 dark:from-emerald-900/20 dark:to-emerald-800/20",text:"text-emerald-800 dark:text-emerald-200",hover:"hover:bg-emerald-100/60 dark:hover:bg-emerald-700/30",accent:"text-emerald-600"},purple:{header:"from-purple-50/80 to-purple-100/80 dark:from-purple-900/20 dark:to-purple-800/20",text:"text-purple-800 dark:text-purple-200",hover:"hover:bg-purple-100/60 dark:hover:bg-purple-700/30",accent:"text-purple-600"},orange:{header:"from-orange-50/80 to-orange-100/80 dark:from-orange-900/20 dark:to-orange-800/20",text:"text-orange-800 dark:text-orange-200",hover:"hover:bg-orange-100/60 dark:hover:bg-orange-700/30",accent:"text-orange-600"},red:{header:"from-red-50/80 to-red-100/80 dark:from-red-900/20 dark:to-red-800/20",text:"text-red-800 dark:text-red-200",hover:"hover:bg-red-100/60 dark:hover:bg-red-700/30",accent:"text-red-600"},indigo:{header:"from-indigo-50/80 to-indigo-100/80 dark:from-indigo-900/20 dark:to-indigo-800/20",text:"text-indigo-800 dark:text-indigo-200",hover:"hover:bg-indigo-100/60 dark:hover:bg-indigo-700/30",accent:"text-indigo-600"},teal:{header:"from-teal-50/80 to-teal-100/80 dark:from-teal-900/20 dark:to-teal-800/20",text:"text-teal-800 dark:text-teal-200",hover:"hover:bg-teal-100/60 dark:hover:bg-teal-700/30",accent:"text-teal-600"},pink:{header:"from-pink-50/80 to-pink-100/80 dark:from-pink-900/20 dark:to-pink-800/20",text:"text-pink-800 dark:text-pink-200",hover:"hover:bg-pink-100/60 dark:hover:bg-pink-700/30",accent:"text-pink-600"}},S=L[g]||L.blue,q=Math.ceil(a.length/d),E=(v-1)*d,A=a.slice(E,E+d),B=R=>{T===R?w(x==="asc"?"desc":"asc"):(j(R),w("asc"))},D=[...A].sort((R,N)=>{if(!T)return 0;const f=R[T]||"",C=N[T]||"";return x==="asc"?f.toString().localeCompare(C.toString()):C.toString().localeCompare(f.toString())});return m?e("div",{className:"card p-8",children:t("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-4 bg-slate-200 rounded w-1/4"}),e("div",{className:"space-y-3",children:[...Array(5)].map((R,N)=>e("div",{className:"h-16 bg-slate-200 rounded"},N))})]})}):t("div",{className:"card overflow-hidden",children:[e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full min-w-[800px] bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700",children:[e("thead",{className:`table-header bg-gradient-to-r ${S.header}`,children:t("tr",{children:[e("th",{className:"p-6 w-12",children:e("div",{className:"flex items-center justify-center",children:e("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-blue-500 focus:ring-2",checked:A.length>0&&A.every(R=>b.includes(R.id)),onChange:R=>u&&u(R.target.checked)})})}),e("th",{className:`text-left p-6 font-bold ${S.text} text-sm uppercase tracking-wider w-16`,children:"#"}),l.map(R=>e("th",{className:`text-left p-6 font-bold ${S.text} text-sm uppercase tracking-wider ${R.sortable?`cursor-pointer ${S.hover} transition-colors`:""}`,onClick:()=>R.sortable&&B(R.key),children:t("div",{className:"flex items-center space-x-2",children:[e("span",{children:R.label}),R.sortable&&T===R.key&&e("span",{className:S.accent,children:x==="asc"?"↑":"↓"})]})},R.key)),e("th",{className:`text-left p-6 font-bold ${S.text} text-sm uppercase tracking-wider`,children:"Acțiuni"})]})}),e("tbody",{className:"divide-y divide-slate-200/50 dark:divide-slate-700/50",children:D.map((R,N)=>t("tr",{className:"table-row hover:bg-slate-50 dark:hover:bg-slate-750 transition-colors",children:[e("td",{className:"p-6",children:e("div",{className:"flex items-center justify-center",children:e("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-blue-500 focus:ring-2 group-hover:bg-blue-50 dark:group-hover:bg-slate-600",checked:b.includes(R.id),onChange:f=>z&&z(R.id,f.target.checked)})})}),e("td",{className:"p-6 text-slate-600 dark:text-slate-400 font-semibold text-sm",children:E+N+1}),l.map(f=>e("td",{className:"p-6",children:f.render?f.render(R):R[f.key]},f.key)),(r||s||o||i||n)&&e("td",{className:"p-6",children:t("div",{className:"flex flex-col space-y-2",children:[t("div",{className:"flex space-x-2",children:[o&&e("button",{onClick:()=>o(R),className:"p-2 text-blue-600 dark:text-blue-400 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-800/40 dark:hover:to-indigo-800/40 rounded-xl shadow-lg hover:shadow-blue-500/25 transition-all duration-200 group/btn",title:"Previzualizează",children:e(Fe,{size:14,className:"group-hover/btn:scale-110 transition-transform"})}),i&&e("button",{onClick:()=>i(R),className:"p-2 text-green-600 dark:text-green-400 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 hover:from-green-100 hover:to-emerald-100 dark:hover:from-green-800/40 dark:hover:to-emerald-800/40 rounded-xl shadow-lg hover:shadow-green-500/25 transition-all duration-200 group/btn",title:"Vezi contracte",children:e(ie,{size:14,className:"group-hover/btn:scale-110 transition-transform"})}),n&&e("button",{onClick:()=>n(R),className:"p-2 text-purple-600 dark:text-purple-400 bg-gradient-to-r from-purple-50 to-violet-50 dark:from-purple-900/30 dark:to-violet-900/30 hover:from-purple-100 hover:to-violet-100 dark:hover:from-purple-800/40 dark:hover:to-violet-800/40 rounded-xl shadow-lg hover:shadow-purple-500/25 transition-all duration-200 group/btn",title:"Vezi proprietari",children:e(Ee,{size:14,className:"group-hover/btn:scale-110 transition-transform"})})]}),t("div",{className:"flex space-x-2",children:[r&&e("button",{onClick:()=>r(R),className:"p-2 text-emerald-600 dark:text-emerald-400 bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 hover:from-emerald-100 hover:to-green-100 dark:hover:from-emerald-800/40 dark:hover:to-green-800/40 rounded-xl shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 group/btn",title:"Editează",children:e(Ue,{size:14,className:"group-hover/btn:scale-110 transition-transform"})}),s&&e("button",{onClick:()=>s(R),className:"p-2 text-red-600 dark:text-red-400 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/30 dark:to-pink-900/30 hover:from-red-100 hover:to-pink-100 dark:hover:from-red-800/40 dark:hover:to-pink-800/40 rounded-xl shadow-lg hover:shadow-red-500/25 transition-all duration-200 group/btn",title:"Șterge",children:e(Le,{size:14,className:"group-hover/btn:scale-110 transition-transform"})})]})]})})]},R._id||R.id))})]})}),t("div",{className:"bg-gradient-to-r from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-700 dark:via-slate-800 dark:to-slate-700 px-6 md:px-8 py-4 md:py-6 border-t border-slate-200/50 dark:border-slate-600/50 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[t("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:[e("span",{className:"text-sm md:text-base font-semibold text-slate-700 dark:text-slate-200",children:"Înregistrări:"}),t("select",{value:d,onChange:R=>{setItemsPerPage(Number(R.target.value)),y(1)},className:"border-2 border-slate-200 dark:border-slate-600 rounded-2xl px-4 py-2 text-sm font-medium bg-white/80 dark:bg-slate-700/80 backdrop-blur-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-200 shadow-lg text-slate-900 dark:text-slate-100",children:[e("option",{value:15,children:"15"}),e("option",{value:25,children:"25"}),e("option",{value:50,children:"50"})]}),t("span",{className:"text-sm md:text-base text-slate-600 dark:text-slate-300 font-medium",children:[E+1,"-",Math.min(E+d,a.length)," din ",a.length]})]}),t("div",{className:"flex items-center justify-between sm:justify-start gap-3",children:[e("button",{onClick:()=>y(Math.max(1,v-1)),disabled:v===1,className:"px-4 md:px-6 py-2 md:py-3 border-2 border-slate-200 dark:border-slate-600 rounded-2xl text-sm md:text-base font-bold hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl group text-slate-700 dark:text-slate-200",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Înapoi"})}),e("div",{className:"flex items-center space-x-2",children:t("span",{className:"text-sm md:text-base text-slate-600 dark:text-slate-200 font-bold bg-white/80 dark:bg-slate-800/80 px-4 py-2 rounded-2xl shadow-lg",children:["Pag ",v,"/",q||1]})}),e("button",{onClick:()=>y(Math.min(q,v+1)),disabled:v===q,className:"px-4 md:px-6 py-2 md:py-3 border-2 border-slate-200 dark:border-slate-600 rounded-2xl text-sm md:text-base font-bold hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl group text-slate-700 dark:text-slate-200",children:e("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:"Înainte"})})]})]})]})},St=({pdfUrl:a,title:l="Document PDF",placeholder:r="Nu există document de afișat",placeholderSubtext:s="Atașează un document PDF pentru vizualizare"})=>a?t("div",{className:"space-y-4",children:[e("div",{className:"aspect-[3/4] bg-white dark:bg-slate-800 rounded-lg border-2 border-slate-200 dark:border-slate-600 overflow-hidden",children:e("iframe",{src:a,className:"w-full h-full",title:l})}),t("div",{className:"flex space-x-3",children:[t("button",{onClick:()=>window.open(a,"_blank"),className:"flex-1 btn-primary flex items-center justify-center space-x-2",children:[e(Fe,{className:"w-4 h-4"}),e("span",{children:"Vizualizează"})]}),t("button",{onClick:()=>window.open(a,"_blank"),className:"flex-1 btn-secondary flex items-center justify-center space-x-2",children:[e(De,{className:"w-4 h-4"}),e("span",{children:"Descarcă"})]})]})]}):e("div",{className:"aspect-[3/4] bg-slate-100 dark:bg-slate-700 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center",children:t("div",{className:"text-center text-slate-500 dark:text-slate-400",children:[e(ie,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),e("p",{className:"text-sm font-medium",children:r}),e("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:s})]})}),oo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",type:"Furnizor",license:"",email:"",phone:"",address:"",contactPerson:"",status:"Activ",notes:"",cui:"",cuiFile:null,cuiPreview:null});h.useEffect(()=>{a&&o({name:a.name||"",type:a.type||"Furnizor",license:a.license||"",email:a.email||"",phone:a.phone||"",address:a.address||"",contactPerson:a.contact_person||"",status:a.status||"Activ",notes:a.notes||"",cui:a.cui||"",cuiFile:a.cuiFile||null,cuiPreview:a.cuiFile||null})},[a]);const i=d=>{o({...s,[d.target.name]:d.target.value})},n=d=>{const b=d.target.files[0];if(b){const u=new FileReader;u.onload=z=>{const g=z.target.result;o(v=>({...v,cuiFile:g,cuiPreview:g}))},u.readAsDataURL(b)}},m=()=>{window.confirm("Sigur doriți să ștergeți documentul CUI?")&&o(d=>({...d,cuiFile:null,cuiPreview:null}))},p=d=>d?d.includes("data:image")?e(Rt,{className:"w-4 h-4"}):e(ie,{className:"w-4 h-4"}):e(ie,{className:"w-4 h-4"});return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(Ee,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Companie":"Adaugă Companie"}),e("p",{className:"text-blue-100 text-sm font-medium",children:"Completează informațiile despre companie"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:d=>{d.preventDefault();const b={...s,contact_person:s.contactPerson};delete b.contactPerson,r(b)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Tip Companie *"}),t("select",{name:"type",value:s.type,onChange:i,className:"input-field",required:!0,children:[e("option",{value:"Operator",children:"Operator (Proprietar)"}),e("option",{value:"Furnizor",children:"Furnizor (pentru contracte)"})]}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Operator = compania ta de bază | Furnizor = companii externe pentru contracte"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Nume Companie *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"input-field",placeholder:"ex: BRML Industries SRL",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Număr Licență *"}),e("input",{type:"text",name:"license",value:s.license,onChange:i,className:"input-field",placeholder:"ex: L-2024-001",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Persoană de Contact *"}),e("input",{type:"text",name:"contactPerson",value:s.contactPerson,onChange:i,className:"input-field",placeholder:"ex: Ion Popescu",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Email *"}),e("input",{type:"email",name:"email",value:s.email,onChange:i,className:"input-field",placeholder:"ex: contact@brml.ro",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Telefon *"}),e("input",{type:"tel",name:"phone",value:s.phone,onChange:i,className:"input-field",placeholder:"ex: +40 21 123 4567",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"CUI (Certificat Unic de Înregistrare)"}),e("input",{type:"text",name:"cui",value:s.cui,onChange:i,className:"input-field",placeholder:"ex: RO12345678"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Status"}),t("select",{name:"status",value:s.status,onChange:i,className:"input-field",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Suspendat",children:"Suspendat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Adresă Completă *"}),e("textarea",{name:"address",value:s.address,onChange:i,className:"input-field min-h-[100px] resize-none",placeholder:"ex: Str. Centrală nr. 1, București, România",required:!0})]}),t("div",{className:"space-y-4",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Document CUI (PDF sau JPG)"}),t("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[e("input",{type:"file",id:"cuiFile",accept:".pdf,.jpg,.jpeg,.png",onChange:n,className:"hidden"}),t("label",{htmlFor:"cuiFile",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white",children:e(ye,{className:"w-6 h-6"})}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.cuiFile?"Schimbă documentul":"Încarcă document CUI"}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PDF, JPG, PNG (max 10MB)"})]})]})]}),s.cuiPreview&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{className:"flex items-center space-x-2",children:[p(s.cuiFile),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Document CUI"})]}),e("button",{type:"button",onClick:m,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Șterge documentul",children:e(fe,{className:"w-4 h-4"})})]}),s.cuiFile.includes("data:image")?e("div",{className:"aspect-[3/4] bg-white rounded-lg border-2 border-slate-200 overflow-hidden",children:e("img",{src:s.cuiPreview,alt:"CUI Preview",className:"w-full h-full object-contain"})}):e(St,{pdfUrl:s.cuiPreview,title:`CUI Document ${s.name}`,placeholder:"Documentul CUI nu este disponibil",placeholderSubtext:"Atașează documentul CUI pentru vizualizare"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Note Adiționale"}),e("textarea",{name:"notes",value:s.notes,onChange:i,className:"input-field min-h-[80px] resize-none",placeholder:"Informații suplimentare despre companie..."})]}),t("div",{className:"flex justify-end space-x-4 pt-8 border-t-2 border-slate-200/50 dark:border-slate-700/50 mt-8",children:[e("button",{type:"button",onClick:l,className:"btn-secondary group",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Anulează"})}),e("button",{type:"submit",className:"btn-primary group",children:t("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:[a?"Actualizează":"Adaugă"," Companie"]})})]})]})})]})})},io=({isOpen:a,onClose:l,onConfirm:r,title:s="Confirmare",message:o,confirmText:i="Confirmă",cancelText:n="Anulează",type:m="danger"})=>{if(!a)return null;const c=(()=>{switch(m){case"danger":return{icon:"text-red-500",button:"bg-red-600 hover:bg-red-700 text-white",iconBg:"bg-red-100"};case"warning":return{icon:"text-yellow-500",button:"bg-yellow-600 hover:bg-yellow-700 text-white",iconBg:"bg-yellow-100"};case"info":return{icon:"text-blue-500",button:"bg-blue-600 hover:bg-blue-700 text-white",iconBg:"bg-blue-100"};default:return{icon:"text-red-500",button:"bg-red-600 hover:bg-red-700 text-white",iconBg:"bg-red-100"}}})();return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all",children:[t("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:`p-2 rounded-full ${c.iconBg}`,children:e(xl,{className:`w-6 h-6 ${c.icon}`})}),e("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s})]}),e("button",{onClick:l,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e(fe,{className:"w-5 h-5 text-slate-500"})})]}),e("div",{className:"p-6",children:e("p",{className:"text-slate-600 dark:text-slate-300 text-base leading-relaxed",children:o})}),t("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[e("button",{onClick:l,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors font-medium",children:n}),e("button",{onClick:()=>{r(),l()},className:`px-6 py-2 rounded-lg font-medium transition-colors ${c.button}`,children:i})]})]})})},at=({onExportExcel:a,onExportPDF:l,entity:r})=>t("div",{className:"flex items-center space-x-2",children:[t("button",{onClick:a,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",title:"Exportă în Excel",children:[e(bl,{className:"w-4 h-4"}),e("span",{children:"Excel"})]}),t("button",{onClick:l,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",title:"Exportă în PDF",children:[e(ie,{className:"w-4 h-4"}),e("span",{children:"PDF"})]})]}),co=()=>{const[a,l]=h.useState({isOpen:!1,title:"",message:"",confirmText:"Confirmă",cancelText:"Anulează",type:"danger",onConfirm:null});return{confirmState:a,confirm:o=>new Promise(i=>{l({isOpen:!0,title:o.title||"Confirmare",message:o.message||"Ești sigur?",confirmText:o.confirmText||"Confirmă",cancelText:o.cancelText||"Anulează",type:o.type||"danger",onConfirm:()=>{i(!0)}})}),close:()=>{l(o=>({...o,isOpen:!1,onConfirm:null}))}}},mo=()=>{const a=Ge(),{companies:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n,loading:m}=de(),{confirmState:p,confirm:c,close:d}=co(),[b,u]=h.useState(!1),[z,g]=h.useState(null),[v,y]=h.useState(""),[T,j]=h.useState([]),[x,w]=h.useState(!1);h.useEffect(()=>{w(T.length>0)},[T]);const L=l.filter(O=>{var P,Y,K,te;return((P=O.name)==null?void 0:P.toLowerCase().includes(v.toLowerCase()))||((Y=O.license)==null?void 0:Y.toLowerCase().includes(v.toLowerCase()))||((K=O.email)==null?void 0:K.toLowerCase().includes(v.toLowerCase()))||((te=O.contact_person)==null?void 0:te.toLowerCase().includes(v.toLowerCase()))}),S=[{key:"companyInfo",label:"Companie & CUI",sortable:!0,render:O=>t("div",{className:"space-y-2",children:[t("div",{className:"flex items-center space-x-2",children:[e(Ee,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),e("button",{onClick:()=>a(`/companies/${O.id}`),className:"font-bold text-slate-900 dark:text-slate-100 hover:text-blue-700 dark:hover:text-blue-400 transition-colors text-left",children:O.name})]}),O.license&&e("div",{className:"flex items-center space-x-2",children:e("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:O.license})}),O.cui&&t("div",{className:"flex items-center space-x-2",children:[t("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:["CUI: ",O.cui]}),O.cuiFile&&t("div",{className:"flex items-center space-x-1",children:[e("button",{onClick:()=>window.open(O.cuiFile,"_blank"),className:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Previzualizează CUI",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const P=document.createElement("a");P.href=O.cuiFile,P.download=`CUI_${O.name||"company"}.${O.cuiFile.includes("data:image")?"jpg":"pdf"}`,P.click()},className:"p-1 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded transition-colors",title:"Descarcă CUI",children:e(De,{className:"w-4 h-4"})})]})]})]})},{key:"contactInfo",label:"Contact",sortable:!0,render:O=>t("div",{className:"space-y-2",children:[O.contact_person&&t("div",{className:"flex items-center space-x-2",children:[e(zt,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e("div",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm",children:O.contact_person})]}),O.phone&&t("div",{className:"flex items-center space-x-2",children:[e(La,{className:"w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"}),e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:O.phone})]}),O.email&&t("div",{className:"flex items-center space-x-2",children:[e(Ia,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 flex-shrink-0"}),e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:O.email})]})]})},{key:"status",label:"Status",sortable:!0,render:O=>{var te;const P=((te=O.status)==null?void 0:te.toLowerCase())||"",Y=P==="activ"||P==="active",K=P==="suspendat"||P==="suspended";return e("span",{className:`px-4 py-2 rounded-2xl text-xs font-bold shadow-lg ${Y?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-green-500/25":K?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-yellow-500/25":"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-500/25"}`,children:Y?"Activ":K?"Suspendat":"Inactiv"})}},{key:"created_at",label:"Data Creare",sortable:!0,render:O=>e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(O.created_at).toLocaleDateString("ro-RO")})},{key:"created_by",label:"Creat de",sortable:!0,render:O=>{var P,Y;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shadow-lg",children:((Y=(P=O.created_by)==null?void 0:P.charAt(0))==null?void 0:Y.toUpperCase())||"A"}),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:O.created_by||"Sistem"})]})}}],q=()=>{g(null),u(!0)},E=O=>{g(O),u(!0)},A=async O=>{await c({title:"Șterge Companie",message:`Sigur doriți să ștergeți compania "${O.name}"?`,type:"danger"})&&await o("companies",O.id)},B=O=>{j(O?L.map(P=>P.id):[])},D=(O,P)=>{j(P?[...T,O]:T.filter(Y=>Y!==O))},R=async()=>{if(T.length===0)return;if(await c({title:"Șterge Companiile",message:`Ești sigur că vrei să ștergi ${T.length} companii?`,type:"danger"}))try{for(const P of T)await o("companies",P);j([]),w(!1)}catch(P){console.error("Error bulk deleting companies:",P)}},N=()=>{T.length!==0&&console.log("Bulk edit for companies:",T)},f=async O=>{z?await s("companies",z.id,O):await r("companies",O),u(!1),g(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(Ee,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Management Companii"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestionează companiile de gaming din sistem"})]})]}),t("div",{className:"flex flex-wrap items-center gap-3",children:[t("div",{className:"relative flex-1 min-w-[200px] group",children:[e(Ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors",size:18}),e("input",{type:"text",placeholder:"Caută companii...",value:v,onChange:O=>y(O.target.value),className:"input-field pl-12 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:border-blue-500 dark:focus:border-blue-400"})]}),t("button",{onClick:()=>{console.log("Import functionality to be implemented")},className:"btn-secondary flex items-center space-x-2",children:[e(ye,{size:16}),e("span",{children:"Importă"})]}),e(at,{onExportExcel:()=>{try{i("companies")}catch(O){console.error("Error exporting to Excel:",O)}},onExportPDF:()=>{try{n("companies")}catch(O){console.error("Error exporting to PDF:",O)}},entity:"companies"}),t("div",{className:"flex space-x-3",children:[x&&t(be,{children:[t("button",{onClick:N,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:R,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:q,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Companie"})]})]})]})]})}),e(je,{data:L,columns:S,onEdit:E,onDelete:A,loading:m.companies,searchTerm:v,onSearchChange:y,selectedItems:T,onSelectAll:B,onSelectItem:D,moduleColor:"blue"}),b&&e(oo,{item:z,onClose:()=>{u(!1),g(null)},onSave:f}),e(io,{isOpen:p.isOpen,onClose:d,onConfirm:p.onConfirm,title:p.title,message:p.message,confirmText:p.confirmText,cancelText:p.cancelText,type:p.type})]})})},uo=({item:a,onClose:l,onSave:r})=>{const{companies:s,users:o}=de(),[i,n]=h.useState({name:"",address:"",company:"",capacity:"",surface:"",planFile:null,status:"Activ",coordinates:"",contact_person:"",notes:""});h.useEffect(()=>{a&&n({name:a.name||"",address:a.address||"",company:a.company||"",capacity:a.capacity||"",surface:a.surface||"",planFile:a.planFile||null,status:a.status||"Activ",coordinates:a.coordinates||"",contact_person:a.contact_person||"",notes:a.notes||""})},[a]);const m=d=>{n({...i,[d.target.name]:d.target.value})},p=d=>{const b=d.target.files[0];b&&n({...i,planFile:b})};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-green-800 to-emerald-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600/20 to-emerald-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-lg",children:e(Je,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Locație":"Adaugă Locație"}),e("p",{className:"text-green-100 text-sm font-medium",children:"Completează informațiile despre locație"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:d=>{d.preventDefault(),r(i)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Locație *"}),e("input",{type:"text",name:"name",value:i.name,onChange:m,className:"input-field",placeholder:"ex: Locația Centru",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Companie *"}),t("select",{name:"company",value:i.company,onChange:m,className:"input-field",required:!0,children:[e("option",{value:"",children:"Selectează o companie"}),s.map(d=>e("option",{value:d.name,children:d.name},d.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Persoană de Contact"}),t("select",{name:"contact_person",value:i.contact_person,onChange:m,className:"input-field",children:[e("option",{value:"",children:"Selectează o persoană de contact"}),o.map(d=>t("option",{value:d.full_name||d.username,children:[d.full_name||d.username," (@",d.username,")"]},d.id))]}),e("p",{className:"text-xs text-slate-500",children:"Persoana responsabilă pentru această locație"})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Adresă Completă *"}),e("textarea",{name:"address",value:i.address,onChange:m,className:"input-field min-h-[100px] resize-none",placeholder:"ex: Str. Centrală nr. 1, București, România",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Suprafață (m²) *"}),e("input",{type:"number",name:"surface",value:i.surface,onChange:m,className:"input-field",placeholder:"ex: 150",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Capacitate (calculată din sloturi)"}),t("div",{className:"input-field bg-slate-50 text-slate-600 cursor-not-allowed",children:[i.capacity||0," sloturi"]}),e("p",{className:"text-xs text-slate-500",children:"Capacitatea se calculează automat din numărul de sloturi alocate acestei locații"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status"}),t("select",{name:"status",value:i.status,onChange:m,className:"input-field",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Mentenanță",children:"Mentenanță"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Coordonate (lat, lng)"}),e("input",{type:"text",name:"coordinates",value:i.coordinates,onChange:m,className:"input-field",placeholder:"ex: 44.4268, 26.1025"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Plan Locație"}),t("div",{className:"relative",children:[e("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.dwg,.dxf",onChange:p,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),i.planFile&&t("div",{className:"mt-2 text-sm text-green-600 font-medium",children:["✓ Fișier selectat: ",i.planFile.name]})]}),e("p",{className:"text-xs text-slate-500",children:"Formate acceptate: PDF, JPG, PNG, DWG, DXF"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note Adiționale"}),e("textarea",{name:"notes",value:i.notes,onChange:m,className:"input-field min-h-[80px] resize-none",placeholder:"Informații suplimentare despre locație..."})]}),t("div",{className:"flex justify-end space-x-4 pt-8 border-t-2 border-slate-200/50 mt-8",children:[e("button",{type:"button",onClick:l,className:"btn-secondary group",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Anulează"})}),e("button",{type:"submit",className:"btn-primary group",children:t("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:[a?"Actualizează":"Adaugă"," Locație"]})})]})]})})]})})},ho=({item:a,onClose:l,onSave:r,locationId:s})=>{const{locations:o,proprietari:i}=de(),[n,m]=h.useState({contract_number:"",title:"",location_id:s||"",proprietar_id:"",type:"Chirie Locație",status:"Active",start_date:"",end_date:"",monthly_rent:"",currency:"RON",deposit:"",payment_terms:"",description:"",contractFile:null,contractPreview:null}),p=()=>{const g=new Date,v=g.getFullYear(),y=String(g.getMonth()+1).padStart(2,"0"),T=String(g.getDate()).padStart(2,"0"),j=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`CT-CH-${v}${y}${T}-${j}`};h.useEffect(()=>{m(a?{contract_number:a.contract_number||"",title:a.title||"",location_id:a.location_id||s||"",proprietar_id:a.proprietar_id||"",type:a.type||"Chirie Locație",status:a.status||"Active",start_date:a.start_date?a.start_date.split("T")[0]:"",end_date:a.end_date?a.end_date.split("T")[0]:"",monthly_rent:a.monthly_rent||"",currency:a.currency||"RON",deposit:a.deposit||"",payment_terms:a.payment_terms||"",description:a.description||"",contractFile:a.contractFile||null,contractPreview:a.contractFile||null}:g=>({...g,contract_number:p()}))},[a,s]);const c=g=>{const{name:v,value:y}=g.target;m(T=>({...T,[v]:y}))},d=g=>{const v=g.target.files[0];if(v){const y=new FileReader;y.onload=T=>{const j=T.target.result;m(x=>({...x,contractFile:j,contractPreview:j}))},y.readAsDataURL(v)}},b=()=>{window.confirm("Sigur doriți să ștergeți fișierul contractului?")&&m(g=>({...g,contractFile:null,contractPreview:null}))},u=g=>g?e(ie,{className:"w-4 h-4"}):e(ie,{className:"w-4 h-4"});return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-green-800 to-emerald-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600/20 to-emerald-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-lg",children:e(ie,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Contract":"Adaugă Contract Nou"}),e("p",{className:"text-green-100 text-sm font-medium",children:"Completează informațiile despre contract"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:g=>{g.preventDefault(),r(n)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Număr Contract *"}),t("div",{className:"flex space-x-2",children:[e("input",{type:"text",name:"contract_number",value:n.contract_number,onChange:c,required:!0,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"ex: CT-CH-2024-001"}),!a&&e("button",{type:"button",onClick:()=>m(g=>({...g,contract_number:p()})),className:"px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl transition-colors",title:"Generează număr nou",children:"🔄"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Titlu Contract *"}),e("input",{type:"text",name:"title",value:n.title,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"ex: Contract Chirie Locație București"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Locație *"}),t("select",{name:"location_id",value:n.location_id,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"",children:"Selectează locația"}),o==null?void 0:o.map(g=>e("option",{value:g.id,children:g.name},g.id))]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Proprietar *"}),t("select",{name:"proprietar_id",value:n.proprietar_id,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"",children:"Selectează proprietarul"}),i==null?void 0:i.map(g=>e("option",{value:g.id,children:g.name},g.id))]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Tip Contract *"}),t("select",{name:"type",value:n.type,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"Chirie Locație",children:"Chirie Locație"}),e("option",{value:"Chirie Comercială",children:"Chirie Comercială"}),e("option",{value:"Chirie Industrială",children:"Chirie Industrială"}),e("option",{value:"Chirie Oficiu",children:"Chirie Oficiu"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Status *"}),t("select",{name:"status",value:n.status,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"Active",children:"Activ"}),e("option",{value:"Inactive",children:"Inactiv"}),e("option",{value:"Expired",children:"Expirat"}),e("option",{value:"Pending",children:"În așteptare"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Data Început *"}),e("input",{type:"date",name:"start_date",value:n.start_date,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Data Sfârșit *"}),e("input",{type:"date",name:"end_date",value:n.end_date,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Chiria Lunară *"}),e("input",{type:"number",name:"monthly_rent",value:n.monthly_rent,onChange:c,required:!0,step:"0.01",min:"0",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"0.00"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Depozit Garantie"}),e("input",{type:"number",name:"deposit",value:n.deposit,onChange:c,step:"0.01",min:"0",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"0.00"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Monedă *"}),t("select",{name:"currency",value:n.currency,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"RON",children:"RON"}),e("option",{value:"EUR",children:"EUR"}),e("option",{value:"USD",children:"USD"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Termeni de Plată"}),e("input",{type:"text",name:"payment_terms",value:n.payment_terms,onChange:c,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"ex: Lunar, până în data de 5"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Descriere"}),e("textarea",{name:"description",value:n.description,onChange:c,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all resize-none",placeholder:"Descrierea contractului..."})]}),t("div",{className:"space-y-4",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Fișier Contract (PDF)"}),t("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 text-center hover:border-green-400 dark:hover:border-green-500 transition-colors",children:[e("input",{type:"file",id:"contractFile",accept:".pdf",onChange:d,className:"hidden"}),t("label",{htmlFor:"contractFile",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center text-white",children:e(ye,{className:"w-6 h-6"})}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:n.contractFile?"Schimbă contractul":"Încarcă fișier contract"}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PDF (max 10MB)"})]})]})]}),n.contractPreview&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{className:"flex items-center space-x-2",children:[u(n.contractFile),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Fișier Contract"})]}),e("button",{type:"button",onClick:b,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Șterge fișierul",children:e(fe,{className:"w-4 h-4"})})]}),e(St,{pdfUrl:n.contractPreview,title:`Contract ${n.contract_number||n.title}`,placeholder:"Contractul nu este disponibil",placeholderSubtext:"Atașează fișierul contractului pentru vizualizare"})]})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(ie,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Contract"]})]})]})]})})]})})},po=({locationId:a,locationName:l})=>{const{contracts:r,createItem:s,updateItem:o,deleteItem:i,loading:n}=de(),[m,p]=h.useState(!1),[c,d]=h.useState(null),[b,u]=h.useState([]);h.useEffect(()=>{if(r)if(a){const x=r.filter(w=>w.location_id==a);u(x)}else u(r);else u([])},[r,a]);const z=()=>{d(null),p(!0)},g=x=>{console.log("View contract:",x)},v=x=>{console.log("Download contract:",x)},y=x=>{d(x),p(!0)},T=async x=>{window.confirm(`Sigur doriți să ștergeți contractul "${x.contract_number}"?`)&&await i("contracts",x.id)},j=async x=>{c?await o("contracts",c.id,x):await s("contracts",x),p(!1),d(null)};return t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{children:[t("h3",{className:"text-xl font-bold text-slate-800",children:["Contracte - ",l]}),e("p",{className:"text-slate-600",children:"Gestionează contractele asociate acestei locații"})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Contract"})]})]}),e("div",{className:"card overflow-hidden",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100",children:t("tr",{children:[e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Nr. Contract"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Tip Contract"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Perioadă"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Chiria Lunară"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Proprietar"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Status"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Acțiuni"})]})}),e("tbody",{className:"divide-y divide-slate-200",children:b.map(x=>t("tr",{className:"table-row hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/50",children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"font-bold text-slate-900",children:x.contract_number})}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e("div",{className:"text-slate-700 font-medium",children:x.title}),e("div",{className:"text-slate-500 text-sm",children:x.type})]}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"text-slate-600 text-sm",children:[new Date(x.start_date).toLocaleDateString("ro-RO")," - ",new Date(x.end_date).toLocaleDateString("ro-RO")]})}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[t("div",{className:"text-slate-700 font-sans",children:[parseFloat(x.monthly_rent||0).toLocaleString("ro-RO")," ",x.currency]}),x.deposit&&t("div",{className:"text-slate-500 text-xs",children:["Depozit: ",parseFloat(x.deposit).toLocaleString("ro-RO")," ",x.currency]})]}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e("div",{className:"text-slate-700 font-medium",children:x.proprietar_name||"N/A"}),x.proprietar_contact&&e("div",{className:"text-slate-500 text-xs",children:x.proprietar_contact})]}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${x.status==="Active"?"bg-green-100 text-green-800":x.status==="Inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:x.status==="Active"?"Activ":x.status==="Inactive"?"Inactiv":x.status==="Expired"?"Expirat":x.status==="Pending"?"În așteptare":x.status})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>g(x),className:"text-blue-600 hover:text-blue-900 p-1 rounded-lg hover:bg-blue-50 transition-colors",title:"Vezi contract",children:e(Fe,{size:16})}),e("button",{onClick:()=>v(x),className:"text-green-600 hover:text-green-900 p-1 rounded-lg hover:bg-green-50 transition-colors",title:"Descarcă contract",children:e(De,{size:16})}),e("button",{onClick:()=>y(x),className:"text-yellow-600 hover:text-yellow-900 p-1 rounded-lg hover:bg-yellow-50 transition-colors",title:"Editează contract",children:e(Ue,{size:16})}),e("button",{onClick:()=>T(x),className:"text-red-600 hover:text-red-900 p-1 rounded-lg hover:bg-red-50 transition-colors",title:"Șterge contract",children:e(Le,{size:16})})]})})]},x.id))})]})})}),b.length===0&&t("div",{className:"card p-12 text-center",children:[e("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl inline-block mb-6",children:e(ie,{className:"w-16 h-16 text-blue-500 mx-auto"})}),e("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Nu există contracte"}),e("p",{className:"text-slate-600 mb-6",children:"Adaugă primul contract pentru această locație"}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Contract"})]})]}),m&&e(ho,{item:c,onClose:()=>{p(!1),d(null)},onSave:j,locationId:a})]})},xo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",contact_person:"",email:"",phone:"",address:"",cnp_cui:"",type:"Persoana Fizica",status:"Activ",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",contact_person:a.contact_person||"",email:a.email||"",phone:a.phone||"",address:a.address||"",cnp_cui:a.cnp_cui||"",type:a.type||"Persoana Fizica",status:a.status||"Activ",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;o(d=>({...d,[p]:c}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-purple-800 to-violet-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-violet-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg",children:e(Ee,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Proprietar":"Adaugă Proprietar Nou"}),e("p",{className:"text-purple-100 text-sm font-medium",children:"Completează informațiile despre proprietar"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Nume Proprietar *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: Ion Popescu sau SC Imobiliare SRL"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Persoană de Contact"}),e("input",{type:"text",name:"contact_person",value:s.contact_person,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: Maria Ionescu"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Email"}),e("input",{type:"email",name:"email",value:s.email,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: ion.popescu@email.com"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Telefon"}),e("input",{type:"tel",name:"phone",value:s.phone,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: +40712345678"})]}),t("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Adresă"}),e("input",{type:"text",name:"address",value:s.address,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: Str. Mihai Viteazu nr. 10, București"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"CNP / CUI"}),e("input",{type:"text",name:"cnp_cui",value:s.cnp_cui,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: 1234567890123 sau RO12345678"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Tip *"}),t("select",{name:"type",value:s.type,onChange:i,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e("option",{value:"Persoana Fizica",children:"Persoană Fizică"}),e("option",{value:"Persoana Juridica",children:"Persoană Juridică"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"})]})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:3,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"Note suplimentare despre proprietar..."})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Ee,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Proprietar"]})]})]})]})})]})})},bo=({locationId:a,locationName:l})=>{const{proprietari:r,createItem:s,updateItem:o,deleteItem:i}=de(),[n,m]=h.useState(!1),[p,c]=h.useState(null),[d,b]=h.useState(""),u=(r||[]).filter(w=>{var L,S,q,E;return((L=w.name)==null?void 0:L.toLowerCase().includes(d.toLowerCase()))||((S=w.contact_person)==null?void 0:S.toLowerCase().includes(d.toLowerCase()))||((q=w.email)==null?void 0:q.toLowerCase().includes(d.toLowerCase()))||((E=w.phone)==null?void 0:E.toLowerCase().includes(d.toLowerCase()))}),z=()=>{c(null),m(!0)},g=w=>{console.log("View proprietar:",w)},v=w=>{c(w),m(!0)},y=async w=>{if(window.confirm(`Sigur doriți să ștergeți proprietarul "${w.name}"?`))try{await i("proprietari",w.id)}catch(L){console.error("Error deleting proprietar:",L)}},T=async w=>{try{p?await o("proprietari",p.id,w):await s("proprietari",w),m(!1),c(null)}catch(L){console.error("Error saving proprietar:",L)}},j=w=>{switch(w){case"Persoana Fizica":return"bg-blue-100 text-blue-800";case"Persoana Juridica":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},x=w=>{switch(w){case"Activ":return"bg-green-100 text-green-800";case"Inactiv":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Proprietari"}),t("p",{className:"text-slate-600",children:["Gestionează proprietarii pentru ",l]})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Proprietar"})]})]}),t("div",{className:"relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută proprietari...",value:d,onChange:w=>b(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),u.length>0?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(w=>t("div",{className:"card p-6 hover:shadow-lg transition-all duration-200 group",children:[t("div",{className:"flex items-start justify-between mb-4",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl",children:e(Ee,{className:"w-8 h-8 text-white"})}),t("div",{children:[e("h3",{className:"font-bold text-slate-800 group-hover:text-blue-700 transition-colors",children:w.name}),e("p",{className:"text-slate-600 text-sm",children:w.contact_person})]})]}),t("div",{className:"flex space-x-1",children:[e("button",{onClick:()=>g(w),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>v(w),className:"p-2 text-slate-400 hover:text-green-500 transition-colors",children:e(Ue,{className:"w-4 h-4"})}),e("button",{onClick:()=>y(w),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e(Le,{className:"w-4 h-4"})})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"space-y-2",children:[w.email&&t("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e(Ia,{className:"w-4 h-4"}),e("span",{children:w.email})]}),w.phone&&t("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e(La,{className:"w-4 h-4"}),e("span",{children:w.phone})]}),w.address&&t("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e(Je,{className:"w-4 h-4"}),e("span",{className:"truncate",children:w.address})]})]}),t("div",{className:"flex space-x-2",children:[e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${j(w.type)}`,children:w.type}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${x(w.status)}`,children:w.status})]}),w.cnp_cui&&t("div",{className:"text-xs text-slate-500",children:[w.type==="Persoana Fizica"?"CNP:":"CUI:"," ",w.cnp_cui]}),w.notes&&e("div",{className:"text-sm text-slate-600 bg-slate-50 p-2 rounded-lg",children:w.notes})]})]},w.id))}):t("div",{className:"card p-12 text-center",children:[e("div",{className:"p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl inline-block mb-6",children:e(Ee,{className:"w-20 h-20 text-blue-500 mx-auto"})}),e("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Nu există proprietari"}),e("p",{className:"text-slate-600 mb-6",children:"Adaugă primul proprietar pentru această locație"}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Proprietar"})]})]}),n&&e(xo,{item:p,onClose:()=>{m(!1),c(null)},onSave:T})]})},go=()=>{const a=Ge(),{locations:l,contracts:r,slots:s,createItem:o,updateItem:i,deleteItem:n,exportToExcel:m,exportToPDF:p,loading:c}=de(),[d,b]=h.useState(!1),[u,z]=h.useState(null),[g,v]=h.useState(""),[y,T]=h.useState([]),[j,x]=h.useState(!1),[w,L]=h.useState(!1);h.useEffect(()=>{x(y.length>0)},[y]);const S=H=>{T(H?P.map(Z=>Z.id):[])},q=(H,Z)=>{T(Z?[...y,H]:y.filter(le=>le!==H))},E=async()=>{y.length!==0&&L(!0)},A=async()=>{try{for(const H of y)await n("locations",H);T([]),x(!1),L(!1),X.success(`${y.length} locații șterse cu succes!`)}catch(H){console.error("Error bulk deleting:",H),X.error("Eroare la ștergerea locațiilor!")}},B=()=>{y.length!==0&&console.log("Bulk edit for:",y)},[D,R]=h.useState("locations"),[N,f]=h.useState(null),[C,_]=h.useState(null),[I,O]=h.useState(!1),P=l.filter(H=>{var Z,le,Q,Ne;return((Z=H.name)==null?void 0:Z.toLowerCase().includes(g.toLowerCase()))||((le=H.address)==null?void 0:le.toLowerCase().includes(g.toLowerCase()))||((Q=H.company)==null?void 0:Q.toLowerCase().includes(g.toLowerCase()))||((Ne=H.contact_person)==null?void 0:Ne.toLowerCase().includes(g.toLowerCase()))}),Y=H=>s.filter(le=>le.location===H&&le.status!=="Depozit").length,K=H=>{const Z=r.filter(Ve=>Ve.location_id===H&&Ve.status==="Active");if(Z.length===0)return null;const le=Z.sort((Ve,xt)=>new Date(xt.end_date)-new Date(Ve.end_date))[0];if(!le.end_date)return null;const Q=new Date,ge=new Date(le.end_date)-Q;return Math.ceil(ge/(1e3*60*60*24))},te=(H,Z)=>{const le=r.filter(ge=>ge.location_id===H&&ge.status==="Active");if(le.length===0||!Z)return null;const Q=le.sort((ge,ze)=>new Date(ze.end_date)-new Date(ge.end_date))[0];return Q.monthly_rent?(Q.monthly_rent/Z).toFixed(2):null},ue=[{key:"name",label:"Nume Locație",sortable:!0,render:H=>t("div",{className:"space-y-1",children:[e("button",{onClick:()=>a(`/locations/${H.id}`),className:"text-slate-900 dark:text-slate-100 hover:text-green-700 dark:hover:text-green-400 transition-colors text-left font-medium",children:H.name}),e("div",{className:"text-slate-600 dark:text-slate-400",children:H.address})]})},{key:"company",label:"Companie",sortable:!0,render:H=>t("div",{className:"space-y-1",children:[e("span",{className:"text-blue-800 dark:text-blue-300",children:H.company}),e("div",{className:"flex items-center space-x-2",children:H.contact_person?t(be,{children:[e("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white shadow-lg",children:H.contact_person.charAt(0).toUpperCase()}),e("span",{className:"text-slate-700",children:H.contact_person})]}):e("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"Nu este setată"})})]})},{key:"surface",label:"Suprafață (m²)",sortable:!0,render:H=>e("div",{className:"text-slate-600",children:H.surface?`${H.surface} m²`:"N/A"})},{key:"capacity",label:"Capacitate (Sloturi)",sortable:!0,render:H=>{const Z=Y(H.name);return t("div",{className:"text-slate-600",children:[Z," sloturi"]})}},{key:"cost_per_m2",label:"Cost/m²",sortable:!1,render:H=>{const Z=te(H.id,H.surface);return Z===null?e("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"N/A"}):t("div",{className:"flex items-center space-x-1",children:[e("span",{className:"text-blue-600 dark:text-blue-400",children:Z}),e("span",{className:"text-slate-500 dark:text-slate-400",children:"RON/m²"})]})}},{key:"plan_file",label:"Plan Locație",sortable:!1,render:H=>e("div",{className:"flex items-center space-x-2",children:H.plan_file?t(be,{children:[e("button",{onClick:()=>ce(H),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Vizualizează planul",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>ee(H),className:"p-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",title:"Descarcă planul",children:e(De,{className:"w-4 h-4"})}),e("button",{onClick:()=>he(H),className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Șterge planul",children:e(fe,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Nu există plan"})})},{key:"contract_expiration",label:"Zile Rămase Contract",sortable:!1,render:H=>{const Z=K(H.id);if(Z===null)return e("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"Fără contract activ"});const le=Z<0,Q=Z<=30&&Z>=0;return t("div",{className:`flex items-center space-x-1 ${le?"text-red-600 dark:text-red-400":Q?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:[e("span",{children:le?Math.abs(Z):Z}),e("span",{children:le?"zile expirat":"zile rămase"})]})}}],M=()=>{z(null),b(!0)},W=H=>{z(H),b(!0)},U=async H=>{if(confirm(`Sigur doriți să ștergeți locația "${H.name}"?`))try{await n("locations",H.id),X.success("Locația a fost ștearsă cu succes!")}catch{X.error("Eroare la ștergerea locației")}},k=async H=>{try{if(H.planFile&&H.planFile instanceof File){const le=new FormData;if(Object.keys(H).forEach(Q=>{Q==="planFile"&&H[Q]instanceof File?le.append("planFile",H[Q]):Q!=="planFile"&&le.append(Q,H[Q])}),u){if(!(await fetch(`/api/locations/${u.id}`,{method:"PUT",body:le})).ok)throw new Error("Failed to update location")}else if(!(await fetch("/api/locations",{method:"POST",body:le})).ok)throw new Error("Failed to create location")}else{const le={...H};if(delete le.planFile,u){if(!(await fetch(`/api/locations/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)})).ok)throw new Error("Failed to update location")}else if(!(await fetch("/api/locations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)})).ok)throw new Error("Failed to create location")}window.location.reload(),b(!1),z(null),X.success(u?"Locația a fost actualizată cu succes!":"Locația a fost creată cu succes!")}catch(Z){console.error("Error saving location:",Z),console.error("Error details:",Z.message),X.error(`Eroare la salvare locație: ${Z.message}`)}},J=()=>{try{m("locations")}catch(H){console.error("Error exporting to Excel:",H)}},se=()=>{try{p("locations")}catch(H){console.error("Error exporting to PDF:",H)}},Ae=()=>{console.log("Import functionality to be implemented")},_e=H=>{f(H),R("contracts")},ne=H=>{f(H),R("proprietari")},ce=H=>{H.plan_file&&(_(H.plan_file),O(!0))},he=async H=>{if(window.confirm(`Sigur doriți să ștergeți planul locației "${H.name}"?`))try{await i("locations",H.id,{plan_file:null})}catch(Z){console.error("Error deleting document:",Z)}},ee=H=>{if(H.plan_file){const Z=document.createElement("a");Z.href=H.plan_file,Z.download=`Plan_${H.name||"location"}.pdf`,Z.click()}};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex space-x-1 bg-slate-100 rounded-xl p-1",children:[e("button",{onClick:()=>R("locations"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${D==="locations"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg shadow-blue-500/25":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Je,{size:20}),e("span",{children:"Locații"})]})}),e("button",{onClick:()=>R("contracts"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${D==="contracts"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg shadow-green-500/25":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(ie,{size:20}),e("span",{children:"Contracte"})]})}),e("button",{onClick:()=>R("proprietari"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${D==="proprietari"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg shadow-purple-500/25":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Ee,{size:20}),e("span",{children:"Proprietari"})]})})]})}),D==="locations"?t(be,{children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-wrap items-center gap-3",children:[t("div",{className:"relative flex-1 min-w-[200px] group",children:[e(Ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors",size:18}),e("input",{type:"text",placeholder:"Caută locații...",value:g,onChange:H=>v(H.target.value),className:"input-field pl-12 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-100 dark:placeholder-slate-400"})]}),t("button",{onClick:Ae,className:"btn-secondary flex items-center space-x-2",children:[e(ye,{size:16}),e("span",{children:"Importă"})]}),e(at,{onExportExcel:J,onExportPDF:se,entity:"locations"}),j&&t(be,{children:[t("button",{onClick:B,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:E,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:()=>a("/slots/cyber-import"),className:"btn-success flex items-center space-x-2",children:[e(gt,{className:"w-4 h-4"}),e("span",{children:"Import Cyber"})]}),t("button",{onClick:M,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Locație"})]})]})}),e(je,{data:P,columns:ue,onEdit:W,onDelete:U,onViewContracts:_e,onViewProprietari:ne,loading:c.locations,searchTerm:g,onSearchChange:v,selectedItems:y,onSelectAll:S,onSelectItem:q,moduleColor:"green"}),d&&e(uo,{item:u,onClose:()=>{b(!1),z(null)},onSave:k}),I&&C&&e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] overflow-hidden shadow-2xl",children:[t("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 px-6 py-4 flex justify-between items-center",children:[t("h3",{className:"text-xl font-bold text-white flex items-center",children:[e(ie,{className:"w-6 h-6 mr-2"}),"Vizualizare Plan Locație"]}),e("button",{onClick:()=>{O(!1),_(null)},className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e(fe,{className:"w-6 h-6"})})]}),e("div",{className:"h-full p-6",children:e(St,{pdfUrl:C,title:"Plan Locație",placeholder:"Planul locației nu este disponibil",placeholderSubtext:"Atașează planul locației pentru vizualizare"})})]})})]}):D==="contracts"?e(po,{locationId:(N==null?void 0:N.id)||null,locationName:(N==null?void 0:N.name)||"Toate Contractele"}):e(bo,{locationId:N==null?void 0:N.id,locationName:(N==null?void 0:N.name)||"Selectați o locație"}),w&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Le,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[t("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Șterge ",y.length," Locații"]}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),t("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:["Ești sigur că vrei să ștergi ",y.length," locații selectate? Toate datele asociate vor fi șterse permanent."]}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),t("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:["Șterge ",y.length," Locații"]})]})]})})]})})},fo=()=>{const{id:a}=qt(),l=Ge(),{locations:r,contracts:s,slots:o,cabinets:i,companies:n,users:m,loading:p}=de(),[c,d]=h.useState(null),[b,u]=h.useState("overview");if(h.useEffect(()=>{const x=r.find(w=>w.id===parseInt(a));d(x)},[a,r]),p)return e(xe,{children:e("div",{className:"flex items-center justify-center h-screen",children:e("div",{className:"text-xl text-slate-600",children:"Se încarcă..."})})});if(!c)return e(xe,{children:e("div",{className:"flex items-center justify-center h-screen",children:e("div",{className:"text-xl text-red-600",children:"Locația nu a fost găsită"})})});const z=s.filter(x=>x.location_id===c.id),g=o.filter(x=>x.location===c.name&&x.status!=="Depozit"),v=i.filter(x=>x.location_id===c.id);n.find(x=>x.name===c.company);const y=z.filter(x=>x.status==="Active"),T=g.length,j=v.length;return e(xe,{children:t("div",{className:"p-6 space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>l("/locations"),className:"p-3 bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 rounded-2xl hover:from-slate-200 hover:to-slate-300 dark:hover:from-slate-600 dark:hover:to-slate-700 transition-all duration-200 shadow-lg",children:e(Ye,{className:"w-5 h-5"})}),t("div",{children:[e("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:c.name}),e("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:c.address})]})]}),e("div",{className:"flex space-x-3",children:t("button",{onClick:()=>l(`/locations/${a}/edit`),className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 flex items-center space-x-2",children:[e(Ue,{className:"w-5 h-5"}),e("span",{children:"Editează"})]})})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Contracte Active"}),e("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:y.length})]}),e("div",{className:"p-4 bg-blue-500/10 rounded-2xl",children:e(ie,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})]})}),e("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Sloturi"}),e("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:T})]}),e("div",{className:"p-4 bg-green-500/10 rounded-2xl",children:e(Mt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})]})}),e("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Cabinete"}),e("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:j})]}),e("div",{className:"p-4 bg-purple-500/10 rounded-2xl",children:e(Ee,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})]})}),e("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Suprafață"}),t("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:[c.surface||0," m²"]})]}),e("div",{className:"p-4 bg-orange-500/10 rounded-2xl",children:e(Wa,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})})]})})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg overflow-hidden",children:[e("div",{className:"border-b border-slate-200 dark:border-slate-700",children:t("div",{className:"flex space-x-1 p-4",children:[e("button",{onClick:()=>u("overview"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${b==="overview"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Prezentare Generală"}),t("button",{onClick:()=>u("contracts"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${b==="contracts"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["Contracte (",z.length,")"]}),t("button",{onClick:()=>u("slots"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${b==="slots"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["Sloturi (",T,")"]}),t("button",{onClick:()=>u("cabinets"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${b==="cabinets"?"bg-gradient-to-r from-orange-500 to-amber-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["Cabinete (",j,")"]})]})}),t("div",{className:"p-6",children:[b==="overview"&&t("div",{className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Informații Generale"}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center space-x-3",children:[e(Je,{className:"w-5 h-5 text-blue-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Adresă"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:c.address})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(Ee,{className:"w-5 h-5 text-green-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Companie"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:c.company})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(Wa,{className:"w-5 h-5 text-orange-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Suprafață"}),t("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[c.surface||0," m²"]})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(Xe,{className:"w-5 h-5 text-purple-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Persoană de Contact"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:c.contact_person||"Nu este setată"})]})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Plan Locație"}),c.plan_file?t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center space-x-3",children:[e(ie,{className:"w-5 h-5 text-blue-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Fișier Plan"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Plan disponibil"})]})]}),t("div",{className:"flex space-x-3",children:[t("button",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center space-x-2",children:[e(Fe,{className:"w-4 h-4"}),e("span",{children:"Vizualizează"})]}),t("button",{className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center space-x-2",children:[e(De,{className:"w-4 h-4"}),e("span",{children:"Descarcă"})]})]})]}):e("p",{className:"text-slate-400 italic",children:"Nu există plan încărcat"})]})]}),c.notes&&t("div",{className:"space-y-3",children:[e("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Note"}),e("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:e("p",{className:"text-slate-700 dark:text-slate-300",children:c.notes})})]})]}),b==="contracts"&&e("div",{className:"space-y-4",children:z.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-green-50/80 to-emerald-50/80 dark:from-green-900/20 dark:to-emerald-800/20",children:t("tr",{children:[e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Număr Contract"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Tip"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Proprietar"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Perioadă"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Chirie Lunară"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Status"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Contract PDF"})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:z.map(x=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e("td",{className:"p-4",children:x.contract_number}),e("td",{className:"p-4",children:x.type}),e("td",{className:"p-4",children:x.proprietar_name}),t("td",{className:"p-4",children:[new Date(x.start_date).toLocaleDateString("ro-RO")," - ",new Date(x.end_date).toLocaleDateString("ro-RO")]}),t("td",{className:"p-4",children:[x.monthly_rent," ",x.currency]}),e("td",{className:"p-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${x.status==="Active"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:x.status})}),e("td",{className:"p-4",children:x.file_path?t("div",{className:"flex space-x-2",children:[e("button",{onClick:()=>window.open(`https://www.w1n.ro${x.file_path}`,"_blank"),className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",title:"Vizualizează PDF",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const w=document.createElement("a");w.href=`https://www.w1n.ro${x.file_path}`,w.download=`contract-${x.contract_number}.pdf`,w.click()},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Descarcă PDF",children:e(De,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 italic",children:"N/A"})})]},x.id))})]})}):e("p",{className:"text-slate-400 italic text-center py-8",children:"Nu există contracte pentru această locație"})}),b==="slots"&&e("div",{className:"space-y-4",children:g.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-purple-50/80 to-violet-50/80 dark:from-purple-900/20 dark:to-violet-800/20",children:t("tr",{children:[e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"ID"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Număr Serie"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Denumire"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Furnizor"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Cabinet"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Game Mix"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Data Licență"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Data CVT"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Status"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Tip Proprietate"})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:g.map(x=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e("td",{className:"p-4 font-semibold",children:x.id}),e("td",{className:"p-4 font-semibold",children:x.serial_number}),e("td",{className:"p-4",children:x.name}),e("td",{className:"p-4",children:x.provider}),e("td",{className:"p-4",children:x.cabinet}),e("td",{className:"p-4",children:x.game_mix}),e("td",{className:"p-4",children:x.license_date?new Date(x.license_date).toLocaleDateString("ro-RO"):"N/A"}),e("td",{className:"p-4",children:x.cvt_date?new Date(x.cvt_date).toLocaleDateString("ro-RO"):"N/A"}),e("td",{className:"p-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${x.status==="Activ"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:x.status})}),e("td",{className:"p-4",children:x.property_type==="Owned"?"Proprietate":"Închiriat"})]},x.id))})]})}):e("p",{className:"text-slate-400 italic text-center py-8",children:"Nu există sloturi în această locație"})}),b==="cabinets"&&e("div",{className:"space-y-4",children:v.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-orange-50/80 to-amber-50/80 dark:from-orange-900/20 dark:to-amber-800/20",children:t("tr",{children:[e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Număr Serie"}),e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Model"}),e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Producător"}),e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Status"})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:v.map(x=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e("td",{className:"p-4 font-semibold",children:x.serial_number}),e("td",{className:"p-4",children:x.model}),e("td",{className:"p-4",children:x.manufacturer}),e("td",{className:"p-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${x.status==="Activ"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:x.status})})]},x.id))})]})}):e("p",{className:"text-slate-400 italic text-center py-8",children:"Nu există cabinete în această locație"})})]})]})]})})},vo=({item:a,onClose:l,onSave:r})=>{de();const[s,o]=h.useState({name:"",contact_person:"",contact:"",phone:"",company:"",status:"Activ",notes:"",logo:{type:"upload",url:"",file:null}});h.useEffect(()=>{a&&o({name:a.name||"",contact_person:a.contact_person||"",contact:a.contact||"",phone:a.phone||"",company:a.company||"",status:a.status||"Activ",notes:a.notes||"",logo:a.logo?typeof a.logo=="object"?a.logo:{type:"upload",url:"",file:null}:{type:"upload",url:"",file:null}})},[a]);const i=d=>{o({...s,[d.target.name]:d.target.value})},n=d=>{o({...s,logo:{...s.logo,type:d}})},m=d=>{o({...s,logo:{...s.logo,url:d}})},p=d=>{const b=d.target.files[0];if(b){const u=new FileReader;u.onloadend=()=>{o({...s,logo:{...s.logo,file:u.result}})},u.readAsDataURL(b)}};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-purple-800 to-violet-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-violet-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg",children:e(Xe,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Furnizor":"Adaugă Furnizor"}),e("p",{className:"text-purple-100 text-sm font-medium",children:"Completează informațiile despre furnizor"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:d=>{d.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Furnizor *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"input-field",placeholder:"ex: EGT Digital",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Persoana de Contact *"}),e("input",{type:"text",name:"contact_person",value:s.contact_person,onChange:i,className:"input-field",placeholder:"ex: Ion Popescu",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Companie Furnizor *"}),e("input",{type:"text",name:"company",value:s.company,onChange:i,className:"input-field",placeholder:"Introdu numele companiei",required:!0}),e("p",{className:"text-xs text-slate-500",children:"Compania care deține furnizorul (pentru facturi și contracte)"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Email Contact *"}),e("input",{type:"email",name:"contact",value:s.contact,onChange:i,className:"input-field",placeholder:"ex: contact@egt-digital.com",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Telefon *"}),e("input",{type:"text",name:"phone",value:s.phone,onChange:i,className:"input-field",placeholder:"ex: +40 21 555 1234",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status"}),t("select",{name:"status",value:s.status,onChange:i,className:"input-field",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Suspendat",children:"Suspendat"})]})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Logo Furnizor"}),t("div",{className:"flex space-x-4 mb-4",children:[e("button",{type:"button",onClick:()=>n("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${s.logo.type==="upload"?"bg-purple-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Upload Logo"}),e("button",{type:"button",onClick:()=>n("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${s.logo.type==="link"?"bg-purple-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Link URL"})]}),s.logo.type==="upload"?t("div",{children:[e("input",{type:"file",accept:"image/*",onChange:p,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"}),s.logo.file&&t("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg flex items-center space-x-4",children:[e("img",{src:s.logo.file,alt:"Logo Preview",className:"h-9 w-9 object-contain rounded"}),e("span",{className:"text-sm text-green-600 font-medium",children:"✓ Logo încărcat"})]})]}):t("div",{children:[e("input",{type:"text",value:s.logo.url,onChange:d=>m(d.target.value),className:"input-field",placeholder:"https://example.com/logo.png"}),s.logo.url&&t("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg flex items-center space-x-4",children:[e("img",{src:s.logo.url,alt:"Logo Preview",className:"h-9 w-9 object-contain rounded"}),e("span",{className:"text-sm text-green-600 font-medium",children:"✓ Logo settat"})]})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note Adiționale"}),e("textarea",{name:"notes",value:s.notes,onChange:i,className:"input-field min-h-[80px] resize-none",placeholder:"Informații suplimentare despre furnizor..."})]}),t("div",{className:"flex justify-end space-x-4 pt-8 border-t-2 border-slate-200/50 mt-8",children:[e("button",{type:"button",onClick:l,className:"btn-secondary group",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Anulează"})}),e("button",{type:"submit",className:"btn-primary group",children:t("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:[a?"Actualizează":"Adaugă"," Furnizor"]})})]})]})})]})})},No=()=>{const{providers:a,games:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n,loading:m}=de(),[p,c]=h.useState(!1),[d,b]=h.useState(null),[u,z]=h.useState(""),[g,v]=h.useState([]),[y,T]=h.useState(!1),j=_=>!l||!_?0:l.filter(I=>I.provider&&I.provider.toLowerCase()===_.toLowerCase()).length;h.useEffect(()=>{T(g.length>0)},[g]);const x=_=>{v(_?q.map(I=>I.id):[])},w=(_,I)=>{v(I?[...g,_]:g.filter(O=>O!==_))},L=async()=>{if(g.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${g.length} elemente?`))try{for(const _ of g)await o("providers",_);v([]),T(!1)}catch(_){console.error("Error bulk deleting:",_)}},S=()=>{g.length!==0&&console.log("Bulk edit for:",g)},q=a.filter(_=>{var I,O,P;return((I=_.name)==null?void 0:I.toLowerCase().includes(u.toLowerCase()))||((O=_.contact)==null?void 0:O.toLowerCase().includes(u.toLowerCase()))||((P=_.contractType)==null?void 0:P.toLowerCase().includes(u.toLowerCase()))}),E=[{key:"name",label:"Nume Furnizor",sortable:!0,render:_=>{var O,P,Y;const I=((O=_.logo)==null?void 0:O.file)||((P=_.logo)==null?void 0:P.url);return t("div",{className:"flex items-center space-x-3",children:[I?e("img",{src:I,alt:_.name,className:"w-9 h-9 rounded-full object-cover border-2 border-slate-200 bg-white shadow-md",onError:K=>{K.target.style.display="none",K.target.nextSibling.style.display="flex"}}):null,e("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center text-white font-bold shadow-lg",style:{display:I?"none":"flex"},children:((Y=_.name)==null?void 0:Y.charAt(0))||"F"}),e("div",{className:"font-bold text-slate-900 dark:text-slate-100 group-hover:text-purple-700 dark:group-hover:text-purple-400 transition-colors",children:_.name})]})}},{key:"company",label:"Companie",sortable:!0,render:_=>e("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:_.company||"N/A"})},{key:"contact",label:"Contact",sortable:!0,render:_=>t("div",{className:"space-y-1",children:[e("div",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm",children:_.contact}),e("div",{className:"text-slate-500 dark:text-slate-400 text-xs font-sans",children:_.phone})]})},{key:"games_count",label:"Nr. Jocuri",sortable:!0,render:_=>{const I=j(_.name);return t("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:[I," jocuri"]})}},{key:"status",label:"Status",sortable:!0,render:_=>{var P;const I=((P=_.status)==null?void 0:P.toLowerCase())||"",O=I==="activ"||I==="active";return e("span",{className:`px-4 py-2 rounded-2xl text-xs font-bold shadow-lg ${O?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-green-500/25":"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-500/25"}`,children:O?"Activ":"Inactiv"})}},{key:"created_by",label:"CREAT DE",sortable:!0,render:_=>e("div",{className:"text-slate-800 font-medium text-base",children:_.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:_=>e("div",{className:"text-slate-800 font-medium text-base",children:_.created_at?new Date(_.created_at).toLocaleDateString("ro-RO"):"N/A"})}],A=()=>{b(null),c(!0)},B=_=>{b(_),c(!0)},D=async _=>{window.confirm(`Sigur doriți să ștergeți furnizorul "${_.name}"?`)&&await o("providers",_.id)},R=async _=>{d?await s("providers",d.id,_):await r("providers",_),c(!1),b(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-wrap items-center gap-3",children:[t("div",{className:"relative flex-1 min-w-[200px] group",children:[e(Ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors",size:18}),e("input",{type:"text",placeholder:"Caută furnizori...",value:u,onChange:_=>z(_.target.value),className:"input-field pl-12"})]}),t("button",{onClick:()=>{console.log("Import functionality to be implemented")},className:"btn-secondary flex items-center space-x-2",children:[e(ye,{size:16}),e("span",{children:"Importă"})]}),e(at,{onExportExcel:()=>{try{i("providers")}catch(_){console.error("Error exporting to Excel:",_)}},onExportPDF:()=>{try{n("providers")}catch(_){console.error("Error exporting to PDF:",_)}},entity:"providers"}),y&&t(be,{children:[t("button",{onClick:S,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:L,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:A,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Furnizor"})]})]})}),e(je,{data:q,columns:E,loading:m.providers,searchTerm:u,onSearchChange:z,onEdit:B,onDelete:D,selectedItems:g,onSelectAll:x,onSelectItem:w,moduleColor:"purple"}),p&&e(vo,{item:d,onClose:()=>{c(!1),b(null)},onSave:R})]})})},yo=({item:a,onClose:l,onSave:r})=>{const{providers:s,platforms:o}=de(),[i,n]=h.useState({provider:"",name:"",model:"",platform:"",status:"Activ",notes:""});h.useEffect(()=>{a&&n({provider:a.provider||"",name:a.name||"",model:a.model||"",platform:a.platform||"",status:a.status||"Activ",notes:a.notes||""})},[a]);const m=c=>{c.preventDefault(),r(i)},p=c=>{const{name:d,value:b}=c.target;n(u=>({...u,[d]:b}))};return e("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[t("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 via-purple-700 to-violet-600 text-white px-8 py-6 flex items-center justify-between rounded-t-3xl shadow-lg",children:[e("h2",{className:"text-2xl font-bold flex items-center",children:a?"Editează Cabinet":"Adaugă Cabinet Nou"}),e("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-xl transition-all duration-200 hover:scale-110",children:e(fe,{size:24})})]}),t("form",{onSubmit:m,className:"p-8 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:i.provider,onChange:p,className:"input-field",required:!0,children:[e("option",{value:"",children:"Selectează furnizor"}),s==null?void 0:s.map(c=>e("option",{value:c.name,children:c.name},c.id))]}),e("p",{className:"text-xs text-slate-500",children:"Furnizorul cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Cabinet *"}),e("input",{type:"text",name:"name",value:i.name,onChange:p,className:"input-field",placeholder:"Ex: Cabinet Premium 01",required:!0}),e("p",{className:"text-xs text-slate-500",children:"Numele cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Model"}),e("input",{type:"text",name:"model",value:i.model,onChange:p,className:"input-field",placeholder:"Ex: Deluxe 2024"}),e("p",{className:"text-xs text-slate-500",children:"Modelul cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Platformă *"}),t("select",{name:"platform",value:i.platform,onChange:p,className:"input-field",required:!0,children:[e("option",{value:"",children:"Selectează platformă"}),o==null?void 0:o.map(c=>e("option",{value:c.name,children:c.name},c.id))]}),e("p",{className:"text-xs text-slate-500",children:"Platforma tehnică a cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status *"}),t("select",{name:"status",value:i.status,onChange:p,className:"input-field",required:!0,children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Mentenanță",children:"Mentenanță"})]}),e("p",{className:"text-xs text-slate-500",children:"Statusul actual"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note Adiționale"}),e("textarea",{name:"notes",value:i.notes,onChange:p,className:"input-field min-h-[100px] resize-none",placeholder:"Informații suplimentare despre cabinet..."}),e("p",{className:"text-xs text-slate-500",children:"Observații și detalii adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary px-8",children:"Anulează"}),e("button",{type:"submit",className:"btn-primary px-8",children:a?"Actualizează Cabinet":"Adaugă Cabinet"})]})]})]})})},al=({item:a,onClose:l,onSave:r})=>{const{providers:s}=de(),[o,i]=h.useState({name:"",serial_numbers:"",provider_id:"",avatar_url:"",avatar_file:"",status:"Active",notes:""}),[n,m]=h.useState(null);h.useEffect(()=>{a&&(i({name:a.name||"",serial_numbers:a.serial_numbers||"",provider_id:a.provider_id||"",avatar_url:a.avatar_url||"",avatar_file:a.avatar_file||"",status:a.status||"Active",notes:a.notes||""}),a.avatar_url?m(a.avatar_url):a.avatar_file&&a.avatar_file!=="{}"?m(a.avatar_file):m(null))},[a]);const p=u=>{u.preventDefault(),r(o)},c=u=>{const{name:z,value:g}=u.target;i(v=>({...v,[z]:g}))},d=u=>{const z=u.target.files[0];if(z){const g=new FileReader;g.onload=v=>{const y=v.target.result;i(T=>({...T,avatar_file:y,avatar_url:""})),m(y)},g.readAsDataURL(z)}},b=u=>{i(z=>({...z,avatar_url:u.target.value,avatar_file:""})),u.target.value?m(u.target.value):m(null)};return e("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t("div",{className:"sticky top-0 bg-gradient-to-r from-teal-600 via-cyan-600 to-blue-600 text-white px-8 py-6 flex items-center justify-between rounded-t-3xl shadow-lg",children:[e("h2",{className:"text-2xl font-bold flex items-center",children:a?"Editează Platformă":"Adaugă Platformă Nouă"}),e("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-xl transition-all duration-200 hover:scale-110",children:e(fe,{size:24})})]}),t("form",{onSubmit:p,className:"p-6",children:[t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Platformă *"}),e("input",{type:"text",name:"name",value:o.name,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",placeholder:"Ex: Android 10 Pro",required:!0})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor"}),t("select",{name:"provider_id",value:o.provider_id,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",children:[e("option",{value:"",children:"Selectează furnizor"}),s.map(u=>e("option",{value:u.id,children:u.name},u.id))]})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Avatar Platformă"}),t("div",{className:"space-y-3",children:[n&&e("div",{className:"flex justify-center",children:e("img",{src:n,alt:"Preview",className:"w-20 h-20 rounded-xl object-cover border-2 border-slate-200 shadow-sm"})}),e("input",{type:"url",name:"avatar_url",value:o.avatar_url,onChange:b,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",placeholder:"https://example.com/avatar.png"}),e("div",{className:"relative",children:e("input",{type:"file",name:"avatar_file",onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100",accept:"image/*"})})]})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:o.status,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",required:!0,children:[e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"})]})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:o.notes,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm resize-none",placeholder:"Informații adiționale despre platformă...",rows:3})]})]}),t("div",{className:"mt-6 space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numere Seriale *"}),e("textarea",{name:"serial_numbers",value:o.serial_numbers,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm text-sm resize-none",placeholder:`Introdu numerele seriale, separate prin virgulă sau pe rânduri diferite:
SN001, SN002, SN003
sau:
SN001
SN002
SN003`,rows:4,required:!0}),t("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[e("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-blue-50 text-blue-700",children:"💡 Exemplu: SN12345, SN12346, SN12347"}),e("span",{children:"sau pe rânduri separate"})]})]}),t("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-2.5 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-xl transition-all duration-200 font-medium",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl hover:from-cyan-600 hover:to-blue-600 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:a?"Actualizează":"Adaugă Platformă"})]})]})]})})},wo=({locationId:a,locationName:l,hideSearchAndAdd:r=!1})=>{const{platforms:s,createItem:o,updateItem:i,deleteItem:n}=de(),[m,p]=h.useState(!1),[c,d]=h.useState(null),[b,u]=h.useState(""),z=s.filter(S=>{var q,E,A,B;return((q=S.name)==null?void 0:q.toLowerCase().includes(b.toLowerCase()))||((E=S.type)==null?void 0:E.toLowerCase().includes(b.toLowerCase()))||((A=S.status)==null?void 0:A.toLowerCase().includes(b.toLowerCase()))||((B=S.description)==null?void 0:B.toLowerCase().includes(b.toLowerCase()))}),g=()=>{d(null),p(!0)},v=S=>{console.log("View platform:",S)},y=S=>{d(S),p(!0)},T=async S=>{if(window.confirm(`Sigur doriți să ștergeți platforma "${S.name}"?`))try{await n("platforms",S.id)}catch(q){console.error("Error deleting platform:",q)}},j=async S=>{try{c?await i("platforms",c.id,S):await o("platforms",S),p(!1),d(null)}catch(q){console.error("Error saving platform:",q)}},x=S=>{switch(S){case"Gaming":return"bg-purple-100 text-purple-800";case"Server":return"bg-blue-100 text-blue-800";case"Workstation":return"bg-green-100 text-green-800";case"Terminal":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},w=S=>{switch(S){case"Active":return"bg-green-100 text-green-800";case"Inactive":return"bg-red-100 text-red-800";case"Maintenance":return"bg-yellow-100 text-yellow-800";case"Offline":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},L=S=>{switch(S){case"Gaming":return e(Dt,{className:"w-6 h-6 text-white"});case"Server":return e(Sa,{className:"w-6 h-6 text-white"});case"Workstation":return e(fr,{className:"w-6 h-6 text-white"});case"Terminal":return e(Dt,{className:"w-6 h-6 text-white"});default:return e(Dt,{className:"w-6 h-6 text-white"})}};return t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Platforme"}),e("p",{className:"text-slate-600",children:a?`Gestionează platformele pentru ${l}`:"Toate platformele din sistem"})]}),!r&&t("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Platformă"})]})]}),!r&&t("div",{className:"relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută platforme...",value:b,onChange:S=>u(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),z.length>0?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(S=>t("div",{className:"card p-6 hover:shadow-lg transition-all duration-200 group",children:[t("div",{className:"flex items-start justify-between mb-4",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl",children:L(S.type)}),t("div",{children:[e("h3",{className:"font-bold text-slate-800 group-hover:text-purple-700 transition-colors",children:S.name}),e("p",{className:"text-slate-600 text-sm",children:S.type})]})]}),t("div",{className:"flex space-x-1",children:[e("button",{onClick:()=>v(S),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>y(S),className:"p-2 text-slate-400 hover:text-green-500 transition-colors",children:e(Ue,{className:"w-4 h-4"})}),e("button",{onClick:()=>T(S),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e(Le,{className:"w-4 h-4"})})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"space-y-2",children:[S.description&&e("div",{className:"text-sm text-slate-600",children:S.description}),S.specifications&&t("div",{className:"text-xs text-slate-500",children:[e("strong",{children:"Specs:"})," ",S.specifications]}),S.location&&t("div",{className:"text-xs text-slate-500",children:[e("strong",{children:"Locație:"})," ",S.location]})]}),t("div",{className:"flex space-x-2",children:[e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${x(S.type)}`,children:S.type}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${w(S.status)}`,children:S.status==="Active"?"Activ":S.status==="Inactive"?"Inactiv":S.status==="Maintenance"?"În mentenanță":S.status==="Offline"?"Offline":S.status})]}),S.notes&&e("div",{className:"text-sm text-slate-600 bg-slate-50 p-2 rounded-lg",children:S.notes})]})]},S.id))}):t("div",{className:"card p-12 text-center",children:[e("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-3xl inline-block mb-6",children:e(Dt,{className:"w-16 h-16 text-purple-500 mx-auto"})}),e("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Nu există platforme"}),e("p",{className:"text-slate-600 mb-6",children:a?"Adaugă prima platformă pentru această locație":"Nu există platforme în sistem"}),!r&&t("button",{onClick:g,className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ce,{size:18}),e("span",{children:"Adaugă Platformă"})]})]}),m&&e(al,{item:c,onClose:()=>{p(!1),d(null)},onSave:j})]})},ko=()=>{const{cabinets:a,platforms:l,providers:r,createItem:s,updateItem:o,deleteItem:i,exportData:n,loading:m}=de(),[p,c]=h.useState(!1),[d,b]=h.useState(!1),[u,z]=h.useState(null),[g,v]=h.useState(""),[y,T]=h.useState([]),[j,x]=h.useState(!1);h.useEffect(()=>{x(y.length>0)},[y]);const w=I=>{T(I?B.map(O=>O.id):[])},L=(I,O)=>{T(O?[...y,I]:y.filter(P=>P!==I))},S=async()=>{if(y.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${y.length} elemente?`))try{for(const I of y)await i("cabinets",I);T([]),x(!1)}catch(I){console.error("Error bulk deleting:",I)}},q=()=>{y.length!==0&&console.log("Bulk edit for:",y)},[E,A]=h.useState("cabinets"),B=a.filter(I=>{var O,P,Y,K;return((O=I.name)==null?void 0:O.toLowerCase().includes(g.toLowerCase()))||((P=I.provider)==null?void 0:P.toLowerCase().includes(g.toLowerCase()))||((Y=I.model)==null?void 0:Y.toLowerCase().includes(g.toLowerCase()))||((K=I.platform)==null?void 0:K.toLowerCase().includes(g.toLowerCase()))});l!=null&&l.filter(I=>{var O,P;return((O=I.name)==null?void 0:O.toLowerCase().includes(g.toLowerCase()))||((P=I.serial_numbers)==null?void 0:P.toLowerCase().includes(g.toLowerCase()))});const D=[{key:"name",label:"Nume Cabinet",sortable:!0,render:I=>t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold shadow-lg",children:e(Me,{className:"w-4 h-4 text-white"})}),e("div",{className:"font-bold text-slate-900",children:I.name})]})},{key:"provider",label:"Furnizor",sortable:!0,render:I=>{var Y;const P=(K=>{if(K.provider_logo)try{const te=typeof K.provider_logo=="string"?JSON.parse(K.provider_logo):K.provider_logo;return te.file||te.url||te}catch{return K.provider_logo}return null})(I);return t("div",{className:"flex items-center space-x-3",children:[P?e("img",{src:P,alt:I.provider_name||I.provider,className:"w-8 h-8 rounded-full object-cover border-2 border-slate-200 bg-white shadow-md",onError:K=>{K.target.style.display="none",K.target.nextSibling.style.display="flex"}}):null,e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center text-white font-bold shadow-lg",style:{display:P?"none":"flex"},children:((Y=I.provider_name||I.provider)==null?void 0:Y.charAt(0))||"F"}),e("span",{className:"text-purple-800 dark:text-purple-300 text-xs font-bold",children:I.provider_name||I.provider||"N/A"})]})}},{key:"model",label:"Model",sortable:!0},{key:"platform",label:"Platformă",sortable:!0,render:I=>{const P=(Y=>Y.platform_avatar_url&&Y.platform_avatar_url.trim()!==""?Y.platform_avatar_url:Y.platform_avatar_file&&Y.platform_avatar_file!=="{}"&&Y.platform_avatar_file.trim()!==""?Y.platform_avatar_file:null)(I);return t("div",{className:"flex items-center space-x-3",children:[P?e("img",{src:P,alt:I.platform_name||I.platform,className:"w-[60px] h-[30px] rounded object-contain border border-slate-200 bg-white shadow-sm",onError:Y=>{Y.target.style.display="none",Y.target.nextSibling.style.display="flex"}}):null,e("div",{className:`w-[60px] h-[30px] rounded flex items-center justify-center text-white font-bold shadow-sm ${P?"bg-white border border-slate-200":"bg-gradient-to-br from-cyan-500 to-blue-500"}`,style:{display:P?"none":"flex"},children:e(Dt,{className:`w-5 h-5 ${P?"text-slate-600":"text-white"}`})}),e("span",{className:"text-cyan-800 dark:text-cyan-300 text-xs font-bold",children:I.platform_name||I.platform||"N/A"})]})}},{key:"status",label:"Status",sortable:!0,render:I=>{var P,Y;const O=((P=I.status)==null?void 0:P.toLowerCase())==="activ"||((Y=I.status)==null?void 0:Y.toLowerCase())==="active";return e("span",{className:`px-4 py-2 rounded-2xl text-xs font-bold shadow-lg ${O?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-green-500/25":"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-500/25"}`,children:O?"Activ":"Inactiv"})}},{key:"created_at",label:"Data Creare",sortable:!0,render:I=>e("div",{className:"text-sm text-slate-600",children:new Date(I.created_at).toLocaleDateString("ro-RO")})},{key:"created_by",label:"Creat de",sortable:!0,render:I=>{var O,P;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shadow-lg",children:((P=(O=I.created_by)==null?void 0:O.charAt(0))==null?void 0:P.toUpperCase())||"A"}),e("span",{className:"text-sm font-medium text-slate-700",children:I.created_by||"Sistem"})]})}}];h.useState({});const R=()=>{z(null),c(!0)},N=()=>{z(null),b(!0)},f=I=>{z(I),E==="cabinets"?c(!0):b(!0)},C=async I=>{const O=E==="cabinets"?"cabinets":"platforms";u?await o(O,u.id,I):await s(O,I),c(!1),b(!1)},_=async I=>{const O=E==="cabinets"?"cabinets":"platforms";window.confirm(`Sigur vrei să ștergi acest ${E==="cabinets"?"cabinet":"platformă"}?`)&&await i(O,I)};return t(xe,{children:[t("div",{className:"space-y-6",children:[e("div",{className:"card p-4",children:t("div",{className:"flex space-x-2 bg-slate-100 rounded-xl p-1",children:[e("button",{onClick:()=>{A("cabinets"),v("")},className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${E==="cabinets"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg shadow-purple-500/25 scale-105":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Me,{size:20}),e("span",{children:"CABINETE"}),e("span",{className:`px-2 py-1 rounded-full text-xs ${E==="cabinets"?"bg-white/20":"bg-slate-200 text-slate-700"}`,children:a.length})]})}),e("button",{onClick:()=>{A("platforms"),v("")},className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${E==="platforms"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg shadow-cyan-500/25 scale-105":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Dt,{size:20}),e("span",{children:"PLATFORME"}),e("span",{className:`px-2 py-1 rounded-full text-xs ${E==="platforms"?"bg-white/20":"bg-slate-200 text-slate-700"}`,children:(l==null?void 0:l.length)||0})]})})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e("div",{className:"flex-1 max-w-md",children:t("div",{className:"relative",children:[e(Ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),e("input",{type:"text",placeholder:`Caută ${E==="cabinets"?"cabinete":"platforme"}...`,value:g,onChange:I=>v(I.target.value),className:"input-field pl-12"})]})}),t("div",{className:"flex gap-3",children:[t("button",{onClick:()=>n(E==="cabinets"?"cabinets":"platforms"),className:"btn-secondary flex items-center space-x-2",children:[e(De,{size:18}),e("span",{className:"hidden sm:inline",children:"Export"})]}),j&&E==="cabinets"&&t(be,{children:[t("button",{onClick:q,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:S,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:E==="cabinets"?R:N,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{size:18}),e("span",{children:E==="cabinets"?"Adaugă Cabinet":"Adaugă Platformă"})]})]})]})}),E==="cabinets"?e("div",{className:"card p-6",children:e(je,{data:B,columns:D,onEdit:f,onDelete:_,loading:m,selectedItems:y,onSelectAll:w,onSelectItem:L,moduleColor:"teal"})}):e(wo,{locationId:null,locationName:"Toate Platformele",hideSearchAndAdd:!0})]}),p&&e(yo,{item:u,onClose:()=>c(!1),onSave:C}),d&&e(al,{item:u,onClose:()=>b(!1),onSave:C})]})},Co=({item:a,onClose:l,onSave:r})=>{const{providers:s}=de(),[o,i]=h.useState({name:"",provider:"",games:"",rtp:"",denomination:.01,max_bet:"",gaming_places:1,status:"Active",notes:""});h.useEffect(()=>{if(a){let c="";try{if(typeof a.games=="string"){const d=JSON.parse(a.games);c=Array.isArray(d)?d.join(`
`):""}else Array.isArray(a.games)&&(c=a.games.join(`
`))}catch(d){console.error("Error parsing games:",d),c=""}i({name:a.name||"",provider:a.provider||"",games:c,rtp:a.rtp||"",denomination:a.denomination||.01,max_bet:a.max_bet||"",gaming_places:a.gaming_places||1,status:a.status||"Active",notes:a.notes||""})}},[a]);const n=c=>{const{name:d,value:b}=c.target;i(u=>({...u,[d]:b}))},m=()=>o.games.trim()?o.games.split(`
`).filter(c=>c.trim()).length:0;return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-indigo-800 to-blue-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600/20 to-blue-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl shadow-lg",children:e(Tt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Game Mix":"Adaugă Game Mix"}),e("p",{className:"text-indigo-100 text-sm font-medium",children:"Completează informațiile despre game mix"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:c=>{c.preventDefault();const d=o.games.split(`
`).map(u=>u.trim()).filter(u=>u.length>0),b={...o,games:d,rtp:o.rtp?parseFloat(o.rtp):null,denomination:o.denomination?parseFloat(o.denomination):.01,max_bet:o.max_bet?parseFloat(o.max_bet):null,gaming_places:o.gaming_places?parseInt(o.gaming_places):1};console.log("🎮 GameMix submitData:",b),r(b)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Game Mix *"}),e("input",{type:"text",name:"name",value:o.name,onChange:n,className:"input-field",placeholder:"ex: Mix Clasice Novomatic",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Furnizor"}),t("select",{name:"provider",value:o.provider,onChange:n,className:"input-field",children:[e("option",{value:"",children:"Selectează furnizor"}),s==null?void 0:s.map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"RTP (%)"}),e("input",{type:"number",step:"0.01",name:"rtp",value:o.rtp,onChange:n,className:"input-field",placeholder:"ex: 96.5"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status *"}),t("select",{name:"status",value:o.status,onChange:n,className:"input-field",required:!0,children:[e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Jocuri în Mix"}),t("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:[e("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white font-bold shadow-lg",children:m()}),t("div",{children:[t("div",{className:"font-bold text-slate-900",children:[m()," jocuri"]}),e("div",{className:"text-sm text-slate-500",children:"în acest mix"})]})]})]})]}),e("div",{className:"space-y-4",children:t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Jocuri în Mix *"}),e("textarea",{name:"games",value:o.games,onChange:n,className:"input-field",rows:6,placeholder:`Introdu numele jocurilor, separate pe rânduri diferite:
Book of Ra
Sizzling Hot
Lucky Lady Charm
Dolphins Pearl`,required:!0}),t("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[e("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-green-50 text-green-700",children:"💡 Exemplu: Un joc pe fiecare rând"}),e("span",{className:"text-slate-400",children:"•"}),t("span",{children:[m()," jocuri adăugate"]})]})]})}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Configurație Tehnică"}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Denomination"}),e("input",{type:"number",step:"0.01",name:"denomination",value:o.denomination,onChange:n,className:"input-field",placeholder:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Max Bet"}),e("input",{type:"number",step:"0.01",name:"max_bet",value:o.max_bet,onChange:n,className:"input-field",placeholder:"100.00"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Gaming Places"}),e("input",{type:"number",name:"gaming_places",value:o.gaming_places,onChange:n,className:"input-field",placeholder:"1"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:o.notes,onChange:n,className:"input-field",rows:3,placeholder:"Note adiționale despre acest game mix..."})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Tt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Game Mix"]})]})]})]})})]})})},So=()=>{const a=Ge();de();const[l,r]=h.useState([]),[s,o]=h.useState(!1),[i,n]=h.useState(""),[m,p]=h.useState(""),[c,d]=h.useState(""),[b,u]=h.useState(""),[z,g]=h.useState("grid"),[v,y]=h.useState("name"),T=[{game_id:"00000004-0000-5000-9000-000000000001",name:"10 Burning Heart",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"fruits",volatility:"low - medium",lines:10,layout:"5x3",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000001.png"},{game_id:"00000004-0000-5000-9000-000000000002",name:"100 Burning Hot",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"fruits",volatility:"medium",lines:100,layout:"5x4",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000002.png"},{game_id:"00000004-0000-5000-9000-000000000003",name:"100 Cats",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"animals and nature and wildlife",volatility:"low - medium",lines:100,layout:"5x4",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000003.png"},{game_id:"00000004-0000-5000-9000-000000000005",name:"2 Dragons",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"dragons and mythical creatures;asian cultures;oriental and asian prosperity",volatility:"high",lines:20,layout:"5x3",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000005.png"},{game_id:"00000004-0000-5000-9000-000000000099",name:"Mini Burning Hot",provider:"Egypt Quest",provider_id:"00000555-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"n/a",mechanic:"n/a",theme:"n/a",volatility:"n/a",lines:5,layout:"n/a",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000099.png"}];h.useEffect(()=>{j()},[]);const j=async()=>{o(!0);try{const D=await fetch("/api/games");if(!D.ok)throw new Error("Failed to load games");const R=await D.json();r(R)}catch(D){console.error("Error loading games:",D),r(T)}finally{o(!1)}},x=[...new Set(l.map(D=>D.provider))],w=[...new Set(l.map(D=>D.volatility).filter(D=>D&&D!=="n/a"))];[...new Set(l.map(D=>D.theme).filter(D=>D&&D!=="n/a"))];const L=l.filter(D=>{const R=D.name.toLowerCase().includes(i.toLowerCase()),N=!m||D.provider===m,f=!c||D.volatility===c,C=!b||D.theme.includes(b);return R&&N&&f&&C}),S=[...L].sort((D,R)=>{switch(v){case"provider":return D.provider.localeCompare(R.provider);case"volatility":const N={low:1,"low - medium":2,medium:3,high:4};return(N[D.volatility]||5)-(N[R.volatility]||5);default:return D.name.localeCompare(R.name)}}),q=D=>{switch(D){case"low":return"bg-green-100 text-green-800";case"low - medium":return"bg-blue-100 text-blue-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=D=>{switch(D){case"low":return e(it,{className:"w-3 h-3"});case"low - medium":return e(Bt,{className:"w-3 h-3"});case"medium":return e(vr,{className:"w-3 h-3"});case"high":return e(Bt,{className:"w-3 h-3"});default:return e(it,{className:"w-3 h-3"})}};return t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-2xl shadow-lg shadow-purple-500/25",children:e(Me,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Biblioteca Jocuri"}),e("p",{className:"text-slate-600",children:"Toate jocurile disponibile de la toți furnizorii"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>{console.log("Export games library")},className:"btn-secondary flex items-center space-x-2",children:[e(De,{className:"w-4 h-4"}),e("span",{children:"Exportă"})]}),t("button",{onClick:()=>{console.log("Import games from Google Sheets")},className:"btn-primary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă din Sheets"})]})]})]})}),t("div",{className:"card p-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[t("div",{className:"lg:col-span-2 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută jocuri...",value:i,onChange:D=>n(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t("select",{value:m,onChange:D=>p(D.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e("option",{value:"",children:"Toți furnizorii"}),x.map(D=>e("option",{value:D,children:D},D))]}),t("select",{value:c,onChange:D=>d(D.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e("option",{value:"",children:"Toate volatilitățile"}),w.map(D=>e("option",{value:D,children:D},D))]}),t("select",{value:v,onChange:D=>y(D.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e("option",{value:"name",children:"Sortare: Nume"}),e("option",{value:"provider",children:"Sortare: Furnizor"}),e("option",{value:"volatility",children:"Sortare: Volatilitate"})]})]}),t("div",{className:"flex items-center justify-between mt-4",children:[e("div",{className:"flex items-center space-x-2",children:t("span",{className:"text-sm text-slate-600",children:[L.length," jocuri din ",l.length," total"]})}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>g("grid"),className:`p-2 rounded-lg transition-colors ${z==="grid"?"bg-purple-100 text-purple-600":"text-slate-400 hover:text-slate-600"}`,children:e(gl,{className:"w-4 h-4"})}),e("button",{onClick:()=>g("list"),className:`p-2 rounded-lg transition-colors ${z==="list"?"bg-purple-100 text-purple-600":"text-slate-400 hover:text-slate-600"}`,children:e(fl,{className:"w-4 h-4"})})]})]})]}),e("div",{className:"card p-6",children:s?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):L.length===0?t("div",{className:"text-center py-12",children:[e(Me,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există jocuri"}),e("p",{className:"text-slate-500",children:"Importă jocurile din Google Sheets pentru a începe"})]}):e("div",{className:z==="grid"?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4":"space-y-4",children:S.map(D=>z==="grid"?e("div",{className:"group cursor-pointer",onClick:()=>a(`/games/${D.game_id}`),children:t("div",{className:"bg-white rounded-xl border border-slate-200 p-3 hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t("div",{className:"w-full h-64 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg mb-3 overflow-hidden flex items-center justify-center",children:[e("img",{src:D.image_url,alt:D.name,className:"max-w-full max-h-full object-contain group-hover:scale-105 transition-transform duration-300",style:{imageRendering:"crisp-edges"},onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}),e("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center",style:{display:"none"},children:e(Me,{className:"w-8 h-8 text-purple-400"})})]}),t("div",{className:"space-y-2",children:[e("h3",{className:"font-semibold text-slate-800 text-sm line-clamp-2 group-hover:text-purple-600 transition-colors",children:D.name}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full",children:D.provider}),D.volatility&&D.volatility!=="n/a"&&t("span",{className:`text-xs px-2 py-1 rounded-full flex items-center space-x-1 ${q(D.volatility)}`,children:[E(D.volatility),e("span",{children:D.volatility})]})]}),D.lines&&D.lines!=="n/a"&&t("div",{className:"text-xs text-slate-500",children:[D.lines," linii • ",D.layout]})]})]})},D.game_id):t("div",{className:"flex items-center space-x-4 p-4 bg-white rounded-xl border border-slate-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>a(`/games/${D.game_id}`),children:[t("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:[e("img",{src:D.image_url,alt:D.name,className:"max-w-full max-h-full object-contain",style:{imageRendering:"crisp-edges"},onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}),e("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center",style:{display:"none"},children:e(Me,{className:"w-6 h-6 text-purple-400"})})]}),t("div",{className:"flex-1 min-w-0",children:[e("h3",{className:"font-semibold text-slate-800 group-hover:text-purple-600 transition-colors",children:D.name}),e("p",{className:"text-sm text-slate-500 truncate",children:D.theme}),t("div",{className:"flex items-center space-x-2 mt-1",children:[e("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full",children:D.provider}),D.volatility&&D.volatility!=="n/a"&&t("span",{className:`text-xs px-2 py-1 rounded-full flex items-center space-x-1 ${q(D.volatility)}`,children:[E(D.volatility),e("span",{children:D.volatility})]}),D.lines&&D.lines!=="n/a"&&t("span",{className:"text-xs text-slate-500",children:[D.lines," linii"]})]})]}),e("button",{onClick:R=>{R.stopPropagation(),a(`/games/${D.game_id}`)},className:"p-2 text-slate-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:e(Fe,{className:"w-4 h-4"})})]},D.game_id))})})]})},_o=()=>{const{gameMixes:a,createItem:l,updateItem:r,deleteItem:s,refreshData:o}=de(),[i,n]=h.useState("mixes"),[m,p]=h.useState(!1),[c,d]=h.useState(null),[b,u]=h.useState(""),[z,g]=h.useState("all"),[v,y]=h.useState([]),[T,j]=h.useState(!1);h.useEffect(()=>{j(v.length>0)},[v]);const x=()=>{d(null),p(!0)},w=f=>{d(f),p(!0)},L=()=>{p(!1),d(null)},S=async f=>{try{console.log("🎮 GameMixes handleSave:",{selectedItem:c,formData:f}),c?(console.log("🎮 Updating game mix:",c.id,f),await r("gameMixes",c.id,f)):(console.log("🎮 Creating game mix:",f),await l("gameMixes",f)),await o(),L()}catch(C){console.error("Error saving game mix:",C)}},q=async f=>{if(window.confirm("Ești sigur că vrei să ștergi acest game mix?"))try{await s("gameMixes",f)}catch(C){console.error("Error deleting game mix:",C)}},E=f=>{y(f?R.map(C=>C.id):[])},A=(f,C)=>{y(C?[...v,f]:v.filter(_=>_!==f))},B=async()=>{if(v.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${v.length} game mix-uri?`))try{for(const f of v)await s("gameMixes",f);y([]),j(!1)}catch(f){console.error("Error bulk deleting game mixes:",f)}},D=()=>{v.length!==0&&console.log("Bulk edit for:",v)},R=a.filter(f=>{var I,O;const C=((I=f.name)==null?void 0:I.toLowerCase().includes(b.toLowerCase()))||((O=f.provider)==null?void 0:O.toLowerCase().includes(b.toLowerCase())),_=z==="all"||f.status===z;return C&&_}),N=[{key:"name",label:"Nume Game Mix",sortable:!0,render:f=>t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:e(Tt,{className:"w-5 h-5"})}),t("div",{children:[e("div",{className:"font-bold text-slate-900",children:f.name}),t("div",{className:"text-sm text-slate-500",children:["ID: ",f.id]})]})]})},{key:"provider",label:"Furnizor",sortable:!0,render:f=>e("span",{className:"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-800 px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm",children:f.provider||"N/A"})},{key:"games",label:"Jocuri",render:f=>{const C=typeof f.games=="string"?JSON.parse(f.games):f.games,_=Array.isArray(C)?C.length:0;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white font-bold shadow-lg",children:_}),t("span",{className:"text-sm font-medium text-slate-700",children:[_," jocuri"]})]})}},{key:"status",label:"Status",sortable:!0,render:f=>{var I;const C=((I=f.status)==null?void 0:I.toLowerCase())||"";return e("span",{className:`px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm ${C==="activ"||C==="active"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800":"bg-gradient-to-r from-red-100 to-pink-100 text-red-800"}`,children:f.status})}},{key:"created_at",label:"Data Creare",sortable:!0,render:f=>e("div",{className:"text-sm text-slate-600",children:new Date(f.created_at).toLocaleDateString("ro-RO")})},{key:"created_by",label:"Creat de",sortable:!0,render:f=>{var C,_;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shadow-lg",children:((_=(C=f.created_by)==null?void 0:C.charAt(0))==null?void 0:_.toUpperCase())||"A"}),e("span",{className:"text-sm font-medium text-slate-700",children:f.created_by||"Sistem"})]})}}];return e(xe,{children:t("div",{className:"space-y-6",children:[t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl shadow-lg shadow-red-500/25",children:e(Tt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Game Mixes"}),e("p",{className:"text-slate-600",children:"Gestionează mixurile de jocuri și biblioteca de jocuri"})]})]}),t("div",{className:"flex items-center space-x-3",children:[i==="mixes"&&T&&t(be,{children:[t("button",{onClick:D,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),t("span",{children:["Bulk Edit (",v.length,")"]})]}),t("button",{onClick:B,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),t("span",{children:["Bulk Delete (",v.length,")"]})]})]}),i==="mixes"&&t("button",{onClick:x,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-5 h-5"}),e("span",{children:"Adaugă Game Mix"})]})]})]}),t("div",{className:"flex space-x-1 bg-slate-100 p-1 rounded-lg",children:[t("button",{onClick:()=>n("mixes"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-md transition-all duration-200 ${i==="mixes"?"bg-white text-red-600 shadow-sm":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"}`,children:[e(Tt,{className:"w-4 h-4"}),e("span",{className:"font-medium",children:"Game Mixes"})]}),t("button",{onClick:()=>n("games"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-md transition-all duration-200 ${i==="games"?"bg-white text-purple-600 shadow-sm":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"}`,children:[e(Me,{className:"w-4 h-4"}),e("span",{className:"font-medium",children:"Biblioteca Jocuri"})]})]})]}),i==="mixes"?t(be,{children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-wrap gap-4 items-center",children:[e("div",{className:"flex-1 min-w-64",children:t("div",{className:"relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută game mix sau furnizor...",value:b,onChange:f=>u(f.target.value),className:"input-field pl-10"})]})}),t("div",{className:"flex items-center space-x-2",children:[e(Ut,{className:"w-5 h-5 text-slate-500"}),t("select",{value:z,onChange:f=>g(f.target.value),className:"input-field",children:[e("option",{value:"all",children:"Toate statusurile"}),e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"})]})]}),t("div",{className:"flex items-center space-x-2",children:[t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(De,{className:"w-4 h-4"}),e("span",{children:"Export"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Import"})]})]})]})}),e("div",{className:"card",children:e(je,{data:R,columns:N,onEdit:w,onDelete:q,searchTerm:b,emptyMessage:"Nu există game mixes în sistem",selectedItems:v,onSelectAll:E,onSelectItem:A,moduleColor:"indigo"})})]}):e(So,{}),m&&e(Co,{item:c,onClose:L,onSave:S})]})})},Eo=()=>{const{gameId:a}=qt(),l=Ge(),{slots:r,gameMixes:s,providers:o,companies:i,locations:n,cabinets:m}=de(),[p,c]=h.useState(null),[d,b]=h.useState(!0),[u,z]=h.useState(null),[g,v]=h.useState([]);h.useEffect(()=>{w(),y()},[a,r,s]);const y=()=>{if(!p||!r||!s)return;const E=[];r.forEach(A=>{if(A.game_mix){const B=s.find(D=>D.name===A.game_mix||D.id===A.game_mix);if(B&&B.games){let D=[];try{D=typeof B.games=="string"?JSON.parse(B.games):B.games}catch{D=[B.games]}D.includes(p.name)&&E.push({...A,gameMixName:B.name,providerName:T(A.provider),locationName:j(A.location),cabinetName:x(A.cabinet)})}}}),v(E)},T=E=>{const A=o==null?void 0:o.find(B=>B.id===E||B.name===E);return A?A.name:E},j=E=>{const A=n==null?void 0:n.find(B=>B.id===E||B.name===E);return A?A.name:E},x=E=>{const A=m==null?void 0:m.find(B=>B.id===E||B.name===E);return A?A.name||A.model:E},w=async()=>{b(!0);try{const E=await fetch(`/api/games/${a}`);if(!E.ok)throw new Error("Game not found");const A=await E.json();c(A),L(A)}catch(E){console.error("Error loading game details:",E)}finally{b(!1)}},L=E=>{const A=r.filter(N=>{if(!N.game_mix)return!1;const f=s.find(_=>_.name===N.game_mix||_.id===N.game_mix);if(!f||!f.games)return!1;let C=[];try{C=typeof f.games=="string"?JSON.parse(f.games):f.games}catch{C=[f.games]}return C.includes(E.name)}),B={};A.forEach(N=>{const f=N.location||"Unknown";B[f]||(B[f]={count:0,cabinets:new Set,gameMixes:new Set,slots:[]}),B[f].count++,B[f].cabinets.add(N.cabinet||"Unknown"),B[f].gameMixes.add(N.game_mix||"None"),B[f].slots.push(N)});const D={};A.forEach(N=>{const f=N.cabinet||"Unknown";D[f]||(D[f]={count:0,locations:new Set,gameMixes:new Set,slots:[]}),D[f].count++,D[f].locations.add(N.location||"Unknown"),D[f].gameMixes.add(N.game_mix||"None"),D[f].slots.push(N)});const R={};A.forEach(N=>{const f=N.game_mix||"None";R[f]||(R[f]={count:0,locations:new Set,cabinets:new Set,slots:[]}),R[f].count++,R[f].locations.add(N.location||"Unknown"),R[f].cabinets.add(N.cabinet||"Unknown"),R[f].slots.push(N)}),z({totalSlots:A.length,uniqueLocations:Object.keys(B).length,uniqueCabinets:Object.keys(D).length,uniqueGameMixes:Object.keys(R).length,locationStats:B,cabinetStats:D,gameMixStats:R,allSlots:A})},S=E=>{switch(E){case"low":return"bg-green-100 text-green-800";case"low - medium":return"bg-blue-100 text-blue-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},q=E=>{switch(E){case"low":return e(it,{className:"w-4 h-4"});case"low - medium":return e(Bt,{className:"w-4 h-4"});case"medium":return e(vr,{className:"w-4 h-4"});case"high":return e(Bt,{className:"w-4 h-4"});default:return e(it,{className:"w-4 h-4"})}};return d?e(xe,{children:e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})})}):p?e(xe,{children:t("div",{className:"space-y-6",children:[t("div",{className:"card p-6",children:[e("div",{className:"flex items-center justify-between mb-6",children:t("button",{onClick:()=>l("/game-mixes/games-library"),className:"flex items-center space-x-2 text-slate-600 hover:text-purple-600 transition-colors",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Înapoi la Biblioteca Jocuri"})]})}),t("div",{className:"flex items-start space-x-6",children:[e("div",{className:"flex-shrink-0",children:t("div",{className:"w-40 h-40 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-2xl overflow-hidden shadow-lg flex items-center justify-center",children:[e("img",{src:p.image_url,alt:p.name,className:"max-w-full max-h-full object-contain",style:{imageRendering:"crisp-edges"},onError:E=>{E.target.style.display="none",E.target.nextSibling.style.display="flex"}}),e("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center",style:{display:"none"},children:e(Me,{className:"w-16 h-16 text-purple-400"})})]})}),t("div",{className:"flex-1",children:[e("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:p.name}),e("p",{className:"text-slate-600 mb-4",children:p.theme}),t("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Furnizor"}),e("div",{className:"font-semibold text-slate-800",children:p.provider})]}),t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Linii"}),e("div",{className:"font-semibold text-slate-800",children:p.lines||"N/A"})]}),t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Layout"}),e("div",{className:"font-semibold text-slate-800",children:p.layout||"N/A"})]}),t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Tip"}),e("div",{className:"font-semibold text-slate-800",children:p.classification})]})]}),p.volatility&&p.volatility!=="n/a"&&t("div",{className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full ${S(p.volatility)}`,children:[q(p.volatility),e("span",{className:"font-medium",children:p.volatility})]})]})]})]}),u&&t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl inline-block mb-4",children:e($e,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.totalSlots}),e("p",{className:"text-slate-600",children:"Sloturi totale"})]}),t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl inline-block mb-4",children:e(Je,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.uniqueLocations}),e("p",{className:"text-slate-600",children:"Locații"})]}),t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl inline-block mb-4",children:e(Ee,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.uniqueCabinets}),e("p",{className:"text-slate-600",children:"Cabinete"})]}),t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl inline-block mb-4",children:e(Xe,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.uniqueGameMixes}),e("p",{className:"text-slate-600",children:"Game Mixes"})]})]}),u&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Object.keys(u.locationStats).length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(Je,{className:"w-5 h-5 text-green-500"}),e("span",{children:"Locații"})]}),e("div",{className:"space-y-3",children:Object.entries(u.locationStats).map(([E,A])=>t("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-green-800 mb-2",children:E}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-green-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-green-800",children:A.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-green-600",children:"Cabinete:"}),e("span",{className:"font-semibold text-green-800",children:A.cabinets.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-green-600",children:"Game Mixes:"}),e("span",{className:"font-semibold text-green-800",children:A.gameMixes.size})]})]})]},E))})]}),Object.keys(u.cabinetStats).length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(Ee,{className:"w-5 h-5 text-purple-500"}),e("span",{children:"Cabinete"})]}),e("div",{className:"space-y-3",children:Object.entries(u.cabinetStats).map(([E,A])=>t("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-purple-800 mb-2",children:E}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-purple-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-purple-800",children:A.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-purple-600",children:"Locații:"}),e("span",{className:"font-semibold text-purple-800",children:A.locations.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-purple-600",children:"Game Mixes:"}),e("span",{className:"font-semibold text-purple-800",children:A.gameMixes.size})]})]})]},E))})]}),Object.keys(u.gameMixStats).length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(Xe,{className:"w-5 h-5 text-orange-500"}),e("span",{children:"Game Mixes"})]}),e("div",{className:"space-y-3",children:Object.entries(u.gameMixStats).map(([E,A])=>t("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-orange-800 mb-2",children:E}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-orange-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-orange-800",children:A.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-orange-600",children:"Locații:"}),e("span",{className:"font-semibold text-orange-800",children:A.locations.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-orange-600",children:"Cabinete:"}),e("span",{className:"font-semibold text-orange-800",children:A.cabinets.size})]})]})]},E))})]}),u&&u.allSlots.length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(Ee,{className:"w-5 h-5 text-blue-500"}),e("span",{children:"Furnizori"})]}),e("div",{className:"space-y-3",children:(()=>{const E={};return u.allSlots.forEach(A=>{A.provider&&(E[A.provider]||(E[A.provider]={count:0,locations:new Set,cabinets:new Set}),E[A.provider].count++,A.location&&E[A.provider].locations.add(A.location),A.cabinet&&E[A.provider].cabinets.add(A.cabinet))}),Object.entries(E).map(([A,B])=>t("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-blue-800 mb-2",children:A}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-blue-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-blue-800",children:B.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-blue-600",children:"Locații:"}),e("span",{className:"font-semibold text-blue-800",children:B.locations.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-blue-600",children:"Cabinete:"}),e("span",{className:"font-semibold text-blue-800",children:B.cabinets.size})]})]})]},A))})()})]})]}),u&&u.allSlots.length>0&&t("div",{className:"card p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center space-x-2",children:[e(et,{className:"w-5 h-5 text-blue-500"}),t("span",{children:["Toate sloturile cu acest joc (",u.allSlots.length,")"]})]}),e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{children:t("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Serial Number"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Locație"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Furnizor"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Cabinet"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Game Mix"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Status"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Denomination"})]})}),e("tbody",{children:u.allSlots.map(E=>t("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700",children:[e("td",{className:"py-3 px-4",children:e("button",{onClick:()=>l(`/slots/${E.id}`),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold hover:underline transition-colors",children:E.serial_number||"N/A"})}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:E.location||"N/A"}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:E.provider||"N/A"}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:E.cabinet||"N/A"}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:E.game_mix||"N/A"}),e("td",{className:"py-3 px-4",children:e("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:E.status||"N/A"})}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:E.denomination||"N/A"})]},E.id))})]})})]})]})}):e(xe,{children:t("div",{className:"text-center py-12",children:[e(Me,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Jocul nu a fost găsit"}),e("button",{onClick:()=>l("/game-mixes/games-library"),className:"btn-primary",children:"Înapoi la Biblioteca Jocuri"})]})})},Ao=({item:a,onClose:l,onSave:r})=>{const{locations:s,cabinets:o,gameMixes:i,providers:n}=de(),[m,p]=h.useState({serial_number:"",provider:"",location:"",game:"",cabinet:"",game_mix:"",denomination:.01,max_bet:"",rtp:"",gaming_places:1,commission_date:"",invoice_number:"",status:"Active",notes:""});h.useEffect(()=>{a&&p({serial_number:a.serial_number||"",provider:a.provider||"",location:a.location||"",game:a.game||"",cabinet:a.cabinet||"",game_mix:a.game_mix||"",denomination:a.denomination||.01,max_bet:a.max_bet||"",rtp:a.rtp||"",gaming_places:a.gaming_places||1,commission_date:a.commission_date||"",invoice_number:a.invoice_number||"",status:a.status||"Active",notes:a.notes||""})},[a]);const c=b=>{const{name:u,value:z}=b.target;p(g=>{const v={...g,[u]:z};if(u==="provider")v.cabinet="",v.game_mix="";else if(u==="cabinet"){v.game_mix="";const y=o.find(T=>T.name===z);y&&y.provider&&y.provider!==v.provider&&(v.provider=y.provider)}return v})};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-emerald-800 to-green-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-600/20 to-green-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl shadow-lg",children:e($e,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Slot":"Adaugă Slot Nou"}),e("p",{className:"text-emerald-100 text-sm font-medium",children:"Completează informațiile despre slot"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:b=>{b.preventDefault(),r(m)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numărul de serie *"}),e("input",{type:"text",name:"serial_number",value:m.serial_number,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Serial number unic",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Locație *"}),t("select",{name:"location",value:m.location,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează locația"}),s==null?void 0:s.map(b=>e("option",{value:b.name,children:b.name},b.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:m.provider,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),n==null?void 0:n.map(b=>e("option",{value:b.name,children:b.name},b.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet"}),t("select",{name:"cabinet",value:m.cabinet,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează cabinetul"}),o.filter(b=>!m.provider||b.provider===m.provider).map(b=>e("option",{value:b.name,children:b.name},b.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix"}),t("select",{name:"game_mix",value:m.game_mix,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează game mix-ul"}),i.filter(b=>!(m.provider&&b.provider!==m.provider)).map(b=>e("option",{value:b.name,children:b.name},b.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:m.status,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,children:[e("option",{value:"Active",children:"Activ"}),e("option",{value:"Inactive",children:"Inactiv"}),e("option",{value:"Maintenance",children:"Mentenanță"})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Denomination"}),e("input",{type:"number",step:"0.01",name:"denomination",value:m.denomination,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Max Bet"}),e("input",{type:"number",step:"0.01",name:"max_bet",value:m.max_bet,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Max bet"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"RTP (%)"}),e("input",{type:"number",step:"0.01",name:"rtp",value:m.rtp,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"RTP"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Gaming Places"}),e("input",{type:"number",name:"gaming_places",value:m.gaming_places,onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"1"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip proprietate"}),e("input",{type:"text",value:"Se actualizează automat din Facturi",readOnly:!0,disabled:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg bg-slate-100 text-slate-500 cursor-not-allowed"})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-xs font-medium text-slate-600",children:"Data comisionării"}),e("input",{type:"text",value:m.commission_date||"Auto din Comisii",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-slate-100 text-slate-600 cursor-not-allowed",readOnly:!0,disabled:!0})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-xs font-medium text-slate-600",children:"Numărul facturii"}),e("input",{type:"text",value:m.invoice_number||"Se actualizează automat din Facturi",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-slate-100 text-slate-600 cursor-not-allowed",readOnly:!0,disabled:!0})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:m.notes,onChange:c,rows:2,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Note adiționale despre slot"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e($e,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Slot"]})]})]})]})})]})})},Do=()=>{const{slots:a,invoices:l,warehouse:r,loading:s,createItem:o,updateItem:i,deleteItem:n,exportToExcel:m,exportToPDF:p}=de(),{user:c}=xa(),d=Ge(),[b,u]=h.useState(""),[z,g]=h.useState("all"),[v,y]=h.useState("all"),[T,j]=h.useState("all"),[x,w]=h.useState(!1),[L,S]=h.useState(null),[q,E]=h.useState([]),[A,B]=h.useState(!1),[D,R]=h.useState(!1),[N,f]=h.useState(!1),[C,_]=h.useState(null),[I,O]=h.useState({totalSlots:!1,activeSlots:!1,inactiveSlots:!1,maintenanceSlots:!1,ownedSlots:!1,rentedSlots:!1});h.useEffect(()=>{(async()=>{var me;if(c!=null&&c.id)try{const Se=(await ke.get(`/api/users/${c.id}`)).data.preferences||{};(me=Se.slots)!=null&&me.cardVisibility&&O(Se.slots.cardVisibility)}catch(pe){console.error("Error loading slots preferences:",pe)}})()},[c==null?void 0:c.id]);const P=async G=>{if(c!=null&&c.id)try{await ke.put(`/api/users/${c.id}/preferences`,{preferences:{slots:{cardVisibility:G}}})}catch(me){console.error("Error saving slots preferences:",me)}},[Y,K]=h.useState(!1);h.useEffect(()=>{B(q.length>0)},[q]);const te=G=>{const me={...I,[G]:!I[G]};O(me),P(me)},ue=()=>{const G={totalSlots:!0,activeSlots:!0,inactiveSlots:!0,maintenanceSlots:!0,ownedSlots:!0,rentedSlots:!0};O(G),P(G)},M=()=>{const G={totalSlots:!1,activeSlots:!1,inactiveSlots:!1,maintenanceSlots:!1,ownedSlots:!1,rentedSlots:!1};O(G),P(G)},W=a.filter(G=>{var Re,Ke,Ze,rt,ct;const me=((Re=G.name)==null?void 0:Re.toLowerCase().includes(b.toLowerCase()))||((Ke=G.model)==null?void 0:Ke.toLowerCase().includes(b.toLowerCase()))||((Ze=G.provider)==null?void 0:Ze.toLowerCase().includes(b.toLowerCase()))||((rt=G.location)==null?void 0:rt.toLowerCase().includes(b.toLowerCase()))||((ct=G.serial_number)==null?void 0:ct.toLowerCase().includes(b.toLowerCase())),pe=z==="all"||G.status===z,Pe=v==="all"||G.provider===v,Se=T==="all"||G.property_type===T;return me&&pe&&Pe&&Se}),U=[...new Set(a.map(G=>G.provider).filter(Boolean))],k=a.length,J=a.filter(G=>G.status==="Active").length,se=a.filter(G=>G.status==="Inactive").length,Ae=a.filter(G=>G.status==="Maintenance").length,_e=a.filter(G=>G.property_type==="Owned").length,ne=a.filter(G=>G.property_type==="Rented").length,ce=[{key:"serial_number",label:"SERIAL NUMBER",sortable:!0,render:G=>e("button",{onClick:()=>d(`/slots/${G.id}`),className:"text-blue-600 hover:text-blue-800 font-semibold text-base hover:underline transition-colors text-left",children:G.serial_number||"N/A"})},{key:"provider",label:"FURNIZOR",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.provider||"N/A"})},{key:"location",label:"LOCAȚIE",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.location||"N/A"})},{key:"cabinet",label:"CABINET",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.cabinet||"N/A"})},{key:"game_mix",label:"GAME MIX",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.game_mix||"N/A"})},{key:"property_type",label:"TIP PROPRIETATE",sortable:!0,render:G=>{const me=l==null?void 0:l.find(Se=>{if(!Se.serial_number||!G.serial_number)return!1;let Re=[];try{typeof Se.serial_number=="string"?Re=JSON.parse(Se.serial_number):Array.isArray(Se.serial_number)?Re=Se.serial_number:Re=[Se.serial_number]}catch{Re=[Se.serial_number.toString()]}return Re.some(Ke=>Ke.toString()===G.serial_number.toString())});let pe=G.property_type||"Necunoscut";return me&&me.invoice_type&&(me.invoice_type==="Vânzare"?pe="Proprietate":me.invoice_type==="Chirie"?pe="Închiriat":pe=me.invoice_type),e("div",{className:"text-slate-800 dark:text-slate-200 font-medium text-sm",children:pe==="Owned"?"Proprietate":pe==="Rented"?"Închiriat":pe==="Proprietate"?"Proprietate":pe==="Închiriat"?"Închiriat":pe})}},{key:"invoice",label:"FACTURĂ",sortable:!1,render:G=>{const me=l==null?void 0:l.find(pe=>{if(!pe.serial_number||!G.serial_number)return!1;let Pe=[];try{typeof pe.serial_number=="string"?Pe=JSON.parse(pe.serial_number):Array.isArray(pe.serial_number)?Pe=pe.serial_number:Pe=[pe.serial_number]}catch{Pe=[pe.serial_number.toString()]}return Pe.some(Se=>Se.toString()===G.serial_number.toString())});return me?t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>d(`/invoices/${me.id}`),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium text-sm hover:underline transition-colors",children:me.invoice_number}),me.file_path&&e("button",{onClick:()=>window.open(me.file_path,"_blank"),className:"p-1 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Vezi factura",children:e(Fe,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 dark:text-slate-500 text-sm",children:"-"})}},{key:"status",label:"STATUS",sortable:!0,render:G=>{var Se;const me=async()=>{var rt;const Re=((rt=G.status)==null?void 0:rt.toLowerCase())||"",Ze=Re==="activ"||Re==="active"?"Inactive":"Active";try{Ze==="Inactive"?(await o("warehouse",{serial_number:G.serial_number,provider:G.provider,location:"Depozit",cabinet:G.cabinet,game_mix:G.game_mix,status:"Inactive",notes:"Mutat automat din sloturi când a devenit inactiv"}),await n("slots",G.id),X.success("Slot mutat în Depozit")):(await i("slots",G.id,{...G,status:Ze}),X.success(`Status schimbat în ${Ze}`))}catch(ct){X.error("Eroare la actualizare status"),console.error("Error updating slot status:",ct)}},pe=((Se=G.status)==null?void 0:Se.toLowerCase())||"",Pe=pe==="activ"||pe==="active";return t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:me,className:`relative inline-flex h-5 w-10 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${Pe?"bg-green-500":"bg-gray-300"}`,children:e("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${Pe?"translate-x-6":"translate-x-1"}`})}),e("span",{className:`text-xs font-bold ${Pe?"text-green-600":"text-gray-600"}`,children:Pe?"ON":"OFF"})]})}},{key:"created_at",label:"DATA CREARE",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.created_at?new Date(G.created_at).toLocaleDateString("ro-RO"):"N/A"})}],he=()=>{S(null),w(!0)},ee=G=>{S(G),w(!0)},H=G=>{d(`/slots/${G.id}`)},Z=G=>{E(G?W.map(me=>me.id):[])},le=(G,me)=>{E(me?[...q,G]:q.filter(pe=>pe!==G))},Q=async()=>{q.length!==0&&f(!0)},Ne=async()=>{try{for(const G of q)await n("slots",G);E([]),B(!1),f(!1),X.success(`${q.length} sloturi șterse cu succes!`)}catch(G){console.error("Error bulk deleting slots:",G),X.error("Eroare la ștergerea sloturilor!")}},ge=()=>{q.length!==0&&(console.log("Bulk edit for slots:",q),X.info("Funcționalitatea de editare în masă va fi implementată în curând!"))},ze=async G=>{_(G),R(!0)},Ve=async()=>{try{await n("slots",C),R(!1),_(null),X.success("Slot șters cu succes!")}catch(G){X.error("Eroare la ștergerea slotului"),console.error("Error deleting slot:",G)}},xt=async G=>{try{L?(await i("slots",L.id,G),X.success("Slot actualizat cu succes!")):(await o("slots",G),X.success("Slot adăugat cu succes!")),w(!1),S(null)}catch(me){X.error("Eroare la salvarea slotului"),console.error("Error saving slot:",me)}},_t=()=>{try{m("slots")}catch(G){X.error("Eroare la exportarea în Excel"),console.error("Error exporting to Excel:",G)}},Et=()=>{try{p("slots")}catch(G){X.error("Eroare la exportarea în PDF"),console.error("Error exporting to PDF:",G)}},At=()=>{X.info("Funcționalitatea de import va fi implementată în curând")};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl shadow-lg shadow-emerald-500/25",children:e($e,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Sloturi"}),e("p",{className:"text-slate-600",children:"Gestionează sloturile de gaming din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>K(!Y),className:"btn-secondary flex items-center space-x-2",children:[e(Ut,{className:"w-4 h-4"}),e("span",{children:"Setări Carduri"})]}),e(at,{onExportExcel:_t,onExportPDF:Et,entity:"slots"}),t("div",{className:"flex space-x-3",children:[A&&t(be,{children:[t("button",{onClick:ge,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:Q,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:()=>d("/slots/history"),className:"btn-secondary flex items-center space-x-2",children:[e(ja,{className:"w-4 h-4"}),e("span",{children:"Istoric Sloturi"})]}),t("button",{onClick:()=>d("/slots/cyber-import"),className:"btn-success flex items-center space-x-2",children:[e(gt,{className:"w-4 h-4"}),e("span",{children:"Import Cyber"})]}),t("button",{onClick:he,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Slot"})]})]})]})]})}),Y&&e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md",children:[t("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Setări Carduri"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Selectează ce carduri să afișezi"})]}),t("div",{className:"p-6 space-y-4",children:[t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Selectează tot"}),t("div",{className:"flex space-x-2",children:[e("button",{onClick:ue,className:"text-xs px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Selectează tot"}),e("button",{onClick:M,className:"text-xs px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Deselectează tot"})]})]}),e("div",{className:"space-y-3",children:[{key:"totalSlots",label:"Total Sloturi"},{key:"activeSlots",label:"Active"},{key:"inactiveSlots",label:"Inactive"},{key:"maintenanceSlots",label:"Mentenanță"},{key:"ownedSlots",label:"Proprietate"},{key:"rentedSlots",label:"Închiriate"}].map(G=>t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:G.label}),e("input",{type:"checkbox",checked:I[G.key],onChange:()=>te(G.key),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})]},G.key))})]}),e("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e("button",{onClick:()=>K(!1),className:"btn-primary px-6 py-2",children:"Salvează"})})]})}),I.totalSlots&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(ut,{title:"Total Sloturi",value:k,icon:$e,color:"blue",trend:null}),I.activeSlots&&e(ut,{title:"Active",value:J,icon:ft,color:"green",trend:null}),I.inactiveSlots&&e(ut,{title:"Inactive",value:se,icon:ht,color:"red",trend:null}),I.maintenanceSlots&&e(ut,{title:"Mentenanță",value:Ae,icon:Ot,color:"yellow",trend:null})]}),(I.ownedSlots||I.rentedSlots)&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[I.ownedSlots&&e(ut,{title:"Proprietate",value:_e,icon:ft,color:"emerald",trend:null}),I.rentedSlots&&e(ut,{title:"Închiriate",value:ne,icon:ht,color:"orange",trend:null})]}),e("div",{className:"card p-6",children:t("div",{className:"flex flex-col lg:flex-row items-start lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[t("div",{className:"relative flex-1 lg:max-w-md",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută după nume, model, furnizor, locație sau numărul de serie...",value:b,onChange:G=>u(G.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),t("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[t("div",{className:"flex items-center space-x-2",children:[e(Ut,{className:"w-4 h-4 text-slate-500"}),e("span",{className:"text-sm font-semibold text-slate-700",children:"Filtre:"})]}),t("select",{value:z,onChange:G=>g(G.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm",children:[e("option",{value:"all",children:"Toate Statusurile"}),e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"}),e("option",{value:"Maintenance",children:"Mentenanță"})]}),t("select",{value:v,onChange:G=>y(G.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm",children:[e("option",{value:"all",children:"Toți Furnizorii"}),U.map(G=>e("option",{value:G,children:G},G))]}),t("select",{value:T,onChange:G=>j(G.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm",children:[e("option",{value:"all",children:"Toate Tipurile"}),e("option",{value:"Owned",children:"Proprietate"}),e("option",{value:"Rented",children:"Închiriate"})]}),t("button",{onClick:At,className:"btn-secondary flex items-center space-x-2 text-sm",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})]})}),e("div",{className:"card p-6",children:s?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})}):W.length===0?t("div",{className:"text-center py-12",children:[e($e,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există sloturi"}),e("p",{className:"text-slate-500",children:"Adaugă primul slot pentru a începe"})]}):e(je,{data:W,columns:ce,onEdit:ee,onDelete:ze,onView:H,searchTerm:b,selectedItems:q,onSelectAll:Z,onSelectItem:le})}),x&&e(Ao,{item:L,onClose:()=>w(!1),onSave:xt}),D&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Le,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[e("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Șterge Slot"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),e("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:"Ești sigur că vrei să ștergi acest slot? Toate datele asociate vor fi șterse permanent."}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),e("button",{onClick:Ve,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Șterge"})]})]})}),N&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Le,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[t("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Șterge ",q.length," Sloturi"]}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),t("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:["Ești sigur că vrei să ștergi ",q.length," sloturi selectate? Toate datele asociate vor fi șterse permanent."]}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),t("button",{onClick:Ne,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:["Șterge ",q.length," Sloturi"]})]})]})})]})})},To=()=>{const{id:a}=qt(),l=Ge(),{slots:r,locations:s,companies:o,providers:i,cabinets:n,gameMixes:m,platforms:p,metrology:c,invoices:d,jackpots:b,loading:u}=de();console.log("🔍 useData Debug:",{loading:u,slots:r==null?void 0:r.length,locations:s==null?void 0:s.length,companies:o==null?void 0:o.length,providers:i==null?void 0:i.length,cabinets:n==null?void 0:n.length,gameMixes:m==null?void 0:m.length,platforms:p==null?void 0:p.length,metrology:c==null?void 0:c.length,invoices:d==null?void 0:d.length,jackpots:b==null?void 0:b.length});const[z,g]=h.useState(!1),[v,y]=h.useState(!0),[T,j]=h.useState([]),x=r==null?void 0:r.find(f=>{const C=f.id==a,_=f.serial_number===a;return console.log(`🔍 Checking slot ${f.id}/${f.serial_number} against ${a}: ${C}/${_}`),C||_});console.log("🔍 SlotDetail Debug:",{id:a,idType:typeof a,slotsCount:r==null?void 0:r.length,slot:x,allSlots:r==null?void 0:r.map(f=>({id:f.id,serial_number:f.serial_number}))}),h.useEffect(()=>{const f=localStorage.getItem("showAttachments");f!==null&&y(JSON.parse(f))},[]),h.useEffect(()=>{(async()=>{if(!(!(x!=null&&x.id)&&!(x!=null&&x.serial_number)))try{const C=await ke.get("/api/slot-history",{params:{slot_id:x.id,limit:3,offset:0}});j(C.data.data||C.data||[])}catch(C){console.error("Error fetching slot history:",C),j([])}})()},[x==null?void 0:x.id,x==null?void 0:x.serial_number]);const w=f=>{y(f),localStorage.setItem("showAttachments",JSON.stringify(f))};if(u)return e(xe,{children:e("div",{className:"flex items-center justify-center min-h-screen",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă detaliile slotului..."})]})})});const L=f=>{const C=s.find(_=>_.id===f||_.name===f);return C?C.name:f},S=f=>{const C=i.find(_=>_.id===f||_.name===f);return C?C.name:f},q=f=>{const C=n.find(_=>_.id===f);return C?C.name||C.model:f},E=f=>{const C=m.find(_=>_.id===f||_.name===f);return C?C.name:f},A=f=>{const C=m.find(_=>_.id===f||_.name===f);return C&&C.platform?C.platform:"N/A"},B=(c==null?void 0:c.filter(f=>f.serial_number===(x==null?void 0:x.serial_number)))||[],D=(d==null?void 0:d.filter(f=>{if(!f.serial_number||!(x!=null&&x.serial_number))return!1;try{return(typeof f.serial_number=="string"?JSON.parse(f.serial_number):Array.isArray(f.serial_number)?f.serial_number:[f.serial_number]).includes(x.serial_number)}catch{return f.serial_number===x.serial_number}}))||[],R=(b==null?void 0:b.filter(f=>f.slot_id===(x==null?void 0:x.id)))||[],N=D.length>0&&D[0].invoice_type==="Vânzare"?"Owned":"Rented";return x?e(xe,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:t("div",{className:"container mx-auto px-4 py-6",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 mb-6",children:e("div",{className:"bg-gradient-to-r from-emerald-800 via-green-800 to-teal-800 px-6 py-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("button",{onClick:()=>l("/slots"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e(Ye,{className:"w-5 h-5 text-white"})}),e("div",{className:"p-2 bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl",children:e($e,{className:"w-6 h-6 text-white"})}),t("div",{children:[t("h1",{className:"text-2xl font-bold text-white",children:["Slot ",x.serial_number]}),t("p",{className:"text-emerald-100",children:["Serial: ",x.serial_number]})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>g(!0),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Setări",children:e(ot,{className:"w-5 h-5 text-white"})}),e("button",{onClick:()=>l(`/slots/${x.id}/edit`),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Editează",children:e(Ue,{className:"w-5 h-5 text-white"})}),e("button",{onClick:()=>{window.confirm("Sigur vrei să ștergi acest slot?")&&(X.success("Slot șters cu succes!"),l("/slots"))},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Șterge",children:e(Le,{className:"w-5 h-5 text-white"})})]})]})})}),z&&e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md",children:[e("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Setări Afișare"})}),e("div",{className:"p-6 space-y-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:"Afișare automată atașamente"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Afișează automat PDF-urile în pagina de detalii"})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:v,onChange:f=>w(f.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),e("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e("button",{onClick:()=>g(!1),className:"btn-primary",children:"Închide"})})]})}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e("div",{children:t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[e(ot,{className:"w-4 h-4 mr-2 text-indigo-600"}),"Informații Slot"]}),t("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t("div",{className:"space-y-2",children:[t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Serial Number"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:x.serial_number})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Locație"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:L(x.location)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Furnizor"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:S(x.provider)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Cabinet"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:q(x.cabinet)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Platformă"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:A(x.game_mix)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Game Mix"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:E(x.game_mix)})]})]}),t("div",{className:"space-y-2",children:[t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Status"}),e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${x.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:x.status})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Denomination"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:x.denomination||"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"RTP"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:x.rtp||"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Gaming Places"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:x.gaming_places||"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Max Bet"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:x.max_bet||"N/A"})]})]})]}),e("div",{className:"border-t border-slate-200 dark:border-slate-700 my-4"}),t("div",{className:"grid grid-cols-3 gap-4",children:[t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tip proprietate"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:N})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Data comisionării"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:x.commissioning_date?new Date(x.commissioning_date).toLocaleDateString("ro-RO"):"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Numărul facturii"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:D.length>0?D[0].invoice_number:"N/A"}),D.length>0&&e("button",{onClick:()=>l(`/invoices/${D[0].id}`),className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 mt-1",children:"Vezi factura →"})]})]})]})}),x.game_mix&&t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[e(Me,{className:"w-4 h-4 mr-2 text-purple-600"}),"Jocuri din Game Mix"]}),t("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg border border-purple-200 dark:border-purple-700 mb-3",children:[e("h4",{className:"font-semibold text-purple-800 dark:text-purple-300 text-sm",children:x.game_mix}),e("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Game Mix activ"})]}),(()=>{const f=m.find(C=>C.name===x.game_mix);if(f&&f.games){const C=typeof f.games=="string"?JSON.parse(f.games):f.games;return t("div",{children:[e("div",{className:"mb-2 p-2 bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/30 dark:to-indigo-900/30 rounded",children:t("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:[t("strong",{children:[C.length," jocuri"]})," în acest game mix",f.rtp&&t("span",{children:[" • RTP mediu: ",f.rtp,"%"]})]})}),e("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:C.map((_,I)=>t("div",{className:"p-2 bg-white dark:bg-slate-700 rounded border border-slate-200 dark:border-slate-600",children:[e("p",{className:"font-medium text-slate-800 dark:text-slate-200 text-xs",children:_}),t("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Joc #",I+1]})]},I))})]})}return e("p",{className:"text-center py-4 text-slate-500 dark:text-slate-400 text-sm",children:"Nu s-au găsit jocuri pentru acest game mix"})})()]}),R.length>0&&t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[e($e,{className:"w-4 h-4 mr-2 text-yellow-600"}),"Jackpots (",R.length,")"]}),e("div",{className:"space-y-2",children:R.map((f,C)=>e("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:f.name}),t("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[f.amount," ",f.currency]}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:f.triggered_date?`Declanșat: ${new Date(f.triggered_date).toLocaleDateString("ro-RO")}`:"Nu a fost declanșat"})]}),e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${f.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:f.status})]})},C))})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("div",{className:"flex items-center justify-between mb-3",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 flex items-center",children:[e(ja,{className:"w-4 h-4 mr-2 text-indigo-600"}),"Istoric Modificări"]}),e("button",{onClick:()=>l("/slots/history"),className:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:"Vezi toate →"})]}),e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full text-sm",children:[e("thead",{children:t("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Data"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Câmp"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Valoare veche"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Valoare nouă"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Utilizator"})]})}),e("tbody",{children:T.length===0?e("tr",{children:e("td",{colSpan:"5",className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:"Nu există modificări înregistrate pentru acest slot."})}):T.map((f,C)=>t("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:new Date(f.created_at).toLocaleDateString("ro-RO")}),e("td",{className:"py-2 px-2",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${f.field_name==="location"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":f.field_name==="status"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":f.field_name==="game_mix"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":f.field_name==="serial_number"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400":f.field_name==="provider"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":f.field_name==="cabinet"?"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"}`,children:f.field_name})}),e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:f.old_value||"N/A"}),e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:f.new_value||"N/A"}),e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:f.username||"Sistem"})]},f.id||C))})]})}),e("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:t("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:["Afișate ultimele 3 modificări pentru slot ",x==null?void 0:x.serial_number," •",e("button",{onClick:()=>l("/slots/history"),className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 ml-1",children:"Vezi istoricul complet"})]})})]})]}),(B.length>0||D.length>0)&&e("div",{className:"mt-6",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(ie,{className:"w-4 h-4 mr-2 text-indigo-600"}),"Atașamente (",B.length+D.length,")"]}),v&&e("div",{className:"mb-4",children:t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[B.length>0&&B[0]&&B[0].cvtFile&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[t("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center",children:[e(ie,{className:"w-3 h-3 mr-1 text-orange-600"}),"CVT ",B[0].cvt_number]}),e("div",{className:"h-64 border border-slate-200 dark:border-slate-600 rounded overflow-hidden",children:e("iframe",{src:`http://localhost:5001/api/cvt-pdf/${B[0].id}`,className:"w-full h-full",title:`CVT Document ${B[0].cvt_number}`})})]}),D.length>0&&D[0]&&D[0].file_path&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[t("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center",children:[e(ie,{className:"w-3 h-3 mr-1 text-blue-600"}),"Factură ",D[0].invoice_number]}),e("div",{className:"h-64 border border-slate-200 dark:border-slate-600 rounded overflow-hidden",children:e("iframe",{src:D[0].file_path,className:"w-full h-full",title:`Factură ${D[0].invoice_number}`})})]})]})}),t("div",{className:"space-y-3",children:[B.length>0&&t("div",{children:[t("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 flex items-center",children:[e(ie,{className:"w-3 h-3 mr-1 text-orange-600"}),"Certificat CVT"]}),e("div",{className:"space-y-2",children:B.map((f,C)=>t("div",{className:"p-2 bg-slate-50 dark:bg-slate-700 rounded-lg flex items-center justify-between",children:[t("div",{className:"flex-1",children:[e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:f.cvt_number}),t("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["CVT: ",new Date(f.cvt_date).toLocaleDateString("ro-RO")," • Expirare: ",f.expiry_date?new Date(f.expiry_date).toLocaleDateString("ro-RO"):"N/A"]})]}),e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${f.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:f.status})]},C))})]}),D.length>0&&t("div",{children:[t("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 flex items-center",children:[e(ie,{className:"w-3 h-3 mr-1 text-blue-600"}),"Facturi"]}),e("div",{className:"space-y-2",children:D.map((f,C)=>t("div",{className:"p-2 bg-slate-50 dark:bg-slate-700 rounded-lg flex items-center justify-between",children:[t("div",{className:"flex-1",children:[e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:f.invoice_number}),t("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[f.amount," ",f.currency," • ",f.invoice_type]})]}),e("button",{onClick:()=>l(`/invoices/${f.id}`),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium text-xs",children:"Vezi →"})]},C))})]})]})]})})]})})}):e(xe,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă..."})]})})})},zo=()=>{const a=Ge(),{slots:l,users:r,loading:s}=de(),[o,i]=h.useState([]),[n,m]=h.useState(!0),[p,c]=h.useState(null),[d,b]=h.useState(!1),[u,z]=h.useState({slot_id:"",serial_number:"",field_name:"",user_id:"",username:"",start_date:"",end_date:"",change_type:""}),[g,v]=h.useState({limit:20,offset:0,total:0,currentPage:1,totalPages:1}),[y,T]=h.useState("created_at"),[j,x]=h.useState("DESC"),w=h.useCallback(async()=>{m(!0),c(null);try{const C={...u,limit:g.limit,offset:(g.currentPage-1)*g.limit,sort_by:y,sort_order:j};Object.keys(C).forEach(I=>{(C[I]===""||C[I]===null||C[I]===void 0)&&delete C[I]});const _=await ke.get("/api/slot-history",{params:C});i(_.data.data||_.data.history||[]),v(I=>{var O,P;return{...I,total:((O=_.data.pagination)==null?void 0:O.total)||_.data.total||0,totalPages:Math.ceil((((P=_.data.pagination)==null?void 0:P.total)||_.data.total||0)/I.limit)}})}catch(C){console.error("Error fetching slot history:",C),c("Eroare la încărcarea istoricului sloturilor."),X.error("Eroare la încărcarea istoricului sloturilor.")}finally{m(!1)}},[u,g.limit,g.currentPage,y,j]);h.useEffect(()=>{w()},[w]);const L=C=>{const{name:_,value:I}=C.target;z(O=>({...O,[_]:I})),v(O=>({...O,currentPage:1,offset:0}))},S=C=>{const _=C.getFullYear(),I=String(C.getMonth()+1).padStart(2,"0"),O=String(C.getDate()).padStart(2,"0");return`${_}-${I}-${O}`},q=()=>{if(!u.start_date||!u.end_date)return"all";const C=new Date,_=new Date(C.getFullYear(),C.getMonth(),C.getDate()),I=S(_);if(u.start_date===I&&u.end_date===I)return"today";const O=_.getDay(),P=O===0?-6:1-O,Y=new Date(_);Y.setDate(_.getDate()+P);const K=new Date(Y);if(K.setDate(Y.getDate()+6),u.start_date===S(Y)&&u.end_date===S(K))return"thisWeek";const te=S(new Date(C.getFullYear(),C.getMonth(),1)),ue=S(new Date(C.getFullYear(),C.getMonth()+1,0));if(u.start_date===te&&u.end_date===ue)return"thisMonth";const M=S(new Date(C.getFullYear(),0,1)),W=S(new Date(C.getFullYear(),11,31));if(u.start_date===M&&u.end_date===W)return"thisYear";const U=S(new Date(C.getFullYear()-1,0,1)),k=S(new Date(C.getFullYear()-1,11,31));return u.start_date===U&&u.end_date===k?"lastYear":"custom"},E=C=>{const _=new Date,I=new Date(_.getFullYear(),_.getMonth(),_.getDate());let O="",P="";switch(C){case"today":O=S(I),P=S(I);break;case"thisWeek":const Y=new Date(I),K=I.getDay(),te=K===0?-6:1-K;Y.setDate(I.getDate()+te),O=S(Y);const ue=new Date(Y);ue.setDate(Y.getDate()+6),P=S(ue);break;case"thisMonth":O=S(new Date(_.getFullYear(),_.getMonth(),1));const M=new Date(_.getFullYear(),_.getMonth()+1,0);P=S(M);break;case"thisYear":O=S(new Date(_.getFullYear(),0,1));const W=new Date(_.getFullYear(),11,31);P=S(W);break;case"lastYear":O=S(new Date(_.getFullYear()-1,0,1));const U=new Date(_.getFullYear()-1,11,31);P=S(U);break;case"all":O="",P="";break}z(Y=>({...Y,start_date:O,end_date:P})),v(Y=>({...Y,currentPage:1,offset:0}))},A=C=>{y===C?x(_=>_==="ASC"?"DESC":"ASC"):(T(C),x("ASC"))},B=C=>{C>0&&C<=g.totalPages&&v(_=>({..._,currentPage:C,offset:(C-1)*_.limit}))},D=(C,_=null)=>{if(_)return _;const I=l==null?void 0:l.find(O=>O.id===C);return I?I.serial_number:"N/A"},R=C=>{const _=r==null?void 0:r.find(I=>I.id===C);return _?_.username:"Sistem"},N=C=>{switch(C.toLowerCase()){case"location":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"status":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"game_mix":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"serial_number":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400";case"provider":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"cabinet":return"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400";default:return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"}},f=C=>C==null?"N/A":typeof C=="boolean"?C?"Da":"Nu":typeof C=="object"?JSON.stringify(C):String(C);return s||n?e(xe,{children:e("div",{className:"flex items-center justify-center min-h-screen",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă istoricul modificărilor..."})]})})}):p?e(xe,{children:e("div",{className:"flex items-center justify-center min-h-screen",children:t("div",{className:"text-center",children:[e("p",{className:"text-red-600 dark:text-red-400 text-lg",children:p}),e("button",{onClick:()=>w(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Reîncearcă"})]})})}):e(xe,{children:t("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 bg-white dark:bg-slate-900 rounded-xl shadow-lg min-h-screen",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[e(ja,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Istoric Modificări Sloturi"]}),t("button",{onClick:()=>a(-1),className:"inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-700 rounded-md shadow-sm text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e(Ye,{className:"w-4 h-4 mr-2"}),"Înapoi"]})]}),t("div",{className:"flex items-center gap-3 mb-6",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",name:"serial_number",value:u.serial_number,onChange:L,placeholder:"Caută după număr serie slot...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:text-slate-200"})]}),e("button",{onClick:()=>b(!d),className:`p-3 rounded-full transition-all duration-200 shadow-lg hover:shadow-xl ${d?"bg-blue-600 text-white hover:bg-blue-700":"bg-blue-500 text-white hover:bg-blue-600"}`,title:"Filtre",children:e(Ut,{className:"w-5 h-5"})})]}),d&&t("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow-inner mb-6",children:[t("div",{className:"mb-4",children:[e("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtre rapide:"}),t("div",{className:"flex flex-wrap gap-2",children:[e("button",{onClick:()=>E("today"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${q()==="today"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Azi"}),e("button",{onClick:()=>E("thisWeek"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${q()==="thisWeek"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Săptămâna curentă"}),e("button",{onClick:()=>E("thisMonth"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${q()==="thisMonth"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Luna curentă"}),e("button",{onClick:()=>E("thisYear"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${q()==="thisYear"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Anul curent"}),e("button",{onClick:()=>E("lastYear"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${q()==="lastYear"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Anul precedent"}),e("button",{onClick:()=>E("all"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${q()==="all"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Toate"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[t("div",{children:[e("label",{htmlFor:"serial_number",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Număr Serie Slot"}),e("input",{type:"text",name:"serial_number",id:"serial_number",value:u.serial_number,onChange:L,placeholder:"Caută după număr serie",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"field_name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Câmp Modificat"}),e("input",{type:"text",name:"field_name",id:"field_name",value:u.field_name,onChange:L,placeholder:"Ex: location, status",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Utilizator"}),e("input",{type:"text",name:"username",id:"username",value:u.username,onChange:L,placeholder:"Nume utilizator",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"change_type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tip Modificare"}),t("select",{name:"change_type",id:"change_type",value:u.change_type,onChange:L,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200",children:[e("option",{value:"",children:"Toate"}),e("option",{value:"CREATE",children:"Creare"}),e("option",{value:"UPDATE",children:"Actualizare"}),e("option",{value:"DELETE",children:"Ștergere"})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("label",{htmlFor:"start_date",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Data Început"}),e("input",{type:"date",name:"start_date",id:"start_date",value:u.start_date,onChange:L,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"end_date",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Data Sfârșit"}),e("input",{type:"date",name:"end_date",id:"end_date",value:u.end_date,onChange:L,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow border border-slate-200 dark:border-slate-700 flex items-center",children:[e(it,{className:"w-6 h-6 text-indigo-500 mr-3"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Modificări"}),e("p",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:g.total})]})]}),t("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow border border-slate-200 dark:border-slate-700 flex items-center",children:[e(gt,{className:"w-6 h-6 text-green-500 mr-3"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Sloturi Modificate"}),e("p",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:new Set(o.map(C=>C.slot_id)).size})]})]}),t("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow border border-slate-200 dark:border-slate-700 flex items-center",children:[e(zt,{className:"w-6 h-6 text-blue-500 mr-3"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Utilizatori Unici"}),e("p",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:new Set(o.map(C=>C.user_id)).size})]})]})]}),e("div",{className:"overflow-x-auto bg-white dark:bg-slate-800 rounded-lg shadow border border-slate-200 dark:border-slate-700",children:t("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e("thead",{className:"bg-slate-50 dark:bg-slate-700",children:t("tr",{children:[t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("created_at"),children:["Data",y==="created_at"&&e("span",{className:"ml-1",children:j==="ASC"?"▲":"▼"})]}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("serial_number"),children:["Slot",y==="serial_number"&&e("span",{className:"ml-1",children:j==="ASC"?"▲":"▼"})]}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("field_name"),children:["Câmp",y==="field_name"&&e("span",{className:"ml-1",children:j==="ASC"?"▲":"▼"})]}),e("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Valoare Veche"}),e("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Valoare Nouă"}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("username"),children:["Utilizator",y==="username"&&e("span",{className:"ml-1",children:j==="ASC"?"▲":"▼"})]}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("change_type"),children:["Tip",y==="change_type"&&e("span",{className:"ml-1",children:j==="ASC"?"▲":"▼"})]})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.length===0?e("tr",{children:e("td",{colSpan:"7",className:"px-4 py-4 text-center text-slate-500 dark:text-slate-400",children:"Nu s-au găsit modificări."})}):o.map(C=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(C.created_at).toLocaleString("ro-RO")}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-600 dark:text-indigo-400",children:e("button",{onClick:()=>a(`/slots/${C.slot_id}`),className:"hover:underline",children:C.slot_serial||D(C.slot_id,C.serial_number)})}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${N(C.field_name)}`,children:C.field_name})}),e("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300 max-w-xs truncate",children:f(C.old_value)}),e("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300 max-w-xs truncate",children:f(C.new_value)}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:C.username||R(C.user_id)}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${C.change_type==="CREATE"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":C.change_type==="DELETE"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:C.change_type})})]},C.id))})]})}),g.totalPages>1&&t("nav",{className:"flex items-center justify-between px-4 py-3 sm:px-6 mt-4 bg-white dark:bg-slate-800 rounded-lg shadow border border-slate-200 dark:border-slate-700","aria-label":"Pagination",children:[t("div",{className:"flex-1 flex justify-between sm:justify-end",children:[e("button",{onClick:()=>B(g.currentPage-1),disabled:g.currentPage===1,className:"relative inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e("button",{onClick:()=>B(g.currentPage+1),disabled:g.currentPage===g.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Următor"})]}),t("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e("div",{children:t("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Afișez"," ",e("span",{className:"font-medium",children:(g.currentPage-1)*g.limit+1})," ","până la"," ",e("span",{className:"font-medium",children:Math.min(g.currentPage*g.limit,g.total)})," ","din"," ",e("span",{className:"font-medium",children:g.total})," ","rezultate"]})}),e("div",{children:e("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:g.totalPages},(C,_)=>_+1).map(C=>e("button",{onClick:()=>B(C),"aria-current":C===g.currentPage?"page":void 0,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${C===g.currentPage?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-600 dark:text-indigo-400":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-600"}`,children:C},C))})})]})]}),e("div",{className:"mt-6 text-right",children:t("button",{className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e(De,{className:"w-4 h-4 mr-2"}),"Exportă CSV"]})})]})})},Po=()=>{const a=Ge(),l=h.useRef(null),[r,s]=h.useState([]),[o,i]=h.useState([]),[n,m]=h.useState([]),[p,c]=h.useState([]),[d,b]=h.useState(!1),[u,z]=h.useState(""),[g,v]=h.useState(new Set),[y,T]=h.useState(new Set),[j,x]=h.useState(!1),[w,L]=h.useState("slots");h.useState(!0);const[S,q]=h.useState({provider:"",cabinet:"",gameMix:"",status:""}),[E,A]=h.useState({company:"",city:"",status:""}),B=k=>{const J=k.target.files[0];if(!J)return;const se=new FileReader;se.onload=Ae=>{try{const ne=JSON.parse(Ae.target.result).map(ce=>({id:ce.id,serial_number:ce.serial_number||ce.slot_id,provider:ce.provider||"N/A",cabinet:ce.cabinet||"N/A",game_mix:ce.game_mix||"N/A",status:ce.status||"Active",location:ce.location||"N/A",last_updated:ce.updated_at||ce.created_at,created_at:ce.created_at}));s(ne),m(ne),X.success(`Încărcate ${ne.length} sloturi din fișier`)}catch(_e){console.error("Error parsing JSON:",_e),X.error("Eroare la citirea fișierului. Verifică că este un JSON valid.")}},se.readAsText(J)},D=async()=>{b(!0);try{const k=await ke.get("/api/cyber/slots",{timeout:3e4});s(k.data),m(k.data),X.success(`Încărcate ${k.data.length} sloturi din Cyber`)}catch(k){console.error("Error fetching Cyber slots from API, loading from JSON file:",k);try{const J=await ke.get("/cyber-slots.json");s(J.data),m(J.data),X.success(`Încărcate ${J.data.length} sloturi din fișierul Cyber`)}catch(J){console.error("Error loading from JSON file, using demo data:",J);const se=[{id:1,serial_number:"149616",provider:"EGT",cabinet:"P42V Curved ST",game_mix:"EGT - Union",status:"Active",location:"Craiova",last_updated:"2025-10-15T11:00:00.000Z",created_at:"2025-09-30T05:41:41.000Z"},{id:2,serial_number:"149597",provider:"EGT",cabinet:"P 32/32 H ST",game_mix:null,status:"Active",location:"Ploiești",last_updated:"2025-10-15T11:00:00.000Z",created_at:"2025-09-25T08:14:46.000Z"},{id:3,serial_number:"823642",provider:"Novomatic",cabinet:"FV637C F2",game_mix:null,status:"Inactive",location:"București",last_updated:"2025-10-15T11:00:00.000Z",created_at:"2025-10-01T10:00:00.000Z"}];s(se),m(se),X.success(`Încărcate ${se.length} sloturi (date demo)`)}}finally{b(!1)}},R=async()=>{b(!0);try{const k=await ke.get("/api/cyber/locations",{timeout:3e4});i(k.data),c(k.data),X.success(`Încărcate ${k.data.length} locații din Cyber`)}catch(k){console.error("Error fetching Cyber locations from API, loading from JSON file:",k);try{const J=await ke.get("/cyber-locations.json");i(J.data),c(J.data),X.success(`Încărcate ${J.data.length} locații din fișierul Cyber`)}catch(J){console.error("Error loading from JSON file, using demo data:",J);const se=[{id:1,name:"Craiova",location:"Craiova",address:"Str. Principală 123",city:"Craiova",company:"ENTERTAINMENT SOLUTIONS SRL",surface_area:100,status:"Active",last_updated:"2025-10-15T11:00:00.000Z",created_at:"2025-01-01T10:00:00.000Z"},{id:2,name:"Ploiești",location:"Ploiești",address:"Bld. Republicii 21",city:"Ploiești",company:"SMARTFLIX SRL",surface_area:80,status:"Active",last_updated:"2025-10-15T11:00:00.000Z",created_at:"2025-01-01T10:00:00.000Z"},{id:3,name:"București",location:"București",address:"Calea Victoriei 100",city:"București",company:"ENTERTAINMENT SOLUTIONS SRL",surface_area:150,status:"Active",last_updated:"2025-10-15T11:00:00.000Z",created_at:"2025-01-01T10:00:00.000Z"}];i(se),c(se),X.success(`Încărcate ${se.length} locații (date demo)`)}}finally{b(!1)}};h.useEffect(()=>{D(),R()},[]),h.useEffect(()=>{let k=r;u&&(k=k.filter(J=>{var se,Ae,_e,ne;return((se=J.serial_number)==null?void 0:se.toLowerCase().includes(u.toLowerCase()))||((Ae=J.provider)==null?void 0:Ae.toLowerCase().includes(u.toLowerCase()))||((_e=J.cabinet)==null?void 0:_e.toLowerCase().includes(u.toLowerCase()))||((ne=J.game_mix)==null?void 0:ne.toLowerCase().includes(u.toLowerCase()))})),S.provider&&(k=k.filter(J=>J.provider===S.provider)),S.cabinet&&(k=k.filter(J=>J.cabinet===S.cabinet)),S.gameMix&&(k=k.filter(J=>J.game_mix===S.gameMix)),S.status&&(k=k.filter(J=>J.status===S.status)),m(k)},[r,u,S]),h.useEffect(()=>{let k=o;u&&(k=k.filter(J=>{var se,Ae,_e,ne;return((se=J.name)==null?void 0:se.toLowerCase().includes(u.toLowerCase()))||((Ae=J.address)==null?void 0:Ae.toLowerCase().includes(u.toLowerCase()))||((_e=J.city)==null?void 0:_e.toLowerCase().includes(u.toLowerCase()))||((ne=J.company)==null?void 0:ne.toLowerCase().includes(u.toLowerCase()))})),E.company&&(k=k.filter(J=>J.company===E.company)),E.city&&(k=k.filter(J=>J.city===E.city)),E.status&&(k=k.filter(J=>J.status===E.status)),c(k)},[o,u,E]);const N=k=>[...new Set(r.map(J=>J[k]).filter(Boolean))],f=k=>[...new Set(o.map(J=>J[k]).filter(Boolean))],C=k=>{const J=new Set(g);J.has(k)?J.delete(k):J.add(k),v(J)},_=k=>{const J=new Set(y);J.has(k)?J.delete(k):J.add(k),T(J)},I=()=>{const k=n.map(J=>J.id);v(new Set(k))},O=()=>{const k=p.map(J=>J.id);T(new Set(k))},P=()=>{v(new Set)},Y=()=>{T(new Set)},K=async()=>{if(g.size===0){X.error("Selectează cel puțin un element pentru import");return}try{const k=n.filter(se=>g.has(se.id)),J=await ke.post("/api/slots/import-marina",{items:k});X.success(`${J.data.imported} sloturi importate cu succes!`),v(new Set),D()}catch(k){console.error("Error importing slots:",k),X.error("Eroare la importarea sloturilor")}},te=async()=>{if(y.size===0){X.error("Selectează cel puțin o locație pentru import");return}try{const k=p.filter(se=>y.has(se.id)),J=await ke.post("/api/locations/import-marina",{items:k});X.success(`${J.data.imported} locații importate cu succes!`),T(new Set),R()}catch(k){console.error("Error importing locations:",k),X.error("Eroare la importarea locațiilor")}},ue=async()=>{if(n.length===0){X.error("Nu există date de importat");return}try{const k=await ke.post("/api/slots/import-marina",{items:n});X.success(`${k.data.imported} sloturi importate cu succes!`),v(new Set),D()}catch(k){console.error("Error importing all slots:",k),X.error("Eroare la importarea sloturilor")}},M=async()=>{if(p.length===0){X.error("Nu există locații de importat");return}try{const k=await ke.post("/api/locations/import-marina",{items:p});X.success(`${k.data.imported} locații importate cu succes!`),T(new Set),R()}catch(k){console.error("Error importing all locations:",k),X.error("Eroare la importarea locațiilor")}};h.useEffect(()=>{D(),R()},[]);const W=[{key:"select",title:"",sortable:!1,render:k=>e("input",{type:"checkbox",checked:g.has(k.id),onChange:()=>C(k.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})},{key:"serial_number",title:"Serial Number",sortable:!0,render:k=>e("div",{className:"font-mono text-sm font-medium text-slate-800 dark:text-slate-200",children:k.serial_number||"N/A"})},{key:"provider",title:"Provider",sortable:!0,render:k=>e("div",{className:"text-slate-800 dark:text-slate-200 font-medium",children:k.provider||"N/A"})},{key:"cabinet",title:"Cabinet",sortable:!0,render:k=>e("div",{className:"text-slate-800 dark:text-slate-200",children:k.cabinet||"N/A"})},{key:"game_mix",title:"Game Mix",sortable:!0,render:k=>e("div",{className:"text-slate-800 dark:text-slate-200",children:k.game_mix||"N/A"})},{key:"status",title:"Status",sortable:!0,render:k=>e("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.status==="Active"?"bg-green-100 text-green-800":k.status==="Inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:k.status||"N/A"})},{key:"location",title:"Location",sortable:!0,render:k=>e("div",{className:"text-slate-600 dark:text-slate-400",children:k.location||"N/A"})},{key:"last_updated",title:"Last Updated",sortable:!0,render:k=>e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:k.last_updated?new Date(k.last_updated).toLocaleDateString("ro-RO"):"N/A"})}],U=[{key:"select",title:"",sortable:!1,render:k=>e("input",{type:"checkbox",checked:y.has(k.id),onChange:()=>_(k.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})},{key:"name",title:"Nume Locație",sortable:!0,render:k=>e("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:k.name||"N/A"})},{key:"address",title:"Adresă",sortable:!0,render:k=>e("div",{className:"text-slate-800 dark:text-slate-200",children:k.address||"N/A"})},{key:"city",title:"Oraș",sortable:!0,render:k=>e("div",{className:"text-slate-800 dark:text-slate-200",children:k.city||"N/A"})},{key:"company",title:"Companie",sortable:!0,render:k=>e("div",{className:"text-slate-800 dark:text-slate-200 font-medium",children:k.company||"N/A"})},{key:"surface_area",title:"Suprafață (m²)",sortable:!0,render:k=>e("div",{className:"text-slate-600 dark:text-slate-400",children:k.surface_area?`${k.surface_area} m²`:"N/A"})},{key:"status",title:"Status",sortable:!0,render:k=>e("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.status==="Active"?"bg-green-100 text-green-800":k.status==="Inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:k.status||"N/A"})},{key:"last_updated",title:"Ultima Actualizare",sortable:!0,render:k=>e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:k.last_updated?new Date(k.last_updated).toLocaleDateString("ro-RO"):"N/A"})}];return e(xe,{children:t("div",{className:"p-6 space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>a("/slots"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e(Ye,{className:"w-5 h-5"})}),t("div",{children:[t("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 flex items-center space-x-2",children:[e(gt,{className:"w-6 h-6"}),e("span",{children:"Import Cyber"})]}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Importează datele din serverul Cyber"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>{var k;return(k=l.current)==null?void 0:k.click()},className:"btn-success flex items-center space-x-2",children:[e(vl,{className:"w-4 h-4"}),e("span",{children:"Încarcă JSON"})]}),e("input",{ref:l,type:"file",accept:".json",onChange:B,className:"hidden"}),t("button",{onClick:w==="slots"?D:R,disabled:d,className:"btn-secondary flex items-center space-x-2",children:[e(He,{className:`w-4 h-4 ${d?"animate-spin":""}`}),e("span",{children:"Refresh Cyber DB"})]})]})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:e("div",{className:"border-b border-slate-200 dark:border-slate-700",children:t("nav",{className:"-mb-px flex space-x-8 px-6",children:[t("button",{onClick:()=>L("slots"),className:`py-4 px-1 border-b-2 font-medium text-sm ${w==="slots"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Sloturi (",r.length,")"]}),t("button",{onClick:()=>L("locations"),className:`py-4 px-1 border-b-2 font-medium text-sm ${w==="locations"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Locații (",o.length,")"]})]})})}),t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:w==="slots"?r.length:o.length}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total înregistrări"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-blue-600",children:w==="slots"?n.length:p.length}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Filtrate"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-green-600",children:w==="slots"?g.size:y.size}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Selectate"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-purple-600",children:w==="slots"?N("provider").length:f("company").length}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:w==="slots"?"Provideri":"Companii"})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[t("div",{className:"flex flex-col lg:flex-row gap-4",children:[e("div",{className:"flex-1",children:t("div",{className:"relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),e("input",{type:"text",placeholder:w==="slots"?"Caută după serial, provider, cabinet...":"Caută după nume, adresă, oraș, companie...",value:u,onChange:k=>z(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})}),t("button",{onClick:()=>x(!j),className:"btn-secondary flex items-center space-x-2",children:[e(Ut,{className:"w-4 h-4"}),e("span",{children:"Filtre"})]})]}),j&&e("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:e("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:w==="slots"?t(be,{children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Provider"}),t("select",{value:S.provider,onChange:k=>q({...S,provider:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),N("provider").map(k=>e("option",{value:k,children:k},k))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cabinet"}),t("select",{value:S.cabinet,onChange:k=>q({...S,cabinet:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),N("cabinet").map(k=>e("option",{value:k,children:k},k))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Game Mix"}),t("select",{value:S.gameMix,onChange:k=>q({...S,gameMix:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),N("game_mix").map(k=>e("option",{value:k,children:k},k))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),t("select",{value:S.status,onChange:k=>q({...S,status:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),N("status").map(k=>e("option",{value:k,children:k},k))]})]})]}):t(be,{children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Companie"}),t("select",{value:E.company,onChange:k=>A({...E,company:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),f("company").map(k=>e("option",{value:k,children:k},k))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Oraș"}),t("select",{value:E.city,onChange:k=>A({...E,city:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),f("city").map(k=>e("option",{value:k,children:k},k))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),t("select",{value:E.status,onChange:k=>A({...E,status:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),f("status").map(k=>e("option",{value:k,children:k},k))]})]}),e("div",{})]})})})]}),t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:w==="slots"?I:O,className:"btn-secondary flex items-center space-x-2",children:[e(ft,{className:"w-4 h-4"}),e("span",{children:"Selectează toate"})]}),t("button",{onClick:w==="slots"?P:Y,className:"btn-secondary flex items-center space-x-2",children:[e(gr,{className:"w-4 h-4"}),e("span",{children:"Deselectează toate"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:w==="slots"?K:te,disabled:w==="slots"?g.size===0:y.size===0,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e(ye,{className:"w-4 h-4"}),t("span",{children:["Importă selectate (",w==="slots"?g.size:y.size,")"]})]}),t("button",{onClick:w==="slots"?ue:M,disabled:w==="slots"?n.length===0:p.length===0,className:"btn-success flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e(De,{className:"w-4 h-4"}),t("span",{children:["Importă toate (",w==="slots"?n.length:p.length,")"]})]})]})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e("tr",{children:(w==="slots"?W:U).map(k=>e("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:k.title},k.key))})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:d?e("tr",{children:e("td",{colSpan:(w==="slots"?W:U).length,className:"px-6 py-12 text-center",children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(He,{className:"w-5 h-5 animate-spin text-blue-600"}),e("span",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă datele din Cyber..."})]})})}):(w==="slots"?n:p).length===0?e("tr",{children:e("td",{colSpan:(w==="slots"?W:U).length,className:"px-6 py-12 text-center",children:e("div",{className:"text-slate-500 dark:text-slate-400",children:w==="slots"?r.length===0?"Nu există sloturi în Cyber":"Nu există rezultate pentru filtrele aplicate":o.length===0?"Nu există locații în Cyber":"Nu există rezultate pentru filtrele aplicate"})})}):(w==="slots"?n:p).map((k,J)=>e("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:(w==="slots"?W:U).map(se=>e("td",{className:"px-6 py-4 whitespace-nowrap",children:se.render?se.render(k):k[se.key]},se.key))},k.id||J))})]})})})]})})},Fo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",category:"",quantity:"",location:"",status:"Available",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",category:a.category||"",quantity:a.quantity||"",location:a.location||"",status:a.status||"Available",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;o(d=>({...d,[p]:c}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-orange-800 to-amber-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600/20 to-amber-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-amber-500 rounded-2xl shadow-lg",children:e(Ya,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Produs":"Adaugă Produs în Depozit"}),e("p",{className:"text-orange-100 text-sm font-medium",children:"Completează informațiile despre produs"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Produs *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Nume produs",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Categorie *"}),e("input",{type:"text",name:"category",value:s.category,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Categoria produsului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cantitate *"}),e("input",{type:"number",name:"quantity",value:s.quantity,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Cantitatea",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Locație *"}),e("input",{type:"text",name:"location",value:s.location,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Locația în depozit",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",required:!0,children:[e("option",{value:"Available",children:"Disponibil"}),e("option",{value:"Out of Stock",children:"Stoc epuizat"}),e("option",{value:"Reserved",children:"Rezervat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Ya,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Produs"]})]})]})]})})]})})},Lo=()=>{const{warehouse:a,slots:l,loading:r,createItem:s,updateItem:o,deleteItem:i,exportToExcel:n,exportToPDF:m}=de(),[p,c]=h.useState(""),[d,b]=h.useState([]),[u,z]=h.useState(!1),[g,v]=h.useState(!1);h.useEffect(()=>{z(d.length>0)},[d]);const y=P=>{b(P?A.map(Y=>Y.id):[])},T=(P,Y)=>{b(Y?[...d,P]:d.filter(K=>K!==P))},j=async()=>{d.length!==0&&v(!0)},x=async()=>{try{for(const P of d)await i("warehouse",P);b([]),z(!1),v(!1),X.success(`${d.length} elemente șterse cu succes!`)}catch(P){console.error("Error bulk deleting:",P),X.error("Eroare la ștergerea elementelor!")}},w=()=>{d.length!==0&&console.log("Bulk edit for:",d)},[L,S]=h.useState(!1),[q,E]=h.useState(null),A=a.filter(P=>{var Y,K,te,ue,M;return((Y=P.serial_number)==null?void 0:Y.toLowerCase().includes(p.toLowerCase()))||((K=P.provider)==null?void 0:K.toLowerCase().includes(p.toLowerCase()))||((te=P.location)==null?void 0:te.toLowerCase().includes(p.toLowerCase()))||((ue=P.cabinet)==null?void 0:ue.toLowerCase().includes(p.toLowerCase()))||((M=P.game_mix)==null?void 0:M.toLowerCase().includes(p.toLowerCase()))}),B=a.length,D=a.filter(P=>P.status==="Inactive").length,R=[{key:"serial_number",label:"SERIAL NUMBER",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-semibold text-base",children:P.serial_number||"N/A"})},{key:"provider",label:"FURNIZOR",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.provider||"N/A"})},{key:"location",label:"LOCAȚIE",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.location||"N/A"})},{key:"cabinet",label:"CABINET",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.cabinet||"N/A"})},{key:"game_mix",label:"GAME MIX",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.game_mix||"N/A"})},{key:"status",label:"STATUS",sortable:!0,render:P=>{var ue;const Y=async()=>{var k;const M=((k=P.status)==null?void 0:k.toLowerCase())||"",U=M==="activ"||M==="active"?"Inactive":"Active";try{U==="Active"?(await s("slots",{name:"Slot Machine",serial_number:P.serial_number,provider:P.provider,location:"Locație principală",game:"",cabinet:P.cabinet,game_mix:P.game_mix,denomination:.01,max_bet:null,rtp:null,gaming_places:1,property_type:"Owned",commission_date:null,invoice_number:null,status:"Active",notes:"Mutat automat din depozit când a devenit activ"}),await i("warehouse",P.id),X.success("Slot mutat înapoi în sloturi")):(await o("warehouse",P.id,{...P,status:U}),X.success(`Status schimbat în ${U}`))}catch(J){X.error("Eroare la actualizare status"),console.error("Error updating warehouse slot status:",J)}},K=((ue=P.status)==null?void 0:ue.toLowerCase())||"",te=K==="activ"||K==="active";return t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:Y,className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${te?"bg-green-500":"bg-gray-300"}`,children:e("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${te?"translate-x-9":"translate-x-1"}`})}),e("span",{className:`text-xs font-bold ${te?"text-green-600":"text-gray-600"}`,children:te?"ON":"OFF"})]})}},{key:"created_by",label:"CREAT DE",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.created_at?new Date(P.created_at).toLocaleDateString("ro-RO"):"N/A"})}],N=P=>{E(P),S(!0)},f=async P=>{if(window.confirm("Sigur vrei să ștergi acest slot din depozit?"))try{await i("warehouse",P),X.success("Slot șters din depozit cu succes!")}catch(Y){X.error("Eroare la ștergerea slotului"),console.error("Error deleting slot from warehouse:",Y)}},C=()=>{E(null),S(!0)},_=async P=>{try{q?(await o("warehouse",q.id,P),X.success("Slot actualizat cu succes!")):(await s("warehouse",P),X.success("Slot adăugat în depozit cu succes!")),S(!1),E(null)}catch(Y){X.error("Eroare la salvarea slotului"),console.error("Error saving slot to warehouse:",Y)}};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-slate-500 to-gray-500 rounded-2xl shadow-lg shadow-slate-500/25",children:e(Mt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Depozit Sloturi"}),e("p",{className:"text-slate-600",children:"Sloturile inactive din depozit"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{n("warehouse")}catch(P){console.error("Error exporting to Excel:",P)}},onExportPDF:()=>{try{m("warehouse")}catch(P){console.error("Error exporting to PDF:",P)}},entity:"warehouse"}),u&&t(be,{children:[t("button",{onClick:w,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:j,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:C,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Slot"})]})]})]})}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(ut,{title:"Total Sloturi",value:B,icon:$e,color:"blue",trend:null}),e(ut,{title:"Inactive",value:D,icon:ht,color:"red",trend:null})]}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută după numărul de serie, furnizor, locație, cabinet sau game mix...",value:p,onChange:P=>c(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:r?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-500"})}):A.length===0?t("div",{className:"text-center py-12",children:[e(Mt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există sloturi în depozit"}),e("p",{className:"text-slate-500",children:"Sloturile inactive vor apărea aici automat"})]}):e(je,{data:A,columns:R,onEdit:N,onDelete:f,searchTerm:p,selectedItems:d,onSelectAll:y,onSelectItem:T,moduleColor:"red"})}),L&&e(Fo,{item:q,onClose:()=>S(!1),onSave:_}),g&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Le,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[t("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Șterge ",d.length," Elemente"]}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),t("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:["Ești sigur că vrei să ștergi ",d.length," elemente selectate din depozit? Toate datele asociate vor fi șterse permanent."]}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),t("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:["Șterge ",d.length," Elemente"]})]})]})})]})})},Io=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState([]),[i,n]=h.useState([]),[m,p]=h.useState([]),[c,d]=h.useState([]),[b,u]=h.useState([]),[z,g]=h.useState([]),[v,y]=h.useState({cvt_number:"",serial_number:"",cvt_type:"Periodică",cvt_date:"",expiry_date:"",issuing_authority:"",provider:"",cabinet:"",game_mix:"",approval_type:"",software:"",cvtFile:null,cvtPreview:null,notes:""});h.useEffect(()=>{if((async()=>{try{const[B,D,R,N,f,C]=await Promise.all([fetch("/api/authorities"),fetch("/api/providers"),fetch("/api/cabinets"),fetch("/api/gameMixes"),fetch("/api/approvals"),fetch("/api/software")]),[_,I,O,P,Y,K]=await Promise.all([B.json(),D.json(),R.json(),N.json(),f.json(),C.json()]);o(Array.isArray(_)?_:[]),n(Array.isArray(I)?I:[]),p(Array.isArray(O)?O:[]),d(Array.isArray(P)?P:[]),u(Array.isArray(Y)?Y:[]),g(Array.isArray(K)?K:[])}catch(B){console.error("Error loading data:",B)}})(),a){const B=D=>{if(!D)return"";const R=new Date(D);return isNaN(R.getTime())?"":R.toISOString().split("T")[0]};y({cvt_number:a.cvt_number||"",serial_number:a.serial_number||"",cvt_type:a.cvt_type||"Periodică",cvt_date:B(a.cvt_date),expiry_date:B(a.expiry_date),issuing_authority:a.issuing_authority||"",provider:a.provider||"",cabinet:a.cabinet||"",game_mix:a.game_mix||"",approval_type:a.approval_type||"",software:a.software||"",cvtFile:a.cvtFile||null,cvtPreview:a.cvtFile||null,notes:a.notes||""})}},[a]);const T=()=>v.provider?m.filter(A=>A.provider===v.provider||A.provider_name===v.provider):m,j=()=>v.provider?c.filter(A=>A.provider===v.provider||A.provider_name===v.provider):c,x=()=>{if(!v.cabinet)return b;const A=m.find(B=>B.name===v.cabinet||B.model===v.cabinet);return A?b.filter(B=>B.cabinet===v.cabinet||B.model===A.model):b},w=()=>{if(!v.game_mix)return z;const A=c.find(B=>B.name===v.game_mix);return A?z.filter(B=>B.game_mix===v.game_mix||B.provider===A.provider):z},L=A=>{const{name:B,value:D}=A.target;y(R=>{const N={...R,[B]:D};if(B==="provider"?(N.cabinet="",N.game_mix="",N.approval_type="",N.software=""):B==="cabinet"?(N.approval_type="",N.software=""):B==="game_mix"&&(N.software=""),(B==="cvt_type"||B==="cvt_date")&&(N.cvt_type==="Periodică"||N.cvt_type==="Inițială")&&N.cvt_date){const f=new Date(N.cvt_date),C=new Date(f);C.setFullYear(C.getFullYear()+1),C.setDate(C.getDate()-1),N.expiry_date=C.toISOString().split("T")[0]}return N})},S=A=>{const B=A.target.files[0];if(B){const D=new FileReader;D.onload=R=>{y(N=>({...N,cvtFile:R.target.result,cvtPreview:R.target.result}))},D.readAsDataURL(B)}},q=()=>{window.confirm("Sigur doriți să ștergeți documentul CVT?")&&y(A=>({...A,cvtFile:null,cvtPreview:null}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-cyan-800 to-teal-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-600/20 to-teal-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-cyan-500 to-teal-500 rounded-2xl shadow-lg",children:e(et,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Certificat":"Adaugă Certificat Nou"}),e("p",{className:"text-cyan-100 text-sm font-medium",children:"Completează informațiile despre certificatul de metrologie"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:A=>{A.preventDefault(),r(v)},className:"p-6 space-y-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații CVT"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Număr CVT *"}),e("input",{type:"text",name:"cvt_number",value:v.cvt_number,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"Numărul CVT",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Număr de Serie *"}),e("input",{type:"text",name:"serial_number",value:v.serial_number,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"Serial number slot",required:!0}),e("p",{className:"text-xs text-slate-500",children:"Numărul de serie care leagă CVT-ul cu slot-ul din aplicație"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip CVT *"}),t("select",{name:"cvt_type",value:v.cvt_type,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0,children:[e("option",{value:"Periodică",children:"Periodică"}),e("option",{value:"Inițială",children:"Inițială"}),e("option",{value:"Reparație",children:"Reparație"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data CVT *"}),e("input",{type:"date",name:"cvt_date",value:v.cvt_date,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data expirării *"}),e("input",{type:"date",name:"expiry_date",value:v.expiry_date,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0,disabled:v.cvt_type==="Periodică"||v.cvt_type==="Inițială"}),v.cvt_type==="Periodică"||v.cvt_type==="Inițială"?e("p",{className:"text-xs text-slate-500",children:"Calculat automat: 1 an - 1 zi"}):e("p",{className:"text-xs text-slate-500",children:"Completează manual pentru Reparație"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Autoritatea emitentă"}),t("select",{name:"issuing_authority",value:v.issuing_authority,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează autoritatea emitentă"}),s.map(A=>e("option",{value:A.name,children:A.name},A.id))]})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații Dispozitiv"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor"}),t("select",{name:"provider",value:v.provider,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează furnizorul"}),i.map(A=>e("option",{value:A.name,children:A.name},A.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet"}),t("select",{name:"cabinet",value:v.cabinet,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.provider,children:[e("option",{value:"",children:v.provider?"Selectează cabinetul":"Selectează mai întâi furnizorul"}),T().map(A=>e("option",{value:A.name,children:A.name},A.id))]}),!v.provider&&e("p",{className:"text-xs text-slate-500",children:"Cabinetul depinde de furnizorul selectat"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix"}),t("select",{name:"game_mix",value:v.game_mix,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.provider,children:[e("option",{value:"",children:v.provider?"Selectează game mix-ul":"Selectează mai întâi furnizorul"}),j().map(A=>e("option",{value:A.name,children:A.name},A.id))]}),!v.provider&&e("p",{className:"text-xs text-slate-500",children:"Game mix-ul depinde de furnizorul selectat"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Aprobare de Tip"}),t("select",{name:"approval_type",value:v.approval_type,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.cabinet,children:[e("option",{value:"",children:v.cabinet?"Selectează aprobarea de tip":"Selectează mai întâi cabinetul"}),x().map(A=>e("option",{value:A.name,children:A.name},A.id))]}),!v.cabinet&&e("p",{className:"text-xs text-slate-500",children:"Aprobarea de tip depinde de cabinetul selectat"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Software"}),t("select",{name:"software",value:v.software,onChange:L,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.game_mix,children:[e("option",{value:"",children:v.game_mix?"Selectează software-ul":"Selectează mai întâi game mix-ul"}),w().map(A=>e("option",{value:A.name,children:A.name},A.id))]}),!v.game_mix&&e("p",{className:"text-xs text-slate-500",children:"Software-ul depinde de game mix-ul selectat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Document CVT (PDF)"}),e("input",{type:"file",name:"cvtFile",accept:".pdf",onChange:S,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100"}),v.cvtPreview&&t("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{className:"flex items-center space-x-3",children:[e(mt,{className:"w-5 h-5 text-cyan-600"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:typeof v.cvtPreview=="string"&&v.cvtPreview.includes("data:")?"Document CVT încărcat":"Document CVT existent"}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PDF Document"})]})]}),e("button",{type:"button",onClick:q,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Șterge documentul",children:e(fe,{className:"w-4 h-4"})})]}),e(St,{pdfUrl:v.cvtPreview,title:`CVT Document ${v.cvt_number}`,placeholder:"Documentul CVT nu este disponibil",placeholderSubtext:"Atașează documentul CVT pentru vizualizare"})]}),e("p",{className:"text-xs text-slate-500",children:"Încărcați documentul CVT în format PDF"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:v.notes,onChange:L,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(et,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Certificat"]})]})]})]})})]})})},jo=({item:a,onClose:l})=>{if(!a)return null;const s=(()=>{if(!a.expiry_date)return null;const n=new Date,p=new Date(a.expiry_date)-n;return Math.ceil(p/(1e3*60*60*24))})(),o=()=>s===null?"text-slate-400":s<0?"text-red-600":s<=30?"text-orange-600":"text-green-600",i=()=>s===null?"N/A":s<0?`Expirat (${Math.abs(s)} zile)`:`${s} zile rămase`;return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl",children:[t("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-500 px-6 py-4 flex justify-between items-center",children:[t("h3",{className:"text-xl font-bold text-white flex items-center",children:[e(ie,{className:"w-6 h-6 mr-2"}),"Detalii Certificat CVT - ",a.cvt_number]}),e("button",{onClick:l,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e(fe,{className:"w-6 h-6"})})]}),e("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-6",children:[t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Informații CVT"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Număr CVT"}),e("p",{className:"text-base font-medium text-slate-900",children:a.cvt_number})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Tip CVT"}),e("p",{className:"text-base font-medium text-slate-900",children:a.cvt_type})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Autoritatea Emitentă"}),e("p",{className:"text-base font-medium text-slate-900",children:a.issuing_authority||"N/A"})]})]})]}),t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Informații Dispozitiv"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Furnizor"}),e("p",{className:"text-base font-medium text-slate-900",children:a.provider||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Cabinet"}),e("p",{className:"text-base font-medium text-slate-900",children:a.cabinet||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Game Mix"}),e("p",{className:"text-base font-medium text-slate-900",children:a.game_mix||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Aprobare de Tip"}),e("p",{className:"text-base font-medium text-slate-900",children:a.approval_type||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Software"}),e("p",{className:"text-base font-medium text-slate-900",children:a.software||"N/A"})]})]})]}),t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Date & Status"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Data CVT"}),t("p",{className:"text-base font-medium text-slate-900 flex items-center",children:[e(We,{className:"w-4 h-4 mr-2 text-cyan-500"}),a.cvt_date?new Date(a.cvt_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Data Expirării"}),t("p",{className:"text-base font-medium text-slate-900 flex items-center",children:[e(We,{className:"w-4 h-4 mr-2 text-orange-500"}),a.expiry_date?new Date(a.expiry_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Status"}),t("p",{className:`text-base font-bold flex items-center ${o()}`,children:[s!==null&&s>=0?e(ft,{className:"w-4 h-4 mr-2"}):e(ht,{className:"w-4 h-4 mr-2"}),i()]})]})]})]}),a.notes&&t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Note"}),e("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:a.notes})]})]}),t("div",{className:"space-y-4",children:[t("div",{className:"bg-slate-50 rounded-2xl p-6",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2 mb-4",children:"Document CVT"}),e(St,{pdfUrl:a.cvtFile||null,title:"CVT Document",placeholder:"Nu există document CVT",placeholderSubtext:"Atașează documentul CVT pentru vizualizare"})]}),t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-3",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Informații Adiționale"}),t("div",{className:"space-y-2",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Creat de"}),e("p",{className:"text-base font-medium text-slate-900",children:a.created_by||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Data creării"}),e("p",{className:"text-base font-medium text-slate-900",children:a.created_at?new Date(a.created_at).toLocaleDateString("ro-RO"):"N/A"})]})]})]})]})]})})]})})},Ro=({item:a,onClose:l,onSave:r})=>{const{providers:s,cabinets:o}=de(),[i,n]=h.useState({name:"",provider:"",cabinet:"",notes:""});h.useEffect(()=>{a&&n({name:a.name||"",provider:a.provider||"",cabinet:a.cabinet||"",notes:a.notes||""})},[a]);const m=c=>{const{name:d,value:b}=c.target;n(u=>({...u,[d]:b}))};return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-6 rounded-t-2xl",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:e(mt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-white",children:a?"Editează Aprobare de Tip":"Adaugă Aprobare de Tip"}),e("p",{className:"text-green-100",children:a?"Modifică datele aprobării":"Adaugă o aprobare de tip nouă"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(fe,{className:"w-6 h-6 text-white"})})]})}),t("form",{onSubmit:c=>{c.preventDefault(),r(i)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:i.name,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Introdu numele aprobării",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:i.provider,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),s.map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet *"}),t("select",{name:"cabinet",value:i.cabinet,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează cabinetul"}),o.filter(c=>!i.provider||c.provider===i.provider).map(c=>e("option",{value:c.name,children:c.name},c.id))]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:i.notes,onChange:m,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Adaugă note suplimentare"})]}),t("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-green-500/25",children:t("div",{className:"flex items-center space-x-2",children:[e(vt,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Salvează"})]})})]})]})]})})},Oo=({item:a,onClose:l,onSave:r})=>{de();const[s,o]=h.useState({name:"",serial_numbers:"",commission_date:"",expiry_date:"",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",serial_numbers:a.serial_numbers||"",commission_date:a.commission_date||"",expiry_date:a.expiry_date||"",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;if(o(d=>({...d,[p]:c})),p==="commission_date"&&c){const d=new Date(c),b=new Date(d);b.setFullYear(b.getFullYear()+1),b.setDate(b.getDate()-1),o(u=>({...u,expiry_date:b.toISOString().split("T")[0]}))}};return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 p-6 rounded-t-2xl",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:e(ot,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-white",children:a?"Editează Comisie":"Adaugă Comisie"}),e("p",{className:"text-blue-100",children:a?"Modifică datele comisiei":"Adaugă o comisie nouă"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(fe,{className:"w-6 h-6 text-white"})})]})}),t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Introdu numele comisiei",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data Comisiei *"}),e("input",{type:"date",name:"commission_date",value:s.commission_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data Valabilității *"}),e("input",{type:"date",name:"expiry_date",value:s.expiry_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numerele de Serie *"}),e("textarea",{name:"serial_numbers",value:s.serial_numbers,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Introdu numerele de serie separate prin rânduri nouă",required:!0}),e("p",{className:"text-sm text-slate-500",children:"Separă numerele de serie prin rânduri nouă"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adaugă note suplimentare"})]}),t("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all shadow-lg hover:shadow-blue-500/25",children:t("div",{className:"flex items-center space-x-2",children:[e(vt,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Salvează"})]})})]})]})]})})},Mo=({item:a,onClose:l,onSave:r})=>{const{providers:s,cabinets:o,gameMixes:i}=de(),[n,m]=h.useState({name:"",provider:"",cabinet:"",game_mix:"",version:"",notes:""});h.useEffect(()=>{a&&m({name:a.name||"",provider:a.provider||"",cabinet:a.cabinet||"",game_mix:a.game_mix||"",version:a.version||"",notes:a.notes||""})},[a]);const p=d=>{const{name:b,value:u}=d.target;m(z=>{const g={...z,[b]:u};return b==="provider"?(g.cabinet="",g.game_mix=""):b==="cabinet"&&(g.game_mix=""),g})};return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 p-6 rounded-t-2xl",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:e(Ot,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-white",children:a?"Editează Software":"Adaugă Software"}),e("p",{className:"text-purple-100",children:a?"Modifică datele software-ului":"Adaugă un software nou"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(fe,{className:"w-6 h-6 text-white"})})]})}),t("form",{onSubmit:d=>{d.preventDefault(),r(n)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:n.name,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Introdu numele software-ului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Versiunea"}),e("input",{type:"text",name:"version",value:n.version,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"ex: v1.0.0"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:n.provider,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),s.map(d=>e("option",{value:d.name,children:d.name},d.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet *"}),t("select",{name:"cabinet",value:n.cabinet,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează cabinetul"}),o.filter(d=>!n.provider||d.provider===n.provider).map(d=>e("option",{value:d.name,children:d.name},d.id))]})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix *"}),t("select",{name:"game_mix",value:n.game_mix,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează game mix-ul"}),i.filter(d=>!(n.provider&&d.provider!==n.provider)).map(d=>e("option",{value:d.name,children:d.name},d.id))]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:n.notes,onChange:p,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Adaugă note suplimentare"})]}),t("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-violet-500 text-white rounded-lg hover:from-purple-600 hover:to-violet-600 transition-all shadow-lg hover:shadow-purple-500/25",children:t("div",{className:"flex items-center space-x-2",children:[e(vt,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Salvează"})]})})]})]})]})})},$o=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",address:"",price_initiala:"",price_reparatie:"",price_periodica:"",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",address:a.address||"",price_initiala:a.price_initiala||"",price_reparatie:a.price_reparatie||"",price_periodica:a.price_periodica||"",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;o(d=>({...d,[p]:c}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[t("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-500 p-8 text-white",children:[t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm",children:e(mt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Autoritatea Emitentă":"Adaugă Autoritate Emitentă"}),e("p",{className:"text-orange-100 text-sm font-medium",children:"Completează informațiile despre autoritatea emitentă"})]})]}),e("button",{onClick:l,className:"absolute top-4 right-4 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații de bază"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Numele autorității",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Adresa"}),e("input",{type:"text",name:"address",value:s.address,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Adresa autorității"})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Prețuri (opțional)"}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Preț Inițială (LEI)"}),e("input",{type:"number",name:"price_initiala",value:s.price_initiala,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Preț Reparație (LEI)"}),e("input",{type:"number",name:"price_reparatie",value:s.price_reparatie,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Preț Periodică (LEI)"}),e("input",{type:"number",name:"price_periodica",value:s.price_periodica,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[t("button",{type:"button",onClick:l,className:"btn-secondary",children:[e(fe,{className:"w-4 h-4"}),"Anulează"]}),t("button",{type:"submit",className:"btn-primary",children:[e(vt,{className:"w-4 h-4"}),a?"Actualizează":"Adaugă"," Autoritate"]})]})]})})]})})},Bo=({isOpen:a,onClose:l})=>{const[r,s]=h.useState([]),[o,i]=h.useState(!1),[n,m]=h.useState(null),[p,c]=h.useState(new Date().getMonth()),[d,b]=h.useState(new Date().getFullYear()),u=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],z=[{id:1,title:"Comisia de Autorizare - Sloturi Electronice",date:"2025-10-15",time:"09:00",location:"București, Bd. Magheru 28-30",type:"Autorizare",status:"Programată",description:"Examinarea cererilor de autorizare pentru sloturi electronice"},{id:2,title:"Comisia de Metrologie - Verificare CVT",date:"2025-10-22",time:"10:30",location:"București, Bd. Magheru 28-30",type:"Metrologie",status:"Programată",description:"Verificarea certificatelor de verificare tehnică"},{id:3,title:"Comisia de Control - Inspecții Teren",date:"2025-11-05",time:"08:00",location:"Cluj-Napoca, Str. Memorandumului 28",type:"Control",status:"Programată",description:"Inspecții de control la operatorii de jocuri de noroc"},{id:4,title:"Comisia de Autorizare - Licențe",date:"2025-11-12",time:"14:00",location:"București, Bd. Magheru 28-30",type:"Autorizare",status:"Programată",description:"Examinarea cererilor de licențiere pentru operatori"}];h.useEffect(()=>{a&&g()},[a,p,d]);const g=async()=>{i(!0),m(null);try{await new Promise(w=>setTimeout(w,1e3));const x=z.filter(w=>{const L=new Date(w.date);return L.getMonth()===p&&L.getFullYear()===d});s(x)}catch(x){m("Eroare la încărcarea calendarului ONJN"),console.error("Error loading ONJN calendar:",x)}finally{i(!1)}},v=x=>{switch(x){case"Programată":return"bg-blue-100 text-blue-800";case"În desfășurare":return"bg-yellow-100 text-yellow-800";case"Finalizată":return"bg-green-100 text-green-800";case"Anulată":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=x=>{switch(x){case"Autorizare":return"bg-purple-100 text-purple-800";case"Metrologie":return"bg-indigo-100 text-indigo-800";case"Control":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},T=x=>new Date(x).toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"}),j=x=>x;return a?e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-xl",children:e(We,{className:"w-6 h-6"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold",children:"Calendar ONJN"}),e("p",{className:"text-blue-100",children:"Comisiile organizate de Oficiul Național pentru Jocuri de Noroc"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(fe,{className:"w-6 h-6"})})]})}),e("div",{className:"p-6 border-b border-gray-200",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex items-center space-x-2",children:[e("label",{className:"text-sm font-medium text-gray-700",children:"Luna:"}),e("select",{value:p,onChange:x=>c(parseInt(x.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.map((x,w)=>e("option",{value:w,children:x},w))})]}),t("div",{className:"flex items-center space-x-2",children:[e("label",{className:"text-sm font-medium text-gray-700",children:"Anul:"}),e("select",{value:d,onChange:x=>b(parseInt(x.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[2024,2025,2026].map(x=>e("option",{value:x,children:x},x))})]})]}),t("button",{onClick:g,disabled:o,className:"btn-secondary flex items-center space-x-2",children:[e(He,{className:`w-4 h-4 ${o?"animate-spin":""}`}),e("span",{children:"Actualizează"})]})]})}),e("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:o?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?e("div",{className:"flex items-center justify-center py-12",children:t("div",{className:"text-center",children:[e(ht,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Eroare la încărcare"}),e("p",{className:"text-gray-500 mb-4",children:n}),e("button",{onClick:g,className:"btn-primary",children:"Încearcă din nou"})]})}):r.length===0?t("div",{className:"text-center py-12",children:[e(We,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nu există comisii programate"}),t("p",{className:"text-gray-500",children:["Pentru luna ",u[p]," ",d]})]}):e("div",{className:"space-y-4",children:r.map(x=>e("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow",children:t("div",{className:"flex items-start justify-between",children:[t("div",{className:"flex-1",children:[t("div",{className:"flex items-center space-x-3 mb-3",children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:x.title}),e("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y(x.type)}`,children:x.type}),e("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v(x.status)}`,children:x.status})]}),e("p",{className:"text-gray-600 mb-4",children:x.description}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("div",{className:"flex items-center space-x-2 text-gray-600",children:[e(We,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:T(x.date)})]}),t("div",{className:"flex items-center space-x-2 text-gray-600",children:[e(it,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:j(x.time)})]}),t("div",{className:"flex items-center space-x-2 text-gray-600",children:[e(Je,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:x.location})]})]})]}),e("button",{onClick:()=>window.open("https://onjn.gov.ro/structura-organizatorica/autorizare/","_blank"),className:"ml-4 p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Vezi pe site-ul ONJN",children:e(Ca,{className:"w-5 h-5"})})]})},x.id))})}),e("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:t("div",{className:"flex items-center justify-between",children:[e("div",{className:"text-sm text-gray-500",children:"Datele sunt preluate de pe site-ul oficial ONJN"}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>window.open("https://onjn.gov.ro/structura-organizatorica/autorizare/","_blank"),className:"btn-secondary flex items-center space-x-2",children:[e(Ca,{className:"w-4 h-4"}),e("span",{children:"Site ONJN"})]}),e("button",{onClick:l,className:"btn-primary",children:"Închide"})]})]})})]})}):null},Uo=()=>{const{metrology:a,providers:l,cabinets:r,gameMixes:s,loading:o,createItem:i,updateItem:n,deleteItem:m,exportToExcel:p,exportToPDF:c}=de(),[d,b]=h.useState(""),[u,z]=h.useState([]),[g,v]=h.useState(!1),[y,T]=h.useState(null),[j,x]=h.useState(!1),[w,L]=h.useState(null),[S,q]=h.useState(!1),[E,A]=h.useState(null),[B,D]=h.useState([]),[R,N]=h.useState([]),[f,C]=h.useState([]),[_,I]=h.useState([]),[O,P]=h.useState(!1),[Y,K]=h.useState(!1),[te,ue]=h.useState(!1),[M,W]=h.useState(!1),[U,k]=h.useState(null),[J,se]=h.useState(null),[Ae,_e]=h.useState(null),[ne,ce]=h.useState(null),[he,ee]=h.useState(!1);h.useEffect(()=>{v(u.length>0)},[u]),h.useEffect(()=>{y&&(async()=>{try{if(y==="approvals"){const F=await(await fetch("/api/approvals")).json();D(F)}else if(y==="commissions"){const F=await(await fetch("/api/commissions")).json();N(F)}else if(y==="software"){const F=await(await fetch("/api/software")).json();C(F)}else if(y==="authorities"){const F=await(await fetch("/api/authorities")).json();I(F)}}catch(ae){console.error("Error loading sub-page data:",ae)}})()},[y]);const H=a.filter(V=>{var F,re,ve;return((F=V.serial_number)==null?void 0:F.toLowerCase().includes(d.toLowerCase()))||((re=V.provider)==null?void 0:re.toLowerCase().includes(d.toLowerCase()))||((ve=V.cabinet)==null?void 0:ve.toLowerCase().includes(d.toLowerCase()))}),Z=V=>{z(V?H.map(ae=>ae.id):[])},le=(V,ae)=>{z(ae?[...u,V]:u.filter(F=>F!==V))},Q=async()=>{if(u.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${u.length} elemente?`))try{for(const V of u)await m("metrology",V);z([]),v(!1)}catch(V){console.error("Error bulk deleting:",V)}},Ne=()=>{u.length!==0&&console.log("Bulk edit for:",u)},ge=()=>{L(null),x(!0)},ze=V=>{L(V),x(!0)},Ve=async V=>{window.confirm("Sigur vrei să ștergi acest element?")&&await m("metrology",V.id)},xt=async V=>{w?await n("metrology",w.id,V):await i("metrology",V),x(!1),L(null)},_t=async V=>{try{const ae=U?`/api/approvals/${U.id}`:"/api/approvals";if((await fetch(ae,{method:U?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok){P(!1),k(null);const lt=await(await fetch("/api/approvals")).json();D(lt)}}catch(ae){console.error("Error saving approval:",ae)}},Et=async V=>{try{const ae=J?`/api/commissions/${J.id}`:"/api/commissions";if((await fetch(ae,{method:J?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok){K(!1),se(null);const lt=await(await fetch("/api/commissions")).json();N(lt)}}catch(ae){console.error("Error saving commission:",ae)}},At=async V=>{try{const ae=Ae?`/api/software/${Ae.id}`:"/api/software";if((await fetch(ae,{method:Ae?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok){ue(!1),_e(null);const lt=await(await fetch("/api/software")).json();C(lt)}}catch(ae){console.error("Error saving software:",ae)}},G=async V=>{if(window.confirm("Sigur vrei să ștergi această aprobare?"))try{if((await fetch(`/api/approvals/${V.id}`,{method:"DELETE"})).ok){const re=await(await fetch("/api/approvals")).json();D(re)}}catch(ae){console.error("Error deleting approval:",ae)}},me=async V=>{if(window.confirm("Sigur vrei să ștergi această comisie?"))try{if((await fetch(`/api/commissions/${V.id}`,{method:"DELETE"})).ok){const re=await(await fetch("/api/commissions")).json();N(re)}}catch(ae){console.error("Error deleting commission:",ae)}},pe=async V=>{if(window.confirm("Sigur vrei să ștergi acest software?"))try{if((await fetch(`/api/software/${V.id}`,{method:"DELETE"})).ok){const re=await(await fetch("/api/software")).json();C(re)}}catch(ae){console.error("Error deleting software:",ae)}},Pe=async V=>{try{if((await fetch("/api/authorities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok){const re=await(await fetch("/api/authorities")).json();I(re),W(!1)}}catch(ae){console.error("Error saving authority:",ae)}},Se=async V=>{if(window.confirm("Sigur vrei să ștergi această autoritate?"))try{if((await fetch(`/api/authorities/${V.id}`,{method:"DELETE"})).ok){const re=await(await fetch("/api/authorities")).json();I(re)}}catch(ae){console.error("Error deleting authority:",ae)}},Re=[{key:"cvt_number",label:"NUMĂR CVT",sortable:!0,render:V=>e("button",{onClick:()=>{A(V),q(!0)},className:"text-cyan-600 hover:text-cyan-800 font-semibold hover:underline transition-colors",children:V.cvt_number})},{key:"cvt_type",label:"TIP CVT",sortable:!0},{key:"approval_type",label:"APROBARE DE TIP",sortable:!0},{key:"software",label:"SOFTWARE",sortable:!0},{key:"cvt_dates_combined",label:"DATE CVT & EXPIRARE",sortable:!0,render:V=>{const ae=V.cvt_date?new Date(V.cvt_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",F=V.expiry_date?new Date(V.expiry_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A";let re="N/A",ve="text-green-600 bg-green-50";if(V.expiry_date){const lt=new Date,rl=new Date(V.expiry_date)-lt,It=Math.ceil(rl/(1e3*60*60*24));It<0?(ve="text-red-600 bg-red-50",re=`Expirat (${Math.abs(It)} zile)`):It<=30?(ve="text-orange-600 bg-orange-50",re=`${It} zile`):(ve="text-green-600 bg-green-50",re=`${It} zile`)}return t("div",{className:"space-y-2",children:[t("div",{className:"text-slate-600 text-sm space-y-1",children:[t("div",{children:["CVT: ",ae]}),t("div",{children:["Expirare: ",F]})]}),re!=="N/A"&&e("div",{className:`text-sm ${ve.split(" ")[0]}`,children:re})]})}},{key:"issuing_authority",label:"AUTORITATEA EMITENTĂ",sortable:!0},{key:"cvtFile",label:"DOCUMENT CVT",sortable:!1,render:V=>e("div",{className:"flex items-center space-x-2",children:V.cvtFile?t(be,{children:[e("button",{onClick:()=>{if(V.cvtFile){const ae=document.createElement("a");ae.href=V.cvtFile,ae.download=`CVT-${V.cvt_number}.pdf`,ae.click()}},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Vizualizează documentul CVT",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>{if(V.cvtFile){const ae=document.createElement("a");ae.href=V.cvtFile,ae.download=`CVT-${V.cvt_number}.pdf`,ae.click()}},className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Descarcă documentul CVT",children:e(De,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 text-sm italic",children:"Nu există document"})})},{key:"created_by",label:"CREAT DE",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:V=>e("div",{className:"text-slate-600 text-sm",children:new Date(V.created_at).toLocaleDateString("ro-RO")})}],Ke=[{key:"name",label:"NUMELE",sortable:!0},{key:"provider",label:"FURNIZOR",sortable:!0},{key:"cabinet",label:"CABINET",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:V=>e("div",{className:"text-slate-600 text-sm",children:new Date(V.created_at).toLocaleDateString("ro-RO")})}],Ze=[{key:"name",label:"NUMELE",sortable:!0},{key:"serial_numbers",label:"NUMERELE DE SERIE",sortable:!1,render:V=>e("div",{className:"text-slate-800 font-medium text-sm",children:V.serial_numbers||"N/A"})},{key:"commission_date",label:"DATA COMISIEI",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.commission_date?new Date(V.commission_date).toLocaleDateString("ro-RO"):"N/A"})},{key:"expiry_date",label:"DATA VALABILITĂȚII",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.expiry_date?new Date(V.expiry_date).toLocaleDateString("ro-RO"):"N/A"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:V=>e("div",{className:"text-slate-600 text-sm",children:new Date(V.created_at).toLocaleDateString("ro-RO")})}],rt=[{key:"name",label:"NUMELE",sortable:!0},{key:"provider",label:"FURNIZOR",sortable:!0},{key:"cabinet",label:"CABINET",sortable:!0},{key:"game_mix",label:"GAME MIX",sortable:!0},{key:"version",label:"VERSIUNEA",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:V=>e("div",{className:"text-slate-600 text-sm",children:new Date(V.created_at).toLocaleDateString("ro-RO")})}],ct=[{key:"name",label:"NUMELE",sortable:!0},{key:"address",label:"ADRESA",sortable:!0},{key:"price_initiala",label:"PREȚ INIȚIALĂ (LEI)",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.price_initiala?`${V.price_initiala} LEI`:"-"})},{key:"price_reparatie",label:"PREȚ REPARAȚIE (LEI)",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.price_reparatie?`${V.price_reparatie} LEI`:"-"})},{key:"price_periodica",label:"PREȚ PERIODICĂ (LEI)",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.price_periodica?`${V.price_periodica} LEI`:"-"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:V=>e("div",{className:"text-slate-800 font-medium text-base",children:V.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:V=>e("div",{className:"text-slate-600 text-sm",children:new Date(V.created_at).toLocaleDateString("ro-RO")})}];return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl shadow-lg shadow-cyan-500/25",children:e(et,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Metrologie CVT"}),e("p",{className:"text-slate-600",children:"Gestionează aprobările, comisiile și software-ul pentru sloturi"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{p("metrology")}catch(V){console.error("Error exporting to Excel:",V)}},onExportPDF:()=>{try{c("metrology")}catch(V){console.error("Error exporting to PDF:",V)}},entity:"metrology"}),g&&t(be,{children:[t("button",{onClick:Ne,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:Q,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:ge,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex space-x-1 bg-slate-100 p-1 rounded-lg",children:[t("button",{onClick:()=>T("approvals"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="approvals"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg shadow-green-500/25":"text-slate-600 hover:text-green-600 hover:bg-green-50"}`,children:[e(mt,{className:"w-4 h-4"}),e("span",{children:"Aprobări de Tip"})]}),t("button",{onClick:()=>T("commissions"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="commissions"?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/25":"text-slate-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e(ot,{className:"w-4 h-4"}),e("span",{children:"Comisii"})]}),t("button",{onClick:()=>T("software"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="software"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg shadow-purple-500/25":"text-slate-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[e(Ot,{className:"w-4 h-4"}),e("span",{children:"Software"})]}),t("button",{onClick:()=>T("authorities"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="authorities"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg shadow-orange-500/25":"text-slate-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[e(mt,{className:"w-4 h-4"}),e("span",{children:"Autoritatea Emitentă"})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută în metrologie...",value:d,onChange:V=>b(V.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),!y||y==="metrology"?e("div",{className:"card p-6",children:o?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):H.length===0?t("div",{className:"text-center py-12",children:[e(et,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există înregistrări de metrologie"}),e("p",{className:"text-slate-500",children:"Adaugă prima înregistrare pentru a începe"})]}):e(je,{data:H,columns:Re,onEdit:ze,onDelete:Ve,searchTerm:d,selectedItems:u,onSelectAll:Z,onSelectItem:le,moduleColor:"blue"})}):null,y==="approvals"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>T(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(Ye,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-lg shadow-green-500/25",children:e(mt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Aprobări de Tip"}),e("p",{className:"text-slate-600",children:"Gestionează aprobările de tip pentru sloturi"})]})]}),t("button",{onClick:()=>{k(null),P(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Aprobare"})]})]}),B.length===0?t("div",{className:"text-center py-12",children:[e(mt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există aprobări de tip"}),e("p",{className:"text-slate-500",children:"Adaugă prima aprobare pentru a începe"})]}):e(je,{data:B,columns:Ke,onEdit:V=>{k(V),P(!0)},onDelete:G})]})}),y==="commissions"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>T(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(Ye,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(ot,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Comisii"}),e("p",{className:"text-slate-600",children:"Gestionează comisiile pentru sloturi"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>ee(!0),className:"btn-secondary flex items-center space-x-2",children:[e(We,{className:"w-4 h-4"}),e("span",{children:"Calendar ONJN"})]}),t("button",{onClick:()=>{se(null),K(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Comisie"})]})]})]}),R.length===0?t("div",{className:"text-center py-12",children:[e(ot,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există comisii"}),e("p",{className:"text-slate-500",children:"Adaugă prima comisie pentru a începe"})]}):e(je,{data:R,columns:Ze,onEdit:V=>{se(V),K(!0)},onDelete:me})]})}),y==="software"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>T(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(Ye,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg shadow-purple-500/25",children:e(Ot,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Software"}),e("p",{className:"text-slate-600",children:"Gestionează software-ul pentru sloturi"})]})]}),t("button",{onClick:()=>{_e(null),ue(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Software"})]})]}),f.length===0?t("div",{className:"text-center py-12",children:[e(Ot,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există software"}),e("p",{className:"text-slate-500",children:"Adaugă primul software pentru a începe"})]}):e(je,{data:f,columns:rt,onEdit:V=>{_e(V),ue(!0)},onDelete:pe})]})}),y==="authorities"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>T(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(Ye,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl shadow-lg shadow-orange-500/25",children:e(mt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Autoritatea Emitentă"}),e("p",{className:"text-slate-600",children:"Gestionează autoritățile emitente pentru CVT"})]})]}),t("button",{onClick:()=>{ce(null),W(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Autoritate"})]})]}),_.length===0?t("div",{className:"text-center py-12",children:[e(mt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există autorități"}),e("p",{className:"text-slate-500",children:"Adaugă prima autoritate pentru a începe"})]}):e(je,{data:_,columns:ct,onEdit:V=>{ce(V),W(!0)},onDelete:Se})]})}),j&&e(Io,{item:w,onClose:()=>x(!1),onSave:xt}),S&&e(jo,{item:E,onClose:()=>{q(!1),A(null)}}),O&&e(Ro,{item:U,onClose:()=>P(!1),onSave:_t}),Y&&e(Oo,{item:J,onClose:()=>K(!1),onSave:Et}),te&&e(Mo,{item:Ae,onClose:()=>ue(!1),onSave:At}),M&&e($o,{item:ne,onClose:()=>W(!1),onSave:Pe}),he&&e(Bo,{isOpen:he,onClose:()=>ee(!1)})]})})},qo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({serial_number:"",jackpot_name:"",jackpot_type:"Progressive",current_amount:0,max_amount:"",progress_percentage:0,status:"Active",winner:"",triggered_date:"",notes:""});h.useEffect(()=>{a&&o({serial_number:a.serial_number||"",jackpot_name:a.jackpot_name||"",jackpot_type:a.jackpot_type||"Progressive",current_amount:a.current_amount||0,max_amount:a.max_amount||"",progress_percentage:a.progress_percentage||0,status:a.status||"Active",winner:a.winner||"",triggered_date:a.triggered_date||"",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;o(d=>({...d,[p]:c}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-yellow-800 to-amber-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-600/20 to-amber-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-2xl shadow-lg",children:e(kt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Jackpot":"Adaugă Jackpot Nou"}),e("p",{className:"text-yellow-100 text-sm font-medium",children:"Completează informațiile despre jackpot"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații de bază"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numărul de serie *"}),e("input",{type:"text",name:"serial_number",value:s.serial_number,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Serial number slot",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Jackpot *"}),e("input",{type:"text",name:"jackpot_name",value:s.jackpot_name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"ex: Mega Jackpot",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip Jackpot"}),t("select",{name:"jackpot_type",value:s.jackpot_type,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",children:[e("option",{value:"Progressive",children:"Progresiv"}),e("option",{value:"Fixed",children:"Fix"}),e("option",{value:"Mystery",children:"Mystery"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",children:[e("option",{value:"Active",children:"Activ"}),e("option",{value:"Triggered",children:"Declanșat"}),e("option",{value:"Reset",children:"Resetat"}),e("option",{value:"Maintenance",children:"Mentenanță"})]})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații financiare"}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Suma curentă"}),e("input",{type:"number",step:"0.01",name:"current_amount",value:s.current_amount,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"0.00"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Suma maximă"}),e("input",{type:"number",step:"0.01",name:"max_amount",value:s.max_amount,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"1000000.00"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Progres (%)"}),e("input",{type:"number",step:"0.01",name:"progress_percentage",value:s.progress_percentage,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"0.00"})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații câștigător"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Câștigător"}),e("input",{type:"text",name:"winner",value:s.winner,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Numele câștigătorului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data declanșării"}),e("input",{type:"datetime-local",name:"triggered_date",value:s.triggered_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Note adiționale despre jackpot..."})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(kt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Jackpot"]})]})]})]})})]})})},Go=()=>{const{jackpots:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=de(),[m,p]=h.useState(""),[c,d]=h.useState([]),[b,u]=h.useState(!1);h.useEffect(()=>{u(c.length>0)},[c]);const z=N=>{d(N?L.map(f=>f.id):[])},g=(N,f)=>{d(f?[...c,N]:c.filter(C=>C!==N))},v=async()=>{if(c.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${c.length} elemente?`))try{for(const N of c)await o("jackpots",N);d([]),u(!1)}catch(N){console.error("Error bulk deleting:",N)}},y=()=>{c.length!==0&&console.log("Bulk edit for:",c)},[T,j]=h.useState(!1),[x,w]=h.useState(null),L=a.filter(N=>{var f,C,_;return((f=N.name)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((C=N.game)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||((_=N.location)==null?void 0:_.toLowerCase().includes(m.toLowerCase()))}),S=[{key:"id",label:"#",sortable:!0},{key:"name",label:"NUME JACKPOT",sortable:!0},{key:"game",label:"JOC",sortable:!0},{key:"amount",label:"SUMA",sortable:!0},{key:"location",label:"LOCAȚIE",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})},{key:"actions",label:"ACȚIUNI",sortable:!1}],q=N=>{w(N),j(!0)},E=async N=>{window.confirm("Sigur vrei să ștergi acest jackpot?")&&await o("jackpots",N)},A=()=>{w(null),j(!0)},B=async N=>{x?await s("jackpots",x.id,N):await r("jackpots",N),j(!1),w(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg shadow-yellow-500/25",children:e(kt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Jackpots"}),e("p",{className:"text-slate-600",children:"Gestionează jackpot-urile din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{i("jackpots")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("jackpots")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"jackpots"}),b&&t(be,{children:[t("button",{onClick:y,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:v,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:A,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Jackpot"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută jackpot-uri...",value:m,onChange:N=>p(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):L.length===0?t("div",{className:"text-center py-12",children:[e(kt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există jackpot-uri"}),e("p",{className:"text-slate-500",children:"Adaugă primul jackpot pentru a începe"})]}):e(je,{data:L,columns:S,onEdit:q,onDelete:E,searchTerm:m,selectedItems:c,onSelectAll:z,onSelectItem:g,moduleColor:"orange"})}),T&&e(qo,{item:x,onClose:()=>j(!1),onSave:B})]})})},Vo=({item:a,onClose:l,onSave:r})=>{const{companies:s,locations:o,providers:i}=de(),[n,m]=h.useState({invoice_number:"",serial_numbers:"",buyer:"",seller:"",type:"Sale",amount:"",currency:"RON",rates:"",locations:[],pdf_file:null});h.useEffect(()=>{a&&m({invoice_number:a.invoice_number||"",serial_numbers:a.serial_number?typeof a.serial_number=="string"?JSON.parse(a.serial_number).join(`
`):a.serial_number.join(`
`):"",buyer:a.company||"",seller:a.seller||"",type:a.invoice_type||"Sale",amount:a.amount||"",currency:a.currency||"RON",rates:a.rates||"",locations:a.location?typeof a.location=="string"?JSON.parse(a.location):a.location:[],pdf_file:a.pdf_file||null})},[a]);const p=d=>{const{name:b,value:u,type:z,checked:g,files:v}=d.target;z==="checkbox"?b==="location"&&m(y=>({...y,locations:g?[...y.locations,u]:y.locations.filter(T=>T!==u)})):m(z==="file"?y=>({...y,[b]:v[0]||null}):y=>({...y,[b]:u}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-indigo-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(Nl,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Factură":"Adaugă Factură Nouă"}),e("p",{className:"text-blue-100 text-sm font-medium",children:"Completează informațiile despre factură"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:d=>{d.preventDefault();const b=new FormData;Object.keys(n).forEach(u=>{u==="locations"?b.append(u,JSON.stringify(n[u])):u==="pdf_file"?n[u]&&b.append(u,n[u]):b.append(u,n[u])}),r(b)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Număr Factură *"}),e("input",{type:"text",name:"invoice_number",value:n.invoice_number,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: INV-2024-001",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Serii"}),e("textarea",{name:"serial_numbers",value:n.serial_numbers,onChange:p,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Introduceți seriile, câte una pe rând"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cumpărător *"}),t("select",{name:"buyer",value:n.buyer,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează compania"}),s==null?void 0:s.map(d=>e("option",{value:d.name,children:d.name},d.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Vânzător *"}),t("select",{name:"seller",value:n.seller,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),i==null?void 0:i.map(d=>e("option",{value:d.name,children:d.name},d.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip *"}),t("select",{name:"type",value:n.type,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e("option",{value:"Sale",children:"Vânzare"}),e("option",{value:"Rental",children:"Chirie"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Suma *"}),e("input",{type:"number",name:"amount",value:n.amount,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Valută"}),t("select",{name:"currency",value:n.currency,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e("option",{value:"RON",children:"RON"}),e("option",{value:"EUR",children:"EUR"}),e("option",{value:"USD",children:"USD"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Rate (opțional)"}),e("input",{type:"text",name:"rates",value:n.rates,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: 3 rate de 1000 RON"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"PDF Factură *"}),e("input",{type:"file",name:"pdf_file",onChange:p,accept:".pdf",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),n.pdf_file&&t("p",{className:"text-sm text-green-600",children:["Fișier selectat: ",n.pdf_file.name]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Locații"}),e("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o==null?void 0:o.map(d=>t("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",name:"location",value:d.name,checked:n.locations.includes(d.name),onChange:p,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e("span",{className:"text-sm text-slate-700",children:d.name})]},d.id))}),n.locations.length===o.length&&e("p",{className:"text-sm text-blue-600 font-medium",children:"Toate locațiile"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(vt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Factură"]})]})]})]})})]})})},Jo=()=>{const a=Ge(),{invoices:l,loading:r,createItem:s,updateItem:o,deleteItem:i,exportToExcel:n,exportToPDF:m}=de(),[p,c]=h.useState(""),[d,b]=h.useState([]),[u,z]=h.useState(!1);h.useEffect(()=>{z(d.length>0)},[d]);const g=f=>{b(f?S.map(C=>C.id):[])},v=(f,C)=>{b(C?[...d,f]:d.filter(_=>_!==f))},y=async()=>{if(d.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${d.length} elemente?`))try{for(const f of d)await i("invoices",f);b([]),z(!1)}catch(f){console.error("Error bulk deleting:",f)}},T=()=>{d.length!==0&&console.log("Bulk edit for:",d)},[j,x]=h.useState(!1),[w,L]=h.useState(null),S=l.filter(f=>{var C,_,I;return((C=f.invoice_number)==null?void 0:C.toLowerCase().includes(p.toLowerCase()))||((_=f.company)==null?void 0:_.toLowerCase().includes(p.toLowerCase()))||((I=f.status)==null?void 0:I.toLowerCase().includes(p.toLowerCase()))}),q=[{key:"id",label:"#",sortable:!0},{key:"invoice_number",label:"NUMĂR FACTURĂ",sortable:!0,render:f=>e("button",{onClick:()=>a(`/invoices/${f.id}`),className:"text-blue-600 hover:text-blue-800 font-medium underline",children:f.invoice_number})},{key:"company",label:"COMPANIE",sortable:!0},{key:"amount",label:"SUMA",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:f=>e("div",{className:"text-slate-800 font-medium text-base",children:f.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:f=>e("div",{className:"text-slate-800 font-medium text-base",children:f.created_at?new Date(f.created_at).toLocaleDateString("ro-RO"):"N/A"})}],E=f=>{L(f),x(!0)},A=async f=>{window.confirm("Sigur vrei să ștergi această factură?")&&await i("invoices",f)},B=()=>{L(null),x(!0)},D=async f=>{w?await o("invoices",w.id,f):await s("invoices",f),x(!1),L(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl shadow-lg shadow-red-500/25",children:e(ie,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Facturi"}),e("p",{className:"text-slate-600",children:"Gestionează facturile din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{n("invoices")}catch(f){console.error("Error exporting to Excel:",f)}},onExportPDF:()=>{try{m("invoices")}catch(f){console.error("Error exporting to PDF:",f)}},entity:"invoices"}),u&&t(be,{children:[t("button",{onClick:T,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:y,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:B,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Factură"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută facturi...",value:p,onChange:f=>c(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:r?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):S.length===0?t("div",{className:"text-center py-12",children:[e(ie,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există facturi"}),e("p",{className:"text-slate-500",children:"Adaugă prima factură pentru a începe"})]}):e(je,{data:S,columns:q,onEdit:E,onDelete:A,searchTerm:p,selectedItems:d,onSelectAll:g,onSelectItem:v,moduleColor:"pink"})}),j&&e(Vo,{item:w,onClose:()=>x(!1),onSave:D})]})})},Ho=()=>{const{id:a}=qt(),l=Ge(),{slots:r,companies:s,locations:o,providers:i,cabinets:n,gameMixes:m}=de(),[p,c]=h.useState(null),[d,b]=h.useState(!0);h.useEffect(()=>{u()},[a]);const u=async()=>{try{const T=await fetch(`/api/invoices/${a}`);if(T.ok){const j=await T.json();c(j)}}catch(T){console.error("Error fetching invoice:",T)}finally{b(!1)}},z=T=>r.find(j=>j.serial_number===T)||null,g=()=>{if(p!=null&&p.file_path){const T=document.createElement("a");T.href=p.file_path,T.download=`factura_${p.invoice_number}.pdf`,T.target="_blank",T.click()}};if(d)return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e("p",{className:"mt-4 text-slate-600",children:"Se încarcă..."})]})});if(!p)return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Factura nu a fost găsită"}),e("button",{onClick:()=>l("/invoices"),className:"btn-primary",children:"Înapoi la Facturi"})]})});const v=p.serial_number?typeof p.serial_number=="string"?JSON.parse(p.serial_number):p.serial_number:[],y=p.location?typeof p.location=="string"?(()=>{try{const T=JSON.parse(p.location);return typeof T=="string"?JSON.parse(T):T}catch{return[]}})():p.location:[];return e(xe,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:t("div",{className:"container mx-auto px-4 py-8",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 mb-8 overflow-hidden",children:e("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>l("/invoices"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e(Ye,{className:"w-6 h-6 text-white"})}),e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(ie,{className:"w-8 h-8 text-white"})}),t("div",{children:[t("h1",{className:"text-3xl font-bold text-white mb-1",children:["Factura ",p.invoice_number]}),e("p",{className:"text-blue-100",children:"Detalii complete despre factură"})]})]}),t("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e(De,{className:"w-5 h-5"}),e("span",{children:"Descarcă PDF"})]})]})})}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t("div",{className:"lg:col-span-1",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(ie,{className:"w-5 h-5 mr-2 text-blue-600"}),"Informații Factură"]}),t("div",{className:"space-y-4",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Număr Factură"}),e("p",{className:"text-slate-800 font-medium",children:p.invoice_number})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Cumpărător"}),e("p",{className:"text-slate-800",children:p.company})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Vânzător"}),e("p",{className:"text-slate-800 dark:text-slate-200",children:p.invoice_type})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Tip"}),e("p",{className:"text-slate-800 dark:text-slate-200",children:p.invoice_type})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Suma"}),t("p",{className:"text-slate-800 font-bold text-lg",children:[p.amount," ",p.currency]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Status"}),e("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${p.status==="Paid"?"bg-green-100 text-green-800":p.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:p.status})]}),p.description&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Descriere"}),e("p",{className:"text-slate-800",children:p.description})]})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(Je,{className:"w-5 h-5 mr-2 text-green-600"}),"Locații"]}),e("div",{className:"space-y-2",children:Array.isArray(y)&&y.length>0?y.map((T,j)=>t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e("span",{className:"text-slate-700",children:T})]},j)):e("p",{className:"text-slate-500",children:"Toate locațiile"})})]})]}),t("div",{className:"lg:col-span-2",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(ie,{className:"w-5 h-5 mr-2 text-red-600"}),"PDF Factură"]}),e(St,{pdfUrl:p.file_path,title:`PDF ${p.invoice_number}`,placeholder:"PDF-ul facturii nu este disponibil",placeholderSubtext:"Atașează PDF-ul facturii pentru vizualizare"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e($e,{className:"w-5 h-5 mr-2 text-purple-600"}),"Serii Asociate (",v.length,")"]}),v.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-slate-50 border-b border-slate-200",children:t("tr",{children:[e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Serial Number"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Locație"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Furnizor"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Cabinet"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Game Mix"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Status"})]})}),e("tbody",{className:"divide-y divide-slate-200",children:v.map((T,j)=>{const x=z(T);return t("tr",{className:"hover:bg-slate-50",children:[e("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:T}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:x?x.location:"Necunoscută"}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:x?x.provider:"Necunoscut"}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:x?x.cabinet:"Necunoscut"}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:x?x.game_mix:"Necunoscut"}),e("td",{className:"px-4 py-3",children:x?e("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x.status==="Active"?"bg-green-100 text-green-800":x.status==="Inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:x.status}):e("span",{className:"text-slate-400",children:"N/A"})})]},j)})})]})}):t("div",{className:"text-center py-8 text-slate-500",children:[e($e,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),e("p",{children:"Nu există serii asociate cu această factură"})]})]})]})]})]})})})},Wo=()=>{var T,j,x;const{id:a}=qt(),l=Ge(),{companies:r,loading:s,updateItem:o,refreshData:i}=de(),[n,m]=h.useState(null),[p,c]=h.useState(!1),[d,b]=h.useState(!1),[u,z]=h.useState({name:"",type:"Contract",file:null});h.useEffect(()=>{const w=r.find(L=>L.id===parseInt(a));w&&m(w)},[a,r]),h.useEffect(()=>{const w=r.find(L=>L.id===parseInt(a));w&&m(w)},[r,a]);const g=async w=>{if(w.preventDefault(),!(!u.file||!u.name)){b(!0);try{const L=new FormData;L.append("file",u.file),L.append("name",u.name),L.append("type",u.type),L.append("company_id",n.id);const S=await fetch("/api/companies/upload-document",{method:"POST",body:L});if(S.ok){const q=await S.json();if(m(q),c(!1),z({name:"",type:"Contract",file:null}),q.compression){const{originalSize:E,compressedSize:A,compressionRatio:B,savedBytes:D}=q.compression,R=(E/1024/1024).toFixed(2),N=(A/1024/1024).toFixed(2),f=(D/1024).toFixed(2);X.success(`Document încărcat cu succes! PDF comprimat: ${R}MB → ${N}MB (${B}% reducere, ${f}KB economisite)`,{duration:6e3})}else X.success("Document încărcat cu succes!");setTimeout(()=>{i()},500)}}catch(L){console.error("Error uploading document:",L)}finally{b(!1)}}},v=w=>{const L=w.createElement("a");L.href=w.file_path,L.download=w.name,L.target="_blank",L.click()},y=async w=>{if(window.confirm("Sigur vrei să ștergi acest document?"))try{const L=await fetch(`/api/companies/documents/${w}`,{method:"DELETE"});if(L.ok){const S=await L.json();m(S),setTimeout(()=>{i()},500)}}catch(L){console.error("Error deleting document:",L)}};return s?e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-300",children:"Se încarcă..."})]})}):n?t(xe,{children:[e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:t("div",{className:"container mx-auto px-4 py-8",children:[t("div",{className:"mb-8",children:[t("button",{onClick:()=>l("/companies"),className:"btn-secondary flex items-center space-x-2 mb-4",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Înapoi la Companii"})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:t("div",{className:"flex items-start justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(Ee,{className:"w-8 h-8 text-white"})}),t("div",{children:[e("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:n.name}),e("p",{className:"text-slate-600 dark:text-slate-300 text-lg",children:"Detalii complete despre companie"})]})]}),t("button",{onClick:()=>c(!0),className:"btn-primary flex items-center space-x-2",children:[e(ye,{className:"w-5 h-5"}),e("span",{children:"Atașează Document"})]})]})})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t("div",{className:"lg:col-span-1",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(Ee,{className:"w-5 h-5 mr-2 text-blue-600"}),"Informații Companie"]}),t("div",{className:"space-y-4",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Nume Companie"}),e("p",{className:"text-slate-800 dark:text-slate-200 font-medium",children:n.name})]}),n.cui&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"CUI"}),e("p",{className:"text-slate-800 dark:text-slate-200 font-medium",children:n.cui}),n.cuiFile&&t("div",{className:"mt-2 flex items-center space-x-2",children:[t("button",{onClick:()=>{if(n.cui_file){const w=document.createElement("a");w.href=n.cui_file,w.download=`CUI-${n.name}.pdf`,w.click()}},className:"inline-flex items-center px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors text-sm font-medium",title:"Previzualizează CUI",children:[e(Fe,{className:"w-4 h-4 mr-1"}),"Vezi Document"]}),t("button",{onClick:()=>{if(n.cui_file){const w=document.createElement("a");w.href=n.cui_file,w.download=`CUI-${n.name}.pdf`,w.click()}},className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm font-medium",title:"Descarcă CUI",children:[e(De,{className:"w-4 h-4 mr-1"}),"Descarcă"]})]})]}),n.contact_person&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Persoană de Contact"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(zt,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.contact_person]})]}),n.phone&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Telefon"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(La,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.phone]})]}),n.email&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Email"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(Ia,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.email]})]}),n.address&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Adresă"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(Je,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.address]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Data Creării"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(We,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),new Date(n.created_at).toLocaleDateString("ro-RO")]})]}),n.status&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Status"}),e("span",{className:`px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm ${n.status==="Active"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800":"bg-gradient-to-r from-red-100 to-pink-100 text-red-800"}`,children:n.status})]})]})]}),n.notes&&t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(ie,{className:"w-5 h-5 mr-2 text-amber-600"}),"Note"]}),e("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:n.notes})]})]}),e("div",{className:"lg:col-span-2",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(ie,{className:"w-5 h-5 mr-2 text-red-600"}),"Documente Atașate"]}),n.documents&&n.documents.length>0||n.cuiFile?t("div",{className:"space-y-6",children:[(n.cuiFile||n.documents&&n.documents.length>0)&&t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(ie,{className:"w-5 h-5 mr-2 text-blue-600"}),"Vizualizare Document"]}),e("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 mb-4",children:e(St,{pdfUrl:n.cui_file||(n.documents&&((T=n.documents[0])!=null&&T.file_path)?n.documents[0].file_path:null),title:n.cui_file?`CUI Document ${n.name}`:n.documents&&n.documents[0]?`PDF ${n.documents[0].name}`:"Document PDF",placeholder:"Nu există documente de afișat",placeholderSubtext:"Atașează primul document sau CUI pentru a începe"})}),t("div",{className:"flex items-center justify-between",children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:n.cuiFile?`Document: CUI ${n.name}`:`Document: ${(j=n.documents[0])==null?void 0:j.name} (${(x=n.documents[0])==null?void 0:x.type})`}),t("button",{onClick:()=>{if(n.cui_file){const w=document.createElement("a");w.href=n.cui_file,w.download=`CUI-${n.name}.pdf`,w.click()}else n.documents&&n.documents[0]&&v(n.documents[0])},className:"btn-primary flex items-center space-x-2",children:[e(De,{className:"w-4 h-4"}),e("span",{children:"Descarcă PDF"})]})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(ie,{className:"w-5 h-5 mr-2 text-green-600"}),"Toate Documentele (",n.cuiFile?1:0," + ",n.documents?n.documents.length:0,")"]}),t("div",{className:"space-y-4",children:[n.cuiFile&&e("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e(ie,{className:"w-5 h-5 text-blue-600"})}),t("div",{children:[t("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:["CUI ",n.name]}),t("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Document CUI • ",new Date(n.created_at).toLocaleDateString("ro-RO")]})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>{const w=document.querySelector("iframe");w&&(w.src=n.cuiFile)},className:"p-2 text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Vezi în viewer",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const w=document.createElement("a");w.href=n.cuiFile,w.download=`CUI_${n.name||"company"}.pdf`,w.click()},className:"p-2 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors",title:"Descarcă",children:e(De,{className:"w-4 h-4"})})]})]})}),n.documents&&n.documents.map((w,L)=>e("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e(ie,{className:"w-5 h-5 text-red-600"})}),t("div",{children:[e("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.name}),t("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[w.type," • ",new Date(w.uploaded_at).toLocaleDateString("ro-RO")]})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>{const S=document.querySelector("iframe");S&&(S.src=w.file_path)},className:"p-2 text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Vezi în viewer",children:e(Fe,{className:"w-4 h-4"})}),e("button",{onClick:()=>v(w),className:"p-2 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors",title:"Descarcă",children:e(De,{className:"w-4 h-4"})}),e("button",{onClick:()=>y(w.id),className:"p-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg transition-colors",title:"Șterge",children:e(Le,{className:"w-4 h-4"})})]})]})},L))]})]})]}):t("div",{className:"text-center py-12 text-slate-500",children:[e(ie,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),e("p",{className:"text-lg font-medium mb-2",children:"Nu există documente atașate"}),e("p",{className:"text-sm",children:"Atașează primul document sau CUI pentru a începe"})]})]})})]})]})}),p&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-md mx-4",children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Atașează Document"}),t("form",{onSubmit:g,className:"space-y-4",children:[t("div",{children:[e("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nume Document"}),e("input",{type:"text",value:u.name,onChange:w=>z({...u,name:w.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ex: Contract de Colaborare",required:!0})]}),t("div",{children:[e("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Fișier PDF"}),e("input",{type:"file",accept:".pdf",onChange:w=>z({...u,file:w.target.files[0]}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t("div",{className:"flex space-x-3 pt-4",children:[e("button",{type:"button",onClick:()=>c(!1),className:"flex-1 btn-secondary",disabled:d,children:"Anulează"}),e("button",{type:"submit",className:"flex-1 btn-primary flex items-center justify-center space-x-2",disabled:d,children:d?t(be,{children:[e("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e("span",{children:"Se încarcă..."})]}):t(be,{children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Atașează"})]})})]})]})]})})]}):e(xe,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e(Ee,{className:"w-16 h-16 text-slate-400 dark:text-slate-500 mx-auto mb-4"}),e("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Compania nu a fost găsită"}),e("p",{className:"text-slate-600 dark:text-slate-300 mb-6",children:"Compania pe care o căutați nu există în sistem."}),t("button",{onClick:()=>l("/companies"),className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Înapoi la Companii"})]})]})})})},Yo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",type:"",period:"",status:"Draft",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",type:a.type||"",period:a.period||"",status:a.status||"Draft",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;o(d=>({...d,[p]:c}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-indigo-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e($e,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Raport ONJN":"Adaugă Raport ONJN Nou"}),e("p",{className:"text-blue-100 text-sm font-medium",children:"Completează informațiile despre raportul ONJN"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Raport *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Numele raportului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip *"}),t("select",{name:"type",value:s.type,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează tipul"}),e("option",{value:"Monthly",children:"Lunar"}),e("option",{value:"Quarterly",children:"Trimestrial"}),e("option",{value:"Annual",children:"Anual"}),e("option",{value:"Special",children:"Special"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Perioada *"}),e("input",{type:"text",name:"period",value:s.period,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"ex: Ianuarie 2025",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"Draft",children:"Draft"}),e("option",{value:"Submitted",children:"Trimis"}),e("option",{value:"Approved",children:"Aprobat"}),e("option",{value:"Rejected",children:"Respins"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 text-slate-600 hover:text-slate-800 font-semibold transition-colors",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(vt,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Adaugă"})]})]})]})})]})})},Xo=()=>{const{onjnReports:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=de(),[m,p]=h.useState(""),[c,d]=h.useState([]),[b,u]=h.useState(!1);h.useEffect(()=>{u(c.length>0)},[c]);const z=N=>{d(N?L.map(f=>f.id):[])},g=(N,f)=>{d(f?[...c,N]:c.filter(C=>C!==N))},v=async()=>{if(c.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${c.length} elemente?`))try{for(const N of c)await o("onjnReports",N);d([]),u(!1)}catch(N){console.error("Error bulk deleting:",N)}},y=()=>{c.length!==0&&console.log("Bulk edit for:",c)},[T,j]=h.useState(!1),[x,w]=h.useState(null),L=a.filter(N=>{var f,C,_;return((f=N.name)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((C=N.type)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||((_=N.status)==null?void 0:_.toLowerCase().includes(m.toLowerCase()))}),S=[{key:"id",label:"#",sortable:!0},{key:"name",label:"NUME RAPORT",sortable:!0},{key:"type",label:"TIP",sortable:!0},{key:"period",label:"PERIOADA",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})},{key:"actions",label:"ACȚIUNI",sortable:!1}],q=N=>{w(N),j(!0)},E=async N=>{window.confirm("Sigur vrei să ștergi acest raport ONJN?")&&await o("onjnReports",N)},A=()=>{w(null),j(!0)},B=async N=>{x?await s("onjnReports",x.id,N):await r("onjnReports",N),j(!1),w(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e($t,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Rapoarte ONJN"}),e("p",{className:"text-slate-600",children:"Generează și gestionează rapoartele ONJN"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{i("onjnreports")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("onjnreports")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"onjnreports"}),b&&t(be,{children:[t("button",{onClick:y,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:v,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:A,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Raport"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută rapoarte...",value:m,onChange:N=>p(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):L.length===0?t("div",{className:"text-center py-12",children:[e($t,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există rapoarte ONJN"}),e("p",{className:"text-slate-500",children:"Adaugă primul raport pentru a începe"})]}):e(je,{data:L,columns:S,onEdit:q,onDelete:E,searchTerm:m,selectedItems:c,onSelectAll:z,onSelectItem:g,moduleColor:"indigo"})}),T&&e(Yo,{item:x,onClose:()=>j(!1),onSave:B})]})})},Ko=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",type:"",status:"Valid",expiry_date:"",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",type:a.type||"",status:a.status||"Valid",expiry_date:a.expiry_date||"",notes:a.notes||""})},[a]);const i=m=>{const{name:p,value:c}=m.target;o(d=>({...d,[p]:c}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-red-800 to-rose-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/20 to-rose-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-rose-500 rounded-2xl shadow-lg",children:e(Xa,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Document Legal":"Adaugă Document Legal Nou"}),e("p",{className:"text-red-100 text-sm font-medium",children:"Completează informațiile despre documentul legal"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Document *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Numele documentului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip *"}),t("select",{name:"type",value:s.type,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează tipul"}),e("option",{value:"License",children:"Licență"}),e("option",{value:"Permit",children:"Autorizație"}),e("option",{value:"Contract",children:"Contract"}),e("option",{value:"Certificate",children:"Certificat"}),e("option",{value:"Other",children:"Altele"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data Expirării"}),e("input",{type:"date",name:"expiry_date",value:s.expiry_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[e("option",{value:"Valid",children:"Valid"}),e("option",{value:"Expired",children:"Expirat"}),e("option",{value:"Expiring Soon",children:"Expiră în curând"}),e("option",{value:"Invalid",children:"Invalid"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Xa,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Document"]})]})]})]})})]})})},Zo=()=>{const{legalDocuments:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=de(),[m,p]=h.useState(""),[c,d]=h.useState([]),[b,u]=h.useState(!1);h.useEffect(()=>{u(c.length>0)},[c]);const z=N=>{d(N?L.map(f=>f.id):[])},g=(N,f)=>{d(f?[...c,N]:c.filter(C=>C!==N))},v=async()=>{if(c.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${c.length} elemente?`))try{for(const N of c)await o("legalDocuments",N);d([]),u(!1)}catch(N){console.error("Error bulk deleting:",N)}},y=()=>{c.length!==0&&console.log("Bulk edit for:",c)},[T,j]=h.useState(!1),[x,w]=h.useState(null),L=a.filter(N=>{var f,C,_;return((f=N.name)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((C=N.type)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||((_=N.status)==null?void 0:_.toLowerCase().includes(m.toLowerCase()))}),S=[{key:"id",label:"#",sortable:!0},{key:"name",label:"NUME DOCUMENT",sortable:!0},{key:"type",label:"TIP",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"expiry_date",label:"DATA EXPIRARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.expiry_date?new Date(N.expiry_date).toLocaleDateString("ro-RO"):"N/A"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})},{key:"actions",label:"ACȚIUNI",sortable:!1}],q=N=>{w(N),j(!0)},E=async N=>{window.confirm("Sigur vrei să ștergi acest document legal?")&&await o("legalDocuments",N)},A=()=>{w(null),j(!0)},B=async N=>{x?await s("legalDocuments",x.id,N):await r("legalDocuments",N),j(!1),w(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-gray-500 to-slate-500 rounded-2xl shadow-lg shadow-gray-500/25",children:e(ie,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Documente Legale"}),e("p",{className:"text-slate-600",children:"Gestionează documentele legale din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{i("legaldocuments")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("legaldocuments")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"legaldocuments"}),b&&t(be,{children:[t("button",{onClick:y,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:v,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:A,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Document"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută documente...",value:m,onChange:N=>p(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-500"})}):L.length===0?t("div",{className:"text-center py-12",children:[e(ie,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există documente legale"}),e("p",{className:"text-slate-500",children:"Adaugă primul document pentru a începe"})]}):e(je,{data:L,columns:S,onEdit:q,onDelete:E,searchTerm:m,selectedItems:c,onSelectAll:z,onSelectItem:g,moduleColor:"teal"})}),T&&e(Ko,{item:x,onClose:()=>j(!1),onSave:B})]})})},Qo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({username:"",full_name:"",email:"",role:"user",status:"active",notes:"",avatar:null,avatarPreview:null});h.useEffect(()=>{a&&o({username:a.username||"",full_name:a.full_name||"",email:a.email||"",role:a.role||"user",status:a.status||"active",notes:a.notes||"",avatar:a.avatar||null,avatarPreview:a.avatar||null})},[a]);const i=p=>{const{name:c,value:d}=p.target;o(b=>({...b,[c]:d}))},n=p=>{const c=p.target.files[0];if(c){const d=new FileReader;d.onload=b=>{o(u=>({...u,avatar:b.target.result,avatarPreview:b.target.result}))},d.readAsDataURL(c)}};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-indigo-800 to-blue-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600/20 to-blue-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-2xl shadow-lg",children:e(zt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Utilizator":"Adaugă Utilizator Nou"}),e("p",{className:"text-indigo-100 text-sm font-medium",children:"Completează informațiile despre utilizator"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(fe,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:p=>{p.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Username *"}),e("input",{type:"text",name:"username",value:s.username,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Username",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Complet *"}),e("input",{type:"text",name:"full_name",value:s.full_name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Numele complet",required:!0})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Avatar"}),t("div",{className:"flex items-center space-x-4",children:[s.avatarPreview?t("div",{className:"relative",children:[e("img",{src:s.avatarPreview,alt:"Avatar preview",className:"w-16 h-16 rounded-full object-cover border-2 border-slate-300"}),e("button",{type:"button",onClick:()=>o(p=>({...p,avatar:null,avatarPreview:null})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]}):e("div",{className:"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center",children:e(zt,{className:"w-8 h-8 text-slate-400"})}),t("div",{className:"flex-1",children:[e("input",{type:"file",accept:"image/*",onChange:n,className:"hidden",id:"avatar-upload"}),t("label",{htmlFor:"avatar-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[e(ye,{className:"w-4 h-4 mr-2"}),s.avatarPreview?"Schimbă Avatar":"Upload Avatar"]}),e("p",{className:"text-xs text-slate-500 mt-1",children:"JPG, PNG sau GIF (max 2MB)"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Email *"}),e("input",{type:"email",name:"email",value:s.email,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Adresa de email",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Rol *"}),t("select",{name:"role",value:s.role,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",required:!0,children:[e("option",{value:"admin",children:"Administrator"}),e("option",{value:"manager",children:"Manager"}),e("option",{value:"user",children:"Utilizator"}),e("option",{value:"viewer",children:"Vizualizator"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",required:!0,children:[e("option",{value:"active",children:"Activ"}),e("option",{value:"inactive",children:"Inactiv"}),e("option",{value:"suspended",children:"Suspendat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(zt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Utilizator"]})]})]})]})})]})})},ei=()=>{const{users:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=de(),[m,p]=h.useState(""),[c,d]=h.useState([]),[b,u]=h.useState(!1),[z,g]=h.useState(!1),[v,y]=h.useState(null);h.useEffect(()=>{u(c.length>0)},[c]);const T=N=>{d(N?L.map(f=>f.id):[])},j=(N,f)=>{d(f?[...c,N]:c.filter(C=>C!==N))},x=async()=>{if(c.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${c.length} utilizatori?`))try{for(const N of c)await o("users",N);d([]),u(!1)}catch(N){console.error("Error bulk deleting users:",N)}},w=()=>{c.length!==0&&console.log("Bulk edit for users:",c)},L=a.filter(N=>{var f,C,_,I;return((f=N.username)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((C=N.full_name)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||((_=N.email)==null?void 0:_.toLowerCase().includes(m.toLowerCase()))||((I=N.role)==null?void 0:I.toLowerCase().includes(m.toLowerCase()))}),S=[{key:"full_name",label:"NUME COMPLET",sortable:!0,render:N=>t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"flex-shrink-0",children:N.avatar?e("img",{src:N.avatar,alt:N.full_name||N.username,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200"}):e("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm",children:(N.full_name||N.username||"U").charAt(0).toUpperCase()})}),t("div",{className:"min-w-0 flex-1",children:[e("p",{className:"text-sm font-medium text-slate-900 truncate",children:N.full_name||"N/A"}),t("p",{className:"text-sm text-slate-500 truncate",children:["@",N.username]})]})]})},{key:"email",label:"EMAIL",sortable:!0},{key:"role",label:"ROL",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})}],q=N=>{y(N),g(!0)},E=async N=>{if(window.confirm("Sigur vrei să ștergi acest utilizator?"))try{(await o("users",N)).success||toast.error("Eroare la ștergerea utilizatorului")}catch(C){console.error("Error deleting user:",C),toast.error("Eroare la ștergerea utilizatorului")}},A=()=>{y(null),g(!0)},B=async N=>{v?await s("users",v.id,N):await r("users",N),g(!1),y(null)};return e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg shadow-purple-500/25",children:e(Xe,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Utilizatori"}),e("p",{className:"text-slate-600",children:"Gestionează utilizatorii din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(at,{onExportExcel:()=>{try{i("users")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("users")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"users"}),t("div",{className:"flex space-x-3",children:[b&&t(be,{children:[t("button",{onClick:w,className:"btn-secondary flex items-center space-x-2",children:[e(Ue,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:x,className:"btn-danger flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:A,className:"btn-primary flex items-center space-x-2",children:[e(Ce,{className:"w-4 h-4"}),e("span",{children:"Adaugă Utilizator"})]})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută utilizatori...",value:m,onChange:N=>p(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(ye,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):L.length===0?t("div",{className:"text-center py-12",children:[e(Xe,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există utilizatori"}),e("p",{className:"text-slate-500",children:"Adaugă primul utilizator pentru a începe"})]}):e(je,{data:L,columns:S,onEdit:q,onDelete:E,searchTerm:m,selectedItems:c,onSelectAll:T,onSelectItem:j,moduleColor:"purple"})}),z&&e(Qo,{item:v,onClose:()=>g(!1),onSave:B})]})})},ti=()=>{var S,q,E,A,B,D,R,N,f,C,_,I,O,P,Y,K,te,ue,M,W,U,k,J,se,Ae,_e,ne,ce,he,ee,H,Z,le,Q,Ne,ge,ze,Ve,xt,_t,Et,At,G,me,pe,Pe,Se,Re,Ke,Ze,rt,ct,ba,ga,V,ae;const[a,l]=h.useState("header"),[r,s]=h.useState({logo:{type:"upload",url:"",file:null},favicon:{type:"upload",url:"",file:null},headerColor:{primary:"#2563eb",secondary:"#4f46e5",useGradient:!0},background:{type:"color",color:"#f1f5f9",imageUrl:"",imageFile:null},loginImage:{type:"upload",url:"",file:null},loginButtonColor:{primary:"#FF7A00",secondary:"#FF9500",useGradient:!1},loginPageColor:{primary:"#FFFFFF",secondary:"#F5F5F5",useGradient:!1},loginCardColor:{primary:"#8B5CF6",secondary:"#A855F7",useGradient:!0},loginTextColor:{title:"#1e293b",labels:"#334155",text:"#64748b"},appTitle:"CASHPOT V7",appSubtitle:"Gaming Management System",loginTexts:{title:"Login",emailLabel:"Email",passwordLabel:"Password",buttonText:"Log In",forgotPassword:"Forgot Password?",termsText:"By clicking login you agree to the terms of the Club Membership Agreement and the Independent Partner Agreement",joinText:"Got an invitation? Join Now",supportText:"Need help? Contact us at login-support@in.group"}});h.useEffect(()=>{const F=localStorage.getItem("appSettings");F&&s(JSON.parse(F))},[]);const o=F=>{s({...r,logo:{...r.logo,type:F}})},i=F=>{s({...r,logo:{...r.logo,url:F}})},n=F=>{const re=F.target.files[0];if(re){const ve=new FileReader;ve.onloadend=()=>{s({...r,logo:{...r.logo,file:ve.result}})},ve.readAsDataURL(re)}},m=F=>{s({...r,favicon:{...r.favicon,type:F}})},p=F=>{s({...r,favicon:{...r.favicon,url:F}})},c=F=>{const re=F.target.files[0];if(re){const ve=new FileReader;ve.onloadend=()=>{s({...r,favicon:{...r.favicon,file:ve.result}});const lt=document.querySelector("link[rel~='icon']");lt&&(lt.href=ve.result)},ve.readAsDataURL(re)}},d=(F,re)=>{s({...r,headerColor:{...r.headerColor,[F]:re}})},b=F=>{s({...r,background:{...r.background,type:F}})},u=F=>{s({...r,background:{...r.background,color:F}}),document.body.style.backgroundColor=F},z=F=>{s({...r,background:{...r.background,imageUrl:F}})},g=F=>{const re=F.target.files[0];if(re){const ve=new FileReader;ve.onloadend=()=>{s({...r,background:{...r.background,imageFile:ve.result}}),document.body.style.backgroundImage=`url(${ve.result})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed"},ve.readAsDataURL(re)}},v=F=>{s({...r,loginImage:{...r.loginImage,type:F}})},y=F=>{s({...r,loginImage:{...r.loginImage,url:F}})},T=F=>{const re=F.target.files[0];if(re){const ve=new FileReader;ve.onloadend=()=>{s({...r,loginImage:{...r.loginImage,file:ve.result}})},ve.readAsDataURL(re)}},j=(F,re)=>{s({...r,loginButtonColor:{...r.loginButtonColor,[F]:re}})},x=()=>{localStorage.setItem("appSettings",JSON.stringify(r)),L(),alert("Setările au fost salvate cu succes!")},w=()=>{window.confirm("Sigur doriți să resetați toate setările la valorile implicite?")&&(s({logo:{type:"upload",url:"",file:null},favicon:{type:"upload",url:"",file:null},headerColor:{primary:"#2563eb",secondary:"#4f46e5",useGradient:!0},background:{type:"color",color:"#f1f5f9",imageUrl:"",imageFile:null},loginImage:{type:"upload",url:"",file:null},loginButtonColor:{primary:"#FF7A00",secondary:"#FF9500",useGradient:!1},loginPageColor:{primary:"#FFFFFF",secondary:"#F5F5F5",useGradient:!1},loginCardColor:{primary:"#8B5CF6",secondary:"#A855F7",useGradient:!0},loginTextColor:{title:"#1e293b",labels:"#334155",text:"#64748b"},appTitle:"CASHPOT V7",appSubtitle:"Gaming Management System",loginTexts:{title:"Login",emailLabel:"Email",passwordLabel:"Password",buttonText:"Log In",forgotPassword:"Forgot Password?",termsText:"By clicking login you agree to the terms of the Club Membership Agreement and the Independent Partner Agreement",joinText:"Got an invitation? Join Now",supportText:"Need help? Contact us at login-support@in.group"}}),localStorage.removeItem("appSettings"),document.body.style.backgroundColor="#f1f5f9",document.body.style.backgroundImage="none",alert("Setările au fost resetate!"))},L=()=>{if(r.headerColor.useGradient){const re=document.querySelector("header");re&&(re.style.background=`linear-gradient(to right, ${r.headerColor.primary}, ${r.headerColor.secondary})`)}else{const re=document.querySelector("header");re&&(re.style.background=r.headerColor.primary)}if(r.background.type==="color")document.body.style.backgroundColor=r.background.color,document.body.style.backgroundImage="none";else if(r.background.type==="image"){const re=r.background.imageFile||r.background.imageUrl;re&&(document.body.style.backgroundImage=`url(${re})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed")}const F=r.favicon.file||r.favicon.url;if(F){const re=document.querySelector("link[rel~='icon']");re&&(re.href=F)}};return h.useEffect(()=>{L()},[r]),e(xe,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex space-x-1 bg-slate-100 rounded-xl p-1",children:[e("button",{onClick:()=>l("header"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="header"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(yl,{size:20}),e("span",{children:"Header"})]})}),e("button",{onClick:()=>l("main"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="main"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(fr,{size:20}),e("span",{children:"Pagina Principală"})]})}),e("button",{onClick:()=>l("login"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="login"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(wl,{size:20}),e("span",{children:"Login Page"})]})}),e("button",{onClick:()=>l("backup"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="backup"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(gt,{size:20}),e("span",{children:"Backup BD"})]})})]})}),a==="header"&&e("div",{className:"space-y-6",children:t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Rt,{className:"w-5 h-5 text-blue-600"}),e("span",{children:"Logo Aplicație"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-4",children:[t("button",{onClick:()=>o("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.logo.type==="upload"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(ye,{className:"w-4 h-4 inline mr-2"}),"Upload"]}),t("button",{onClick:()=>o("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.logo.type==="link"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(Wt,{className:"w-4 h-4 inline mr-2"}),"Link"]})]}),r.logo.type==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Logo"}),e("input",{type:"file",accept:"image/*",onChange:n,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300 dark:hover:file:bg-blue-800/40"}),r.logo.file&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.logo.file,alt:"Logo Preview",className:"h-16 object-contain"})})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Logo"}),e("input",{type:"text",value:r.logo.url,onChange:F=>i(F.target.value),className:"input-field",placeholder:"https://example.com/logo.png"}),r.logo.url&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.logo.url,alt:"Logo Preview",className:"h-16 object-contain"})})]})]})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-purple-600"}),e("span",{children:"Culoare Header"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"gradientToggle",checked:r.headerColor.useGradient,onChange:F=>d("useGradient",F.target.checked),className:"form-checkbox rounded text-purple-600"}),e("label",{htmlFor:"gradientToggle",className:"text-sm font-semibold text-slate-700",children:"Folosește Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:r.headerColor.primary,onChange:F=>d("primary",F.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:r.headerColor.primary,onChange:F=>d("primary",F.target.value),className:"input-field flex-1",placeholder:"#2563eb"})]})]}),r.headerColor.useGradient&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:r.headerColor.secondary,onChange:F=>d("secondary",F.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:r.headerColor.secondary,onChange:F=>d("secondary",F.target.value),className:"input-field flex-1",placeholder:"#4f46e5"})]})]}),e("div",{className:"p-4 rounded-lg",style:{background:r.headerColor.useGradient?`linear-gradient(to right, ${r.headerColor.primary}, ${r.headerColor.secondary})`:r.headerColor.primary},children:e("p",{className:"text-white font-bold text-center",children:"Preview Header"})})]})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-teal-600"}),e("span",{children:"Texte Header"})]}),e("div",{className:"space-y-4",children:t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Titlu Aplicație"}),e("input",{type:"text",value:r.appTitle,onChange:F=>s({...r,appTitle:F.target.value}),className:"input-field",placeholder:"CASHPOT V7"}),e("p",{className:"text-xs text-slate-500",children:"Textul afișat în header"})]})})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Rt,{className:"w-5 h-5 text-green-600"}),e("span",{children:"Favicon"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-4",children:[t("button",{onClick:()=>m("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.favicon.type==="upload"?"bg-green-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(ye,{className:"w-4 h-4 inline mr-2"}),"Upload"]}),t("button",{onClick:()=>m("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.favicon.type==="link"?"bg-green-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(Wt,{className:"w-4 h-4 inline mr-2"}),"Link"]})]}),r.favicon.type==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Favicon"}),e("input",{type:"file",accept:"image/*,.ico",onChange:c,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 dark:file:bg-green-900/30 dark:file:text-green-300 dark:hover:file:bg-green-800/40"}),r.favicon.file&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.favicon.file,alt:"Favicon Preview",className:"h-8 w-8 object-contain"})})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Favicon"}),e("input",{type:"text",value:r.favicon.url,onChange:F=>p(F.target.value),className:"input-field",placeholder:"https://example.com/favicon.ico"}),r.favicon.url&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.favicon.url,alt:"Favicon Preview",className:"h-8 w-8 object-contain"})})]})]})]})]})}),a==="main"&&e("div",{className:"space-y-6",children:t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Rt,{className:"w-5 h-5 text-orange-600"}),e("span",{children:"Fundal Pagină"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-2",children:[e("button",{onClick:()=>b("color"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${r.background.type==="color"?"bg-orange-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Culoare"}),e("button",{onClick:()=>b("image"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${r.background.type==="image"?"bg-orange-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Imagine"})]}),r.background.type==="color"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Fundal"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:r.background.color,onChange:F=>u(F.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:r.background.color,onChange:F=>u(F.target.value),className:"input-field flex-1",placeholder:"#f1f5f9"})]})]}):t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-4",children:[t("button",{onClick:()=>s({...r,background:{...r.background,imageType:"upload"}}),className:"flex-1 py-2 px-3 text-sm rounded-lg bg-slate-100 hover:bg-slate-200 font-semibold",children:[e(ye,{className:"w-4 h-4 inline mr-1"}),"Upload"]}),t("button",{onClick:()=>s({...r,background:{...r.background,imageType:"link"}}),className:"flex-1 py-2 px-3 text-sm rounded-lg bg-slate-100 hover:bg-slate-200 font-semibold",children:[e(Wt,{className:"w-4 h-4 inline mr-1"}),"Link"]})]}),r.background.imageType==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Imagine"}),e("input",{type:"file",accept:"image/*",onChange:g,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100 dark:file:bg-orange-900/30 dark:file:text-orange-300 dark:hover:file:bg-orange-800/40"})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Imagine"}),e("input",{type:"text",value:r.background.imageUrl,onChange:F=>z(F.target.value),className:"input-field",placeholder:"https://example.com/background.jpg"})]})]})]})]})}),a==="login"&&t("div",{className:"space-y-6",children:[t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-teal-600"}),e("span",{children:"Texte Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Titlu Login"}),e("input",{type:"text",value:((S=r.loginTexts)==null?void 0:S.title)||"Login",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},title:F.target.value}}),className:"input-field",placeholder:"Login"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Etichetă Email"}),e("input",{type:"text",value:((q=r.loginTexts)==null?void 0:q.emailLabel)||"Email",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},emailLabel:F.target.value}}),className:"input-field",placeholder:"Email"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Etichetă Parolă"}),e("input",{type:"text",value:((E=r.loginTexts)==null?void 0:E.passwordLabel)||"Password",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},passwordLabel:F.target.value}}),className:"input-field",placeholder:"Password"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Text Buton"}),e("input",{type:"text",value:((A=r.loginTexts)==null?void 0:A.buttonText)||"Log In",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},buttonText:F.target.value}}),className:"input-field",placeholder:"Log In"})]}),t("div",{className:"space-y-2 lg:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:'Text "Forgot Password"'}),e("input",{type:"text",value:((B=r.loginTexts)==null?void 0:B.forgotPassword)||"Forgot Password?",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},forgotPassword:F.target.value}}),className:"input-field",placeholder:"Forgot Password?"})]}),t("div",{className:"space-y-2 lg:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Text Termeni"}),e("textarea",{value:((D=r.loginTexts)==null?void 0:D.termsText)||"",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},termsText:F.target.value}}),className:"input-field min-h-[60px] resize-none",placeholder:"By clicking login you agree to the terms..."})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:'Text "Join Now"'}),e("input",{type:"text",value:((R=r.loginTexts)==null?void 0:R.joinText)||"Got an invitation? Join Now",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},joinText:F.target.value}}),className:"input-field",placeholder:"Got an invitation? Join Now"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Text Support"}),e("input",{type:"text",value:((N=r.loginTexts)==null?void 0:N.supportText)||"Need help? Contact us at...",onChange:F=>s({...r,loginTexts:{...r.loginTexts||{},supportText:F.target.value}}),className:"input-field",placeholder:"Need help? Contact us at..."})]})]})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-pink-600"}),e("span",{children:"Culori Text Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Titlu"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((f=r.loginTextColor)==null?void 0:f.title)||"#1e293b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},title:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((C=r.loginTextColor)==null?void 0:C.title)||"#1e293b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},title:F.target.value}}),className:"input-field flex-1",placeholder:"#1e293b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-bold text-2xl text-center",style:{color:((_=r.loginTextColor)==null?void 0:_.title)||"#1e293b"},children:"Login"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Etichete"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((I=r.loginTextColor)==null?void 0:I.labels)||"#334155",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((O=r.loginTextColor)==null?void 0:O.labels)||"#334155",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:F.target.value}}),className:"input-field flex-1",placeholder:"#334155"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-semibold text-sm",style:{color:((P=r.loginTextColor)==null?void 0:P.labels)||"#334155"},children:"Email *"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Text Secundar"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Y=r.loginTextColor)==null?void 0:Y.text)||"#64748b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},text:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((K=r.loginTextColor)==null?void 0:K.text)||"#64748b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},text:F.target.value}}),className:"input-field flex-1",placeholder:"#64748b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"text-xs text-center",style:{color:((te=r.loginTextColor)==null?void 0:te.text)||"#64748b"},children:"Terms & Support"})})]})]})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-indigo-600"}),e("span",{children:"Culori Fundal Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Fundal Formular"}),t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"loginPageGradient",checked:((ue=r.loginPageColor)==null?void 0:ue.useGradient)||!1,onChange:F=>s({...r,loginPageColor:{...r.loginPageColor,useGradient:F.target.checked}}),className:"form-checkbox rounded text-indigo-600"}),e("label",{htmlFor:"loginPageGradient",className:"text-sm font-semibold text-slate-700",children:"Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((M=r.loginPageColor)==null?void 0:M.primary)||"#FFFFFF",onChange:F=>s({...r,loginPageColor:{...r.loginPageColor,primary:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((W=r.loginPageColor)==null?void 0:W.primary)||"#FFFFFF",onChange:F=>s({...r,loginPageColor:{...r.loginPageColor,primary:F.target.value}}),className:"input-field flex-1"})]})]}),((U=r.loginPageColor)==null?void 0:U.useGradient)&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((k=r.loginPageColor)==null?void 0:k.secondary)||"#F5F5F5",onChange:F=>s({...r,loginPageColor:{...r.loginPageColor,secondary:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((J=r.loginPageColor)==null?void 0:J.secondary)||"#F5F5F5",onChange:F=>s({...r,loginPageColor:{...r.loginPageColor,secondary:F.target.value}}),className:"input-field flex-1"})]})]}),e("div",{className:"p-4 rounded-lg",style:{background:(se=r.loginPageColor)!=null&&se.useGradient?`linear-gradient(to right, ${r.loginPageColor.primary}, ${r.loginPageColor.secondary})`:((Ae=r.loginPageColor)==null?void 0:Ae.primary)||"#FFFFFF"},children:e("p",{className:"text-slate-800 font-bold text-center",children:"Preview Fundal"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Card Sub Logo"}),t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"loginCardGradient",checked:((_e=r.loginCardColor)==null?void 0:_e.useGradient)||!1,onChange:F=>s({...r,loginCardColor:{...r.loginCardColor,useGradient:F.target.checked}}),className:"form-checkbox rounded text-purple-600"}),e("label",{htmlFor:"loginCardGradient",className:"text-sm font-semibold text-slate-700",children:"Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((ne=r.loginCardColor)==null?void 0:ne.primary)||"#8B5CF6",onChange:F=>s({...r,loginCardColor:{...r.loginCardColor,primary:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((ce=r.loginCardColor)==null?void 0:ce.primary)||"#8B5CF6",onChange:F=>s({...r,loginCardColor:{...r.loginCardColor,primary:F.target.value}}),className:"input-field flex-1",placeholder:"#8B5CF6"})]})]}),((he=r.loginCardColor)==null?void 0:he.useGradient)&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((ee=r.loginCardColor)==null?void 0:ee.secondary)||"#A855F7",onChange:F=>s({...r,loginCardColor:{...r.loginCardColor,secondary:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((H=r.loginCardColor)==null?void 0:H.secondary)||"#A855F7",onChange:F=>s({...r,loginCardColor:{...r.loginCardColor,secondary:F.target.value}}),className:"input-field flex-1",placeholder:"#A855F7"})]})]}),e("div",{className:"rounded-2xl shadow-2xl p-8",style:{background:(Z=r.loginCardColor)!=null&&Z.useGradient?`linear-gradient(to right, ${r.loginCardColor.primary}, ${r.loginCardColor.secondary})`:((le=r.loginCardColor)==null?void 0:le.primary)||"#8B5CF6"},children:e("p",{className:"text-white font-bold text-2xl text-center",children:"Login"})})]})]})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-orange-600"}),e("span",{children:"Culoare Buton Login"})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Buton"}),t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"loginButtonGradient",checked:((Q=r.loginButtonColor)==null?void 0:Q.useGradient)||!1,onChange:F=>j("useGradient",F.target.checked),className:"form-checkbox rounded text-indigo-600"}),e("label",{htmlFor:"loginButtonGradient",className:"text-sm font-semibold text-slate-700",children:"Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Ne=r.loginButtonColor)==null?void 0:Ne.primary)||"#FF7A00",onChange:F=>j("primary",F.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((ge=r.loginButtonColor)==null?void 0:ge.primary)||"#FF7A00",onChange:F=>j("primary",F.target.value),className:"input-field flex-1"})]})]}),((ze=r.loginButtonColor)==null?void 0:ze.useGradient)&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Ve=r.loginButtonColor)==null?void 0:Ve.secondary)||"#FF9500",onChange:F=>j("secondary",F.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((xt=r.loginButtonColor)==null?void 0:xt.secondary)||"#FF9500",onChange:F=>j("secondary",F.target.value),className:"input-field flex-1"})]})]}),e("div",{className:"p-4 rounded-lg",style:{background:(_t=r.loginButtonColor)!=null&&_t.useGradient?`linear-gradient(to right, ${r.loginButtonColor.primary}, ${r.loginButtonColor.secondary})`:((Et=r.loginButtonColor)==null?void 0:Et.primary)||"#FF7A00"},children:e("p",{className:"text-white font-bold text-center",children:"Preview Button"})})]})})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(yt,{className:"w-5 h-5 text-pink-600"}),e("span",{children:"Culori Text Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Titlu"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((At=r.loginTextColor)==null?void 0:At.title)||"#1e293b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},title:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((G=r.loginTextColor)==null?void 0:G.title)||"#1e293b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},title:F.target.value}}),className:"input-field flex-1",placeholder:"#1e293b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-bold text-2xl text-center",style:{color:((me=r.loginTextColor)==null?void 0:me.title)||"#1e293b"},children:"Login"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Etichete"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((pe=r.loginTextColor)==null?void 0:pe.labels)||"#334155",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((Pe=r.loginTextColor)==null?void 0:Pe.labels)||"#334155",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:F.target.value}}),className:"input-field flex-1",placeholder:"#334155"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-semibold text-sm text-center",style:{color:((Se=r.loginTextColor)==null?void 0:Se.labels)||"#334155"},children:"Email *"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Text Secundar"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Re=r.loginTextColor)==null?void 0:Re.text)||"#64748b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},text:F.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((Ke=r.loginTextColor)==null?void 0:Ke.text)||"#64748b",onChange:F=>s({...r,loginTextColor:{...r.loginTextColor||{},text:F.target.value}}),className:"input-field flex-1",placeholder:"#64748b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"text-xs text-center",style:{color:((Ze=r.loginTextColor)==null?void 0:Ze.text)||"#64748b"},children:"Terms"})})]})]})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Rt,{className:"w-5 h-5 text-indigo-600"}),e("span",{children:"Imagine Fundal Login"})]}),t("div",{className:"flex space-x-4 mb-4",children:[t("button",{onClick:()=>v("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${((rt=r.loginImage)==null?void 0:rt.type)==="upload"?"bg-indigo-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e(ye,{className:"w-4 h-4 inline mr-2"}),"Upload"]}),t("button",{onClick:()=>v("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${((ct=r.loginImage)==null?void 0:ct.type)==="link"?"bg-indigo-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e(Wt,{className:"w-4 h-4 inline mr-2"}),"Link"]})]}),((ba=r.loginImage)==null?void 0:ba.type)==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Imagine"}),e("input",{type:"file",accept:"image/*",onChange:T,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-300 dark:hover:file:bg-indigo-800/40"}),((ga=r.loginImage)==null?void 0:ga.file)&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.loginImage.file,alt:"Login Preview",className:"h-32 w-full object-cover rounded"})})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Imagine"}),e("input",{type:"text",value:((V=r.loginImage)==null?void 0:V.url)||"",onChange:F=>y(F.target.value),className:"input-field",placeholder:"https://example.com/login-bg.jpg"}),((ae=r.loginImage)==null?void 0:ae.url)&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.loginImage.url,alt:"Login Preview",className:"h-32 w-full object-cover rounded"})})]})]})]}),a==="backup"&&e(tl,{compact:!1}),a!=="backup"&&e("div",{className:"card p-6",children:t("div",{className:"flex justify-end space-x-4",children:[t("button",{onClick:w,className:"btn-secondary flex items-center space-x-2",children:[e(He,{size:18}),e("span",{children:"Resetează"})]}),t("button",{onClick:x,className:"btn-primary flex items-center space-x-2",children:[e(vt,{size:18}),e("span",{children:"Salvează Setări"})]})]})})]})})};function ai(){return e(Kn,{children:e(Zn,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:t(nl,{children:[e(we,{path:"/login",element:e(Qn,{})}),e(we,{path:"/",element:e(wa,{to:"/login",replace:!0})}),e(we,{path:"/dashboard",element:e(no,{})}),e(we,{path:"/companies",element:e(mo,{})}),e(we,{path:"/companies/:id",element:e(Wo,{})}),e(we,{path:"/locations",element:e(go,{})}),e(we,{path:"/locations/:id",element:e(fo,{})}),e(we,{path:"/providers",element:e(No,{})}),e(we,{path:"/cabinets",element:e(ko,{})}),e(we,{path:"/game-mixes",element:e(_o,{})}),e(we,{path:"/games/:gameId",element:e(Eo,{})}),e(we,{path:"/slots",element:e(Do,{})}),e(we,{path:"/slots/history",element:e(zo,{})}),e(we,{path:"/slots/cyber-import",element:e(Po,{})}),e(we,{path:"/slots/:id",element:e(To,{})}),e(we,{path:"/warehouse",element:e(Lo,{})}),e(we,{path:"/metrology",element:e(Uo,{})}),e(we,{path:"/jackpots",element:e(Go,{})}),e(we,{path:"/invoices",element:e(Jo,{})}),e(we,{path:"/invoices/:id",element:e(Ho,{})}),e(we,{path:"/onjn-reports",element:e(Xo,{})}),e(we,{path:"/legal-documents",element:e(Zo,{})}),e(we,{path:"/users",element:e(ei,{})}),e(we,{path:"/settings",element:e(ti,{})}),e(we,{path:"*",element:e(wa,{to:"/login",replace:!0})})]})})})})}_a.createRoot(document.getElementById("root")).render(e(ya.StrictMode,{children:e(fs,{children:t(ol,{children:[e(ai,{}),e(bs,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"12px",padding:"16px",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));
