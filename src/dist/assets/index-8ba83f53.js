import{r as h,a as gl,b as Pa}from"./vendor-b69f2a9f.js";import{N as Ht,u as et,a as fl,L as Ar,b as Kt,R as vl,c as Ee,B as Nl}from"./router-c483c27c.js";import{E as Ia,a as je,B as He,b as Pe,M as tt,U as st,G as Je,C as Rt,P as Wt,A as ct,T as Pt,F as de,S as Ot,c as gt,d as yl,e as wl,f as kl,g as Cl,L as Sl,h as fa,i as El,j as Ae,k as Se,D as Le,l as ft,m as Oe,n as Ye,o as St,p as _r,q as Et,X as Dr,r as wt,s as rt,R as at,t as La,u as ar,H as Fa,v as rr,Z as Yt,w as At,x as Al,y as lr,z as we,I as qt,J as _l,K as Dl,N as $e,O as jt,Q as Ga,V as qa,W as lt,Y as sr,_ as Ft,$ as Tr,a0 as Tl,a1 as zl,a2 as zr,a3 as Xt,a4 as Ja,a5 as Jt,a6 as Pl,a7 as nr,a8 as xt,a9 as Il,aa as or,ab as Ll,ac as Fl,ad as Rl,ae as jl,af as na,ag as Tt}from"./icons-ea6bd624.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var Pr={exports:{}},va={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=h,Ml=Symbol.for("react.element"),$l=Symbol.for("react.fragment"),Bl=Object.prototype.hasOwnProperty,Ul=Ol.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vl={key:!0,ref:!0,__self:!0,__source:!0};function Ir(a,l,r){var s,o={},i=null,n=null;r!==void 0&&(i=""+r),l.key!==void 0&&(i=""+l.key),l.ref!==void 0&&(n=l.ref);for(s in l)Bl.call(l,s)&&!Vl.hasOwnProperty(s)&&(o[s]=l[s]);if(a&&a.defaultProps)for(s in l=a.defaultProps,l)o[s]===void 0&&(o[s]=l[s]);return{$$typeof:Ml,type:a,key:i,ref:n,props:o,_owner:Ul.current}}va.Fragment=$l;va.jsx=Ir;va.jsxs=Ir;Pr.exports=va;var Ha=Pr.exports;const Ne=Ha.Fragment,e=Ha.jsx,t=Ha.jsxs;var Ra={},ir=gl;Ra.createRoot=ir.createRoot,Ra.hydrateRoot=ir.hydrateRoot;let Gl={data:""},ql=a=>{if(typeof window=="object"){let l=(a?a.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return l.nonce=window.__nonce__,l.parentNode||(a||document.head).appendChild(l),l.firstChild}return a||Gl},Jl=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Hl=/\/\*[^]*?\*\/|  +/g,cr=/\n+/g,Ct=(a,l)=>{let r="",s="",o="";for(let i in a){let n=a[i];i[0]=="@"?i[1]=="i"?r=i+" "+n+";":s+=i[1]=="f"?Ct(n,i):i+"{"+Ct(n,i[1]=="k"?"":l)+"}":typeof n=="object"?s+=Ct(n,l?l.replace(/([^,])+/g,m=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,x=>/&/.test(x)?x.replace(/&/g,m):m?m+" "+x:x)):i):n!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Ct.p?Ct.p(i,n):i+":"+n+";")}return r+(l&&o?l+"{"+o+"}":o)+s},Nt={},Lr=a=>{if(typeof a=="object"){let l="";for(let r in a)l+=r+Lr(a[r]);return l}return a},Wl=(a,l,r,s,o)=>{let i=Lr(a),n=Nt[i]||(Nt[i]=(x=>{let d=0,c=11;for(;d<x.length;)c=101*c+x.charCodeAt(d++)>>>0;return"go"+c})(i));if(!Nt[n]){let x=i!==a?a:(d=>{let c,g,u=[{}];for(;c=Jl.exec(d.replace(Hl,""));)c[4]?u.shift():c[3]?(g=c[3].replace(cr," ").trim(),u.unshift(u[0][g]=u[0][g]||{})):u[0][c[1]]=c[2].replace(cr," ").trim();return u[0]})(a);Nt[n]=Ct(o?{["@keyframes "+n]:x}:x,r?"":"."+n)}let m=r&&Nt.g?Nt.g:null;return r&&(Nt.g=Nt[n]),((x,d,c,g)=>{g?d.data=d.data.replace(g,x):d.data.indexOf(x)===-1&&(d.data=c?x+d.data:d.data+x)})(Nt[n],l,s,m),n},Yl=(a,l,r)=>a.reduce((s,o,i)=>{let n=l[i];if(n&&n.call){let m=n(r),x=m&&m.props&&m.props.className||/^go/.test(m)&&m;n=x?"."+x:m&&typeof m=="object"?m.props?"":Ct(m,""):m===!1?"":m}return s+o+(n??"")},"");function Na(a){let l=this||{},r=a.call?a(l.p):a;return Wl(r.unshift?r.raw?Yl(r,[].slice.call(arguments,1),l.p):r.reduce((s,o)=>Object.assign(s,o&&o.call?o(l.p):o),{}):r,ql(l.target),l.g,l.o,l.k)}let Fr,ja,Oa;Na.bind({g:1});let kt=Na.bind({k:1});function Xl(a,l,r,s){Ct.p=l,Fr=a,ja=r,Oa=s}function _t(a,l){let r=this||{};return function(){let s=arguments;function o(i,n){let m=Object.assign({},i),x=m.className||o.className;r.p=Object.assign({theme:ja&&ja()},m),r.o=/ *go\d+/.test(x),m.className=Na.apply(r,s)+(x?" "+x:""),l&&(m.ref=n);let d=a;return a[0]&&(d=m.as||a,delete m.as),Oa&&d[0]&&Oa(m),Fr(d,m)}return l?l(o):o}}var Kl=a=>typeof a=="function",xa=(a,l)=>Kl(a)?a(l):a,Zl=(()=>{let a=0;return()=>(++a).toString()})(),Rr=(()=>{let a;return()=>{if(a===void 0&&typeof window<"u"){let l=matchMedia("(prefers-reduced-motion: reduce)");a=!l||l.matches}return a}})(),Ql=20,Wa="default",jr=(a,l)=>{let{toastLimit:r}=a.settings;switch(l.type){case 0:return{...a,toasts:[l.toast,...a.toasts].slice(0,r)};case 1:return{...a,toasts:a.toasts.map(n=>n.id===l.toast.id?{...n,...l.toast}:n)};case 2:let{toast:s}=l;return jr(a,{type:a.toasts.find(n=>n.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=l;return{...a,toasts:a.toasts.map(n=>n.id===o||o===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return l.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(n=>n.id!==l.toastId)};case 5:return{...a,pausedAt:l.time};case 6:let i=l.time-(a.pausedAt||0);return{...a,pausedAt:void 0,toasts:a.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+i}))}}},ca=[],Or={toasts:[],pausedAt:void 0,settings:{toastLimit:Ql}},bt={},Mr=(a,l=Wa)=>{bt[l]=jr(bt[l]||Or,a),ca.forEach(([r,s])=>{r===l&&s(bt[l])})},$r=a=>Object.keys(bt).forEach(l=>Mr(a,l)),es=a=>Object.keys(bt).find(l=>bt[l].toasts.some(r=>r.id===a)),ya=(a=Wa)=>l=>{Mr(l,a)},ts={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},as=(a={},l=Wa)=>{let[r,s]=h.useState(bt[l]||Or),o=h.useRef(bt[l]);h.useEffect(()=>(o.current!==bt[l]&&s(bt[l]),ca.push([l,s]),()=>{let n=ca.findIndex(([m])=>m===l);n>-1&&ca.splice(n,1)}),[l]);let i=r.toasts.map(n=>{var m,x,d;return{...a,...a[n.type],...n,removeDelay:n.removeDelay||((m=a[n.type])==null?void 0:m.removeDelay)||(a==null?void 0:a.removeDelay),duration:n.duration||((x=a[n.type])==null?void 0:x.duration)||(a==null?void 0:a.duration)||ts[n.type],style:{...a.style,...(d=a[n.type])==null?void 0:d.style,...n.style}}});return{...r,toasts:i}},rs=(a,l="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:l,ariaProps:{role:"status","aria-live":"polite"},message:a,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Zl()}),Zt=a=>(l,r)=>{let s=rs(l,a,r);return ya(s.toasterId||es(s.id))({type:2,toast:s}),s.id},X=(a,l)=>Zt("blank")(a,l);X.error=Zt("error");X.success=Zt("success");X.loading=Zt("loading");X.custom=Zt("custom");X.dismiss=(a,l)=>{let r={type:3,toastId:a};l?ya(l)(r):$r(r)};X.dismissAll=a=>X.dismiss(void 0,a);X.remove=(a,l)=>{let r={type:4,toastId:a};l?ya(l)(r):$r(r)};X.removeAll=a=>X.remove(void 0,a);X.promise=(a,l,r)=>{let s=X.loading(l.loading,{...r,...r==null?void 0:r.loading});return typeof a=="function"&&(a=a()),a.then(o=>{let i=l.success?xa(l.success,o):void 0;return i?X.success(i,{id:s,...r,...r==null?void 0:r.success}):X.dismiss(s),o}).catch(o=>{let i=l.error?xa(l.error,o):void 0;i?X.error(i,{id:s,...r,...r==null?void 0:r.error}):X.dismiss(s)}),a};var ls=1e3,ss=(a,l="default")=>{let{toasts:r,pausedAt:s}=as(a,l),o=h.useRef(new Map).current,i=h.useCallback((g,u=ls)=>{if(o.has(g))return;let S=setTimeout(()=>{o.delete(g),n({type:4,toastId:g})},u);o.set(g,S)},[]);h.useEffect(()=>{if(s)return;let g=Date.now(),u=r.map(S=>{if(S.duration===1/0)return;let b=(S.duration||0)+S.pauseDuration-(g-S.createdAt);if(b<0){S.visible&&X.dismiss(S.id);return}return setTimeout(()=>X.dismiss(S.id,l),b)});return()=>{u.forEach(S=>S&&clearTimeout(S))}},[r,s,l]);let n=h.useCallback(ya(l),[l]),m=h.useCallback(()=>{n({type:5,time:Date.now()})},[n]),x=h.useCallback((g,u)=>{n({type:1,toast:{id:g,height:u}})},[n]),d=h.useCallback(()=>{s&&n({type:6,time:Date.now()})},[s,n]),c=h.useCallback((g,u)=>{let{reverseOrder:S=!1,gutter:b=8,defaultPosition:v}=u||{},y=r.filter(p=>(p.position||v)===(g.position||v)&&p.height),_=y.findIndex(p=>p.id===g.id),R=y.filter((p,C)=>C<_&&p.visible).length;return y.filter(p=>p.visible).slice(...S?[R+1]:[0,R]).reduce((p,C)=>p+(C.height||0)+b,0)},[r]);return h.useEffect(()=>{r.forEach(g=>{if(g.dismissed)i(g.id,g.removeDelay);else{let u=o.get(g.id);u&&(clearTimeout(u),o.delete(g.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:x,startPause:m,endPause:d,calculateOffset:c}}},ns=kt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,os=kt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,is=kt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,cs=_t("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ns} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${os} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${a=>a.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${is} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ds=kt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ms=_t("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${a=>a.secondary||"#e0e0e0"};
  border-right-color: ${a=>a.primary||"#616161"};
  animation: ${ds} 1s linear infinite;
`,us=kt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hs=kt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ps=_t("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${us} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hs} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${a=>a.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xs=_t("div")`
  position: absolute;
`,bs=_t("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,gs=kt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fs=_t("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${gs} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vs=({toast:a})=>{let{icon:l,type:r,iconTheme:s}=a;return l!==void 0?typeof l=="string"?h.createElement(fs,null,l):l:r==="blank"?null:h.createElement(bs,null,h.createElement(ms,{...s}),r!=="loading"&&h.createElement(xs,null,r==="error"?h.createElement(cs,{...s}):h.createElement(ps,{...s})))},Ns=a=>`
0% {transform: translate3d(0,${a*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ys=a=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${a*-150}%,-1px) scale(.6); opacity:0;}
`,ws="0%{opacity:0;} 100%{opacity:1;}",ks="0%{opacity:1;} 100%{opacity:0;}",Cs=_t("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ss=_t("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Es=(a,l)=>{let r=a.includes("top")?1:-1,[s,o]=Rr()?[ws,ks]:[Ns(r),ys(r)];return{animation:l?`${kt(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${kt(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},As=h.memo(({toast:a,position:l,style:r,children:s})=>{let o=a.height?Es(a.position||l||"top-center",a.visible):{opacity:0},i=h.createElement(vs,{toast:a}),n=h.createElement(Ss,{...a.ariaProps},xa(a.message,a));return h.createElement(Cs,{className:a.className,style:{...o,...r,...a.style}},typeof s=="function"?s({icon:i,message:n}):h.createElement(h.Fragment,null,i,n))});Xl(h.createElement);var _s=({id:a,className:l,style:r,onHeightUpdate:s,children:o})=>{let i=h.useCallback(n=>{if(n){let m=()=>{let x=n.getBoundingClientRect().height;s(a,x)};m(),new MutationObserver(m).observe(n,{subtree:!0,childList:!0,characterData:!0})}},[a,s]);return h.createElement("div",{ref:i,className:l,style:r},o)},Ds=(a,l)=>{let r=a.includes("top"),s=r?{top:0}:{bottom:0},o=a.includes("center")?{justifyContent:"center"}:a.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Rr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${l*(r?1:-1)}px)`,...s,...o}},Ts=Na`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,oa=16,zs=({reverseOrder:a,position:l="top-center",toastOptions:r,gutter:s,children:o,toasterId:i,containerStyle:n,containerClassName:m})=>{let{toasts:x,handlers:d}=ss(r,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:oa,left:oa,right:oa,bottom:oa,pointerEvents:"none",...n},className:m,onMouseEnter:d.startPause,onMouseLeave:d.endPause},x.map(c=>{let g=c.position||l,u=d.calculateOffset(c,{reverseOrder:a,gutter:s,defaultPosition:l}),S=Ds(g,u);return h.createElement(_s,{id:c.id,key:c.id,onHeightUpdate:d.updateHeight,className:c.visible?Ts:"",style:S},c.type==="custom"?xa(c.message,c):o?o(c):h.createElement(As,{toast:c,position:g}))}))},Be=X;const Br=h.createContext(),Ps=()=>{const a=h.useContext(Br);if(!a)throw new Error("useTheme must be used within a ThemeProvider");return a},Is=({children:a})=>{const[l,r]=h.useState(()=>localStorage.getItem("theme")||"light");h.useEffect(()=>{localStorage.setItem("theme",l),l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]);const s=()=>{r(o=>o==="light"?"dark":"light")};return e(Br.Provider,{value:{theme:l,setTheme:r,toggleTheme:s},children:a})};function Ur(a,l){return function(){return a.apply(l,arguments)}}const{toString:Ls}=Object.prototype,{getPrototypeOf:Ya}=Object,{iterator:wa,toStringTag:Vr}=Symbol,ka=(a=>l=>{const r=Ls.call(l);return a[r]||(a[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),dt=a=>(a=a.toLowerCase(),l=>ka(l)===a),Ca=a=>l=>typeof l===a,{isArray:$t}=Array,Mt=Ca("undefined");function Qt(a){return a!==null&&!Mt(a)&&a.constructor!==null&&!Mt(a.constructor)&&Qe(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const Gr=dt("ArrayBuffer");function Fs(a){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(a):l=a&&a.buffer&&Gr(a.buffer),l}const Rs=Ca("string"),Qe=Ca("function"),qr=Ca("number"),ea=a=>a!==null&&typeof a=="object",js=a=>a===!0||a===!1,da=a=>{if(ka(a)!=="object")return!1;const l=Ya(a);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Vr in a)&&!(wa in a)},Os=a=>{if(!ea(a)||Qt(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},Ms=dt("Date"),$s=dt("File"),Bs=dt("Blob"),Us=dt("FileList"),Vs=a=>ea(a)&&Qe(a.pipe),Gs=a=>{let l;return a&&(typeof FormData=="function"&&a instanceof FormData||Qe(a.append)&&((l=ka(a))==="formdata"||l==="object"&&Qe(a.toString)&&a.toString()==="[object FormData]"))},qs=dt("URLSearchParams"),[Js,Hs,Ws,Ys]=["ReadableStream","Request","Response","Headers"].map(dt),Xs=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ta(a,l,{allOwnKeys:r=!1}={}){if(a===null||typeof a>"u")return;let s,o;if(typeof a!="object"&&(a=[a]),$t(a))for(s=0,o=a.length;s<o;s++)l.call(null,a[s],s,a);else{if(Qt(a))return;const i=r?Object.getOwnPropertyNames(a):Object.keys(a),n=i.length;let m;for(s=0;s<n;s++)m=i[s],l.call(null,a[m],m,a)}}function Jr(a,l){if(Qt(a))return null;l=l.toLowerCase();const r=Object.keys(a);let s=r.length,o;for(;s-- >0;)if(o=r[s],l===o.toLowerCase())return o;return null}const zt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Hr=a=>!Mt(a)&&a!==zt;function Ma(){const{caseless:a,skipUndefined:l}=Hr(this)&&this||{},r={},s=(o,i)=>{const n=a&&Jr(r,i)||i;da(r[n])&&da(o)?r[n]=Ma(r[n],o):da(o)?r[n]=Ma({},o):$t(o)?r[n]=o.slice():(!l||!Mt(o))&&(r[n]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&ta(arguments[o],s);return r}const Ks=(a,l,r,{allOwnKeys:s}={})=>(ta(l,(o,i)=>{r&&Qe(o)?a[i]=Ur(o,r):a[i]=o},{allOwnKeys:s}),a),Zs=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),Qs=(a,l,r,s)=>{a.prototype=Object.create(l.prototype,s),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:l.prototype}),r&&Object.assign(a.prototype,r)},en=(a,l,r,s)=>{let o,i,n;const m={};if(l=l||{},a==null)return l;do{for(o=Object.getOwnPropertyNames(a),i=o.length;i-- >0;)n=o[i],(!s||s(n,a,l))&&!m[n]&&(l[n]=a[n],m[n]=!0);a=r!==!1&&Ya(a)}while(a&&(!r||r(a,l))&&a!==Object.prototype);return l},tn=(a,l,r)=>{a=String(a),(r===void 0||r>a.length)&&(r=a.length),r-=l.length;const s=a.indexOf(l,r);return s!==-1&&s===r},an=a=>{if(!a)return null;if($t(a))return a;let l=a.length;if(!qr(l))return null;const r=new Array(l);for(;l-- >0;)r[l]=a[l];return r},rn=(a=>l=>a&&l instanceof a)(typeof Uint8Array<"u"&&Ya(Uint8Array)),ln=(a,l)=>{const s=(a&&a[wa]).call(a);let o;for(;(o=s.next())&&!o.done;){const i=o.value;l.call(a,i[0],i[1])}},sn=(a,l)=>{let r;const s=[];for(;(r=a.exec(l))!==null;)s.push(r);return s},nn=dt("HTMLFormElement"),on=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,o){return s.toUpperCase()+o}),dr=(({hasOwnProperty:a})=>(l,r)=>a.call(l,r))(Object.prototype),cn=dt("RegExp"),Wr=(a,l)=>{const r=Object.getOwnPropertyDescriptors(a),s={};ta(r,(o,i)=>{let n;(n=l(o,i,a))!==!1&&(s[i]=n||o)}),Object.defineProperties(a,s)},dn=a=>{Wr(a,(l,r)=>{if(Qe(a)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=a[r];if(Qe(s)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},mn=(a,l)=>{const r={},s=o=>{o.forEach(i=>{r[i]=!0})};return $t(a)?s(a):s(String(a).split(l)),r},un=()=>{},hn=(a,l)=>a!=null&&Number.isFinite(a=+a)?a:l;function pn(a){return!!(a&&Qe(a.append)&&a[Vr]==="FormData"&&a[wa])}const xn=a=>{const l=new Array(10),r=(s,o)=>{if(ea(s)){if(l.indexOf(s)>=0)return;if(Qt(s))return s;if(!("toJSON"in s)){l[o]=s;const i=$t(s)?[]:{};return ta(s,(n,m)=>{const x=r(n,o+1);!Mt(x)&&(i[m]=x)}),l[o]=void 0,i}}return s};return r(a,0)},bn=dt("AsyncFunction"),gn=a=>a&&(ea(a)||Qe(a))&&Qe(a.then)&&Qe(a.catch),Yr=((a,l)=>a?setImmediate:l?((r,s)=>(zt.addEventListener("message",({source:o,data:i})=>{o===zt&&i===r&&s.length&&s.shift()()},!1),o=>{s.push(o),zt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Qe(zt.postMessage)),fn=typeof queueMicrotask<"u"?queueMicrotask.bind(zt):typeof process<"u"&&process.nextTick||Yr,vn=a=>a!=null&&Qe(a[wa]),$={isArray:$t,isArrayBuffer:Gr,isBuffer:Qt,isFormData:Gs,isArrayBufferView:Fs,isString:Rs,isNumber:qr,isBoolean:js,isObject:ea,isPlainObject:da,isEmptyObject:Os,isReadableStream:Js,isRequest:Hs,isResponse:Ws,isHeaders:Ys,isUndefined:Mt,isDate:Ms,isFile:$s,isBlob:Bs,isRegExp:cn,isFunction:Qe,isStream:Vs,isURLSearchParams:qs,isTypedArray:rn,isFileList:Us,forEach:ta,merge:Ma,extend:Ks,trim:Xs,stripBOM:Zs,inherits:Qs,toFlatObject:en,kindOf:ka,kindOfTest:dt,endsWith:tn,toArray:an,forEachEntry:ln,matchAll:sn,isHTMLForm:nn,hasOwnProperty:dr,hasOwnProp:dr,reduceDescriptors:Wr,freezeMethods:dn,toObjectSet:mn,toCamelCase:on,noop:un,toFiniteNumber:hn,findKey:Jr,global:zt,isContextDefined:Hr,isSpecCompliantForm:pn,toJSONObject:xn,isAsyncFn:bn,isThenable:gn,setImmediate:Yr,asap:fn,isIterable:vn};function ie(a,l,r,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",l&&(this.code=l),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}$.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Xr=ie.prototype,Kr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{Kr[a]={value:a}});Object.defineProperties(ie,Kr);Object.defineProperty(Xr,"isAxiosError",{value:!0});ie.from=(a,l,r,s,o,i)=>{const n=Object.create(Xr);$.toFlatObject(a,n,function(c){return c!==Error.prototype},d=>d!=="isAxiosError");const m=a&&a.message?a.message:"Error",x=l==null&&a?a.code:l;return ie.call(n,m,x,r,s,o),a&&n.cause==null&&Object.defineProperty(n,"cause",{value:a,configurable:!0}),n.name=a&&a.name||"Error",i&&Object.assign(n,i),n};const Nn=null;function $a(a){return $.isPlainObject(a)||$.isArray(a)}function Zr(a){return $.endsWith(a,"[]")?a.slice(0,-2):a}function mr(a,l,r){return a?a.concat(l).map(function(o,i){return o=Zr(o),!r&&i?"["+o+"]":o}).join(r?".":""):l}function yn(a){return $.isArray(a)&&!a.some($a)}const wn=$.toFlatObject($,{},null,function(l){return/^is[A-Z]/.test(l)});function Sa(a,l,r){if(!$.isObject(a))throw new TypeError("target must be an object");l=l||new FormData,r=$.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!$.isUndefined(y[v])});const s=r.metaTokens,o=r.visitor||c,i=r.dots,n=r.indexes,x=(r.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(l);if(!$.isFunction(o))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if($.isDate(b))return b.toISOString();if($.isBoolean(b))return b.toString();if(!x&&$.isBlob(b))throw new ie("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(b)||$.isTypedArray(b)?x&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function c(b,v,y){let _=b;if(b&&!y&&typeof b=="object"){if($.endsWith(v,"{}"))v=s?v:v.slice(0,-2),b=JSON.stringify(b);else if($.isArray(b)&&yn(b)||($.isFileList(b)||$.endsWith(v,"[]"))&&(_=$.toArray(b)))return v=Zr(v),_.forEach(function(p,C){!($.isUndefined(p)||p===null)&&l.append(n===!0?mr([v],C,i):n===null?v:v+"[]",d(p))}),!1}return $a(b)?!0:(l.append(mr(y,v,i),d(b)),!1)}const g=[],u=Object.assign(wn,{defaultVisitor:c,convertValue:d,isVisitable:$a});function S(b,v){if(!$.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));g.push(b),$.forEach(b,function(_,R){(!($.isUndefined(_)||_===null)&&o.call(l,_,$.isString(R)?R.trim():R,v,u))===!0&&S(_,v?v.concat(R):[R])}),g.pop()}}if(!$.isObject(a))throw new TypeError("data must be an object");return S(a),l}function ur(a){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(s){return l[s]})}function Xa(a,l){this._pairs=[],a&&Sa(a,this,l)}const Qr=Xa.prototype;Qr.append=function(l,r){this._pairs.push([l,r])};Qr.toString=function(l){const r=l?function(s){return l.call(this,s,ur)}:ur;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function kn(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function el(a,l,r){if(!l)return a;const s=r&&r.encode||kn;$.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(l,r):i=$.isURLSearchParams(l)?l.toString():new Xa(l,r).toString(s),i){const n=a.indexOf("#");n!==-1&&(a=a.slice(0,n)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}class Cn{constructor(){this.handlers=[]}use(l,r,s){return this.handlers.push({fulfilled:l,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){$.forEach(this.handlers,function(s){s!==null&&l(s)})}}const hr=Cn,tl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sn=typeof URLSearchParams<"u"?URLSearchParams:Xa,En=typeof FormData<"u"?FormData:null,An=typeof Blob<"u"?Blob:null,_n={isBrowser:!0,classes:{URLSearchParams:Sn,FormData:En,Blob:An},protocols:["http","https","file","blob","url","data"]},Ka=typeof window<"u"&&typeof document<"u",Ba=typeof navigator=="object"&&navigator||void 0,Dn=Ka&&(!Ba||["ReactNative","NativeScript","NS"].indexOf(Ba.product)<0),Tn=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),zn=Ka&&window.location.href||"http://localhost",Pn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ka,hasStandardBrowserEnv:Dn,hasStandardBrowserWebWorkerEnv:Tn,navigator:Ba,origin:zn},Symbol.toStringTag,{value:"Module"})),qe={...Pn,..._n};function In(a,l){return Sa(a,new qe.classes.URLSearchParams,{visitor:function(r,s,o,i){return qe.isNode&&$.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...l})}function Ln(a){return $.matchAll(/\w+|\[(\w*)]/g,a).map(l=>l[0]==="[]"?"":l[1]||l[0])}function Fn(a){const l={},r=Object.keys(a);let s;const o=r.length;let i;for(s=0;s<o;s++)i=r[s],l[i]=a[i];return l}function al(a){function l(r,s,o,i){let n=r[i++];if(n==="__proto__")return!0;const m=Number.isFinite(+n),x=i>=r.length;return n=!n&&$.isArray(o)?o.length:n,x?($.hasOwnProp(o,n)?o[n]=[o[n],s]:o[n]=s,!m):((!o[n]||!$.isObject(o[n]))&&(o[n]=[]),l(r,s,o[n],i)&&$.isArray(o[n])&&(o[n]=Fn(o[n])),!m)}if($.isFormData(a)&&$.isFunction(a.entries)){const r={};return $.forEachEntry(a,(s,o)=>{l(Ln(s),o,r,0)}),r}return null}function Rn(a,l,r){if($.isString(a))try{return(l||JSON.parse)(a),$.trim(a)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(a)}const Za={transitional:tl,adapter:["xhr","http","fetch"],transformRequest:[function(l,r){const s=r.getContentType()||"",o=s.indexOf("application/json")>-1,i=$.isObject(l);if(i&&$.isHTMLForm(l)&&(l=new FormData(l)),$.isFormData(l))return o?JSON.stringify(al(l)):l;if($.isArrayBuffer(l)||$.isBuffer(l)||$.isStream(l)||$.isFile(l)||$.isBlob(l)||$.isReadableStream(l))return l;if($.isArrayBufferView(l))return l.buffer;if($.isURLSearchParams(l))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let m;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return In(l,this.formSerializer).toString();if((m=$.isFileList(l))||s.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return Sa(m?{"files[]":l}:l,x&&new x,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),Rn(l)):l}],transformResponse:[function(l){const r=this.transitional||Za.transitional,s=r&&r.forcedJSONParsing,o=this.responseType==="json";if($.isResponse(l)||$.isReadableStream(l))return l;if(l&&$.isString(l)&&(s&&!this.responseType||o)){const n=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(l,this.parseReviver)}catch(m){if(n)throw m.name==="SyntaxError"?ie.from(m,ie.ERR_BAD_RESPONSE,this,null,this.response):m}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],a=>{Za.headers[a]={}});const Qa=Za,jn=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),On=a=>{const l={};let r,s,o;return a&&a.split(`
`).forEach(function(n){o=n.indexOf(":"),r=n.substring(0,o).trim().toLowerCase(),s=n.substring(o+1).trim(),!(!r||l[r]&&jn[r])&&(r==="set-cookie"?l[r]?l[r].push(s):l[r]=[s]:l[r]=l[r]?l[r]+", "+s:s)}),l},pr=Symbol("internals");function Gt(a){return a&&String(a).trim().toLowerCase()}function ma(a){return a===!1||a==null?a:$.isArray(a)?a.map(ma):String(a)}function Mn(a){const l=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(a);)l[s[1]]=s[2];return l}const $n=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function _a(a,l,r,s,o){if($.isFunction(s))return s.call(this,l,r);if(o&&(l=r),!!$.isString(l)){if($.isString(s))return l.indexOf(s)!==-1;if($.isRegExp(s))return s.test(l)}}function Bn(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,r,s)=>r.toUpperCase()+s)}function Un(a,l){const r=$.toCamelCase(" "+l);["get","set","has"].forEach(s=>{Object.defineProperty(a,s+r,{value:function(o,i,n){return this[s].call(this,l,o,i,n)},configurable:!0})})}class Ea{constructor(l){l&&this.set(l)}set(l,r,s){const o=this;function i(m,x,d){const c=Gt(x);if(!c)throw new Error("header name must be a non-empty string");const g=$.findKey(o,c);(!g||o[g]===void 0||d===!0||d===void 0&&o[g]!==!1)&&(o[g||x]=ma(m))}const n=(m,x)=>$.forEach(m,(d,c)=>i(d,c,x));if($.isPlainObject(l)||l instanceof this.constructor)n(l,r);else if($.isString(l)&&(l=l.trim())&&!$n(l))n(On(l),r);else if($.isObject(l)&&$.isIterable(l)){let m={},x,d;for(const c of l){if(!$.isArray(c))throw TypeError("Object iterator must return a key-value pair");m[d=c[0]]=(x=m[d])?$.isArray(x)?[...x,c[1]]:[x,c[1]]:c[1]}n(m,r)}else l!=null&&i(r,l,s);return this}get(l,r){if(l=Gt(l),l){const s=$.findKey(this,l);if(s){const o=this[s];if(!r)return o;if(r===!0)return Mn(o);if($.isFunction(r))return r.call(this,o,s);if($.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,r){if(l=Gt(l),l){const s=$.findKey(this,l);return!!(s&&this[s]!==void 0&&(!r||_a(this,this[s],s,r)))}return!1}delete(l,r){const s=this;let o=!1;function i(n){if(n=Gt(n),n){const m=$.findKey(s,n);m&&(!r||_a(s,s[m],m,r))&&(delete s[m],o=!0)}}return $.isArray(l)?l.forEach(i):i(l),o}clear(l){const r=Object.keys(this);let s=r.length,o=!1;for(;s--;){const i=r[s];(!l||_a(this,this[i],i,l,!0))&&(delete this[i],o=!0)}return o}normalize(l){const r=this,s={};return $.forEach(this,(o,i)=>{const n=$.findKey(s,i);if(n){r[n]=ma(o),delete r[i];return}const m=l?Bn(i):String(i).trim();m!==i&&delete r[i],r[m]=ma(o),s[m]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const r=Object.create(null);return $.forEach(this,(s,o)=>{s!=null&&s!==!1&&(r[o]=l&&$.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,r])=>l+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...r){const s=new this(l);return r.forEach(o=>s.set(o)),s}static accessor(l){const s=(this[pr]=this[pr]={accessors:{}}).accessors,o=this.prototype;function i(n){const m=Gt(n);s[m]||(Un(o,n),s[m]=!0)}return $.isArray(l)?l.forEach(i):i(l),this}}Ea.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Ea.prototype,({value:a},l)=>{let r=l[0].toUpperCase()+l.slice(1);return{get:()=>a,set(s){this[r]=s}}});$.freezeMethods(Ea);const it=Ea;function Da(a,l){const r=this||Qa,s=l||r,o=it.from(s.headers);let i=s.data;return $.forEach(a,function(m){i=m.call(r,i,o.normalize(),l?l.status:void 0)}),o.normalize(),i}function rl(a){return!!(a&&a.__CANCEL__)}function Bt(a,l,r){ie.call(this,a??"canceled",ie.ERR_CANCELED,l,r),this.name="CanceledError"}$.inherits(Bt,ie,{__CANCEL__:!0});function ll(a,l,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?a(r):l(new ie("Request failed with status code "+r.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Vn(a){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return l&&l[1]||""}function Gn(a,l){a=a||10;const r=new Array(a),s=new Array(a);let o=0,i=0,n;return l=l!==void 0?l:1e3,function(x){const d=Date.now(),c=s[i];n||(n=d),r[o]=x,s[o]=d;let g=i,u=0;for(;g!==o;)u+=r[g++],g=g%a;if(o=(o+1)%a,o===i&&(i=(i+1)%a),d-n<l)return;const S=c&&d-c;return S?Math.round(u*1e3/S):void 0}}function qn(a,l){let r=0,s=1e3/l,o,i;const n=(d,c=Date.now())=>{r=c,o=null,i&&(clearTimeout(i),i=null),a(...d)};return[(...d)=>{const c=Date.now(),g=c-r;g>=s?n(d,c):(o=d,i||(i=setTimeout(()=>{i=null,n(o)},s-g)))},()=>o&&n(o)]}const ba=(a,l,r=3)=>{let s=0;const o=Gn(50,250);return qn(i=>{const n=i.loaded,m=i.lengthComputable?i.total:void 0,x=n-s,d=o(x),c=n<=m;s=n;const g={loaded:n,total:m,progress:m?n/m:void 0,bytes:x,rate:d||void 0,estimated:d&&m&&c?(m-n)/d:void 0,event:i,lengthComputable:m!=null,[l?"download":"upload"]:!0};a(g)},r)},xr=(a,l)=>{const r=a!=null;return[s=>l[0]({lengthComputable:r,total:a,loaded:s}),l[1]]},br=a=>(...l)=>$.asap(()=>a(...l)),Jn=qe.hasStandardBrowserEnv?((a,l)=>r=>(r=new URL(r,qe.origin),a.protocol===r.protocol&&a.host===r.host&&(l||a.port===r.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,Hn=qe.hasStandardBrowserEnv?{write(a,l,r,s,o,i){const n=[a+"="+encodeURIComponent(l)];$.isNumber(r)&&n.push("expires="+new Date(r).toGMTString()),$.isString(s)&&n.push("path="+s),$.isString(o)&&n.push("domain="+o),i===!0&&n.push("secure"),document.cookie=n.join("; ")},read(a){const l=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Wn(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function Yn(a,l){return l?a.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):a}function sl(a,l,r){let s=!Wn(l);return a&&(s||r==!1)?Yn(a,l):l}const gr=a=>a instanceof it?{...a}:a;function It(a,l){l=l||{};const r={};function s(d,c,g,u){return $.isPlainObject(d)&&$.isPlainObject(c)?$.merge.call({caseless:u},d,c):$.isPlainObject(c)?$.merge({},c):$.isArray(c)?c.slice():c}function o(d,c,g,u){if($.isUndefined(c)){if(!$.isUndefined(d))return s(void 0,d,g,u)}else return s(d,c,g,u)}function i(d,c){if(!$.isUndefined(c))return s(void 0,c)}function n(d,c){if($.isUndefined(c)){if(!$.isUndefined(d))return s(void 0,d)}else return s(void 0,c)}function m(d,c,g){if(g in l)return s(d,c);if(g in a)return s(void 0,d)}const x={url:i,method:i,data:i,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:m,headers:(d,c,g)=>o(gr(d),gr(c),g,!0)};return $.forEach(Object.keys({...a,...l}),function(c){const g=x[c]||o,u=g(a[c],l[c],c);$.isUndefined(u)&&g!==m||(r[c]=u)}),r}const nl=a=>{const l=It({},a);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:i,headers:n,auth:m}=l;if(l.headers=n=it.from(n),l.url=el(sl(l.baseURL,l.url,l.allowAbsoluteUrls),a.params,a.paramsSerializer),m&&n.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),$.isFormData(r)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if($.isFunction(r.getHeaders)){const x=r.getHeaders(),d=["content-type","content-length"];Object.entries(x).forEach(([c,g])=>{d.includes(c.toLowerCase())&&n.set(c,g)})}}if(qe.hasStandardBrowserEnv&&(s&&$.isFunction(s)&&(s=s(l)),s||s!==!1&&Jn(l.url))){const x=o&&i&&Hn.read(i);x&&n.set(o,x)}return l},Xn=typeof XMLHttpRequest<"u",Kn=Xn&&function(a){return new Promise(function(r,s){const o=nl(a);let i=o.data;const n=it.from(o.headers).normalize();let{responseType:m,onUploadProgress:x,onDownloadProgress:d}=o,c,g,u,S,b;function v(){S&&S(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let y=new XMLHttpRequest;y.open(o.method.toUpperCase(),o.url,!0),y.timeout=o.timeout;function _(){if(!y)return;const p=it.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),F={data:!m||m==="text"||m==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:p,config:a,request:y};ll(function(U){r(U),v()},function(U){s(U),v()},F),y=null}"onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(_)},y.onabort=function(){y&&(s(new ie("Request aborted",ie.ECONNABORTED,a,y)),y=null)},y.onerror=function(C){const F=C&&C.message?C.message:"Network Error",A=new ie(F,ie.ERR_NETWORK,a,y);A.event=C||null,s(A),y=null},y.ontimeout=function(){let C=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const F=o.transitional||tl;o.timeoutErrorMessage&&(C=o.timeoutErrorMessage),s(new ie(C,F.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,a,y)),y=null},i===void 0&&n.setContentType(null),"setRequestHeader"in y&&$.forEach(n.toJSON(),function(C,F){y.setRequestHeader(F,C)}),$.isUndefined(o.withCredentials)||(y.withCredentials=!!o.withCredentials),m&&m!=="json"&&(y.responseType=o.responseType),d&&([u,b]=ba(d,!0),y.addEventListener("progress",u)),x&&y.upload&&([g,S]=ba(x),y.upload.addEventListener("progress",g),y.upload.addEventListener("loadend",S)),(o.cancelToken||o.signal)&&(c=p=>{y&&(s(!p||p.type?new Bt(null,a,y):p),y.abort(),y=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const R=Vn(o.url);if(R&&qe.protocols.indexOf(R)===-1){s(new ie("Unsupported protocol "+R+":",ie.ERR_BAD_REQUEST,a));return}y.send(i||null)})},Zn=(a,l)=>{const{length:r}=a=a?a.filter(Boolean):[];if(l||r){let s=new AbortController,o;const i=function(d){if(!o){o=!0,m();const c=d instanceof Error?d:this.reason;s.abort(c instanceof ie?c:new Bt(c instanceof Error?c.message:c))}};let n=l&&setTimeout(()=>{n=null,i(new ie(`timeout ${l} of ms exceeded`,ie.ETIMEDOUT))},l);const m=()=>{a&&(n&&clearTimeout(n),n=null,a.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),a=null)};a.forEach(d=>d.addEventListener("abort",i));const{signal:x}=s;return x.unsubscribe=()=>$.asap(m),x}},Qn=Zn,eo=function*(a,l){let r=a.byteLength;if(!l||r<l){yield a;return}let s=0,o;for(;s<r;)o=s+l,yield a.slice(s,o),s=o},to=async function*(a,l){for await(const r of ao(a))yield*eo(r,l)},ao=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const l=a.getReader();try{for(;;){const{done:r,value:s}=await l.read();if(r)break;yield s}}finally{await l.cancel()}},fr=(a,l,r,s)=>{const o=to(a,l);let i=0,n,m=x=>{n||(n=!0,s&&s(x))};return new ReadableStream({async pull(x){try{const{done:d,value:c}=await o.next();if(d){m(),x.close();return}let g=c.byteLength;if(r){let u=i+=g;r(u)}x.enqueue(new Uint8Array(c))}catch(d){throw m(d),d}},cancel(x){return m(x),o.return()}},{highWaterMark:2})},vr=64*1024,{isFunction:ia}=$,ro=(({Request:a,Response:l})=>({Request:a,Response:l}))($.global),{ReadableStream:Nr,TextEncoder:yr}=$.global,wr=(a,...l)=>{try{return!!a(...l)}catch{return!1}},lo=a=>{a=$.merge.call({skipUndefined:!0},ro,a);const{fetch:l,Request:r,Response:s}=a,o=l?ia(l):typeof fetch=="function",i=ia(r),n=ia(s);if(!o)return!1;const m=o&&ia(Nr),x=o&&(typeof yr=="function"?(b=>v=>b.encode(v))(new yr):async b=>new Uint8Array(await new r(b).arrayBuffer())),d=i&&m&&wr(()=>{let b=!1;const v=new r(qe.origin,{body:new Nr,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!v}),c=n&&m&&wr(()=>$.isReadableStream(new s("").body)),g={stream:c&&(b=>b.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!g[b]&&(g[b]=(v,y)=>{let _=v&&v[b];if(_)return _.call(v);throw new ie(`Response type '${b}' is not supported`,ie.ERR_NOT_SUPPORT,y)})});const u=async b=>{if(b==null)return 0;if($.isBlob(b))return b.size;if($.isSpecCompliantForm(b))return(await new r(qe.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if($.isArrayBufferView(b)||$.isArrayBuffer(b))return b.byteLength;if($.isURLSearchParams(b)&&(b=b+""),$.isString(b))return(await x(b)).byteLength},S=async(b,v)=>{const y=$.toFiniteNumber(b.getContentLength());return y??u(v)};return async b=>{let{url:v,method:y,data:_,signal:R,cancelToken:p,timeout:C,onDownloadProgress:F,onUploadProgress:A,responseType:U,headers:D,withCredentials:z="same-origin",fetchOptions:M}=nl(b),T=l||fetch;U=U?(U+"").toLowerCase():"text";let j=Qn([R,p&&p.toAbortSignal()],C),N=null;const f=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let w;try{if(A&&d&&y!=="get"&&y!=="head"&&(w=await S(D,_))!==0){let Z=new r(v,{method:"POST",body:_,duplex:"half"}),le;if($.isFormData(_)&&(le=Z.headers.get("content-type"))&&D.setContentType(le),Z.body){const[ue,O]=xr(w,ba(br(A)));_=fr(Z.body,vr,ue,O)}}$.isString(z)||(z=z?"include":"omit");const k=i&&"credentials"in r.prototype,L={...M,signal:j,method:y.toUpperCase(),headers:D.normalize().toJSON(),body:_,duplex:"half",credentials:k?z:void 0};N=i&&new r(v,L);let I=await(i?T(N,M):T(v,L));const P=c&&(U==="stream"||U==="response");if(c&&(F||P&&f)){const Z={};["status","statusText","headers"].forEach(W=>{Z[W]=I[W]});const le=$.toFiniteNumber(I.headers.get("content-length")),[ue,O]=F&&xr(le,ba(br(F),!0))||[];I=new s(fr(I.body,vr,ue,()=>{O&&O(),f&&f()}),Z)}U=U||"text";let H=await g[$.findKey(g,U)||"text"](I,b);return!P&&f&&f(),await new Promise((Z,le)=>{ll(Z,le,{data:H,headers:it.from(I.headers),status:I.status,statusText:I.statusText,config:b,request:N})})}catch(k){throw f&&f(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,b,N),{cause:k.cause||k}):ie.from(k,k&&k.code,b,N)}}},so=new Map,ol=a=>{let l=a?a.env:{};const{fetch:r,Request:s,Response:o}=l,i=[s,o,r];let n=i.length,m=n,x,d,c=so;for(;m--;)x=i[m],d=c.get(x),d===void 0&&c.set(x,d=m?new Map:lo(l)),c=d;return d};ol();const Ua={http:Nn,xhr:Kn,fetch:{get:ol}};$.forEach(Ua,(a,l)=>{if(a){try{Object.defineProperty(a,"name",{value:l})}catch{}Object.defineProperty(a,"adapterName",{value:l})}});const kr=a=>`- ${a}`,no=a=>$.isFunction(a)||a===null||a===!1,il={getAdapter:(a,l)=>{a=$.isArray(a)?a:[a];const{length:r}=a;let s,o;const i={};for(let n=0;n<r;n++){s=a[n];let m;if(o=s,!no(s)&&(o=Ua[(m=String(s)).toLowerCase()],o===void 0))throw new ie(`Unknown adapter '${m}'`);if(o&&($.isFunction(o)||(o=o.get(l))))break;i[m||"#"+n]=o}if(!o){const n=Object.entries(i).map(([x,d])=>`adapter ${x} `+(d===!1?"is not supported by the environment":"is not available in the build"));let m=r?n.length>1?`since :
`+n.map(kr).join(`
`):" "+kr(n[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return o},adapters:Ua};function Ta(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Bt(null,a)}function Cr(a){return Ta(a),a.headers=it.from(a.headers),a.data=Da.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),il.getAdapter(a.adapter||Qa.adapter,a)(a).then(function(s){return Ta(a),s.data=Da.call(a,a.transformResponse,s),s.headers=it.from(s.headers),s},function(s){return rl(s)||(Ta(a),s&&s.response&&(s.response.data=Da.call(a,a.transformResponse,s.response),s.response.headers=it.from(s.response.headers))),Promise.reject(s)})}const cl="1.12.2",Aa={};["object","boolean","number","function","string","symbol"].forEach((a,l)=>{Aa[a]=function(s){return typeof s===a||"a"+(l<1?"n ":" ")+a}});const Sr={};Aa.transitional=function(l,r,s){function o(i,n){return"[Axios v"+cl+"] Transitional option '"+i+"'"+n+(s?". "+s:"")}return(i,n,m)=>{if(l===!1)throw new ie(o(n," has been removed"+(r?" in "+r:"")),ie.ERR_DEPRECATED);return r&&!Sr[n]&&(Sr[n]=!0,console.warn(o(n," has been deprecated since v"+r+" and will be removed in the near future"))),l?l(i,n,m):!0}};Aa.spelling=function(l){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${l}`),!0)};function oo(a,l,r){if(typeof a!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const s=Object.keys(a);let o=s.length;for(;o-- >0;){const i=s[o],n=l[i];if(n){const m=a[i],x=m===void 0||n(m,i,a);if(x!==!0)throw new ie("option "+i+" must be "+x,ie.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ie("Unknown option "+i,ie.ERR_BAD_OPTION)}}const ua={assertOptions:oo,validators:Aa},pt=ua.validators;class ga{constructor(l){this.defaults=l||{},this.interceptors={request:new hr,response:new hr}}async request(l,r){try{return await this._request(l,r)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(l,r){typeof l=="string"?(r=r||{},r.url=l):r=l||{},r=It(this.defaults,r);const{transitional:s,paramsSerializer:o,headers:i}=r;s!==void 0&&ua.assertOptions(s,{silentJSONParsing:pt.transitional(pt.boolean),forcedJSONParsing:pt.transitional(pt.boolean),clarifyTimeoutError:pt.transitional(pt.boolean)},!1),o!=null&&($.isFunction(o)?r.paramsSerializer={serialize:o}:ua.assertOptions(o,{encode:pt.function,serialize:pt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ua.assertOptions(r,{baseUrl:pt.spelling("baseURL"),withXsrfToken:pt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let n=i&&$.merge(i.common,i[r.method]);i&&$.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),r.headers=it.concat(n,i);const m=[];let x=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(x=x&&v.synchronous,m.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let c,g=0,u;if(!x){const b=[Cr.bind(this),void 0];for(b.unshift(...m),b.push(...d),u=b.length,c=Promise.resolve(r);g<u;)c=c.then(b[g++],b[g++]);return c}u=m.length;let S=r;for(;g<u;){const b=m[g++],v=m[g++];try{S=b(S)}catch(y){v.call(this,y);break}}try{c=Cr.call(this,S)}catch(b){return Promise.reject(b)}for(g=0,u=d.length;g<u;)c=c.then(d[g++],d[g++]);return c}getUri(l){l=It(this.defaults,l);const r=sl(l.baseURL,l.url,l.allowAbsoluteUrls);return el(r,l.params,l.paramsSerializer)}}$.forEach(["delete","get","head","options"],function(l){ga.prototype[l]=function(r,s){return this.request(It(s||{},{method:l,url:r,data:(s||{}).data}))}});$.forEach(["post","put","patch"],function(l){function r(s){return function(i,n,m){return this.request(It(m||{},{method:l,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}ga.prototype[l]=r(),ga.prototype[l+"Form"]=r(!0)});const ha=ga;class er{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(o=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](o);s._listeners=null}),this.promise.then=o=>{let i;const n=new Promise(m=>{s.subscribe(m),i=m}).then(o);return n.cancel=function(){s.unsubscribe(i)},n},l(function(i,n,m){s.reason||(s.reason=new Bt(i,n,m),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const r=this._listeners.indexOf(l);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const l=new AbortController,r=s=>{l.abort(s)};return this.subscribe(r),l.signal.unsubscribe=()=>this.unsubscribe(r),l.signal}static source(){let l;return{token:new er(function(o){l=o}),cancel:l}}}const io=er;function co(a){return function(r){return a.apply(null,r)}}function mo(a){return $.isObject(a)&&a.isAxiosError===!0}const Va={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Va).forEach(([a,l])=>{Va[l]=a});const uo=Va;function dl(a){const l=new ha(a),r=Ur(ha.prototype.request,l);return $.extend(r,ha.prototype,l,{allOwnKeys:!0}),$.extend(r,l,null,{allOwnKeys:!0}),r.create=function(o){return dl(It(a,o))},r}const Fe=dl(Qa);Fe.Axios=ha;Fe.CanceledError=Bt;Fe.CancelToken=io;Fe.isCancel=rl;Fe.VERSION=cl;Fe.toFormData=Sa;Fe.AxiosError=ie;Fe.Cancel=Fe.CanceledError;Fe.all=function(l){return Promise.all(l)};Fe.spread=co;Fe.isAxiosError=mo;Fe.mergeConfig=It;Fe.AxiosHeaders=it;Fe.formToJSON=a=>al($.isHTMLForm(a)?new FormData(a):a);Fe.getAdapter=il.getAdapter;Fe.HttpStatusCode=uo;Fe.default=Fe;const ye=Fe,ml=h.createContext(),Ut=()=>{const a=h.useContext(ml);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},ho=({children:a})=>{const[l,r]=h.useState(null),[s,o]=h.useState(!0),[i,n]=h.useState(localStorage.getItem("token"));h.useEffect(()=>{i?ye.defaults.headers.common.Authorization=`Bearer ${i}`:delete ye.defaults.headers.common.Authorization},[i]),h.useEffect(()=>{(async()=>{if(i)try{const b=(await ye.get("/api/auth/verify",{timeout:1e4})).data.user;b?r({id:b._id||b.id,username:b.username,email:b.email,fullName:b.fullName||b.full_name||b.username,role:b.role,avatar:b.avatar,status:b.status||"active",permissions:b.permissions||{},lastLogin:new Date().toISOString()}):(console.error("No user data received from verify endpoint"),localStorage.removeItem("token"),n(null),r(null))}catch(S){console.error("Auth verification failed:",S),S.code==="ECONNABORTED"&&Be.error("Timeout la verificare autentificare"),localStorage.removeItem("token"),n(null),r(null)}else window.location.pathname!=="/login"&&window.location.replace("/login");o(!1)})()},[i]);const g={user:l,token:i,loading:s,login:async(u,S)=>{var b,v;try{o(!0);const y=await ye.post("/api/auth/login",{username:u,password:S}),{token:_}=y.data;localStorage.setItem("token",_),n(_),ye.defaults.headers.common.Authorization=`Bearer ${_}`;const p=(await ye.get("/api/auth/verify",{timeout:1e4})).data.user;if(p){const C={id:p._id||p.id,username:p.username,email:p.email,fullName:p.fullName||p.full_name||p.username,role:p.role,avatar:p.avatar,status:p.status||"active",permissions:p.permissions||{},lastLogin:new Date().toISOString()};return r(C),Be.success(`Bun venit, ${C.fullName}!`),{success:!0}}else throw new Error("No user data received after login")}catch(y){const _=((v=(b=y.response)==null?void 0:b.data)==null?void 0:v.message)||"Eroare la autentificare";return Be.error(_),{success:!1,error:_}}finally{o(!1)}},logout:()=>{localStorage.removeItem("token"),n(null),r(null),delete ye.defaults.headers.common.Authorization,Be.success("V-ați deconectat cu succes!")},clearAuth:()=>{localStorage.clear(),n(null),r(null),delete ye.defaults.headers.common.Authorization,window.location.reload()},updateUser:u=>{r(u)},isAuthenticated:!!l};return e(ml.Provider,{value:g,children:a})},ul=h.createContext(),me=()=>{const a=h.useContext(ul);if(!a)throw new Error("useData must be used within DataProvider");return a},po=({children:a})=>{const[l,r]=h.useState([]),[s,o]=h.useState([]),[i,n]=h.useState([]),[m,x]=h.useState([]),[d,c]=h.useState([]),[g,u]=h.useState([]),[S,b]=h.useState([]),[v,y]=h.useState([]),[_,R]=h.useState([]),[p,C]=h.useState([]),[F,A]=h.useState([]),[U,D]=h.useState([]),[z,M]=h.useState([]),[T,j]=h.useState([]),[N,f]=h.useState([]),[w,k]=h.useState([]),[L,I]=h.useState([]),[P,H]=h.useState(!1),Z={totalCompanies:l.length,totalLocations:s.length,totalProviders:i.length,totalCabinets:d.length,totalGameMixes:g.length,totalSlots:S.length,totalWarehouse:v.length,totalMetrology:_.length,totalJackpots:p.length,totalInvoices:F.length,totalOnjnReports:U.length,totalLegalDocuments:z.length,totalUsers:T.length,totalGames:N.length},le={companies:{state:l,setState:r},locations:{state:s,setState:o},providers:{state:i,setState:n},platforms:{state:m,setState:x},cabinets:{state:d,setState:c},gameMixes:{state:g,setState:u},slots:{state:S,setState:b},warehouse:{state:v,setState:y},metrology:{state:_,setState:R},jackpots:{state:p,setState:C},invoices:{state:F,setState:A},onjnReports:{state:U,setState:D},legalDocuments:{state:z,setState:M},users:{state:T,setState:j},games:{state:N,setState:f},proprietari:{state:w,setState:k},contracts:{state:L,setState:I}},ue=async()=>{console.log("🚀 Starting to fetch all data in parallel..."),H(!0);try{const he=Object.keys(le),ge=["companies","locations","providers","slots"],be=he.filter(ae=>!ge.includes(ae)),re=ge.map(ae=>ye.get(`/api/${ae}`,{timeout:1e4}).catch(fe=>(console.error(`❌ Error fetching ${ae}:`,fe),{data:[]})));console.log(`📡 Making ${re.length} priority requests...`),(await Promise.all(re)).forEach((ae,fe)=>{const xe=ge[fe],E=Array.isArray(ae.data)?ae.data:[];console.log(`✅ ${xe}: ${E.length} items`),le[xe].setState(E)}),console.log("⚡ Priority data loaded!");const ee=be.map(ae=>ye.get(`/api/${ae}`,{timeout:1e4}).catch(fe=>(console.error(`❌ Error fetching ${ae}:`,fe),{data:[]})));console.log(`📡 Loading ${ee.length} remaining entities in background...`),(await Promise.all(ee)).forEach((ae,fe)=>{const xe=be[fe],E=Array.isArray(ae.data)?ae.data:[];console.log(`✅ ${xe}: ${E.length} items`),le[xe].setState(E)}),console.log("⚡ All data loaded!")}catch(he){console.error("Error fetching data:",he),Be.error("Eroare la încărcarea datelor")}finally{H(!1)}};h.useEffect(()=>{console.log("🚀 DataContext useEffect triggered"),ue()},[]);const O=async(he,ge)=>{try{const be=await ye.post(`/api/${he}`,ge);if(be.data){const re=be.data;if(re.compression){const{originalSize:J,compressedSize:ee,compressionRatio:se,savedBytes:ae}=re.compression,fe=(J/1024/1024).toFixed(2),xe=(ee/1024/1024).toFixed(2),E=(ae/1024).toFixed(2);Be.success(`Adăugat cu succes! PDF comprimat: ${fe}MB → ${xe}MB (${se}% reducere, ${E}KB economisite)`,{duration:6e3})}else Be.success("Adăugat cu succes!");return le[he].setState(J=>[re,...J]),{success:!0,data:re}}}catch(be){return console.error(`Error creating ${he}:`,be),Be.error("Eroare la adăugare!"),{success:!1,error:be.message}}},W=async(he,ge,be)=>{try{const re=await ye.put(`/api/${he}/${ge}`,be);if(re.data){const J=re.data;if(J.compression){const{originalSize:ee,compressedSize:se,compressionRatio:ae,savedBytes:fe}=J.compression,xe=(ee/1024/1024).toFixed(2),E=(se/1024/1024).toFixed(2),Y=(fe/1024).toFixed(2);Be.success(`Actualizat cu succes! PDF comprimat: ${xe}MB → ${E}MB (${ae}% reducere, ${Y}KB economisite)`,{duration:6e3})}else Be.success("Actualizat cu succes!");return le[he].setState(ee=>(ee||[]).map(se=>se.id===ge?{...se,...J}:se)),{success:!0,data:J}}}catch(re){return console.error(`Error updating ${he}:`,re),Be.error("Eroare la actualizare!"),{success:!1,error:re.message}}},V=async(he,ge)=>{try{return await ye.delete(`/api/${he}/${ge}`),le[he].setState(be=>be.filter(re=>re.id!==ge)),Be.success("Șters cu succes!"),{success:!0}}catch(be){return console.error(`Error deleting ${he}:`,be),Be.error("Eroare la ștergere!"),{success:!1,error:be.message}}},te=he=>{const ge=le[he].state,be=ge.length>0?Object.keys(ge[0]||{}):[];let re=`<?xml version="1.0"?>
`;re+=`<?mso-application progid="Excel.Sheet"?>
`,re+=`<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
`,re+=` xmlns:o="urn:schemas-microsoft-com:office:office"
`,re+=` xmlns:x="urn:schemas-microsoft-com:office:excel"
`,re+=` xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
`,re+=` xmlns:html="http://www.w3.org/TR/REC-html40">
`,re+=`<Worksheet ss:Name="Sheet1">
`,re+=`<Table>
`,re+=`<Row>
`(be||[]).forEach(ae=>{re+=`<Cell><Data ss:Type="String">${ne(ae)}</Data></Cell>
`}),re+=`</Row>
`(ge||[]).forEach(ae=>{re+=`<Row>
`(be||[]).forEach(fe=>{const xe=ae[fe];xe==null?re+=`<Cell><Data ss:Type="String"></Data></Cell>
`:typeof xe=="number"?re+=`<Cell><Data ss:Type="Number">${xe}</Data></Cell>
`:re+=`<Cell><Data ss:Type="String">${ne(String(xe))}</Data></Cell>
`}),re+=`</Row>
`}),re+=`</Table>
`,re+=`</Worksheet>
`,re+="</Workbook>";const J=new Blob([re],{type:"application/vnd.ms-excel"}),ee=URL.createObjectURL(J),se=document.createElement("a");se.href=ee,se.download=`${he}-${new Date().toISOString().split("T")[0]}.xls`,se.click(),URL.revokeObjectURL(ee),Be.success("Exportat în Excel cu succes!")},ne=he=>String(he).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),Ke={companies:l,locations:s,providers:i,platforms:m,cabinets:d,gameMixes:g,slots:S,warehouse:v,metrology:_,jackpots:p,invoices:F,onjnReports:U,legalDocuments:z,users:T,games:N,proprietari:w,contracts:L,loading:P,statistics:Z,createItem:O,updateItem:W,deleteItem:V,exportData:he=>{te(he)},exportToExcel:te,exportToPDF:he=>{const ge=le[he].state,be=ge.length>0?Object.keys(ge[0]||{}):[];let re=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; }
          table { border-collapse: collapse; width: 100%; margin-top: 20px; }
          th { background-color: #4CAF50; color: white; padding: 12px; text-align: left; border: 1px solid #ddd; }
          td { padding: 10px; border: 1px solid #ddd; }
          tr:nth-child(even) { background-color: #f2f2f2; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 12px; }
        </style>
      </head>
      <body>
        <h1>Raport ${he.toUpperCase()}</h1>
        <p>Generat la: ${new Date().toLocaleString("ro-RO")}</p>
        <table>
          <thead>
            <tr>
              ${(be||[]).map(ee=>`<th>${ee}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
    `(ge||[]).forEach(ee=>{re+="<tr>"(be||[]).forEach(se=>{const ae=ee[se],fe=ae==null?"":typeof ae=="object"?JSON.stringify(ae):String(ae);re+=`<td>${fe}</td>`}),re+="</tr>"});re+=`
          </tbody>
        </table>
        <div class="footer">
          Total înregistrări: ${ge.length}
        </div>
      </body>
      </html>
    `;const J=window.open("","","width=1200,height=800");J.document.write(re),J.document.close(),setTimeout(()=>{J.print(),Be.success('PDF generat! Folosește "Salvează ca PDF" în dialogul de printare.')},250)},refreshData:ue};return e(ul.Provider,{value:Ke,children:a})},hl=({size:a="lg",text:l="Se încarcă..."})=>t("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[t("div",{className:"relative",children:[e("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[a]} border-4 border-slate-200 border-t-blue-600 rounded-full animate-spin`}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"})})]}),e("p",{className:"mt-4 text-slate-600 font-medium animate-pulse",children:l})]}),xo=({children:a})=>{const{isAuthenticated:l,loading:r}=Ut();return r?e(hl,{}):l?a:e(Ht,{to:"/login",replace:!0})},Q={DASHBOARD:"dashboard",COMPANIES:"companies",LOCATIONS:"locations",PROVIDERS:"providers",CABINETS:"cabinets",GAME_MIXES:"gameMixes",SLOTS:"slots",WAREHOUSE:"warehouse",METROLOGY:"metrology",JACKPOTS:"jackpots",INVOICES:"invoices",ONJN:"onjn",LEGAL:"legal",USERS:"users",SETTINGS:"settings",CONTRACTS:"contracts",CYBER_IMPORT:"cyberImport"},K={VIEW:"view",CREATE:"create",EDIT:"edit",DELETE:"delete",EXPORT:"export",IMPORT:"import"},pa={[Q.DASHBOARD]:{label:"📊 Dashboard",actions:[K.VIEW,K.EDIT]},[Q.COMPANIES]:{label:"🏢 Companii",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.LOCATIONS]:{label:"📍 Locații",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.PROVIDERS]:{label:"🎮 Furnizori",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.CABINETS]:{label:"🎰 Cabinete",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.GAME_MIXES]:{label:"🎲 Game Mixes",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.SLOTS]:{label:"🍒 Sloturi",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT,K.IMPORT]},[Q.WAREHOUSE]:{label:"📦 Depozit",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.METROLOGY]:{label:"⚖️ Metrologie",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.CONTRACTS]:{label:"📄 Contracte",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.INVOICES]:{label:"🧾 Facturi",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.JACKPOTS]:{label:"💰 Jackpot-uri",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE]},[Q.ONJN]:{label:"⚖️ ONJN",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.LEGAL]:{label:"📋 Legal",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE,K.EXPORT]},[Q.USERS]:{label:"👥 Utilizatori",actions:[K.VIEW,K.CREATE,K.EDIT,K.DELETE]},[Q.SETTINGS]:{label:"⚙️ Setări",actions:[K.VIEW,K.EDIT]},[Q.CYBER_IMPORT]:{label:"🔄 Import Cyber",actions:[K.VIEW,K.IMPORT]}},bo={[K.VIEW]:"Vizualizare",[K.CREATE]:"Creare",[K.EDIT]:"Editare",[K.DELETE]:"Ștergere",[K.EXPORT]:"Export",[K.IMPORT]:"Import"},Er={admin:{...Object.keys(Q).reduce((a,l)=>{const r=Q[l];return a[r]=pa[r].actions.reduce((s,o)=>(s[o]=!0,s),{}),a},{})},manager:{[Q.DASHBOARD]:{view:!0,edit:!0},[Q.COMPANIES]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.LOCATIONS]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.PROVIDERS]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.CABINETS]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.GAME_MIXES]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.SLOTS]:{view:!0,create:!0,edit:!0,delete:!1,export:!0,import:!0},[Q.WAREHOUSE]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.METROLOGY]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.CONTRACTS]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.INVOICES]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.JACKPOTS]:{view:!0,create:!0,edit:!0,delete:!1},[Q.ONJN]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.LEGAL]:{view:!0,create:!0,edit:!0,delete:!1,export:!0},[Q.USERS]:{view:!0,create:!1,edit:!1,delete:!1},[Q.SETTINGS]:{view:!0,edit:!1},[Q.CYBER_IMPORT]:{view:!0,import:!0}},user:{[Q.DASHBOARD]:{view:!0,edit:!1},[Q.COMPANIES]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.LOCATIONS]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.PROVIDERS]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.CABINETS]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.GAME_MIXES]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.SLOTS]:{view:!0,create:!1,edit:!1,delete:!1,export:!0,import:!1},[Q.WAREHOUSE]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.METROLOGY]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.CONTRACTS]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.INVOICES]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.JACKPOTS]:{view:!0,create:!1,edit:!1,delete:!1},[Q.ONJN]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.LEGAL]:{view:!0,create:!1,edit:!1,delete:!1,export:!0},[Q.USERS]:{view:!1,create:!1,edit:!1,delete:!1},[Q.SETTINGS]:{view:!1,edit:!1},[Q.CYBER_IMPORT]:{view:!1,import:!1}}},go=(a,l,r)=>!a||!a[l]?!1:a[l][r]===!0,za=a=>Er[a]||Er.user,ze=({children:a,requiredRole:l,requiredPermission:r,module:s,action:o="view"})=>{const{user:i,loading:n}=Ut();return n?e(hl,{}):i?l&&i.role!==l&&i.role!=="admin"?e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:t("div",{className:"text-center p-8",children:[e("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Acces Restricționat"}),e("p",{className:"text-slate-600 mb-6",children:"Nu aveți permisiunea necesară pentru a accesa această pagină."}),e("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Înapoi"})]})}):r&&s&&!go(i.permissions,s,o)?e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:t("div",{className:"text-center p-8",children:[e("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Permisiune Insuficientă"}),e("p",{className:"text-slate-600 mb-6",children:"Nu aveți permisiunea necesară pentru a accesa această secțiune."}),e("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Înapoi"})]})}):a:e(Ht,{to:"/login",replace:!0})},fo=()=>{var F,A,U,D,z,M,T,j,N,f,w,k,L,I;const a=et(),{login:l,isAuthenticated:r,loading:s}=Ut(),[o,i]=h.useState({username:"",password:""}),[n,m]=h.useState(!1),[x,d]=h.useState(!1),[c,g]=h.useState(!1),[u,S]=h.useState({logo:{type:"upload",url:"",file:null},loginImage:{type:"upload",url:"",file:null},loginButtonColor:{primary:"#FF7A00",secondary:"#FF9500",useGradient:!1},loginPageColor:{primary:"#FFFFFF",secondary:"#F5F5F5",useGradient:!1},loginCardColor:{primary:"#8B5CF6",secondary:"#A855F7",useGradient:!0},loginTextColor:{title:"#1e293b",labels:"#334155",text:"#64748b"},loginTexts:{title:"Welcome Back",emailLabel:"Email Address",passwordLabel:"Password",buttonText:"Sign In to CASHPOT",forgotPassword:"Forgot your password?",termsText:"By signing in, you agree to our Terms of Service and Privacy Policy",joinText:"New to CASHPOT? Create Account",supportText:"Need assistance? Contact our support team"}});h.useEffect(()=>{const P=localStorage.getItem("appSettings");if(P){const Z=JSON.parse(P);S({logo:Z.logo||u.logo,loginImage:Z.loginImage||u.loginImage,loginButtonColor:Z.loginButtonColor||u.loginButtonColor,loginPageColor:Z.loginPageColor||u.loginPageColor,loginCardColor:Z.loginCardColor||u.loginCardColor,loginTextColor:Z.loginTextColor||u.loginTextColor,loginTexts:Z.loginTexts||u.loginTexts})}const H=localStorage.getItem("savedCredentials");if(H){const Z=JSON.parse(H);i({username:Z.username||"",password:Z.password||""}),g(!0)}},[]),h.useEffect(()=>{r&&a("/dashboard",{replace:!0})},[r,a]);const b=P=>{i({...o,[P.target.name]:P.target.value})},v=async P=>{P.preventDefault(),d(!0),(await l(o.username,o.password)).success&&(c?localStorage.setItem("savedCredentials",JSON.stringify({username:o.username,password:o.password})):localStorage.removeItem("savedCredentials"),a("/dashboard",{replace:!0})),d(!1)};if(r)return e(Ht,{to:"/dashboard",replace:!0});const y=u.logo.file||u.logo.url||"/favicon.svg",_=u.loginImage.file||u.loginImage.url||"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=1200&q=80",R=u.loginButtonColor.useGradient?{background:`linear-gradient(to right, ${u.loginButtonColor.primary}, ${u.loginButtonColor.secondary})`}:{backgroundColor:u.loginButtonColor.primary},p=u.loginPageColor.useGradient?{background:`linear-gradient(to right, ${u.loginPageColor.primary}, ${u.loginPageColor.secondary})`}:{backgroundColor:u.loginPageColor.primary},C=(F=u.loginCardColor)!=null&&F.useGradient?{background:`linear-gradient(to right, ${u.loginCardColor.primary}, ${u.loginCardColor.secondary})`}:{backgroundColor:((A=u.loginCardColor)==null?void 0:A.primary)||"#8B5CF6"};return t("div",{className:"min-h-screen flex",children:[e("div",{className:"w-full lg:w-1/2 flex items-center justify-center pt-16",style:p,children:t("div",{className:"w-full max-w-lg px-8 lg:px-16",children:[t("div",{className:"rounded-2xl shadow-2xl p-16",style:C,children:[t("div",{className:"flex flex-col items-center mb-12",children:[e("img",{src:y,alt:"Logo",className:"h-20 md:h-24 object-contain mb-4",onError:P=>{P.target.src="/favicon.svg"}}),e("h1",{className:"text-2xl md:text-3xl font-bold text-white text-center",children:((U=u.loginTexts)==null?void 0:U.title)||"Welcome Back"}),e("p",{className:"text-white/80 text-center mt-2",children:"Access your CASHPOT dashboard"})]}),t("form",{onSubmit:v,className:"space-y-6",children:[t("div",{className:"space-y-2",children:[t("label",{className:"block text-sm font-semibold text-white",children:[((D=u.loginTexts)==null?void 0:D.emailLabel)||"Email",e("span",{className:"text-red-300",children:"*"})]}),e("input",{type:"text",name:"username",value:o.username,onChange:b,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"your@email.com",required:!0,disabled:x})]}),t("div",{className:"space-y-2",children:[t("label",{className:"block text-sm font-semibold text-white",children:[((z=u.loginTexts)==null?void 0:z.passwordLabel)||"Password",e("span",{className:"text-red-300",children:"*"})]}),t("div",{className:"relative",children:[e("input",{type:n?"text":"password",name:"password",value:o.password,onChange:b,className:"w-full px-4 py-3 pr-12 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"••••••••",required:!0,disabled:x}),e("button",{type:"button",onClick:()=>m(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",disabled:x,children:n?e(Ia,{size:20}):e(je,{size:20})})]})]}),e("div",{className:"flex items-center justify-between",children:t("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e("input",{type:"checkbox",checked:c,onChange:P=>g(P.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2",disabled:x}),e("span",{className:"text-sm text-white font-medium",children:"Remember Password"})]})}),e("button",{type:"submit",disabled:x||s,className:"w-full py-3 rounded-lg text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:R,children:x||s?t("div",{className:"flex items-center justify-center space-x-2",children:[e("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e("span",{children:((M=u.loginTexts)==null?void 0:M.buttonText)||"Log In"})]}):((T=u.loginTexts)==null?void 0:T.buttonText)||"Log In"})]})]}),e("div",{className:"mt-8 text-center",children:e("a",{href:"#",className:"text-sm text-orange-500 hover:text-orange-600 font-medium hover:underline",children:((j=u.loginTexts)==null?void 0:j.forgotPassword)||"Forgot Password?"})}),e("div",{className:"mt-6 text-xs text-center",style:{color:((N=u.loginTextColor)==null?void 0:N.text)||"#64748b"},children:((f=u.loginTexts)==null?void 0:f.termsText)||"By clicking login you agree to the terms of the Club Membership Agreement and the Independent Partner Agreement"}),e("div",{className:"mt-4 text-center text-sm",style:{color:((w=u.loginTextColor)==null?void 0:w.text)||"#64748b"},children:e("span",{dangerouslySetInnerHTML:{__html:(((k=u.loginTexts)==null?void 0:k.joinText)||"New to CASHPOT? Create Account").replace(/Create Account/g,'<a href="#" class="text-orange-500 hover:text-orange-600 font-semibold hover:underline">Create Account</a>')}})}),e("div",{className:"mt-4 text-xs text-center",style:{color:((L=u.loginTextColor)==null?void 0:L.text)||"#64748b"},children:((I=u.loginTexts)==null?void 0:I.supportText)||"Need help? Contact us at login-support@in.group"})]})}),e("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-8",style:p,children:e("div",{className:"w-full h-full rounded-3xl overflow-hidden shadow-2xl",children:e("img",{src:_,alt:"Login Background",className:"w-full h-full object-cover",onError:P=>{P.target.src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=1200&q=80"}})})})]})},vo="7.0.3",No=4,yo="2025-10-15T10:45:00.000Z",tr={version:vo,build:No,buildDate:yo},wo=()=>tr.version,ko=()=>tr.build,Co=()=>{const a=new Date(tr.buildDate),l=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear(),o=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0");return`${l}.${r}.${s} - ${o}:${i}`},ve=({children:a})=>{const[l,r]=h.useState(!0),[s,o]=h.useState(new Date),{user:i,logout:n}=Ut(),{companies:m,locations:x,providers:d,platforms:c,cabinets:g,gameMixes:u,slots:S,warehouse:b,metrology:v,jackpots:y,invoices:_,onjnReports:R,legalDocuments:p,users:C}=me(),{theme:F,toggleTheme:A}=Ps(),U=fl(),[D,z]=Pa.useState({logo:{type:"upload",url:"",file:null},headerColor:{primary:"#2563eb",secondary:"#4f46e5",useGradient:!0},appTitle:"CASHPOT V7",appSubtitle:"Gaming Management System"});Pa.useEffect(()=>{const j=localStorage.getItem("appSettings");if(j){const N=JSON.parse(j);z({logo:N.logo||D.logo,headerColor:N.headerColor||D.headerColor,appTitle:N.appTitle||D.appTitle,appSubtitle:N.appSubtitle||D.appSubtitle})}},[]),h.useEffect(()=>{const j=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(j)},[]);const M=[{id:"dashboard",label:"Dashboard",icon:He,path:"/dashboard",count:null},{id:"companies",label:"Companii",icon:Pe,path:"/companies",count:m.length},{id:"locations",label:"Locații",icon:tt,path:"/locations",count:x.length},{id:"providers",label:"Furnizori",icon:st,path:"/providers",count:d.length},{id:"cabinets",label:"Cabinete",icon:Je,path:"/cabinets",count:g.length},{id:"game-mixes",label:"Game Mixes",icon:Rt,path:"/game-mixes",count:u.length},{id:"slots",label:"Sloturi",icon:He,path:"/slots",count:S.length},{id:"warehouse",label:"Depozit",icon:Wt,path:"/warehouse",count:b.length},{id:"metrology",label:"Metrologie CVT",icon:ct,path:"/metrology",count:v.length},{id:"jackpots",label:"Jackpots",icon:Pt,path:"/jackpots",count:y.length},{id:"invoices",label:"Facturi",icon:de,path:"/invoices",count:_.length},{id:"onjn-reports",label:"Rapoarte ONJN",icon:Ot,path:"/onjn-reports",count:R.length},{id:"legal-documents",label:"Documente Legale",icon:de,path:"/legal-documents",count:p.length},{id:"users",label:"Utilizatori",icon:st,path:"/users",count:C.length},{id:"settings",label:"Setări",icon:gt,path:"/settings",count:null}];M.find(j=>j.path===U.pathname);const T=F==="dark"?{background:"linear-gradient(to right, #1e293b, #0f172a)"}:D.headerColor.useGradient?{background:`linear-gradient(to right, ${D.headerColor.primary}, ${D.headerColor.secondary})`}:{backgroundColor:D.headerColor.primary};return t("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[e("div",{className:`fixed top-0 left-0 right-0 backdrop-blur-xl border-b text-white px-4 md:px-6 py-2 md:py-3 z-30 shadow-2xl ${F==="dark"?"border-slate-700/50 shadow-slate-900/20":"border-white/20 shadow-blue-500/10"}`,style:T,children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e("button",{onClick:()=>r(!l),className:`p-2 rounded-xl transition-all duration-200 hover:shadow-lg ${F==="dark"?"hover:bg-slate-700/80":"hover:bg-slate-100/80"}`,children:e(yl,{size:20})}),t("div",{className:"flex items-center",children:[D.logo.file||D.logo.url?e("img",{src:D.logo.file||D.logo.url,alt:"Logo",className:"h-8 md:h-12 object-contain",onError:j=>{j.target.style.display="none",j.target.nextSibling.style.display="flex"}}):null,e("div",{className:"w-8 h-8 md:w-12 md:h-12 bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 rounded-2xl flex items-center justify-center shadow-xl shadow-orange-500/30 ring-2 ring-orange-200/50",style:{display:D.logo.file||D.logo.url?"none":"flex"},children:e("span",{className:"text-white font-bold text-base md:text-xl",children:"C"})})]})]}),t("div",{className:"flex items-center space-x-2 md:space-x-4",children:[t("div",{className:"hidden md:block text-right",children:[e("div",{className:"text-white font-semibold text-sm",children:s.toLocaleString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),e("div",{className:"text-white/70 text-xs",children:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"🖥️ Local":"☁️ Online"})]}),e("button",{onClick:A,className:"p-2 rounded-xl hover:bg-white/20 transition-all duration-200 hover:shadow-lg group",title:F==="dark"?"Light Mode":"Dark Mode",children:F==="dark"?e(wl,{size:18,className:"group-hover:scale-110 transition-transform text-white"}):e(kl,{size:18,className:"group-hover:scale-110 transition-transform text-white"})}),t("button",{className:"p-2 rounded-xl hover:bg-white/20 transition-all duration-200 hover:shadow-lg relative hidden sm:block group",children:[e(Cl,{size:18,className:"group-hover:scale-110 transition-transform text-white"}),e("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-full shadow-lg animate-pulse"})]}),t("div",{className:"flex items-center space-x-3 md:space-x-4",children:[i!=null&&i.avatar?e("img",{src:i.avatar,alt:(i==null?void 0:i.fullName)||(i==null?void 0:i.username)||"Admin",className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 border-white/50 dark:border-slate-500/50 shadow-xl object-cover"}):e("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold text-base md:text-lg border-2 border-white/50 dark:border-slate-500/50 shadow-xl",children:((i==null?void 0:i.fullName)||(i==null?void 0:i.username)||"A").charAt(0).toUpperCase()}),e("div",{className:"text-sm md:text-base hidden sm:block",children:e("div",{className:"font-semibold text-white",children:i?i.fullName||i.username:"Loading..."})})]}),e("button",{onClick:n,className:"p-2 bg-gradient-to-r from-red-500 to-red-600 rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-lg hover:shadow-red-500/25 group",children:e(Sl,{size:16,className:"group-hover:scale-110 transition-transform"})})]})]})}),e("div",{className:`${l?"w-64 md:w-72":"w-0 md:w-20"} bg-white/70 dark:bg-slate-800/90 backdrop-blur-xl border-r border-white/30 dark:border-slate-700/50 transition-all duration-300 flex flex-col mt-14 md:mt-20 shadow-2xl shadow-slate-500/10 dark:shadow-slate-900/20 fixed md:relative z-20 h-full ${l?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:e("div",{className:"flex-1 sidebar-scroll p-2 md:p-3",style:{maxHeight:"calc(100vh - 5rem)"},children:e("nav",{className:"space-y-1",children:M.map(j=>{const N=U.pathname===j.path;return t(Ar,{to:j.path,onDoubleClick:()=>r(!l),className:`w-full flex items-center ${l?"justify-between":"justify-center"} p-2 md:p-3 rounded-2xl text-left transition-all duration-200 group ${N?"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-600 text-white shadow-xl shadow-blue-500/25 ring-2 ring-blue-200/50":"text-slate-700 dark:text-slate-300 hover:bg-white/60 dark:hover:bg-slate-700/60 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]"}`,title:l?"":j.label,children:[t("div",{className:`flex items-center ${l?"space-x-3":"justify-center"}`,children:[e(j.icon,{className:`text-lg md:text-xl transition-transform group-hover:scale-110 ${N?"drop-shadow-lg":""}`}),l&&e("span",{className:`font-semibold text-sm md:text-base transition-colors ${N?"text-white":"text-slate-700 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`,children:j.label})]}),l&&j.count!==null&&e("span",{className:`text-xs px-3 md:px-4 py-1.5 md:py-2 rounded-full font-bold transition-all duration-200 ${N?"bg-white/20 text-white backdrop-blur-sm border border-white/30":"bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-slate-600 dark:to-slate-700 text-blue-700 dark:text-slate-300 group-hover:from-blue-200 group-hover:to-indigo-200 dark:group-hover:from-slate-500 dark:group-hover:to-slate-600"}`,children:j.count})]},j.id)})})})}),l&&e("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-10 md:hidden",onClick:()=>r(!1)}),e("div",{className:"flex-1 flex flex-col overflow-hidden mt-14 md:mt-20 bg-white dark:bg-slate-900",children:e("div",{className:"flex-1 overflow-auto p-6 md:p-8 bg-slate-50 dark:bg-slate-900",children:a})})]})},yt=({title:a,value:l,icon:r,color:s,change:o,changeType:i,loading:n,size:m="medium"})=>{const x={blue:"from-blue-500 to-indigo-500",green:"from-green-500 to-emerald-500",purple:"from-purple-500 to-violet-500",orange:"from-orange-500 to-amber-500",indigo:"from-indigo-500 to-blue-500",emerald:"from-emerald-500 to-green-500",slate:"from-slate-500 to-gray-500",cyan:"from-cyan-500 to-blue-500",yellow:"from-yellow-500 to-orange-500",red:"from-red-500 to-pink-500",gray:"from-gray-500 to-slate-500"},d={xs:{container:"p-3",icon:"w-6 h-6",title:"text-xs",value:"text-lg",change:"text-xs"},small:{container:"p-4",icon:"w-8 h-8",title:"text-sm",value:"text-xl",change:"text-xs"},medium:{container:"p-6",icon:"w-12 h-12",title:"text-base",value:"text-3xl",change:"text-sm"},large:{container:"p-8",icon:"w-16 h-16",title:"text-lg",value:"text-4xl",change:"text-base"},"extra-large":{container:"p-10",icon:"w-20 h-20",title:"text-xl",value:"text-5xl",change:"text-lg"}},c=d[m]||d.medium,g={blue:"shadow-blue-500/25",green:"shadow-green-500/25",purple:"shadow-purple-500/25",orange:"shadow-orange-500/25",indigo:"shadow-indigo-500/25",emerald:"shadow-emerald-500/25",slate:"shadow-slate-500/25",cyan:"shadow-cyan-500/25",yellow:"shadow-yellow-500/25",red:"shadow-red-500/25",gray:"shadow-gray-500/25"};return n?t("div",{className:`card ${c.container} animate-pulse`,children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-24"}),e("div",{className:`${c.icon} bg-slate-200 dark:bg-slate-700 rounded-2xl`})]}),t("div",{className:"space-y-2",children:[e("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-16"}),e("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-20"})]})]}):t("div",{className:`card ${c.container} hover:shadow-2xl transition-all duration-300 hover:scale-105 group`,children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:`${c.title} font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider`,children:a}),e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${x[s]} shadow-lg ${g[s]}`,children:e(r,{className:`${c.icon} text-white`})})]}),t("div",{className:"space-y-2",children:[e("div",{className:`${c.value} font-bold text-slate-800 dark:text-slate-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors`,children:(l==null?void 0:l.toLocaleString())||0}),o&&t("div",{className:`flex items-center space-x-1 ${c.change} font-semibold ${i==="positive"?"text-green-600":"text-red-600"}`,children:[i==="positive"?e(fa,{className:"w-4 h-4"}):e(El,{className:"w-4 h-4"}),e("span",{children:o}),e("span",{className:"text-slate-500 dark:text-slate-400",children:"vs. luna trecută"})]})]})]})},So=()=>{const a=[{title:"Adaugă Companie",description:"Creează o companie nouă",icon:Pe,path:"/companies",color:"blue",action:"add"},{title:"Adaugă Furnizor",description:"Creează un furnizor nou",icon:st,path:"/providers",color:"green",action:"add"},{title:"Adaugă Cabinet",description:"Creează un cabinet nou",icon:Je,path:"/cabinets",color:"purple",action:"add"},{title:"Generează Raport",description:"Creează un raport ONJN",icon:de,path:"/onjn-reports",color:"orange",action:"report"},{title:"Importă Date",description:"Importă date din Excel/CSV",icon:Se,path:"/dashboard",color:"indigo",action:"import"},{title:"Exportă Date",description:"Exportă date în Excel/CSV",icon:Le,path:"/dashboard",color:"emerald",action:"export"}],l={blue:"from-blue-500 to-indigo-500",green:"from-green-500 to-emerald-500",purple:"from-purple-500 to-violet-500",orange:"from-orange-500 to-amber-500",indigo:"from-indigo-500 to-blue-500",emerald:"from-emerald-500 to-green-500"},r={blue:"shadow-blue-500/25",green:"shadow-green-500/25",purple:"shadow-purple-500/25",orange:"shadow-orange-500/25",indigo:"shadow-indigo-500/25",emerald:"shadow-emerald-500/25"};return t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Acțiuni Rapide"}),e(gt,{className:"w-6 h-6 text-slate-500 dark:text-slate-400"})]}),e("div",{className:"space-y-3",children:a.map((s,o)=>e(Ar,{to:s.path,className:"block p-4 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 rounded-2xl hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-900/30 dark:hover:to-indigo-900/30 transition-all duration-200 hover:shadow-lg group",children:t("div",{className:"flex items-center space-x-4",children:[e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${l[s.color]} shadow-lg ${r[s.color]} group-hover:scale-110 transition-transform`,children:e(s.icon,{className:"w-5 h-5 text-white"})}),t("div",{className:"flex-1",children:[e("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 group-hover:text-blue-700 dark:group-hover:text-blue-400 transition-colors",children:s.title}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.description})]}),e(Ae,{className:"w-5 h-5 text-slate-400 dark:text-slate-500 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})]})},o))})]})},Eo=()=>{const{companies:a,locations:l,providers:r,cabinets:s,slots:o,warehouse:i,metrology:n,jackpots:m,invoices:x,onjnReports:d,legalDocuments:c}=me(),g=()=>{const R=[];return a.slice(0,2).forEach(p=>{R.push({id:`company-${p.id}`,type:"create",entity:"Companie",name:p.name,user:p.created_by||"Admin",time:u(p.created_at),icon:Pe,color:"blue"})}),l.slice(0,2).forEach(p=>{R.push({id:`location-${p.id}`,type:"create",entity:"Locație",name:p.name,user:p.created_by||"Admin",time:u(p.created_at),icon:tt,color:"green"})}),r.slice(0,1).forEach(p=>{R.push({id:`provider-${p.id}`,type:"update",entity:"Furnizor",name:p.name,user:p.updated_by||"Admin",time:u(p.updated_at||p.created_at),icon:st,color:"purple"})}),c.slice(0,2).forEach(p=>{R.push({id:`legal-${p.id}`,type:"create",entity:"Document Legal",name:p.name,user:p.created_by||"Admin",time:u(p.created_at),icon:de,color:"orange"})}),o.slice(0,1).forEach(p=>{R.push({id:`slot-${p.id}`,type:"create",entity:"Slot",name:p.name||p.serial_number,user:p.created_by||"Admin",time:u(p.created_at),icon:He,color:"emerald"})}),R.sort((p,C)=>new Date(C.time)-new Date(p.time)).slice(0,6)},u=R=>{if(!R)return"Acum câteva minute";const p=new Date,C=new Date(R),F=Math.floor((p-C)/(1e3*60));if(F<1)return"Acum câteva secunde";if(F<60)return`Acum ${F} minute`;const A=Math.floor(F/60);if(A<24)return`Acum ${A} ore`;const U=Math.floor(A/24);return U<7?`Acum ${U} zile`:C.toLocaleDateString("ro-RO")},S=g(),b=R=>{switch(R){case"create":return Ae;case"update":return Ye;case"delete":return Oe;case"report":return de;case"jackpot":return Pt;default:return ct}},v=R=>{switch(R){case"create":return"Creat";case"update":return"Actualizat";case"delete":return"Șters";case"report":return"Generat";case"jackpot":return"Câștigat";default:return"Modificat"}},y=R=>{switch(R){case"create":return"text-green-600 bg-green-100";case"update":return"text-blue-600 bg-blue-100";case"delete":return"text-red-600 bg-red-100";case"report":return"text-orange-600 bg-orange-100";case"jackpot":return"text-yellow-600 bg-yellow-100";default:return"text-slate-600 bg-slate-100"}},_={blue:"from-blue-500 to-indigo-500",green:"from-green-500 to-emerald-500",purple:"from-purple-500 to-violet-500",orange:"from-orange-500 to-amber-500",yellow:"from-yellow-500 to-orange-500",red:"from-red-500 to-pink-500"};return t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Activitate Recentă"}),e(ct,{className:"w-6 h-6 text-blue-500 dark:text-blue-400"})]}),e("div",{className:"space-y-4",children:S.map(R=>{const p=b(R.type),C=R.icon;return t("div",{className:"flex items-center space-x-4 p-4 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 rounded-2xl hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-900/30 dark:hover:to-indigo-900/30 transition-all duration-200 group",children:[t("div",{className:"relative",children:[e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${_[R.color]} shadow-lg`,children:e(C,{className:"w-5 h-5 text-white"})}),e("div",{className:`absolute -top-1 -right-1 p-1 rounded-full ${y(R.type)}`,children:e(p,{className:"w-3 h-3"})})]}),t("div",{className:"flex-1 min-w-0",children:[t("div",{className:"flex items-center space-x-2 mb-1",children:[e("span",{className:"font-semibold text-slate-800 dark:text-slate-200 group-hover:text-blue-700 dark:group-hover:text-blue-400 transition-colors",children:R.name}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${y(R.type)}`,children:v(R.type)})]}),t("div",{className:"flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e("span",{children:R.entity}),e("span",{children:"•"}),t("span",{children:["de ",R.user]}),e("span",{children:"•"}),t("div",{className:"flex items-center space-x-1",children:[e(ft,{className:"w-3 h-3"}),e("span",{children:R.time})]})]})]})]},R.id)})}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:e("button",{className:"w-full py-3 text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:"Vezi toată activitatea →"})})]})},Ao=()=>{const{loading:a,companies:l,locations:r,providers:s,legalDocuments:o}=me(),i=()=>{const u=[],S=l.length>0||r.length>0||s.length>0;u.push({name:"Baza de Date AWS RDS",status:S?"healthy":"warning",description:S?`Conectivitate optimă la PostgreSQL - ${l.length+r.length+s.length} înregistrări`:"Conectare în curs...",icon:St,color:S?"green":"yellow"}),u.push({name:"API Backend",status:"healthy",description:"Toate endpoint-urile sunt disponibile",icon:ct,color:"green"}),u.push({name:"Sistem Principal",status:"healthy",description:"Toate serviciile funcționează normal",icon:_r,color:"green"});const b=l.length+r.length+s.length+o.length;u.push({name:"Integritate Date",status:b>0?"healthy":"warning",description:b>0?`${b} înregistrări active în sistem`:"Nu există date în sistem",icon:Ot,color:b>0?"green":"yellow"});const v=n();return u.push({name:"Ultima Activitate",status:"healthy",description:v,icon:ft,color:"green"}),u},n=()=>{const u=[...l,...r,...s,...o];if(u.length===0)return"Sistem nou - fără activitate";const S=u.filter(p=>p.created_at||p.updated_at).sort((p,C)=>{const F=new Date(p.updated_at||p.created_at);return new Date(C.updated_at||C.created_at)-F});if(S.length===0)return"Sistem nou - fără activitate";const b=S[0],v=new Date(b.updated_at||b.created_at),_=Math.floor((new Date-v)/(1e3*60));if(_<1)return"Acum câteva secunde";if(_<60)return`Acum ${_} minute`;const R=Math.floor(_/60);return R<24?`Acum ${R} ore`:v.toLocaleDateString("ro-RO")},m=i(),x=u=>{switch(u){case"healthy":return Et;case"warning":return wt;case"error":return Dr;default:return Et}},d=u=>{switch(u){case"healthy":return"text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30";case"warning":return"text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30";case"error":return"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30";default:return"text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"}},c=u=>{switch(u){case"healthy":return"Funcțional";case"warning":return"Atenție";case"error":return"Eroare";default:return"Necunoscut"}},g=u=>{switch(u){case"green":return"from-green-500 to-emerald-500 shadow-green-500/25";case"yellow":return"from-yellow-500 to-orange-500 shadow-yellow-500/25";case"red":return"from-red-500 to-pink-500 shadow-red-500/25";default:return"from-slate-500 to-gray-500 shadow-slate-500/25"}};return t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Starea Sistemului"}),t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:"Operațional"})]})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map((u,S)=>{const b=x(u.status),v=u.icon;return e("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 rounded-2xl hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-900/30 dark:hover:to-indigo-900/30 transition-all duration-200 group",children:t("div",{className:"flex items-start space-x-3",children:[e("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${g(u.color)} shadow-lg`,children:e(v,{className:"w-5 h-5 text-white"})}),t("div",{className:"flex-1 min-w-0",children:[t("div",{className:"flex items-center space-x-2 mb-2",children:[e("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 group-hover:text-blue-700 dark:group-hover:text-blue-400 transition-colors",children:u.name}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${d(u.status)}`,children:c(u.status)})]}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.description})]}),e(b,{className:`w-5 h-5 ${d(u.status).split(" ")[0]}`})]})},S)})}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e("span",{className:"font-semibold",children:"Uptime:"})," 99.9% (Ultimele 30 zile)"]}),t("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e("span",{className:"font-semibold",children:"Ultima verificare:"})," ",new Date().toLocaleTimeString("ro-RO")]})]})})]})},_o=()=>{const[a,l]=h.useState([]),[r,s]=h.useState(!1),[o,i]=h.useState(null),[n,m]=h.useState(new Date().getMonth()),[x,d]=h.useState(new Date().getFullYear()),c=[{id:1,title:"Comitetul de Supraveghere",date:"2025-10-16",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 16 octombrie 2025 (joi)"},{id:2,title:"Comitetul de Supraveghere",date:"2025-10-29",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 29 octombrie 2025 (miercuri)"},{id:3,title:"Comitetul de Supraveghere",date:"2025-11-13",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 13 noiembrie 2025 (joi)"},{id:4,title:"Comitetul de Supraveghere",date:"2025-11-27",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 27 noiembrie 2025 (joi)"},{id:5,title:"Comitetul de Supraveghere",date:"2025-12-11",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 11 decembrie 2025 (joi)"},{id:6,title:"Comitetul de Supraveghere",date:"2025-12-18",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 18 decembrie 2025 (joi)"},{id:7,title:"Comitetul de Supraveghere",date:"2026-01-15",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 15 ianuarie 2026 (joi)"},{id:8,title:"Comitetul de Supraveghere",date:"2026-01-29",time:"10:00",location:"București, Bd. Magheru 28-30",type:"Supraveghere",status:"Programată",description:"Ședința din 29 ianuarie 2026 (joi)"}];h.useEffect(()=>{g()},[]);const g=async()=>{s(!0),i(null);try{await new Promise(z=>setTimeout(z,1e3));const A=new Date,U=new Date(A.getTime()+90*24*60*60*1e3),D=c.filter(z=>{const M=new Date(z.date);return M>=A&&M<=U});l(D)}catch(A){i("Eroare la încărcarea calendarului ONJN"),console.error("Error loading ONJN calendar:",A)}finally{s(!1)}},u=A=>{switch(A){case"Programată":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"În desfășurare":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300";case"Finalizată":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"Anulată":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300"}},S=A=>{switch(A){case"Supraveghere":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"Autorizare":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300";case"Metrologie":return"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300";case"Control":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300"}},b=A=>new Date(A).toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"}),v=A=>A,y=()=>{n===0?(m(11),d(x-1)):m(n-1)},_=()=>{n===11?(m(0),d(x+1)):m(n+1)},R=()=>{m(new Date().getMonth()),d(new Date().getFullYear())},p=()=>{const A=new Date(x,n,1),D=new Date(x,n+1,0).getDate(),z=A.getDay();return{daysInMonth:D,startingDayOfWeek:z,year:x,month:n}},C=A=>{const{year:U,month:D}=p(),z=`${U}-${String(D+1).padStart(2,"0")}-${String(A).padStart(2,"0")}`;return c.some(M=>M.date===z)},F=A=>{const{year:U,month:D}=p(),z=`${U}-${String(D+1).padStart(2,"0")}-${String(A).padStart(2,"0")}`;return c.find(M=>M.date===z)};return t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg",children:e(rt,{className:"w-5 h-5 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Ședințe ONJN"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Următoarele 3 luni"})]})]}),e("button",{onClick:g,disabled:r,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Actualizează calendarul",children:e(at,{className:`w-4 h-4 ${r?"animate-spin":""}`})})]}),r?e("div",{className:"flex items-center justify-center py-8",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):o?e("div",{className:"flex items-center justify-center py-8",children:t("div",{className:"text-center",children:[e(wt,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),e("p",{className:"text-red-600 font-medium",children:o})]})}):a.length===0?t("div",{className:"text-center py-8",children:[e(rt,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),e("p",{className:"text-slate-500",children:"Nu există ședințe ale Comitetului de Supraveghere în următoarele 3 luni"})]}):t("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[a.slice(0,3).map(A=>e("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-800/50 dark:to-blue-900/20 border border-slate-200 dark:border-slate-700 rounded-xl p-4 hover:shadow-md transition-shadow",children:t("div",{className:"flex items-start justify-between",children:[t("div",{className:"flex-1",children:[t("div",{className:"flex items-center space-x-2 mb-2",children:[e("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:A.title}),e("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(A.type)}`,children:A.type}),e("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(A.status)}`,children:A.status})]}),e("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-3 line-clamp-2",children:A.description}),t("div",{className:"grid grid-cols-1 gap-2",children:[t("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e(rt,{className:"w-3 h-3"}),e("span",{className:"text-xs font-medium",children:b(A.date)})]}),t("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e(ft,{className:"w-3 h-3"}),e("span",{className:"text-xs font-medium",children:v(A.time)})]}),t("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e(tt,{className:"w-3 h-3"}),e("span",{className:"text-xs font-medium truncate",children:A.location})]})]})]}),e("button",{onClick:()=>window.open("https://onjn.gov.ro/structura-organizatorica/autorizare/","_blank"),className:"ml-2 p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Vezi pe site-ul ONJN",children:e(La,{className:"w-4 h-4"})})]})},A.id)),a.length>3&&e("div",{className:"text-center pt-2",children:t("button",{onClick:()=>window.open("/metrology","_blank"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:["Vezi toate ședințele (",a.length,")"]})})]})]}),t("div",{className:"card p-6",children:[e("div",{className:"mb-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg",children:e(rt,{className:"w-5 h-5 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Calendar Evenimente"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(x,n).toLocaleDateString("ro-RO",{month:"long",year:"numeric"})})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:y,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Luna anterioară",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e("button",{onClick:R,className:"px-3 py-1 text-xs font-medium text-indigo-600 hover:text-white hover:bg-indigo-600 border border-indigo-200 rounded-lg transition-colors",title:"Azi",children:"Azi"}),e("button",{onClick:_,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Luna următoare",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}),t("div",{className:"space-y-2",children:[e("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["D","L","M","M","J","V","S"].map((A,U)=>e("div",{className:"text-center text-xs font-bold text-slate-600 dark:text-slate-400 py-2",children:A},U))}),e("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const{daysInMonth:A,startingDayOfWeek:U,year:D,month:z}=p(),M=[],T=new Date().getDate(),j=new Date().getMonth(),N=new Date().getFullYear();for(let f=0;f<U;f++)M.push(e("div",{className:"aspect-square"},`empty-${f}`));for(let f=1;f<=A;f++){const w=f===T&&z===j&&D===N,k=C(f),L=F(f);M.push(e("div",{className:`aspect-square flex items-center justify-center text-sm rounded-lg transition-all ${w?"bg-blue-600 text-white font-bold":k?"bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-semibold hover:shadow-md cursor-pointer":"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:L?`${L.title} - ${L.time}`:"",children:f},f))}return M})()}),e("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between text-xs",children:[t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-4 h-4 bg-blue-600 rounded"}),e("span",{className:"text-slate-600 dark:text-slate-400",children:"Astăzi"})]}),t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-4 h-4 bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 rounded"}),e("span",{className:"text-slate-600 dark:text-slate-400",children:"Ședință ONJN"})]})]})})]})]})]})},pl=({compact:a=!1})=>{const[l,r]=h.useState(null),[s,o]=h.useState(null),[i,n]=h.useState(!1),[m,x]=h.useState(!1),[d,c]=h.useState({type:"",text:""});h.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const v=await(await fetch("/api/backup/status")).json();v.success&&r(v.data);const _=await(await fetch("/api/backup/stats")).json();_.success&&o(_.data)}catch(b){console.error("Error loading backup info:",b),c({type:"error",text:"Eroare la încărcarea informațiilor despre backup"})}finally{n(!1)}},u=async()=>{x(!0),c({type:"",text:""});try{const v=await(await fetch("/api/backup/create",{method:"POST",headers:{"Content-Type":"application/json"}})).json();v.success?(c({type:"success",text:"Backup creat cu succes!"}),g()):c({type:"error",text:v.message||"Eroare la crearea backup-ului"})}catch(b){console.error("Error creating backup:",b),c({type:"error",text:"Eroare la crearea backup-ului"})}finally{x(!1)}},S=async()=>{try{const v=await(await fetch("/api/backup/export")).blob(),y=window.URL.createObjectURL(v),_=document.createElement("a");_.href=y,_.download=`cashpot_backup_${new Date().toISOString().split("T")[0]}.sql`,document.body.appendChild(_),_.click(),window.URL.revokeObjectURL(y),document.body.removeChild(_),c({type:"success",text:"Backup descărcat cu succes!"})}catch(b){console.error("Error downloading backup:",b),c({type:"error",text:"Eroare la descărcarea backup-ului"})}};return i&&!l?e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-center py-8",children:[e(at,{className:"w-6 h-6 text-blue-500 dark:text-blue-400 animate-spin"}),e("span",{className:"ml-2 text-slate-600 dark:text-slate-400",children:"Se încarcă informațiile..."})]})}):a?t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:e(St,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t("div",{children:[e("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Backup Bază de Date"}),t("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[(s==null?void 0:s.totalRecords)||0," înregistrări • ",(s==null?void 0:s.databaseSize)||"N/A"]})]})]}),e("button",{onClick:g,className:"p-2 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e(at,{className:`w-5 h-5 ${i?"animate-spin":""}`})})]}),t("div",{className:"space-y-3 mb-6",children:[t("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t("div",{className:"flex items-center space-x-2",children:[l!=null&&l.s3Enabled?e(ar,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):e(Fa,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stocare"})]}),e("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:(l==null?void 0:l.storageLocation)||"Local"})]}),t("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t("div",{className:"flex items-center space-x-2",children:[e(ft,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Auto Backup"})]}),e("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:l!=null&&l.autoBackupEnabled?`La ${l==null?void 0:l.backupIntervalHours}h`:"Dezactivat"})]})]}),d.text&&t("div",{className:`mb-4 p-3 rounded-lg flex items-center space-x-2 ${d.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:[d.type==="success"?e(Et,{className:"w-4 h-4"}):e(wt,{className:"w-4 h-4"}),e("span",{className:"text-sm",children:d.text})]}),t("div",{className:"grid grid-cols-2 gap-3",children:[e("button",{onClick:u,disabled:m,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:m?t(Ne,{children:[e(at,{className:"w-4 h-4 animate-spin"}),e("span",{className:"text-sm",children:"Creare..."})]}):t(Ne,{children:[e(Se,{className:"w-4 h-4"}),e("span",{className:"text-sm",children:"Creează Backup"})]})}),t("button",{onClick:S,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e(Le,{className:"w-4 h-4"}),e("span",{className:"text-sm",children:"Descarcă"})]})]})]}):t("div",{className:"space-y-6",children:[t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-8",children:[t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Backup Bază de Date"}),e("p",{className:"text-slate-600",children:"Gestionează backup-urile bazei de date și exportă datele"})]}),e("button",{onClick:g,className:"p-3 text-slate-400 hover:text-slate-600 transition-colors",children:e(at,{className:`w-6 h-6 ${i?"animate-spin":""}`})})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:t("div",{className:"flex items-center space-x-3 mb-3",children:[e(St,{className:"w-8 h-8 text-blue-600"}),t("div",{children:[e("p",{className:"text-sm text-blue-600 font-medium",children:"Total Înregistrări"}),e("p",{className:"text-2xl font-bold text-blue-800",children:(s==null?void 0:s.totalRecords)||0})]})]})}),e("div",{className:"p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100",children:t("div",{className:"flex items-center space-x-3 mb-3",children:[e(_r,{className:"w-8 h-8 text-green-600"}),t("div",{children:[e("p",{className:"text-sm text-green-600 font-medium",children:"Dimensiune BD"}),e("p",{className:"text-2xl font-bold text-green-800",children:(s==null?void 0:s.databaseSize)||"N/A"})]})]})}),e("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-100",children:t("div",{className:"flex items-center space-x-3 mb-3",children:[l!=null&&l.s3Enabled?e(ar,{className:"w-8 h-8 text-purple-600"}):e(Fa,{className:"w-8 h-8 text-purple-600"}),t("div",{children:[e("p",{className:"text-sm text-purple-600 font-medium",children:"Stocare"}),e("p",{className:"text-lg font-bold text-purple-800",children:(l==null?void 0:l.storageLocation)||"Local"})]})]})})]}),t("div",{className:"p-6 bg-slate-50 rounded-xl mb-8",children:[e("h3",{className:"font-bold text-slate-800 mb-4",children:"Configurare Backup"}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"Auto Backup:"}),e("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l!=null&&l.autoBackupEnabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:l!=null&&l.autoBackupEnabled?"Activ":"Inactiv"})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"Interval Backup:"}),t("span",{className:"font-medium text-slate-800",children:[(l==null?void 0:l.backupIntervalHours)||6," ore"]})]}),(l==null?void 0:l.s3Enabled)&&t(Ne,{children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"S3 Bucket:"}),e("span",{className:"font-medium text-slate-800",children:l==null?void 0:l.bucketName})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:"Regiune:"}),e("span",{className:"font-medium text-slate-800",children:l==null?void 0:l.region})]})]})]})]}),d.text&&t("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${d.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:[d.type==="success"?e(Et,{className:"w-5 h-5"}):e(wt,{className:"w-5 h-5"}),e("span",{children:d.text})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e("button",{onClick:u,disabled:m,className:"flex items-center justify-center space-x-2 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?t(Ne,{children:[e(at,{className:"w-5 h-5 animate-spin"}),e("span",{children:"Se creează backup..."})]}):t(Ne,{children:[e(Se,{className:"w-5 h-5"}),e("span",{children:"Creează Backup Manual"})]})}),t("button",{onClick:S,className:"flex items-center justify-center space-x-2 px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e(Le,{className:"w-5 h-5"}),e("span",{children:"Descarcă Backup SQL"})]})]})]}),(s==null?void 0:s.tableStats)&&t("div",{className:"card p-8",children:[e("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Statistici pe Tabele"}),e("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(s.tableStats).map(([b,v])=>t("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e("p",{className:"text-sm text-slate-600 capitalize",children:b.replace("_"," ")}),e("p",{className:"text-2xl font-bold text-slate-800",children:v})]},b))})]})]})},Do=()=>{const[a,l]=h.useState(!1),r={EUR_2024_OCT:4.9759,EUR_2025_OCT:5.082,lastUpdated_2024:"2024-10-01",lastUpdated_2025:"2025-10-01",source:"JOUE/BNR"};return t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl",children:e(fa,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t("div",{children:[e("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Curs Valutar ONJN"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cursuri de referință"})]})]}),e("button",{onClick:()=>{l(!0),setTimeout(()=>{l(!1)},1e3)},className:"p-2 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e(at,{className:`w-5 h-5 ${a?"animate-spin":""}`})})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-xl border border-blue-100 dark:border-blue-800/50",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-blue-600 rounded-lg",children:e(rr,{className:"w-4 h-4 text-white"})}),t("div",{children:[e("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"EUR - Oct 2024"}),e("p",{className:"text-xs text-blue-500 dark:text-blue-300",children:"Prima zi lucrătoare"})]})]}),t("div",{className:"text-right",children:[e("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:r.EUR_2024_OCT.toFixed(4)}),e("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"RON"})]})]})}),e("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl border border-green-100 dark:border-green-800/50",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-green-600 rounded-lg",children:e(rr,{className:"w-4 h-4 text-white"})}),t("div",{children:[e("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"EUR - 1 Oct 2025"}),e("p",{className:"text-xs text-green-500 dark:text-green-300",children:"1 Octombrie 2025"})]})]}),t("div",{className:"text-right",children:[e("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:r.EUR_2025_OCT.toFixed(4)}),e("p",{className:"text-xs text-green-600 dark:text-green-400",children:"RON"})]})]})})]}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[t("div",{className:"flex items-center space-x-2",children:[e(rt,{className:"w-4 h-4"}),e("span",{children:"Cursuri oficiale JOUE/BNR"})]}),t("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 font-medium",children:["Sursa: ",r.source]})]})})]})},To=()=>{const a=et(),[l,r]=h.useState([]),[s,o]=h.useState(!0),[i,n]=h.useState({total:0,providers:0,topGames:[]});h.useEffect(()=>{m()},[]);const m=async()=>{o(!0);try{const d=await fetch("/api/games");if(d.ok){const c=await d.json();r(c);const g=[...new Set(c.map(S=>S.provider))],u=c.slice(0,5);n({total:c.length,providers:g.length,topGames:u})}}catch(d){console.error("Error loading games:",d)}finally{o(!1)}},x=d=>{switch(d){case"low":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"low - medium":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"medium":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300";case"high":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300"}};return s?e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-3 mb-6",children:[e("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl shadow-lg",children:e(Je,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Jocuri din Librărie"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Se încarcă..."})]})]})}):t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl shadow-lg shadow-pink-500/25",children:e(Je,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Jocuri din Librărie"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Top jocuri disponibile"})]})]}),t("button",{onClick:()=>a("/game-mixes/games-library"),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/25 transition-all",children:[e(je,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:"Vezi Tot"})]})]}),t("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:[t("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Jocuri"}),e(fa,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})]}),e("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:i.total})]}),t("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-xl border border-purple-200 dark:border-purple-800",children:[t("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Furnizori"}),e(Yt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})]}),e("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:i.providers})]})]}),t("div",{className:"space-y-3",children:[e("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Top 5 Jocuri"}),i.topGames.map((d,c)=>t("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 rounded-xl border border-slate-200 dark:border-slate-600 hover:shadow-md transition-all cursor-pointer",onClick:()=>a(`/game-mixes/games-library/${d.game_id}`),children:[t("div",{className:"flex items-center space-x-3 flex-1",children:[t("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold shadow-lg",children:["#",c+1]}),d.image_url?e("img",{src:d.image_url,alt:d.name,className:"w-12 h-12 rounded-lg object-cover border-2 border-white dark:border-slate-600 shadow-sm",onError:g=>{g.target.style.display="none"}}):null,t("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-semibold text-slate-800 dark:text-slate-100 truncate",children:d.name}),e("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:d.provider})]})]}),d.volatility&&d.volatility!=="n/a"&&e("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${x(d.volatility)}`,children:d.volatility})]},d.game_id))]}),e("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400",children:[e("span",{children:"Ultima actualizare: acum"}),t("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:[i.total," jocuri disponibile"]})]})})]})},zo=()=>{const{statistics:a,loading:l}=me(),{user:r}=Ut(),[s,o]=h.useState(!1),[i,n]=h.useState(null),[m,x]=h.useState([]),[d,c]=h.useState([]),[g,u]=h.useState(()=>{const O=localStorage.getItem("cardSizes");return O?JSON.parse(O):{companies:"medium",locations:"medium",providers:"medium",cabinets:"medium",gameMixes:"medium",slots:"medium",games:"medium",warehouse:"medium",metrology:"medium",jackpots:"medium",invoices:"medium",onjnReports:"medium",legalDocuments:"medium",users:"medium"}}),[S,b]=h.useState(()=>{const O=localStorage.getItem("widgetSizes");return O?JSON.parse(O):{quickActions:"medium",recentActivity:"medium",databaseBackup:"medium",currencyRate:"small",onjnCalendar:"large",systemHealth:"large",gamesLibrary:"large",performanceCharts:"extra-large"}}),v={statCards:[{id:"companies",title:"Companii",visible:!1,order:1},{id:"locations",title:"Locații",visible:!1,order:2},{id:"providers",title:"Furnizori",visible:!1,order:3},{id:"cabinets",title:"Cabinete",visible:!1,order:4},{id:"gameMixes",title:"Game Mixes",visible:!1,order:5},{id:"slots",title:"Sloturi",visible:!1,order:6},{id:"games",title:"Librărie Jocuri",visible:!1,order:7},{id:"warehouse",title:"Depozit",visible:!1,order:8},{id:"metrology",title:"Metrologie",visible:!1,order:9},{id:"jackpots",title:"Jackpots",visible:!1,order:10},{id:"invoices",title:"Facturi",visible:!1,order:11},{id:"onjnReports",title:"Rapoarte ONJN",visible:!1,order:12},{id:"legalDocuments",title:"Documente Legale",visible:!1,order:13},{id:"users",title:"Utilizatori",visible:!1,order:14}],widgets:[{id:"quickActions",title:"Acțiuni Rapide",visible:!0,order:1},{id:"recentActivity",title:"Activitate Recentă",visible:!0,order:2},{id:"databaseBackup",title:"Backup Bază de Date",visible:!0,order:3},{id:"currencyRate",title:"Curs Valutar ONJN",visible:!0,order:4},{id:"onjnCalendar",title:"Calendar ONJN",visible:!0,order:5},{id:"systemHealth",title:"Sănătate Sistem",visible:!0,order:6},{id:"gamesLibrary",title:"Jocuri din Librărie",visible:!0,order:7},{id:"performanceCharts",title:"Grafice Performanță",visible:!0,order:8}]};h.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{const ne=(await ye.get(`/api/users/${r.id}`,{timeout:5e3})).data.preferences||{};if(ne.dashboard){console.log("✅ Loaded dashboard preferences from server:",ne.dashboard),n(ne.dashboard),ne.dashboard.cardSizes&&u(ne.dashboard.cardSizes),ne.dashboard.widgetSizes&&b(ne.dashboard.widgetSizes),localStorage.setItem("dashboardConfig",JSON.stringify(ne.dashboard));return}}catch(V){console.error("Error loading preferences from server:",V)}const W=localStorage.getItem("dashboardConfig");if(W)try{const V=JSON.parse(W);console.log("📱 Loaded dashboard preferences from localStorage:",V),n(V),V.cardSizes&&u(V.cardSizes),V.widgetSizes&&b(V.widgetSizes)}catch(V){console.error("Error parsing localStorage config:",V),n(v)}else console.log("🆕 Using default dashboard configuration"),n(v)})()},[r==null?void 0:r.id]);const y=async()=>{const O={...i,cardSizes:g,widgetSizes:S};try{console.log("💾 Saving dashboard preferences to server for user:",r.id),await ye.put(`/api/users/${r.id}/preferences`,{preferences:{dashboard:O}}),localStorage.setItem("dashboardConfig",JSON.stringify(O)),console.log("✅ Dashboard preferences saved successfully!"),X.success("Configurația dashboard-ului a fost salvată cu succes!"),o(!1),x([]),c([])}catch(W){console.error("❌ Error saving dashboard preferences:",W),localStorage.setItem("dashboardConfig",JSON.stringify(O)),X.success("Configurația a fost salvată local!"),o(!1),x([]),c([])}},_=()=>{n(v),localStorage.removeItem("dashboardConfig"),x([]),c([]),u({companies:"medium",locations:"medium",providers:"medium",cabinets:"medium",gameMixes:"medium",slots:"medium",warehouse:"medium",metrology:"medium",jackpots:"medium",invoices:"medium",onjnReports:"medium",legalDocuments:"medium",users:"medium"}),localStorage.removeItem("cardSizes"),o(!1)},R=async()=>{if(r!=null&&r.id)try{console.log("🔄 Force syncing preferences from server...");const V=(await ye.get(`/api/users/${r.id}`,{timeout:5e3})).data.preferences||{};V.dashboard?(console.log("✅ Force loaded dashboard preferences from server:",V.dashboard),n(V.dashboard),V.dashboard.cardSizes&&u(V.dashboard.cardSizes),V.dashboard.widgetSizes&&b(V.dashboard.widgetSizes),localStorage.setItem("dashboardConfig",JSON.stringify(V.dashboard)),X.success("Preferințele au fost sincronizate de pe server!")):(console.log("ℹ️ No dashboard preferences found on server"),X.info("Nu există preferințe salvate pe server"))}catch(O){console.error("❌ Error force syncing preferences:",O),X.error("Eroare la sincronizarea preferințelor de pe server")}},p=O=>{n(W=>({...W,statCards:W.statCards.map(V=>V.id===O?{...V,visible:!V.visible}:V)}))},C=O=>{n(W=>({...W,widgets:W.widgets.map(V=>V.id===O?{...V,visible:!V.visible}:V)}))},F=O=>{n(W=>{const V=[...W.statCards],te=V.findIndex(ne=>ne.id===O);return te>0&&([V[te],V[te-1]]=[V[te-1],V[te]],V.forEach((ne,_e)=>ne.order=_e+1)),{...W,statCards:V}})},A=O=>{n(W=>{const V=[...W.statCards],te=V.findIndex(ne=>ne.id===O);return te<V.length-1&&([V[te],V[te+1]]=[V[te+1],V[te]],V.forEach((ne,_e)=>ne.order=_e+1)),{...W,statCards:V}})},U=O=>{n(W=>{const V=[...W.widgets],te=V.findIndex(ne=>ne.id===O);return te>0&&([V[te],V[te-1]]=[V[te-1],V[te]],V.forEach((ne,_e)=>ne.order=_e+1)),{...W,widgets:V}})},D=O=>{n(W=>{const V=[...W.widgets],te=V.findIndex(ne=>ne.id===O);return te<V.length-1&&([V[te],V[te+1]]=[V[te+1],V[te]],V.forEach((ne,_e)=>ne.order=_e+1)),{...W,widgets:V}})},z=(O,W)=>{u(V=>{const te={...V,[O]:W};return localStorage.setItem("cardSizes",JSON.stringify(te)),te})},M=(O,W)=>{b(V=>{const te={...V,[O]:W};return localStorage.setItem("widgetSizes",JSON.stringify(te)),te})},T=O=>{x(W=>W.includes(O)?W.filter(V=>V!==O):[...W,O])},j=O=>{c(W=>W.includes(O)?W.filter(V=>V!==O):[...W,O])},N=()=>{x(i.statCards.map(O=>O.id))},f=()=>{x([])},w=O=>{u(W=>{const V={...W};return m.forEach(te=>{V[te]=O}),localStorage.setItem("cardSizes",JSON.stringify(V)),V})},k=()=>{n(O=>{const W=O.statCards.map(V=>m.includes(V.id)?{...V,visible:!V.visible}:V);return{...O,statCards:W}})},L=()=>{c(i.widgets.map(O=>O.id))},I=()=>{c([])},P=O=>{b(W=>{const V={...W};return d.forEach(te=>{V[te]=O}),localStorage.setItem("widgetSizes",JSON.stringify(V)),V})},H=()=>{n(O=>{const W=O.widgets.map(V=>d.includes(V.id)?{...V,visible:!V.visible}:V);return{...O,widgets:W}})},Z=O=>{switch(O){case"xs":return"dashboard-card-xs";case"small":return"dashboard-card-small";case"medium":return"dashboard-card-medium";case"large":return"dashboard-card-large";case"extra-large":return"dashboard-card-xl";default:return"dashboard-card-medium"}},le=O=>{switch(O){case"xs":return"dashboard-widget-xs";case"small":return"dashboard-widget-small";case"medium":return"dashboard-widget-medium";case"large":return"dashboard-widget-large";case"extra-large":return"dashboard-widget-xl";default:return"dashboard-widget-medium"}},ue={companies:{title:"Companii",value:(a==null?void 0:a.totalCompanies)||0,icon:Pe,color:"blue",change:"+12%",changeType:"positive"},locations:{title:"Locații",value:(a==null?void 0:a.totalLocations)||0,icon:tt,color:"green",change:"+8%",changeType:"positive"},providers:{title:"Furnizori",value:(a==null?void 0:a.totalProviders)||0,icon:st,color:"purple",change:"+5%",changeType:"positive"},cabinets:{title:"Cabinete",value:(a==null?void 0:a.totalCabinets)||0,icon:Je,color:"orange",change:"+15%",changeType:"positive"},gameMixes:{title:"Game Mixes",value:(a==null?void 0:a.totalGameMixes)||0,icon:gt,color:"indigo",change:"+3%",changeType:"positive"},slots:{title:"Sloturi",value:(a==null?void 0:a.totalSlots)||0,icon:He,color:"emerald",change:"+22%",changeType:"positive"},warehouse:{title:"Depozit",value:(a==null?void 0:a.totalWarehouse)||0,icon:Wt,color:"slate",change:"+7%",changeType:"positive"},metrology:{title:"Metrologie",value:(a==null?void 0:a.totalMetrology)||0,icon:ct,color:"cyan",change:"+2%",changeType:"positive"},jackpots:{title:"Jackpots",value:(a==null?void 0:a.totalJackpots)||0,icon:Pt,color:"yellow",change:"+18%",changeType:"positive"},invoices:{title:"Facturi",value:(a==null?void 0:a.totalInvoices)||0,icon:de,color:"red",change:"+9%",changeType:"positive"},onjnReports:{title:"Rapoarte ONJN",value:(a==null?void 0:a.totalOnjnReports)||0,icon:Ot,color:"blue",change:"+4%",changeType:"positive"},legalDocuments:{title:"Documente Legale",value:(a==null?void 0:a.totalLegalDocuments)||0,icon:de,color:"gray",change:"+6%",changeType:"positive"},users:{title:"Utilizatori",value:(a==null?void 0:a.totalUsers)||0,icon:st,color:"purple",change:"+1%",changeType:"positive"},games:{title:"Librărie Jocuri",value:(a==null?void 0:a.totalGames)||0,icon:Je,color:"pink",change:"+18%",changeType:"positive"}};return i?e(ve,{children:t("div",{className:"space-y-8",children:[e("div",{className:"card p-8",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[t("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent mb-2",children:["Bun venit, ",(r==null?void 0:r.fullName)||"Administrator","!"]}),e("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"Panoul principal al sistemului CASHPOT V7"}),t("div",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:["Ultima actualizare: ",new Date().toLocaleString("ro-RO")]})]}),t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"flex items-center space-x-2",children:s?i&&t("div",{className:"flex items-center space-x-2",children:[t("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e(At,{className:"w-4 h-4"}),e("span",{children:"Salvează"})]}),t("button",{onClick:_,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[e(Al,{className:"w-4 h-4"}),e("span",{children:"Resetează"})]}),e("button",{onClick:()=>{o(!1),x([]),c([])},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:e("span",{children:"Anulează"})})]}):t(Ne,{children:[t("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e(gt,{className:"w-4 h-4"}),e("span",{children:"Configurează Dashboard"})]}),t("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Sincronizează preferințele de pe server",children:[e(at,{className:"w-4 h-4"}),e("span",{children:"Sincronizează"})]})]})}),t("div",{className:"text-right",children:[t("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:["v",wo()]}),t("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Build #",ko(),": ",Co()]})]})]})]})}),i&&t("div",{className:"space-y-6",children:[s&&i&&t("div",{className:"card p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Configurează Cardurile de Statistici"}),t("div",{className:"flex items-center space-x-2",children:[m.length>0&&t(Ne,{children:[t("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:[m.length," selectate"]}),t("select",{onChange:O=>{O.target.value&&(w(O.target.value),O.target.value="")},className:"px-3 py-1 text-xs border border-blue-300 dark:border-blue-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e("option",{value:"",children:"Mărime pentru toate"}),e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:k,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Toggle Vizibilitate"}),e("button",{onClick:f,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Deselectează Tot"})]}),e("button",{onClick:m.length===i.statCards.length?f:N,className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:m.length===i.statCards.length?"Deselectează Tot":"Selectează Tot"})]})]}),e("div",{className:"space-y-2",children:i.statCards.sort((O,W)=>O.order-W.order).map((O,W)=>t("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${m.includes(O.id)?"bg-blue-100 dark:bg-blue-900/40 border-blue-400 dark:border-blue-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"checkbox",checked:m.includes(O.id),onChange:()=>T(O.id),className:"w-4 h-4 text-blue-600 bg-white dark:bg-slate-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 focus:ring-2"}),e(lr,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:O.title})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>F(O.id),disabled:W===0,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în sus",children:"↑"}),e("button",{onClick:()=>A(O.id),disabled:W===i.statCards.length-1,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în jos",children:"↓"}),t("select",{value:g[O.id],onChange:V=>z(O.id,V.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",title:"Mărimea cardului",children:[e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:()=>p(O.id),className:`p-2 rounded-lg transition-colors ${O.visible?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:O.visible?"Ascunde cardul":"Afișează cardul",children:O.visible?e(je,{className:"w-4 h-4"}):e(Ia,{className:"w-4 h-4"})})]})]},O.id))})]}),e("div",{className:"dashboard-grid-stats",children:i.statCards.filter(O=>O.visible).sort((O,W)=>O.order-W.order).map(O=>{const W=ue[O.id],V=g[O.id]||"medium",te=Z(V);return e("div",{className:te,children:e(yt,{title:W.title,value:W.value,icon:W.icon,color:W.color,change:W.change,changeType:W.changeType,loading:l.companies,size:V})},O.id)})}),s&&i&&t("div",{className:"card p-6 bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800",children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-purple-800 dark:text-purple-300",children:"Configurează Widget-urile"}),t("div",{className:"flex items-center space-x-2",children:[d.length>0&&t(Ne,{children:[t("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:[d.length," selectate"]}),t("select",{onChange:O=>{O.target.value&&(P(O.target.value),O.target.value="")},className:"px-3 py-1 text-xs border border-purple-300 dark:border-purple-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500",children:[e("option",{value:"",children:"Mărime pentru toate"}),e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:H,className:"px-3 py-1 text-xs bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Toggle Vizibilitate"}),e("button",{onClick:I,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Deselectează Tot"})]}),e("button",{onClick:d.length===i.widgets.length?I:L,className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:d.length===i.widgets.length?"Deselectează Tot":"Selectează Tot"})]})]}),e("div",{className:"space-y-2",children:i.widgets.sort((O,W)=>O.order-W.order).map((O,W)=>t("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${d.includes(O.id)?"bg-purple-100 dark:bg-purple-900/40 border-purple-400 dark:border-purple-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"checkbox",checked:d.includes(O.id),onChange:()=>j(O.id),className:"w-4 h-4 text-purple-600 bg-white dark:bg-slate-700 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 focus:ring-2"}),e(lr,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:O.title})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>U(O.id),disabled:W===0,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în sus",children:"↑"}),e("button",{onClick:()=>D(O.id),disabled:W===i.widgets.length-1,className:"p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 disabled:opacity-30",title:"Mută în jos",children:"↓"}),t("select",{value:S[O.id]||"medium",onChange:V=>M(O.id,V.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",title:"Mărimea widget-ului",children:[e("option",{value:"xs",children:"XS"}),e("option",{value:"small",children:"S"}),e("option",{value:"medium",children:"M"}),e("option",{value:"large",children:"L"}),e("option",{value:"extra-large",children:"XL"})]}),e("button",{onClick:()=>C(O.id),className:`p-2 rounded-lg transition-colors ${O.visible?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:O.visible?"Ascunde widgetul":"Afișează widgetul",children:O.visible?e(je,{className:"w-4 h-4"}):e(Ia,{className:"w-4 h-4"})})]})]},O.id))})]}),e("div",{className:"dashboard-grid-widgets",children:i&&i.widgets.filter(O=>O.visible).sort((O,W)=>O.order-W.order).map(O=>{const W=S[O.id]||"medium",V=le(W);return e("div",{className:V,children:(()=>{switch(O.id){case"quickActions":return e(So,{});case"recentActivity":return e(Eo,{});case"databaseBackup":return e(pl,{compact:!0});case"currencyRate":return e(Do,{});case"onjnCalendar":return e(_o,{});case"systemHealth":return e(Ao,{});case"gamesLibrary":return e(To,{});default:return null}})()},O.id)})}),i&&i.widgets.find(O=>O.id==="performanceCharts"&&O.visible)&&t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Performanță Sistem"}),e(fa,{className:"w-6 h-6 text-green-500"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-2xl",children:[e("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"CPU Usage"}),e("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"23%"})]}),t("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-2xl",children:[e("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Memory Usage"}),e("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:"67%"})]}),t("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 rounded-2xl",children:[e("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Disk Usage"}),e("span",{className:"text-yellow-600 dark:text-yellow-400 font-bold",children:"45%"})]})]})]}),t("div",{className:"card p-8",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Activitate Recentă"}),e(ct,{className:"w-6 h-6 text-blue-500"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center space-x-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t("div",{className:"flex-1",children:[e("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Sistem pornit"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Acum 2 minute"})]})]}),t("div",{className:"flex items-center space-x-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),t("div",{className:"flex-1",children:[e("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Backup completat"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Acum 1 oră"})]})]}),t("div",{className:"flex items-center space-x-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),t("div",{className:"flex-1",children:[e("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Actualizare disponibilă"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Acum 3 ore"})]})]})]})]})]})]})]})}):e("div",{children:"Loading..."})},Ue=({data:a,columns:l,onEdit:r,onDelete:s,onView:o,onViewContracts:i,onViewProprietari:n,loading:m=!1,searchTerm:x="",onSearchChange:d,itemsPerPage:c=15,selectedItems:g=[],onSelectAll:u,onSelectItem:S,moduleColor:b="blue"})=>{const[v,y]=h.useState(1),[_,R]=h.useState(""),[p,C]=h.useState("asc"),F={blue:{header:"from-blue-50/80 to-blue-100/80 dark:from-blue-900/20 dark:to-blue-800/20",text:"text-blue-800 dark:text-blue-200",hover:"hover:bg-blue-100/60 dark:hover:bg-blue-700/30",accent:"text-blue-600"},green:{header:"from-emerald-50/80 to-emerald-100/80 dark:from-emerald-900/20 dark:to-emerald-800/20",text:"text-emerald-800 dark:text-emerald-200",hover:"hover:bg-emerald-100/60 dark:hover:bg-emerald-700/30",accent:"text-emerald-600"},purple:{header:"from-purple-50/80 to-purple-100/80 dark:from-purple-900/20 dark:to-purple-800/20",text:"text-purple-800 dark:text-purple-200",hover:"hover:bg-purple-100/60 dark:hover:bg-purple-700/30",accent:"text-purple-600"},orange:{header:"from-orange-50/80 to-orange-100/80 dark:from-orange-900/20 dark:to-orange-800/20",text:"text-orange-800 dark:text-orange-200",hover:"hover:bg-orange-100/60 dark:hover:bg-orange-700/30",accent:"text-orange-600"},red:{header:"from-red-50/80 to-red-100/80 dark:from-red-900/20 dark:to-red-800/20",text:"text-red-800 dark:text-red-200",hover:"hover:bg-red-100/60 dark:hover:bg-red-700/30",accent:"text-red-600"},indigo:{header:"from-indigo-50/80 to-indigo-100/80 dark:from-indigo-900/20 dark:to-indigo-800/20",text:"text-indigo-800 dark:text-indigo-200",hover:"hover:bg-indigo-100/60 dark:hover:bg-indigo-700/30",accent:"text-indigo-600"},teal:{header:"from-teal-50/80 to-teal-100/80 dark:from-teal-900/20 dark:to-teal-800/20",text:"text-teal-800 dark:text-teal-200",hover:"hover:bg-teal-100/60 dark:hover:bg-teal-700/30",accent:"text-teal-600"},pink:{header:"from-pink-50/80 to-pink-100/80 dark:from-pink-900/20 dark:to-pink-800/20",text:"text-pink-800 dark:text-pink-200",hover:"hover:bg-pink-100/60 dark:hover:bg-pink-700/30",accent:"text-pink-600"}},A=F[b]||F.blue,U=Math.ceil(a.length/c),D=(v-1)*c,z=a.slice(D,D+c),M=j=>{_===j?C(p==="asc"?"desc":"asc"):(R(j),C("asc"))},T=[...z].sort((j,N)=>{if(!_)return 0;const f=j[_]||"",w=N[_]||"";return p==="asc"?f.toString().localeCompare(w.toString()):w.toString().localeCompare(f.toString())});return m?e("div",{className:"card p-8",children:t("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-4 bg-slate-200 rounded w-1/4"}),e("div",{className:"space-y-3",children:[...Array(5)].map((j,N)=>e("div",{className:"h-16 bg-slate-200 rounded"},N))})]})}):t("div",{className:"card overflow-hidden",children:[e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full min-w-[800px] bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700",children:[e("thead",{className:`table-header bg-gradient-to-r ${A.header}`,children:t("tr",{children:[e("th",{className:"p-6 w-12",children:e("div",{className:"flex items-center justify-center",children:e("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-blue-500 focus:ring-2",checked:z.length>0&&z.every(j=>g.includes(j.id)),onChange:j=>u&&u(j.target.checked)})})}),e("th",{className:`text-left p-6 font-bold ${A.text} text-sm uppercase tracking-wider w-16`,children:"#"}),l.map(j=>e("th",{className:`text-left p-6 font-bold ${A.text} text-sm uppercase tracking-wider ${j.sortable?`cursor-pointer ${A.hover} transition-colors`:""}`,onClick:()=>j.sortable&&M(j.key),children:t("div",{className:"flex items-center space-x-2",children:[e("span",{children:j.label}),j.sortable&&_===j.key&&e("span",{className:A.accent,children:p==="asc"?"↑":"↓"})]})},j.key)),e("th",{className:`text-left p-6 font-bold ${A.text} text-sm uppercase tracking-wider`,children:"Acțiuni"})]})}),e("tbody",{className:"divide-y divide-slate-200/50 dark:divide-slate-700/50",children:T.map((j,N)=>t("tr",{className:"table-row hover:bg-slate-50 dark:hover:bg-slate-750 transition-colors",children:[e("td",{className:"p-6",children:e("div",{className:"flex items-center justify-center",children:e("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-blue-500 focus:ring-2 group-hover:bg-blue-50 dark:group-hover:bg-slate-600",checked:g.includes(j.id),onChange:f=>S&&S(j.id,f.target.checked)})})}),e("td",{className:"p-6 text-slate-600 dark:text-slate-400 font-semibold text-sm",children:D+N+1}),l.map(f=>e("td",{className:"p-6",children:f.render?f.render(j):j[f.key]},f.key)),(r||s||o||i||n)&&e("td",{className:"p-6",children:t("div",{className:"flex flex-col space-y-2",children:[t("div",{className:"flex space-x-2",children:[o&&e("button",{onClick:()=>o(j),className:"p-2 text-blue-600 dark:text-blue-400 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-800/40 dark:hover:to-indigo-800/40 rounded-xl shadow-lg hover:shadow-blue-500/25 transition-all duration-200 group/btn",title:"Previzualizează",children:e(je,{size:14,className:"group-hover/btn:scale-110 transition-transform"})}),i&&e("button",{onClick:()=>i(j),className:"p-2 text-green-600 dark:text-green-400 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 hover:from-green-100 hover:to-emerald-100 dark:hover:from-green-800/40 dark:hover:to-emerald-800/40 rounded-xl shadow-lg hover:shadow-green-500/25 transition-all duration-200 group/btn",title:"Vezi contracte",children:e(de,{size:14,className:"group-hover/btn:scale-110 transition-transform"})}),n&&e("button",{onClick:()=>n(j),className:"p-2 text-purple-600 dark:text-purple-400 bg-gradient-to-r from-purple-50 to-violet-50 dark:from-purple-900/30 dark:to-violet-900/30 hover:from-purple-100 hover:to-violet-100 dark:hover:from-purple-800/40 dark:hover:to-violet-800/40 rounded-xl shadow-lg hover:shadow-purple-500/25 transition-all duration-200 group/btn",title:"Vezi proprietari",children:e(Pe,{size:14,className:"group-hover/btn:scale-110 transition-transform"})})]}),t("div",{className:"flex space-x-2",children:[r&&e("button",{onClick:()=>r(j),className:"p-2 text-emerald-600 dark:text-emerald-400 bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 hover:from-emerald-100 hover:to-green-100 dark:hover:from-emerald-800/40 dark:hover:to-green-800/40 rounded-xl shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 group/btn",title:"Editează",children:e(Ye,{size:14,className:"group-hover/btn:scale-110 transition-transform"})}),s&&e("button",{onClick:()=>s(j),className:"p-2 text-red-600 dark:text-red-400 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/30 dark:to-pink-900/30 hover:from-red-100 hover:to-pink-100 dark:hover:from-red-800/40 dark:hover:to-pink-800/40 rounded-xl shadow-lg hover:shadow-red-500/25 transition-all duration-200 group/btn",title:"Șterge",children:e(Oe,{size:14,className:"group-hover/btn:scale-110 transition-transform"})})]})]})})]},j._id||j.id))})]})}),t("div",{className:"bg-gradient-to-r from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-700 dark:via-slate-800 dark:to-slate-700 px-6 md:px-8 py-4 md:py-6 border-t border-slate-200/50 dark:border-slate-600/50 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[t("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:[e("span",{className:"text-sm md:text-base font-semibold text-slate-700 dark:text-slate-200",children:"Înregistrări:"}),t("select",{value:c,onChange:j=>{setItemsPerPage(Number(j.target.value)),y(1)},className:"border-2 border-slate-200 dark:border-slate-600 rounded-2xl px-4 py-2 text-sm font-medium bg-white/80 dark:bg-slate-700/80 backdrop-blur-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-200 shadow-lg text-slate-900 dark:text-slate-100",children:[e("option",{value:15,children:"15"}),e("option",{value:25,children:"25"}),e("option",{value:50,children:"50"})]}),t("span",{className:"text-sm md:text-base text-slate-600 dark:text-slate-300 font-medium",children:[D+1,"-",Math.min(D+c,a.length)," din ",a.length]})]}),t("div",{className:"flex items-center justify-between sm:justify-start gap-3",children:[e("button",{onClick:()=>y(Math.max(1,v-1)),disabled:v===1,className:"px-4 md:px-6 py-2 md:py-3 border-2 border-slate-200 dark:border-slate-600 rounded-2xl text-sm md:text-base font-bold hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl group text-slate-700 dark:text-slate-200",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Înapoi"})}),e("div",{className:"flex items-center space-x-2",children:t("span",{className:"text-sm md:text-base text-slate-600 dark:text-slate-200 font-bold bg-white/80 dark:bg-slate-800/80 px-4 py-2 rounded-2xl shadow-lg",children:["Pag ",v,"/",U||1]})}),e("button",{onClick:()=>y(Math.min(U,v+1)),disabled:v===U,className:"px-4 md:px-6 py-2 md:py-3 border-2 border-slate-200 dark:border-slate-600 rounded-2xl text-sm md:text-base font-bold hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl group text-slate-700 dark:text-slate-200",children:e("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:"Înainte"})})]})]})]})},Lt=({pdfUrl:a,title:l="Document PDF",placeholder:r="Nu există document de afișat",placeholderSubtext:s="Atașează un document PDF pentru vizualizare"})=>a?t("div",{className:"space-y-4",children:[e("div",{className:"aspect-[3/4] bg-white dark:bg-slate-800 rounded-lg border-2 border-slate-200 dark:border-slate-600 overflow-hidden",children:e("iframe",{src:a,className:"w-full h-full",title:l})}),t("div",{className:"flex space-x-3",children:[t("button",{onClick:()=>window.open(a,"_blank"),className:"flex-1 btn-primary flex items-center justify-center space-x-2",children:[e(je,{className:"w-4 h-4"}),e("span",{children:"Vizualizează"})]}),t("button",{onClick:()=>window.open(a,"_blank"),className:"flex-1 btn-secondary flex items-center justify-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Descarcă"})]})]})]}):e("div",{className:"aspect-[3/4] bg-slate-100 dark:bg-slate-700 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center",children:t("div",{className:"text-center text-slate-500 dark:text-slate-400",children:[e(de,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),e("p",{className:"text-sm font-medium",children:r}),e("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:s})]})}),Po=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",type:"Furnizor",license:"",email:"",phone:"",address:"",contactPerson:"",status:"Activ",notes:"",cui:"",cuiFile:null,cuiPreview:null});h.useEffect(()=>{a&&o({name:a.name||"",type:a.type||"Furnizor",license:a.license||"",email:a.email||"",phone:a.phone||"",address:a.address||"",contactPerson:a.contact_person||"",status:a.status||"Activ",notes:a.notes||"",cui:a.cui||"",cuiFile:a.cuiFile||null,cuiPreview:a.cuiFile||null})},[a]);const i=c=>{o({...s,[c.target.name]:c.target.value})},n=c=>{const g=c.target.files[0];if(g){const u=new FileReader;u.onload=S=>{const b=S.target.result;o(v=>({...v,cuiFile:b,cuiPreview:b}))},u.readAsDataURL(g)}},m=()=>{window.confirm("Sigur doriți să ștergeți documentul CUI?")&&o(c=>({...c,cuiFile:null,cuiPreview:null}))},x=c=>c?c.includes("data:image")?e(qt,{className:"w-4 h-4"}):e(de,{className:"w-4 h-4"}):e(de,{className:"w-4 h-4"});return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(Pe,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Companie":"Adaugă Companie"}),e("p",{className:"text-blue-100 text-sm font-medium",children:"Completează informațiile despre companie"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:c=>{c.preventDefault();const g={...s,contact_person:s.contactPerson};delete g.contactPerson,r(g)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Tip Companie *"}),t("select",{name:"type",value:s.type,onChange:i,className:"input-field",required:!0,children:[e("option",{value:"Operator",children:"Operator (Proprietar)"}),e("option",{value:"Furnizor",children:"Furnizor (pentru contracte)"})]}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Operator = compania ta de bază | Furnizor = companii externe pentru contracte"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Nume Companie *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"input-field",placeholder:"ex: BRML Industries SRL",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Număr Licență *"}),e("input",{type:"text",name:"license",value:s.license,onChange:i,className:"input-field",placeholder:"ex: L-2024-001",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Persoană de Contact *"}),e("input",{type:"text",name:"contactPerson",value:s.contactPerson,onChange:i,className:"input-field",placeholder:"ex: Ion Popescu",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Email *"}),e("input",{type:"email",name:"email",value:s.email,onChange:i,className:"input-field",placeholder:"ex: contact@brml.ro",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Telefon *"}),e("input",{type:"tel",name:"phone",value:s.phone,onChange:i,className:"input-field",placeholder:"ex: +40 21 123 4567",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"CUI (Certificat Unic de Înregistrare)"}),e("input",{type:"text",name:"cui",value:s.cui,onChange:i,className:"input-field",placeholder:"ex: RO12345678"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Status"}),t("select",{name:"status",value:s.status,onChange:i,className:"input-field",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Suspendat",children:"Suspendat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Adresă Completă *"}),e("textarea",{name:"address",value:s.address,onChange:i,className:"input-field min-h-[100px] resize-none",placeholder:"ex: Str. Centrală nr. 1, București, România",required:!0})]}),t("div",{className:"space-y-4",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Document CUI (PDF sau JPG)"}),t("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[e("input",{type:"file",id:"cuiFile",accept:".pdf,.jpg,.jpeg,.png",onChange:n,className:"hidden"}),t("label",{htmlFor:"cuiFile",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white",children:e(Se,{className:"w-6 h-6"})}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.cuiFile?"Schimbă documentul":"Încarcă document CUI"}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PDF, JPG, PNG (max 10MB)"})]})]})]}),s.cuiPreview&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{className:"flex items-center space-x-2",children:[x(s.cuiFile),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Document CUI"})]}),e("button",{type:"button",onClick:m,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Șterge documentul",children:e(we,{className:"w-4 h-4"})})]}),s.cuiFile.includes("data:image")?e("div",{className:"aspect-[3/4] bg-white rounded-lg border-2 border-slate-200 overflow-hidden",children:e("img",{src:s.cuiPreview,alt:"CUI Preview",className:"w-full h-full object-contain"})}):e(Lt,{pdfUrl:s.cuiPreview,title:`CUI Document ${s.name}`,placeholder:"Documentul CUI nu este disponibil",placeholderSubtext:"Atașează documentul CUI pentru vizualizare"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200",children:"Note Adiționale"}),e("textarea",{name:"notes",value:s.notes,onChange:i,className:"input-field min-h-[80px] resize-none",placeholder:"Informații suplimentare despre companie..."})]}),t("div",{className:"flex justify-end space-x-4 pt-8 border-t-2 border-slate-200/50 dark:border-slate-700/50 mt-8",children:[e("button",{type:"button",onClick:l,className:"btn-secondary group",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Anulează"})}),e("button",{type:"submit",className:"btn-primary group",children:t("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:[a?"Actualizează":"Adaugă"," Companie"]})})]})]})})]})})},Io=({isOpen:a,onClose:l,onConfirm:r,title:s="Confirmare",message:o,confirmText:i="Confirmă",cancelText:n="Anulează",type:m="danger"})=>{if(!a)return null;const d=(()=>{switch(m){case"danger":return{icon:"text-red-500",button:"bg-red-600 hover:bg-red-700 text-white",iconBg:"bg-red-100"};case"warning":return{icon:"text-yellow-500",button:"bg-yellow-600 hover:bg-yellow-700 text-white",iconBg:"bg-yellow-100"};case"info":return{icon:"text-blue-500",button:"bg-blue-600 hover:bg-blue-700 text-white",iconBg:"bg-blue-100"};default:return{icon:"text-red-500",button:"bg-red-600 hover:bg-red-700 text-white",iconBg:"bg-red-100"}}})();return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all",children:[t("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:`p-2 rounded-full ${d.iconBg}`,children:e(_l,{className:`w-6 h-6 ${d.icon}`})}),e("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s})]}),e("button",{onClick:l,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e(we,{className:"w-5 h-5 text-slate-500"})})]}),e("div",{className:"p-6",children:e("p",{className:"text-slate-600 dark:text-slate-300 text-base leading-relaxed",children:o})}),t("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[e("button",{onClick:l,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors font-medium",children:n}),e("button",{onClick:()=>{r(),l()},className:`px-6 py-2 rounded-lg font-medium transition-colors ${d.button}`,children:i})]})]})})},mt=({onExportExcel:a,onExportPDF:l,entity:r})=>t("div",{className:"flex items-center space-x-2",children:[t("button",{onClick:a,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",title:"Exportă în Excel",children:[e(Dl,{className:"w-4 h-4"}),e("span",{children:"Excel"})]}),t("button",{onClick:l,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",title:"Exportă în PDF",children:[e(de,{className:"w-4 h-4"}),e("span",{children:"PDF"})]})]}),Lo=()=>{const[a,l]=h.useState({isOpen:!1,title:"",message:"",confirmText:"Confirmă",cancelText:"Anulează",type:"danger",onConfirm:null});return{confirmState:a,confirm:o=>new Promise(i=>{l({isOpen:!0,title:o.title||"Confirmare",message:o.message||"Ești sigur?",confirmText:o.confirmText||"Confirmă",cancelText:o.cancelText||"Anulează",type:o.type||"danger",onConfirm:()=>{i(!0)}})}),close:()=>{l(o=>({...o,isOpen:!1,onConfirm:null}))}}},Fo=()=>{const a=et(),{companies:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n,loading:m}=me(),{confirmState:x,confirm:d,close:c}=Lo(),[g,u]=h.useState(!1),[S,b]=h.useState(null),[v,y]=h.useState(""),[_,R]=h.useState([]),[p,C]=h.useState(!1);h.useEffect(()=>{C(_.length>0)},[_]);const F=l.filter(I=>{var P,H,Z,le;return((P=I.name)==null?void 0:P.toLowerCase().includes(v.toLowerCase()))||((H=I.license)==null?void 0:H.toLowerCase().includes(v.toLowerCase()))||((Z=I.email)==null?void 0:Z.toLowerCase().includes(v.toLowerCase()))||((le=I.contact_person)==null?void 0:le.toLowerCase().includes(v.toLowerCase()))}),A=[{key:"companyInfo",label:"Companie & CUI",sortable:!0,render:I=>t("div",{className:"space-y-2",children:[t("div",{className:"flex items-center space-x-2",children:[e(Pe,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),e("button",{onClick:()=>a(`/companies/${I.id}`),className:"font-bold text-slate-900 dark:text-slate-100 hover:text-blue-700 dark:hover:text-blue-400 transition-colors text-left",children:I.name})]}),I.license&&e("div",{className:"flex items-center space-x-2",children:e("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:I.license})}),I.cui&&t("div",{className:"flex items-center space-x-2",children:[t("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:["CUI: ",I.cui]}),I.cuiFile&&t("div",{className:"flex items-center space-x-1",children:[e("button",{onClick:()=>window.open(I.cuiFile,"_blank"),className:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Previzualizează CUI",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const P=document.createElement("a");P.href=I.cuiFile,P.download=`CUI_${I.name||"company"}.${I.cuiFile.includes("data:image")?"jpg":"pdf"}`,P.click()},className:"p-1 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded transition-colors",title:"Descarcă CUI",children:e(Le,{className:"w-4 h-4"})})]})]})]})},{key:"contactInfo",label:"Contact",sortable:!0,render:I=>t("div",{className:"space-y-2",children:[I.contact_person&&t("div",{className:"flex items-center space-x-2",children:[e(jt,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e("div",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm",children:I.contact_person})]}),I.phone&&t("div",{className:"flex items-center space-x-2",children:[e(Ga,{className:"w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"}),e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:I.phone})]}),I.email&&t("div",{className:"flex items-center space-x-2",children:[e(qa,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 flex-shrink-0"}),e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:I.email})]})]})},{key:"status",label:"Status",sortable:!0,render:I=>{var le;const P=((le=I.status)==null?void 0:le.toLowerCase())||"",H=P==="activ"||P==="active",Z=P==="suspendat"||P==="suspended";return e("span",{className:`px-4 py-2 rounded-2xl text-xs font-bold shadow-lg ${H?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-green-500/25":Z?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-yellow-500/25":"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-500/25"}`,children:H?"Activ":Z?"Suspendat":"Inactiv"})}},{key:"created_at",label:"Data Creare",sortable:!0,render:I=>e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(I.created_at).toLocaleDateString("ro-RO")})},{key:"created_by",label:"Creat de",sortable:!0,render:I=>{var P,H;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shadow-lg",children:((H=(P=I.created_by)==null?void 0:P.charAt(0))==null?void 0:H.toUpperCase())||"A"}),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:I.created_by||"Sistem"})]})}}],U=()=>{b(null),u(!0)},D=I=>{b(I),u(!0)},z=async I=>{await d({title:"Șterge Companie",message:`Sigur doriți să ștergeți compania "${I.name}"?`,type:"danger"})&&await o("companies",I.id)},M=I=>{R(I?F.map(P=>P.id):[])},T=(I,P)=>{R(P?[..._,I]:_.filter(H=>H!==I))},j=async()=>{if(_.length===0)return;if(await d({title:"Șterge Companiile",message:`Ești sigur că vrei să ștergi ${_.length} companii?`,type:"danger"}))try{for(const P of _)await o("companies",P);R([]),C(!1)}catch(P){console.error("Error bulk deleting companies:",P)}},N=()=>{_.length!==0&&console.log("Bulk edit for companies:",_)},f=async I=>{S?await s("companies",S.id,I):await r("companies",I),u(!1),b(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(Pe,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Management Companii"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestionează companiile de gaming din sistem"})]})]}),t("div",{className:"flex flex-wrap items-center gap-3",children:[t("div",{className:"relative flex-1 min-w-[200px] group",children:[e($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors",size:18}),e("input",{type:"text",placeholder:"Caută companii...",value:v,onChange:I=>y(I.target.value),className:"input-field pl-12 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:border-blue-500 dark:focus:border-blue-400"})]}),t("button",{onClick:()=>{console.log("Import functionality to be implemented")},className:"btn-secondary flex items-center space-x-2",children:[e(Se,{size:16}),e("span",{children:"Importă"})]}),e(mt,{onExportExcel:()=>{try{i("companies")}catch(I){console.error("Error exporting to Excel:",I)}},onExportPDF:()=>{try{n("companies")}catch(I){console.error("Error exporting to PDF:",I)}},entity:"companies"}),t("div",{className:"flex space-x-3",children:[p&&t(Ne,{children:[t("button",{onClick:N,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:j,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:U,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Companie"})]})]})]})]})}),e(Ue,{data:F,columns:A,onEdit:D,onDelete:z,loading:m.companies,searchTerm:v,onSearchChange:y,selectedItems:_,onSelectAll:M,onSelectItem:T,moduleColor:"blue"}),g&&e(Po,{item:S,onClose:()=>{u(!1),b(null)},onSave:f}),e(Io,{isOpen:x.isOpen,onClose:c,onConfirm:x.onConfirm,title:x.title,message:x.message,confirmText:x.confirmText,cancelText:x.cancelText,type:x.type})]})})},Ro=({item:a,onClose:l,onSave:r})=>{const{companies:s,users:o}=me(),[i,n]=h.useState({name:"",address:"",company:"",capacity:"",surface:"",planFile:null,status:"Activ",coordinates:"",contact_person:"",notes:""});h.useEffect(()=>{a&&n({name:a.name||"",address:a.address||"",company:a.company||"",capacity:a.capacity||"",surface:a.surface||"",planFile:a.planFile||null,status:a.status||"Activ",coordinates:a.coordinates||"",contact_person:a.contact_person||"",notes:a.notes||""})},[a]);const m=c=>{n({...i,[c.target.name]:c.target.value})},x=c=>{const g=c.target.files[0];g&&n({...i,planFile:g})};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-green-800 to-emerald-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600/20 to-emerald-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-lg",children:e(tt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Locație":"Adaugă Locație"}),e("p",{className:"text-green-100 text-sm font-medium",children:"Completează informațiile despre locație"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:c=>{c.preventDefault(),r(i)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Locație *"}),e("input",{type:"text",name:"name",value:i.name,onChange:m,className:"input-field",placeholder:"ex: Locația Centru",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Companie *"}),t("select",{name:"company",value:i.company,onChange:m,className:"input-field",required:!0,children:[e("option",{value:"",children:"Selectează o companie"}),s.map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Persoană de Contact"}),t("select",{name:"contact_person",value:i.contact_person,onChange:m,className:"input-field",children:[e("option",{value:"",children:"Selectează o persoană de contact"}),o.map(c=>t("option",{value:c.full_name||c.username,children:[c.full_name||c.username," (@",c.username,")"]},c.id))]}),e("p",{className:"text-xs text-slate-500",children:"Persoana responsabilă pentru această locație"})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Adresă Completă *"}),e("textarea",{name:"address",value:i.address,onChange:m,className:"input-field min-h-[100px] resize-none",placeholder:"ex: Str. Centrală nr. 1, București, România",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Suprafață (m²) *"}),e("input",{type:"number",name:"surface",value:i.surface,onChange:m,className:"input-field",placeholder:"ex: 150",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Capacitate (calculată din sloturi)"}),t("div",{className:"input-field bg-slate-50 text-slate-600 cursor-not-allowed",children:[i.capacity||0," sloturi"]}),e("p",{className:"text-xs text-slate-500",children:"Capacitatea se calculează automat din numărul de sloturi alocate acestei locații"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status"}),t("select",{name:"status",value:i.status,onChange:m,className:"input-field",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Mentenanță",children:"Mentenanță"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Coordonate (lat, lng)"}),e("input",{type:"text",name:"coordinates",value:i.coordinates,onChange:m,className:"input-field",placeholder:"ex: 44.4268, 26.1025"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Plan Locație"}),t("div",{className:"relative",children:[e("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.dwg,.dxf",onChange:x,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),i.planFile&&t("div",{className:"mt-2 text-sm text-green-600 font-medium",children:["✓ Fișier selectat: ",i.planFile.name]})]}),e("p",{className:"text-xs text-slate-500",children:"Formate acceptate: PDF, JPG, PNG, DWG, DXF"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note Adiționale"}),e("textarea",{name:"notes",value:i.notes,onChange:m,className:"input-field min-h-[80px] resize-none",placeholder:"Informații suplimentare despre locație..."})]}),t("div",{className:"flex justify-end space-x-4 pt-8 border-t-2 border-slate-200/50 mt-8",children:[e("button",{type:"button",onClick:l,className:"btn-secondary group",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Anulează"})}),e("button",{type:"submit",className:"btn-primary group",children:t("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:[a?"Actualizează":"Adaugă"," Locație"]})})]})]})})]})})},jo=({item:a,onClose:l,onSave:r,locationId:s})=>{const{locations:o,proprietari:i}=me(),[n,m]=h.useState({contract_number:"",title:"",location_id:s||"",proprietar_id:"",type:"Chirie Locație",status:"Active",start_date:"",end_date:"",monthly_rent:"",currency:"RON",deposit:"",payment_terms:"",description:"",contractFile:null,contractPreview:null}),x=()=>{const b=new Date,v=b.getFullYear(),y=String(b.getMonth()+1).padStart(2,"0"),_=String(b.getDate()).padStart(2,"0"),R=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`CT-CH-${v}${y}${_}-${R}`};h.useEffect(()=>{m(a?{contract_number:a.contract_number||"",title:a.title||"",location_id:a.location_id||s||"",proprietar_id:a.proprietar_id||"",type:a.type||"Chirie Locație",status:a.status||"Active",start_date:a.start_date?a.start_date.split("T")[0]:"",end_date:a.end_date?a.end_date.split("T")[0]:"",monthly_rent:a.monthly_rent||"",currency:a.currency||"RON",deposit:a.deposit||"",payment_terms:a.payment_terms||"",description:a.description||"",contractFile:a.contractFile||null,contractPreview:a.contractFile||null}:b=>({...b,contract_number:x()}))},[a,s]);const d=b=>{const{name:v,value:y}=b.target;m(_=>({..._,[v]:y}))},c=b=>{const v=b.target.files[0];if(v){const y=new FileReader;y.onload=_=>{const R=_.target.result;m(p=>({...p,contractFile:R,contractPreview:R}))},y.readAsDataURL(v)}},g=()=>{window.confirm("Sigur doriți să ștergeți fișierul contractului?")&&m(b=>({...b,contractFile:null,contractPreview:null}))},u=b=>b?e(de,{className:"w-4 h-4"}):e(de,{className:"w-4 h-4"});return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-green-800 to-emerald-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600/20 to-emerald-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-lg",children:e(de,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Contract":"Adaugă Contract Nou"}),e("p",{className:"text-green-100 text-sm font-medium",children:"Completează informațiile despre contract"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:b=>{b.preventDefault(),r(n)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Număr Contract *"}),t("div",{className:"flex space-x-2",children:[e("input",{type:"text",name:"contract_number",value:n.contract_number,onChange:d,required:!0,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"ex: CT-CH-2024-001"}),!a&&e("button",{type:"button",onClick:()=>m(b=>({...b,contract_number:x()})),className:"px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl transition-colors",title:"Generează număr nou",children:"🔄"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Titlu Contract *"}),e("input",{type:"text",name:"title",value:n.title,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"ex: Contract Chirie Locație București"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Locație *"}),t("select",{name:"location_id",value:n.location_id,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"",children:"Selectează locația"}),o==null?void 0:o.map(b=>e("option",{value:b.id,children:b.name},b.id))]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Proprietar *"}),t("select",{name:"proprietar_id",value:n.proprietar_id,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"",children:"Selectează proprietarul"}),i==null?void 0:i.map(b=>e("option",{value:b.id,children:b.name},b.id))]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Tip Contract *"}),t("select",{name:"type",value:n.type,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"Chirie Locație",children:"Chirie Locație"}),e("option",{value:"Chirie Comercială",children:"Chirie Comercială"}),e("option",{value:"Chirie Industrială",children:"Chirie Industrială"}),e("option",{value:"Chirie Oficiu",children:"Chirie Oficiu"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Status *"}),t("select",{name:"status",value:n.status,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"Active",children:"Activ"}),e("option",{value:"Inactive",children:"Inactiv"}),e("option",{value:"Expired",children:"Expirat"}),e("option",{value:"Pending",children:"În așteptare"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Data Început *"}),e("input",{type:"date",name:"start_date",value:n.start_date,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Data Sfârșit *"}),e("input",{type:"date",name:"end_date",value:n.end_date,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Chiria Lunară *"}),e("input",{type:"number",name:"monthly_rent",value:n.monthly_rent,onChange:d,required:!0,step:"0.01",min:"0",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"0.00"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Depozit Garantie"}),e("input",{type:"number",name:"deposit",value:n.deposit,onChange:d,step:"0.01",min:"0",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"0.00"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Monedă *"}),t("select",{name:"currency",value:n.currency,onChange:d,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[e("option",{value:"RON",children:"RON"}),e("option",{value:"EUR",children:"EUR"}),e("option",{value:"USD",children:"USD"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Termeni de Plată"}),e("input",{type:"text",name:"payment_terms",value:n.payment_terms,onChange:d,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"ex: Lunar, până în data de 5"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Descriere"}),e("textarea",{name:"description",value:n.description,onChange:d,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all resize-none",placeholder:"Descrierea contractului..."})]}),t("div",{className:"space-y-4",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Fișier Contract (PDF)"}),t("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 text-center hover:border-green-400 dark:hover:border-green-500 transition-colors",children:[e("input",{type:"file",id:"contractFile",accept:".pdf",onChange:c,className:"hidden"}),t("label",{htmlFor:"contractFile",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center text-white",children:e(Se,{className:"w-6 h-6"})}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:n.contractFile?"Schimbă contractul":"Încarcă fișier contract"}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PDF (max 10MB)"})]})]})]}),n.contractPreview&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{className:"flex items-center space-x-2",children:[u(n.contractFile),e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Fișier Contract"})]}),e("button",{type:"button",onClick:g,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Șterge fișierul",children:e(we,{className:"w-4 h-4"})})]}),e(Lt,{pdfUrl:n.contractPreview,title:`Contract ${n.contract_number||n.title}`,placeholder:"Contractul nu este disponibil",placeholderSubtext:"Atașează fișierul contractului pentru vizualizare"})]})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(de,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Contract"]})]})]})]})})]})})},Oo=({locationId:a,locationName:l})=>{const{contracts:r,createItem:s,updateItem:o,deleteItem:i,loading:n}=me(),[m,x]=h.useState(!1),[d,c]=h.useState(null),[g,u]=h.useState([]);h.useEffect(()=>{if(r)if(a){const p=r.filter(C=>C.location_id==a);u(p)}else u(r);else u([])},[r,a]);const S=()=>{c(null),x(!0)},b=p=>{console.log("View contract:",p)},v=p=>{console.log("Download contract:",p)},y=p=>{c(p),x(!0)},_=async p=>{window.confirm(`Sigur doriți să ștergeți contractul "${p.contract_number}"?`)&&await i("contracts",p.id)},R=async p=>{d?await o("contracts",d.id,p):await s("contracts",p),x(!1),c(null)};return t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{children:[t("h3",{className:"text-xl font-bold text-slate-800",children:["Contracte - ",l]}),e("p",{className:"text-slate-600",children:"Gestionează contractele asociate acestei locații"})]}),t("button",{onClick:S,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Contract"})]})]}),e("div",{className:"card overflow-hidden",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100",children:t("tr",{children:[e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Nr. Contract"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Tip Contract"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Perioadă"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Chiria Lunară"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Proprietar"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Status"}),e("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Acțiuni"})]})}),e("tbody",{className:"divide-y divide-slate-200",children:g.map(p=>t("tr",{className:"table-row hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/50",children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"font-bold text-slate-900",children:p.contract_number})}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e("div",{className:"text-slate-700 font-medium",children:p.title}),e("div",{className:"text-slate-500 text-sm",children:p.type})]}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"text-slate-600 text-sm",children:[new Date(p.start_date).toLocaleDateString("ro-RO")," - ",new Date(p.end_date).toLocaleDateString("ro-RO")]})}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[t("div",{className:"text-slate-700 font-sans",children:[parseFloat(p.monthly_rent||0).toLocaleString("ro-RO")," ",p.currency]}),p.deposit&&t("div",{className:"text-slate-500 text-xs",children:["Depozit: ",parseFloat(p.deposit).toLocaleString("ro-RO")," ",p.currency]})]}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e("div",{className:"text-slate-700 font-medium",children:p.proprietar_name||"N/A"}),p.proprietar_contact&&e("div",{className:"text-slate-500 text-xs",children:p.proprietar_contact})]}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${p.status==="Active"?"bg-green-100 text-green-800":p.status==="Inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:p.status==="Active"?"Activ":p.status==="Inactive"?"Inactiv":p.status==="Expired"?"Expirat":p.status==="Pending"?"În așteptare":p.status})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>b(p),className:"text-blue-600 hover:text-blue-900 p-1 rounded-lg hover:bg-blue-50 transition-colors",title:"Vezi contract",children:e(je,{size:16})}),e("button",{onClick:()=>v(p),className:"text-green-600 hover:text-green-900 p-1 rounded-lg hover:bg-green-50 transition-colors",title:"Descarcă contract",children:e(Le,{size:16})}),e("button",{onClick:()=>y(p),className:"text-yellow-600 hover:text-yellow-900 p-1 rounded-lg hover:bg-yellow-50 transition-colors",title:"Editează contract",children:e(Ye,{size:16})}),e("button",{onClick:()=>_(p),className:"text-red-600 hover:text-red-900 p-1 rounded-lg hover:bg-red-50 transition-colors",title:"Șterge contract",children:e(Oe,{size:16})})]})})]},p.id))})]})})}),g.length===0&&t("div",{className:"card p-12 text-center",children:[e("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl inline-block mb-6",children:e(de,{className:"w-16 h-16 text-blue-500 mx-auto"})}),e("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Nu există contracte"}),e("p",{className:"text-slate-600 mb-6",children:"Adaugă primul contract pentru această locație"}),t("button",{onClick:S,className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Contract"})]})]}),m&&e(jo,{item:d,onClose:()=>{x(!1),c(null)},onSave:R,locationId:a})]})},Mo=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",contact_person:"",email:"",phone:"",address:"",cnp_cui:"",type:"Persoana Fizica",status:"Activ",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",contact_person:a.contact_person||"",email:a.email||"",phone:a.phone||"",address:a.address||"",cnp_cui:a.cnp_cui||"",type:a.type||"Persoana Fizica",status:a.status||"Activ",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;o(c=>({...c,[x]:d}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-purple-800 to-violet-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-violet-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg",children:e(Pe,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Proprietar":"Adaugă Proprietar Nou"}),e("p",{className:"text-purple-100 text-sm font-medium",children:"Completează informațiile despre proprietar"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Nume Proprietar *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: Ion Popescu sau SC Imobiliare SRL"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Persoană de Contact"}),e("input",{type:"text",name:"contact_person",value:s.contact_person,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: Maria Ionescu"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Email"}),e("input",{type:"email",name:"email",value:s.email,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: ion.popescu@email.com"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Telefon"}),e("input",{type:"tel",name:"phone",value:s.phone,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: +40712345678"})]}),t("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Adresă"}),e("input",{type:"text",name:"address",value:s.address,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: Str. Mihai Viteazu nr. 10, București"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"CNP / CUI"}),e("input",{type:"text",name:"cnp_cui",value:s.cnp_cui,onChange:i,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"ex: 1234567890123 sau RO12345678"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Tip *"}),t("select",{name:"type",value:s.type,onChange:i,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e("option",{value:"Persoana Fizica",children:"Persoană Fizică"}),e("option",{value:"Persoana Juridica",children:"Persoană Juridică"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"})]})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:3,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"Note suplimentare despre proprietar..."})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Pe,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Proprietar"]})]})]})]})})]})})},$o=({locationId:a,locationName:l})=>{const{proprietari:r,createItem:s,updateItem:o,deleteItem:i}=me(),[n,m]=h.useState(!1),[x,d]=h.useState(null),[c,g]=h.useState(""),u=(r||[]).filter(C=>{var F,A,U,D;return((F=C.name)==null?void 0:F.toLowerCase().includes(c.toLowerCase()))||((A=C.contact_person)==null?void 0:A.toLowerCase().includes(c.toLowerCase()))||((U=C.email)==null?void 0:U.toLowerCase().includes(c.toLowerCase()))||((D=C.phone)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))}),S=()=>{d(null),m(!0)},b=C=>{console.log("View proprietar:",C)},v=C=>{d(C),m(!0)},y=async C=>{if(window.confirm(`Sigur doriți să ștergeți proprietarul "${C.name}"?`))try{await i("proprietari",C.id)}catch(F){console.error("Error deleting proprietar:",F)}},_=async C=>{try{x?await o("proprietari",x.id,C):await s("proprietari",C),m(!1),d(null)}catch(F){console.error("Error saving proprietar:",F)}},R=C=>{switch(C){case"Persoana Fizica":return"bg-blue-100 text-blue-800";case"Persoana Juridica":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=C=>{switch(C){case"Activ":return"bg-green-100 text-green-800";case"Inactiv":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Proprietari"}),t("p",{className:"text-slate-600",children:["Gestionează proprietarii pentru ",l]})]}),t("button",{onClick:S,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Proprietar"})]})]}),t("div",{className:"relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută proprietari...",value:c,onChange:C=>g(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),u.length>0?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(C=>t("div",{className:"card p-6 hover:shadow-lg transition-all duration-200 group",children:[t("div",{className:"flex items-start justify-between mb-4",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl",children:e(Pe,{className:"w-8 h-8 text-white"})}),t("div",{children:[e("h3",{className:"font-bold text-slate-800 group-hover:text-blue-700 transition-colors",children:C.name}),e("p",{className:"text-slate-600 text-sm",children:C.contact_person})]})]}),t("div",{className:"flex space-x-1",children:[e("button",{onClick:()=>b(C),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>v(C),className:"p-2 text-slate-400 hover:text-green-500 transition-colors",children:e(Ye,{className:"w-4 h-4"})}),e("button",{onClick:()=>y(C),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e(Oe,{className:"w-4 h-4"})})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"space-y-2",children:[C.email&&t("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e(qa,{className:"w-4 h-4"}),e("span",{children:C.email})]}),C.phone&&t("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e(Ga,{className:"w-4 h-4"}),e("span",{children:C.phone})]}),C.address&&t("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e(tt,{className:"w-4 h-4"}),e("span",{className:"truncate",children:C.address})]})]}),t("div",{className:"flex space-x-2",children:[e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${R(C.type)}`,children:C.type}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${p(C.status)}`,children:C.status})]}),C.cnp_cui&&t("div",{className:"text-xs text-slate-500",children:[C.type==="Persoana Fizica"?"CNP:":"CUI:"," ",C.cnp_cui]}),C.notes&&e("div",{className:"text-sm text-slate-600 bg-slate-50 p-2 rounded-lg",children:C.notes})]})]},C.id))}):t("div",{className:"card p-12 text-center",children:[e("div",{className:"p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl inline-block mb-6",children:e(Pe,{className:"w-20 h-20 text-blue-500 mx-auto"})}),e("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Nu există proprietari"}),e("p",{className:"text-slate-600 mb-6",children:"Adaugă primul proprietar pentru această locație"}),t("button",{onClick:S,className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Proprietar"})]})]}),n&&e(Mo,{item:x,onClose:()=>{m(!1),d(null)},onSave:_})]})},Bo=()=>{const a=et(),{locations:l,contracts:r,slots:s,createItem:o,updateItem:i,deleteItem:n,exportToExcel:m,exportToPDF:x,loading:d}=me(),[c,g]=h.useState(!1),[u,S]=h.useState(null),[b,v]=h.useState(""),[y,_]=h.useState([]),[R,p]=h.useState(!1),[C,F]=h.useState(!1);h.useEffect(()=>{p(y.length>0)},[y]);const A=J=>{_(J?P.map(ee=>ee.id):[])},U=(J,ee)=>{_(ee?[...y,J]:y.filter(se=>se!==J))},D=async()=>{y.length!==0&&F(!0)},z=async()=>{try{for(const J of y)await n("locations",J);_([]),p(!1),F(!1),X.success(`${y.length} locații șterse cu succes!`)}catch(J){console.error("Error bulk deleting:",J),X.error("Eroare la ștergerea locațiilor!")}},M=()=>{y.length!==0&&console.log("Bulk edit for:",y)},[T,j]=h.useState("locations"),[N,f]=h.useState(null),[w,k]=h.useState(null),[L,I]=h.useState(!1),P=l.filter(J=>{var ee,se,ae,fe;return((ee=J.name)==null?void 0:ee.toLowerCase().includes(b.toLowerCase()))||((se=J.address)==null?void 0:se.toLowerCase().includes(b.toLowerCase()))||((ae=J.company)==null?void 0:ae.toLowerCase().includes(b.toLowerCase()))||((fe=J.contact_person)==null?void 0:fe.toLowerCase().includes(b.toLowerCase()))}),H=J=>s.filter(se=>se.location===J&&se.status!=="Depozit").length,Z=J=>{const ee=r.filter(Y=>Y.location_id===J&&Y.status==="Active");if(ee.length===0)return null;const se=ee.sort((Y,Ce)=>new Date(Ce.end_date)-new Date(Y.end_date))[0];if(!se.end_date)return null;const ae=new Date,xe=new Date(se.end_date)-ae;return Math.ceil(xe/(1e3*60*60*24))},le=(J,ee)=>{const se=r.filter(xe=>xe.location_id===J&&xe.status==="Active");if(se.length===0||!ee)return null;const ae=se.sort((xe,E)=>new Date(E.end_date)-new Date(xe.end_date))[0];return ae.monthly_rent?(ae.monthly_rent/ee).toFixed(2):null},ue=[{key:"name",label:"Nume Locație",sortable:!0,render:J=>t("div",{className:"space-y-1",children:[e("button",{onClick:()=>a(`/locations/${J.id}`),className:"text-slate-900 dark:text-slate-100 hover:text-green-700 dark:hover:text-green-400 transition-colors text-left font-medium",children:J.name}),e("div",{className:"text-slate-600 dark:text-slate-400",children:J.address})]})},{key:"company",label:"Companie",sortable:!0,render:J=>t("div",{className:"space-y-1",children:[e("span",{className:"text-blue-800 dark:text-blue-300",children:J.company}),e("div",{className:"flex items-center space-x-2",children:J.contact_person?t(Ne,{children:[e("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white shadow-lg",children:J.contact_person.charAt(0).toUpperCase()}),e("span",{className:"text-slate-700",children:J.contact_person})]}):e("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"Nu este setată"})})]})},{key:"surface",label:"Suprafață (m²)",sortable:!0,render:J=>e("div",{className:"text-slate-600",children:J.surface?`${J.surface} m²`:"N/A"})},{key:"capacity",label:"Capacitate (Sloturi)",sortable:!0,render:J=>{const ee=H(J.name);return t("div",{className:"text-slate-600",children:[ee," sloturi"]})}},{key:"cost_per_m2",label:"Cost/m²",sortable:!1,render:J=>{const ee=le(J.id,J.surface);return ee===null?e("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"N/A"}):t("div",{className:"flex items-center space-x-1",children:[e("span",{className:"text-blue-600 dark:text-blue-400",children:ee}),e("span",{className:"text-slate-500 dark:text-slate-400",children:"RON/m²"})]})}},{key:"plan_file",label:"Plan Locație",sortable:!1,render:J=>e("div",{className:"flex items-center space-x-2",children:J.plan_file?t(Ne,{children:[e("button",{onClick:()=>ge(J),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Vizualizează planul",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>re(J),className:"p-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",title:"Descarcă planul",children:e(Le,{className:"w-4 h-4"})}),e("button",{onClick:()=>be(J),className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"Șterge planul",children:e(we,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Nu există plan"})})},{key:"contract_expiration",label:"Zile Rămase Contract",sortable:!1,render:J=>{const ee=Z(J.id);if(ee===null)return e("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"Fără contract activ"});const se=ee<0,ae=ee<=30&&ee>=0;return t("div",{className:`flex items-center space-x-1 ${se?"text-red-600 dark:text-red-400":ae?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:[e("span",{children:se?Math.abs(ee):ee}),e("span",{children:se?"zile expirat":"zile rămase"})]})}}],O=()=>{S(null),g(!0)},W=J=>{S(J),g(!0)},V=async J=>{if(confirm(`Sigur doriți să ștergeți locația "${J.name}"?`))try{await n("locations",J.id),X.success("Locația a fost ștearsă cu succes!")}catch{X.error("Eroare la ștergerea locației")}},te=async J=>{try{if(J.planFile&&J.planFile instanceof File){const se=new FormData;if(Object.keys(J).forEach(ae=>{ae==="planFile"&&J[ae]instanceof File?se.append("planFile",J[ae]):ae!=="planFile"&&se.append(ae,J[ae])}),u){if(!(await fetch(`/api/locations/${u.id}`,{method:"PUT",body:se})).ok)throw new Error("Failed to update location")}else if(!(await fetch("/api/locations",{method:"POST",body:se})).ok)throw new Error("Failed to create location")}else{const se={...J};if(delete se.planFile,u){if(!(await fetch(`/api/locations/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).ok)throw new Error("Failed to update location")}else if(!(await fetch("/api/locations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).ok)throw new Error("Failed to create location")}window.location.reload(),g(!1),S(null),X.success(u?"Locația a fost actualizată cu succes!":"Locația a fost creată cu succes!")}catch(ee){console.error("Error saving location:",ee),console.error("Error details:",ee.message),X.error(`Eroare la salvare locație: ${ee.message}`)}},ne=()=>{try{m("locations")}catch(J){console.error("Error exporting to Excel:",J)}},_e=()=>{try{x("locations")}catch(J){console.error("Error exporting to PDF:",J)}},Xe=()=>{console.log("Import functionality to be implemented")},Ke=J=>{f(J),j("contracts")},he=J=>{f(J),j("proprietari")},ge=J=>{J.plan_file&&(k(J.plan_file),I(!0))},be=async J=>{if(window.confirm(`Sigur doriți să ștergeți planul locației "${J.name}"?`))try{await i("locations",J.id,{plan_file:null})}catch(ee){console.error("Error deleting document:",ee)}},re=J=>{if(J.plan_file){const ee=document.createElement("a");ee.href=J.plan_file,ee.download=`Plan_${J.name||"location"}.pdf`,ee.click()}};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex space-x-1 bg-slate-100 rounded-xl p-1",children:[e("button",{onClick:()=>j("locations"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${T==="locations"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg shadow-blue-500/25":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(tt,{size:20}),e("span",{children:"Locații"})]})}),e("button",{onClick:()=>j("contracts"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${T==="contracts"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg shadow-green-500/25":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(de,{size:20}),e("span",{children:"Contracte"})]})}),e("button",{onClick:()=>j("proprietari"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${T==="proprietari"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg shadow-purple-500/25":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Pe,{size:20}),e("span",{children:"Proprietari"})]})})]})}),T==="locations"?t(Ne,{children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-wrap items-center gap-3",children:[t("div",{className:"relative flex-1 min-w-[200px] group",children:[e($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors",size:18}),e("input",{type:"text",placeholder:"Caută locații...",value:b,onChange:J=>v(J.target.value),className:"input-field pl-12 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-100 dark:placeholder-slate-400"})]}),t("button",{onClick:Xe,className:"btn-secondary flex items-center space-x-2",children:[e(Se,{size:16}),e("span",{children:"Importă"})]}),e(mt,{onExportExcel:ne,onExportPDF:_e,entity:"locations"}),R&&t(Ne,{children:[t("button",{onClick:M,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:D,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:()=>a("/slots/cyber-import"),className:"btn-success flex items-center space-x-2",children:[e(St,{className:"w-4 h-4"}),e("span",{children:"Import Cyber"})]}),t("button",{onClick:O,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Locație"})]})]})}),e(Ue,{data:P,columns:ue,onEdit:W,onDelete:V,onViewContracts:Ke,onViewProprietari:he,loading:d.locations,searchTerm:b,onSearchChange:v,selectedItems:y,onSelectAll:A,onSelectItem:U,moduleColor:"green"}),c&&e(Ro,{item:u,onClose:()=>{g(!1),S(null)},onSave:te}),L&&w&&e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] overflow-hidden shadow-2xl",children:[t("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 px-6 py-4 flex justify-between items-center",children:[t("h3",{className:"text-xl font-bold text-white flex items-center",children:[e(de,{className:"w-6 h-6 mr-2"}),"Vizualizare Plan Locație"]}),e("button",{onClick:()=>{I(!1),k(null)},className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e(we,{className:"w-6 h-6"})})]}),e("div",{className:"h-full p-6",children:e(Lt,{pdfUrl:w,title:"Plan Locație",placeholder:"Planul locației nu este disponibil",placeholderSubtext:"Atașează planul locației pentru vizualizare"})})]})})]}):T==="contracts"?e(Oo,{locationId:(N==null?void 0:N.id)||null,locationName:(N==null?void 0:N.name)||"Toate Contractele"}):e($o,{locationId:N==null?void 0:N.id,locationName:(N==null?void 0:N.name)||"Selectați o locație"}),C&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Oe,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[t("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Șterge ",y.length," Locații"]}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),t("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:["Ești sigur că vrei să ștergi ",y.length," locații selectate? Toate datele asociate vor fi șterse permanent."]}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>F(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),t("button",{onClick:z,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:["Șterge ",y.length," Locații"]})]})]})})]})})},Uo=()=>{const{id:a}=Kt(),l=et(),{locations:r,contracts:s,slots:o,cabinets:i,companies:n,users:m,loading:x}=me(),[d,c]=h.useState(null),[g,u]=h.useState("overview");if(h.useEffect(()=>{const p=r.find(C=>C.id===parseInt(a));c(p)},[a,r]),x)return e(ve,{children:e("div",{className:"flex items-center justify-center h-screen",children:e("div",{className:"text-xl text-slate-600",children:"Se încarcă..."})})});if(!d)return e(ve,{children:e("div",{className:"flex items-center justify-center h-screen",children:e("div",{className:"text-xl text-red-600",children:"Locația nu a fost găsită"})})});const S=s.filter(p=>p.location_id===d.id),b=o.filter(p=>p.location===d.name&&p.status!=="Depozit"),v=i.filter(p=>p.location_id===d.id);n.find(p=>p.name===d.company);const y=S.filter(p=>p.status==="Active"),_=b.length,R=v.length;return e(ve,{children:t("div",{className:"p-6 space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>l("/locations"),className:"p-3 bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 rounded-2xl hover:from-slate-200 hover:to-slate-300 dark:hover:from-slate-600 dark:hover:to-slate-700 transition-all duration-200 shadow-lg",children:e(lt,{className:"w-5 h-5"})}),t("div",{children:[e("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:d.name}),e("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:d.address})]})]}),e("div",{className:"flex space-x-3",children:t("button",{onClick:()=>l(`/locations/${a}/edit`),className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 flex items-center space-x-2",children:[e(Ye,{className:"w-5 h-5"}),e("span",{children:"Editează"})]})})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Contracte Active"}),e("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:y.length})]}),e("div",{className:"p-4 bg-blue-500/10 rounded-2xl",children:e(de,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})]})}),e("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Sloturi"}),e("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:_})]}),e("div",{className:"p-4 bg-green-500/10 rounded-2xl",children:e(Wt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})]})}),e("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Cabinete"}),e("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:R})]}),e("div",{className:"p-4 bg-purple-500/10 rounded-2xl",children:e(Pe,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})]})}),e("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 p-6 rounded-2xl shadow-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Suprafață"}),t("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:[d.surface||0," m²"]})]}),e("div",{className:"p-4 bg-orange-500/10 rounded-2xl",children:e(sr,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})})]})})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg overflow-hidden",children:[e("div",{className:"border-b border-slate-200 dark:border-slate-700",children:t("div",{className:"flex space-x-1 p-4",children:[e("button",{onClick:()=>u("overview"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${g==="overview"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Prezentare Generală"}),t("button",{onClick:()=>u("contracts"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${g==="contracts"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["Contracte (",S.length,")"]}),t("button",{onClick:()=>u("slots"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${g==="slots"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["Sloturi (",_,")"]}),t("button",{onClick:()=>u("cabinets"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${g==="cabinets"?"bg-gradient-to-r from-orange-500 to-amber-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["Cabinete (",R,")"]})]})}),t("div",{className:"p-6",children:[g==="overview"&&t("div",{className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Informații Generale"}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center space-x-3",children:[e(tt,{className:"w-5 h-5 text-blue-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Adresă"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:d.address})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(Pe,{className:"w-5 h-5 text-green-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Companie"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:d.company})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(sr,{className:"w-5 h-5 text-orange-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Suprafață"}),t("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[d.surface||0," m²"]})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(st,{className:"w-5 h-5 text-purple-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Persoană de Contact"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:d.contact_person||"Nu este setată"})]})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Plan Locație"}),d.plan_file?t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center space-x-3",children:[e(de,{className:"w-5 h-5 text-blue-500"}),t("div",{children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Fișier Plan"}),e("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Plan disponibil"})]})]}),t("div",{className:"flex space-x-3",children:[t("button",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center space-x-2",children:[e(je,{className:"w-4 h-4"}),e("span",{children:"Vizualizează"})]}),t("button",{className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Descarcă"})]})]})]}):e("p",{className:"text-slate-400 italic",children:"Nu există plan încărcat"})]})]}),d.notes&&t("div",{className:"space-y-3",children:[e("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Note"}),e("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:e("p",{className:"text-slate-700 dark:text-slate-300",children:d.notes})})]})]}),g==="contracts"&&e("div",{className:"space-y-4",children:S.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-green-50/80 to-emerald-50/80 dark:from-green-900/20 dark:to-emerald-800/20",children:t("tr",{children:[e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Număr Contract"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Tip"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Proprietar"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Perioadă"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Chirie Lunară"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Status"}),e("th",{className:"text-left p-4 font-bold text-green-800 dark:text-green-200 text-sm uppercase",children:"Contract PDF"})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:S.map(p=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e("td",{className:"p-4",children:p.contract_number}),e("td",{className:"p-4",children:p.type}),e("td",{className:"p-4",children:p.proprietar_name}),t("td",{className:"p-4",children:[new Date(p.start_date).toLocaleDateString("ro-RO")," - ",new Date(p.end_date).toLocaleDateString("ro-RO")]}),t("td",{className:"p-4",children:[p.monthly_rent," ",p.currency]}),e("td",{className:"p-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p.status==="Active"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:p.status})}),e("td",{className:"p-4",children:p.file_path?t("div",{className:"flex space-x-2",children:[e("button",{onClick:()=>window.open(`https://www.w1n.ro${p.file_path}`,"_blank"),className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",title:"Vizualizează PDF",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const C=document.createElement("a");C.href=`https://www.w1n.ro${p.file_path}`,C.download=`contract-${p.contract_number}.pdf`,C.click()},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Descarcă PDF",children:e(Le,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 italic",children:"N/A"})})]},p.id))})]})}):e("p",{className:"text-slate-400 italic text-center py-8",children:"Nu există contracte pentru această locație"})}),g==="slots"&&e("div",{className:"space-y-4",children:b.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-purple-50/80 to-violet-50/80 dark:from-purple-900/20 dark:to-violet-800/20",children:t("tr",{children:[e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"ID"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Număr Serie"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Denumire"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Furnizor"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Cabinet"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Game Mix"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Data Licență"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Data CVT"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Status"}),e("th",{className:"text-left p-4 font-bold text-purple-800 dark:text-purple-200 text-sm uppercase",children:"Tip Proprietate"})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:b.map(p=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e("td",{className:"p-4 font-semibold",children:p.id}),e("td",{className:"p-4 font-semibold",children:p.serial_number}),e("td",{className:"p-4",children:p.name}),e("td",{className:"p-4",children:p.provider}),e("td",{className:"p-4",children:p.cabinet}),e("td",{className:"p-4",children:p.game_mix}),e("td",{className:"p-4",children:p.license_date?new Date(p.license_date).toLocaleDateString("ro-RO"):"N/A"}),e("td",{className:"p-4",children:p.cvt_date?new Date(p.cvt_date).toLocaleDateString("ro-RO"):"N/A"}),e("td",{className:"p-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p.status==="Activ"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:p.status})}),e("td",{className:"p-4",children:p.property_type==="Owned"?"Proprietate":"Închiriat"})]},p.id))})]})}):e("p",{className:"text-slate-400 italic text-center py-8",children:"Nu există sloturi în această locație"})}),g==="cabinets"&&e("div",{className:"space-y-4",children:v.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gradient-to-r from-orange-50/80 to-amber-50/80 dark:from-orange-900/20 dark:to-amber-800/20",children:t("tr",{children:[e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Număr Serie"}),e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Model"}),e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Producător"}),e("th",{className:"text-left p-4 font-bold text-orange-800 dark:text-orange-200 text-sm uppercase",children:"Status"})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:v.map(p=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e("td",{className:"p-4 font-semibold",children:p.serial_number}),e("td",{className:"p-4",children:p.model}),e("td",{className:"p-4",children:p.manufacturer}),e("td",{className:"p-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p.status==="Activ"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:p.status})})]},p.id))})]})}):e("p",{className:"text-slate-400 italic text-center py-8",children:"Nu există cabinete în această locație"})})]})]})]})})},Vo=({item:a,onClose:l,onSave:r})=>{me();const[s,o]=h.useState({name:"",contact_person:"",contact:"",phone:"",company:"",status:"Activ",notes:"",logo:{type:"upload",url:"",file:null}});h.useEffect(()=>{a&&o({name:a.name||"",contact_person:a.contact_person||"",contact:a.contact||"",phone:a.phone||"",company:a.company||"",status:a.status||"Activ",notes:a.notes||"",logo:a.logo?typeof a.logo=="object"?a.logo:{type:"upload",url:"",file:null}:{type:"upload",url:"",file:null}})},[a]);const i=c=>{o({...s,[c.target.name]:c.target.value})},n=c=>{o({...s,logo:{...s.logo,type:c}})},m=c=>{o({...s,logo:{...s.logo,url:c}})},x=c=>{const g=c.target.files[0];if(g){const u=new FileReader;u.onloadend=()=>{o({...s,logo:{...s.logo,file:u.result}})},u.readAsDataURL(g)}};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-purple-800 to-violet-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-violet-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg",children:e(st,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Furnizor":"Adaugă Furnizor"}),e("p",{className:"text-purple-100 text-sm font-medium",children:"Completează informațiile despre furnizor"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:c=>{c.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Furnizor *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"input-field",placeholder:"ex: EGT Digital",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Persoana de Contact *"}),e("input",{type:"text",name:"contact_person",value:s.contact_person,onChange:i,className:"input-field",placeholder:"ex: Ion Popescu",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Companie Furnizor *"}),e("input",{type:"text",name:"company",value:s.company,onChange:i,className:"input-field",placeholder:"Introdu numele companiei",required:!0}),e("p",{className:"text-xs text-slate-500",children:"Compania care deține furnizorul (pentru facturi și contracte)"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Email Contact *"}),e("input",{type:"email",name:"contact",value:s.contact,onChange:i,className:"input-field",placeholder:"ex: contact@egt-digital.com",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Telefon *"}),e("input",{type:"text",name:"phone",value:s.phone,onChange:i,className:"input-field",placeholder:"ex: +40 21 555 1234",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status"}),t("select",{name:"status",value:s.status,onChange:i,className:"input-field",children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Suspendat",children:"Suspendat"})]})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Logo Furnizor"}),t("div",{className:"flex space-x-4 mb-4",children:[e("button",{type:"button",onClick:()=>n("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${s.logo.type==="upload"?"bg-purple-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Upload Logo"}),e("button",{type:"button",onClick:()=>n("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${s.logo.type==="link"?"bg-purple-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Link URL"})]}),s.logo.type==="upload"?t("div",{children:[e("input",{type:"file",accept:"image/*",onChange:x,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"}),s.logo.file&&t("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg flex items-center space-x-4",children:[e("img",{src:s.logo.file,alt:"Logo Preview",className:"h-9 w-9 object-contain rounded"}),e("span",{className:"text-sm text-green-600 font-medium",children:"✓ Logo încărcat"})]})]}):t("div",{children:[e("input",{type:"text",value:s.logo.url,onChange:c=>m(c.target.value),className:"input-field",placeholder:"https://example.com/logo.png"}),s.logo.url&&t("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg flex items-center space-x-4",children:[e("img",{src:s.logo.url,alt:"Logo Preview",className:"h-9 w-9 object-contain rounded"}),e("span",{className:"text-sm text-green-600 font-medium",children:"✓ Logo settat"})]})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note Adiționale"}),e("textarea",{name:"notes",value:s.notes,onChange:i,className:"input-field min-h-[80px] resize-none",placeholder:"Informații suplimentare despre furnizor..."})]}),t("div",{className:"flex justify-end space-x-4 pt-8 border-t-2 border-slate-200/50 mt-8",children:[e("button",{type:"button",onClick:l,className:"btn-secondary group",children:e("span",{className:"group-hover:-translate-x-1 transition-transform inline-block",children:"Anulează"})}),e("button",{type:"submit",className:"btn-primary group",children:t("span",{className:"group-hover:translate-x-1 transition-transform inline-block",children:[a?"Actualizează":"Adaugă"," Furnizor"]})})]})]})})]})})},Go=()=>{const{providers:a,games:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n,loading:m}=me(),[x,d]=h.useState(!1),[c,g]=h.useState(null),[u,S]=h.useState(""),[b,v]=h.useState([]),[y,_]=h.useState(!1),R=k=>!l||!k?0:l.filter(L=>L.provider&&L.provider.toLowerCase()===k.toLowerCase()).length;h.useEffect(()=>{_(b.length>0)},[b]);const p=k=>{v(k?U.map(L=>L.id):[])},C=(k,L)=>{v(L?[...b,k]:b.filter(I=>I!==k))},F=async()=>{if(b.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${b.length} elemente?`))try{for(const k of b)await o("providers",k);v([]),_(!1)}catch(k){console.error("Error bulk deleting:",k)}},A=()=>{b.length!==0&&console.log("Bulk edit for:",b)},U=a.filter(k=>{var L,I,P;return((L=k.name)==null?void 0:L.toLowerCase().includes(u.toLowerCase()))||((I=k.contact)==null?void 0:I.toLowerCase().includes(u.toLowerCase()))||((P=k.contractType)==null?void 0:P.toLowerCase().includes(u.toLowerCase()))}),D=[{key:"name",label:"Nume Furnizor",sortable:!0,render:k=>{var I,P,H;const L=((I=k.logo)==null?void 0:I.file)||((P=k.logo)==null?void 0:P.url);return t("div",{className:"flex items-center space-x-3",children:[L?e("img",{src:L,alt:k.name,className:"w-9 h-9 rounded-full object-cover border-2 border-slate-200 bg-white shadow-md",onError:Z=>{Z.target.style.display="none",Z.target.nextSibling.style.display="flex"}}):null,e("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center text-white font-bold shadow-lg",style:{display:L?"none":"flex"},children:((H=k.name)==null?void 0:H.charAt(0))||"F"}),e("div",{className:"font-bold text-slate-900 dark:text-slate-100 group-hover:text-purple-700 dark:group-hover:text-purple-400 transition-colors",children:k.name})]})}},{key:"company",label:"Companie",sortable:!0,render:k=>e("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:k.company||"N/A"})},{key:"contact",label:"Contact",sortable:!0,render:k=>t("div",{className:"space-y-1",children:[e("div",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm",children:k.contact}),e("div",{className:"text-slate-500 dark:text-slate-400 text-xs font-sans",children:k.phone})]})},{key:"games_count",label:"Nr. Jocuri",sortable:!0,render:k=>{const L=R(k.name);return t("span",{className:"text-blue-800 dark:text-blue-300 text-xs font-bold",children:[L," jocuri"]})}},{key:"status",label:"Status",sortable:!0,render:k=>{var P;const L=((P=k.status)==null?void 0:P.toLowerCase())||"",I=L==="activ"||L==="active";return e("span",{className:`px-4 py-2 rounded-2xl text-xs font-bold shadow-lg ${I?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-green-500/25":"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-500/25"}`,children:I?"Activ":"Inactiv"})}},{key:"created_by",label:"CREAT DE",sortable:!0,render:k=>e("div",{className:"text-slate-800 font-medium text-base",children:k.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:k=>e("div",{className:"text-slate-800 font-medium text-base",children:k.created_at?new Date(k.created_at).toLocaleDateString("ro-RO"):"N/A"})}],z=()=>{g(null),d(!0)},M=k=>{g(k),d(!0)},T=async k=>{window.confirm(`Sigur doriți să ștergeți furnizorul "${k.name}"?`)&&await o("providers",k.id)},j=async k=>{c?await s("providers",c.id,k):await r("providers",k),d(!1),g(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-wrap items-center gap-3",children:[t("div",{className:"relative flex-1 min-w-[200px] group",children:[e($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors",size:18}),e("input",{type:"text",placeholder:"Caută furnizori...",value:u,onChange:k=>S(k.target.value),className:"input-field pl-12"})]}),t("button",{onClick:()=>{console.log("Import functionality to be implemented")},className:"btn-secondary flex items-center space-x-2",children:[e(Se,{size:16}),e("span",{children:"Importă"})]}),e(mt,{onExportExcel:()=>{try{i("providers")}catch(k){console.error("Error exporting to Excel:",k)}},onExportPDF:()=>{try{n("providers")}catch(k){console.error("Error exporting to PDF:",k)}},entity:"providers"}),y&&t(Ne,{children:[t("button",{onClick:A,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:F,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Furnizor"})]})]})}),e(Ue,{data:U,columns:D,loading:m.providers,searchTerm:u,onSearchChange:S,onEdit:M,onDelete:T,selectedItems:b,onSelectAll:p,onSelectItem:C,moduleColor:"purple"}),x&&e(Vo,{item:c,onClose:()=>{d(!1),g(null)},onSave:j})]})})},qo=({item:a,onClose:l,onSave:r})=>{const{providers:s,platforms:o}=me(),[i,n]=h.useState({provider:"",name:"",model:"",platform:"",status:"Activ",notes:""});h.useEffect(()=>{a&&n({provider:a.provider||"",name:a.name||"",model:a.model||"",platform:a.platform||"",status:a.status||"Activ",notes:a.notes||""})},[a]);const m=d=>{d.preventDefault(),r(i)},x=d=>{const{name:c,value:g}=d.target;n(u=>({...u,[c]:g}))};return e("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[t("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 via-purple-700 to-violet-600 text-white px-8 py-6 flex items-center justify-between rounded-t-3xl shadow-lg",children:[e("h2",{className:"text-2xl font-bold flex items-center",children:a?"Editează Cabinet":"Adaugă Cabinet Nou"}),e("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-xl transition-all duration-200 hover:scale-110",children:e(we,{size:24})})]}),t("form",{onSubmit:m,className:"p-8 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:i.provider,onChange:x,className:"input-field",required:!0,children:[e("option",{value:"",children:"Selectează furnizor"}),s==null?void 0:s.map(d=>e("option",{value:d.name,children:d.name},d.id))]}),e("p",{className:"text-xs text-slate-500",children:"Furnizorul cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Cabinet *"}),e("input",{type:"text",name:"name",value:i.name,onChange:x,className:"input-field",placeholder:"Ex: Cabinet Premium 01",required:!0}),e("p",{className:"text-xs text-slate-500",children:"Numele cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Model"}),e("input",{type:"text",name:"model",value:i.model,onChange:x,className:"input-field",placeholder:"Ex: Deluxe 2024"}),e("p",{className:"text-xs text-slate-500",children:"Modelul cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Platformă *"}),t("select",{name:"platform",value:i.platform,onChange:x,className:"input-field",required:!0,children:[e("option",{value:"",children:"Selectează platformă"}),o==null?void 0:o.map(d=>e("option",{value:d.name,children:d.name},d.id))]}),e("p",{className:"text-xs text-slate-500",children:"Platforma tehnică a cabinetului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status *"}),t("select",{name:"status",value:i.status,onChange:x,className:"input-field",required:!0,children:[e("option",{value:"Activ",children:"Activ"}),e("option",{value:"Inactiv",children:"Inactiv"}),e("option",{value:"Mentenanță",children:"Mentenanță"})]}),e("p",{className:"text-xs text-slate-500",children:"Statusul actual"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note Adiționale"}),e("textarea",{name:"notes",value:i.notes,onChange:x,className:"input-field min-h-[100px] resize-none",placeholder:"Informații suplimentare despre cabinet..."}),e("p",{className:"text-xs text-slate-500",children:"Observații și detalii adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary px-8",children:"Anulează"}),e("button",{type:"submit",className:"btn-primary px-8",children:a?"Actualizează Cabinet":"Adaugă Cabinet"})]})]})]})})},xl=({item:a,onClose:l,onSave:r})=>{const{providers:s}=me(),[o,i]=h.useState({name:"",serial_numbers:"",provider_id:"",avatar_url:"",avatar_file:"",status:"Active",notes:""}),[n,m]=h.useState(null);h.useEffect(()=>{a&&(i({name:a.name||"",serial_numbers:a.serial_numbers||"",provider_id:a.provider_id||"",avatar_url:a.avatar_url||"",avatar_file:a.avatar_file||"",status:a.status||"Active",notes:a.notes||""}),a.avatar_url?m(a.avatar_url):a.avatar_file&&a.avatar_file!=="{}"?m(a.avatar_file):m(null))},[a]);const x=u=>{u.preventDefault(),r(o)},d=u=>{const{name:S,value:b}=u.target;i(v=>({...v,[S]:b}))},c=u=>{const S=u.target.files[0];if(S){const b=new FileReader;b.onload=v=>{const y=v.target.result;i(_=>({..._,avatar_file:y,avatar_url:""})),m(y)},b.readAsDataURL(S)}},g=u=>{i(S=>({...S,avatar_url:u.target.value,avatar_file:""})),u.target.value?m(u.target.value):m(null)};return e("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t("div",{className:"sticky top-0 bg-gradient-to-r from-teal-600 via-cyan-600 to-blue-600 text-white px-8 py-6 flex items-center justify-between rounded-t-3xl shadow-lg",children:[e("h2",{className:"text-2xl font-bold flex items-center",children:a?"Editează Platformă":"Adaugă Platformă Nouă"}),e("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-xl transition-all duration-200 hover:scale-110",children:e(we,{size:24})})]}),t("form",{onSubmit:x,className:"p-6",children:[t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Platformă *"}),e("input",{type:"text",name:"name",value:o.name,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",placeholder:"Ex: Android 10 Pro",required:!0})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor"}),t("select",{name:"provider_id",value:o.provider_id,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",children:[e("option",{value:"",children:"Selectează furnizor"}),s.map(u=>e("option",{value:u.id,children:u.name},u.id))]})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Avatar Platformă"}),t("div",{className:"space-y-3",children:[n&&e("div",{className:"flex justify-center",children:e("img",{src:n,alt:"Preview",className:"w-20 h-20 rounded-xl object-cover border-2 border-slate-200 shadow-sm"})}),e("input",{type:"url",name:"avatar_url",value:o.avatar_url,onChange:g,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",placeholder:"https://example.com/avatar.png"}),e("div",{className:"relative",children:e("input",{type:"file",name:"avatar_file",onChange:c,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100",accept:"image/*"})})]})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:o.status,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm",required:!0,children:[e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"})]})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:o.notes,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm resize-none",placeholder:"Informații adiționale despre platformă...",rows:3})]})]}),t("div",{className:"mt-6 space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numere Seriale *"}),e("textarea",{name:"serial_numbers",value:o.serial_numbers,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm text-sm resize-none",placeholder:`Introdu numerele seriale, separate prin virgulă sau pe rânduri diferite:
SN001, SN002, SN003
sau:
SN001
SN002
SN003`,rows:4,required:!0}),t("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[e("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-blue-50 text-blue-700",children:"💡 Exemplu: SN12345, SN12346, SN12347"}),e("span",{children:"sau pe rânduri separate"})]})]}),t("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-2.5 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-xl transition-all duration-200 font-medium",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl hover:from-cyan-600 hover:to-blue-600 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:a?"Actualizează":"Adaugă Platformă"})]})]})]})})},Jo=({locationId:a,locationName:l,hideSearchAndAdd:r=!1})=>{const{platforms:s,createItem:o,updateItem:i,deleteItem:n}=me(),[m,x]=h.useState(!1),[d,c]=h.useState(null),[g,u]=h.useState(""),S=s.filter(A=>{var U,D,z,M;return((U=A.name)==null?void 0:U.toLowerCase().includes(g.toLowerCase()))||((D=A.type)==null?void 0:D.toLowerCase().includes(g.toLowerCase()))||((z=A.status)==null?void 0:z.toLowerCase().includes(g.toLowerCase()))||((M=A.description)==null?void 0:M.toLowerCase().includes(g.toLowerCase()))}),b=()=>{c(null),x(!0)},v=A=>{console.log("View platform:",A)},y=A=>{c(A),x(!0)},_=async A=>{if(window.confirm(`Sigur doriți să ștergeți platforma "${A.name}"?`))try{await n("platforms",A.id)}catch(U){console.error("Error deleting platform:",U)}},R=async A=>{try{d?await i("platforms",d.id,A):await o("platforms",A),x(!1),c(null)}catch(U){console.error("Error saving platform:",U)}},p=A=>{switch(A){case"Gaming":return"bg-purple-100 text-purple-800";case"Server":return"bg-blue-100 text-blue-800";case"Workstation":return"bg-green-100 text-green-800";case"Terminal":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},C=A=>{switch(A){case"Active":return"bg-green-100 text-green-800";case"Inactive":return"bg-red-100 text-red-800";case"Maintenance":return"bg-yellow-100 text-yellow-800";case"Offline":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},F=A=>{switch(A){case"Gaming":return e(Ft,{className:"w-6 h-6 text-white"});case"Server":return e(Fa,{className:"w-6 h-6 text-white"});case"Workstation":return e(Tr,{className:"w-6 h-6 text-white"});case"Terminal":return e(Ft,{className:"w-6 h-6 text-white"});default:return e(Ft,{className:"w-6 h-6 text-white"})}};return t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Platforme"}),e("p",{className:"text-slate-600",children:a?`Gestionează platformele pentru ${l}`:"Toate platformele din sistem"})]}),!r&&t("button",{onClick:b,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Platformă"})]})]}),!r&&t("div",{className:"relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută platforme...",value:g,onChange:A=>u(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),S.length>0?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(A=>t("div",{className:"card p-6 hover:shadow-lg transition-all duration-200 group",children:[t("div",{className:"flex items-start justify-between mb-4",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl",children:F(A.type)}),t("div",{children:[e("h3",{className:"font-bold text-slate-800 group-hover:text-purple-700 transition-colors",children:A.name}),e("p",{className:"text-slate-600 text-sm",children:A.type})]})]}),t("div",{className:"flex space-x-1",children:[e("button",{onClick:()=>v(A),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>y(A),className:"p-2 text-slate-400 hover:text-green-500 transition-colors",children:e(Ye,{className:"w-4 h-4"})}),e("button",{onClick:()=>_(A),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e(Oe,{className:"w-4 h-4"})})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"space-y-2",children:[A.description&&e("div",{className:"text-sm text-slate-600",children:A.description}),A.specifications&&t("div",{className:"text-xs text-slate-500",children:[e("strong",{children:"Specs:"})," ",A.specifications]}),A.location&&t("div",{className:"text-xs text-slate-500",children:[e("strong",{children:"Locație:"})," ",A.location]})]}),t("div",{className:"flex space-x-2",children:[e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${p(A.type)}`,children:A.type}),e("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${C(A.status)}`,children:A.status==="Active"?"Activ":A.status==="Inactive"?"Inactiv":A.status==="Maintenance"?"În mentenanță":A.status==="Offline"?"Offline":A.status})]}),A.notes&&e("div",{className:"text-sm text-slate-600 bg-slate-50 p-2 rounded-lg",children:A.notes})]})]},A.id))}):t("div",{className:"card p-12 text-center",children:[e("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-3xl inline-block mb-6",children:e(Ft,{className:"w-16 h-16 text-purple-500 mx-auto"})}),e("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Nu există platforme"}),e("p",{className:"text-slate-600 mb-6",children:a?"Adaugă prima platformă pentru această locație":"Nu există platforme în sistem"}),!r&&t("button",{onClick:b,className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(Ae,{size:18}),e("span",{children:"Adaugă Platformă"})]})]}),m&&e(xl,{item:d,onClose:()=>{x(!1),c(null)},onSave:R})]})},Ho=()=>{const{cabinets:a,platforms:l,providers:r,createItem:s,updateItem:o,deleteItem:i,exportData:n,loading:m}=me(),[x,d]=h.useState(!1),[c,g]=h.useState(!1),[u,S]=h.useState(null),[b,v]=h.useState(""),[y,_]=h.useState([]),[R,p]=h.useState(!1);h.useEffect(()=>{p(y.length>0)},[y]);const C=L=>{_(L?M.map(I=>I.id):[])},F=(L,I)=>{_(I?[...y,L]:y.filter(P=>P!==L))},A=async()=>{if(y.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${y.length} elemente?`))try{for(const L of y)await i("cabinets",L);_([]),p(!1)}catch(L){console.error("Error bulk deleting:",L)}},U=()=>{y.length!==0&&console.log("Bulk edit for:",y)},[D,z]=h.useState("cabinets"),M=a.filter(L=>{var I,P,H,Z;return((I=L.name)==null?void 0:I.toLowerCase().includes(b.toLowerCase()))||((P=L.provider)==null?void 0:P.toLowerCase().includes(b.toLowerCase()))||((H=L.model)==null?void 0:H.toLowerCase().includes(b.toLowerCase()))||((Z=L.platform)==null?void 0:Z.toLowerCase().includes(b.toLowerCase()))});l!=null&&l.filter(L=>{var I,P;return((I=L.name)==null?void 0:I.toLowerCase().includes(b.toLowerCase()))||((P=L.serial_numbers)==null?void 0:P.toLowerCase().includes(b.toLowerCase()))});const T=[{key:"name",label:"Nume Cabinet",sortable:!0,render:L=>t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold shadow-lg",children:e(Je,{className:"w-4 h-4 text-white"})}),e("div",{className:"font-bold text-slate-900",children:L.name})]})},{key:"provider",label:"Furnizor",sortable:!0,render:L=>{var H;const P=(Z=>{if(Z.provider_logo)try{const le=typeof Z.provider_logo=="string"?JSON.parse(Z.provider_logo):Z.provider_logo;return le.file||le.url||le}catch{return Z.provider_logo}return null})(L);return t("div",{className:"flex items-center space-x-3",children:[P?e("img",{src:P,alt:L.provider_name||L.provider,className:"w-8 h-8 rounded-full object-cover border-2 border-slate-200 bg-white shadow-md",onError:Z=>{Z.target.style.display="none",Z.target.nextSibling.style.display="flex"}}):null,e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center text-white font-bold shadow-lg",style:{display:P?"none":"flex"},children:((H=L.provider_name||L.provider)==null?void 0:H.charAt(0))||"F"}),e("span",{className:"text-purple-800 dark:text-purple-300 text-xs font-bold",children:L.provider_name||L.provider||"N/A"})]})}},{key:"model",label:"Model",sortable:!0},{key:"platform",label:"Platformă",sortable:!0,render:L=>{const P=(H=>H.platform_avatar_url&&H.platform_avatar_url.trim()!==""?H.platform_avatar_url:H.platform_avatar_file&&H.platform_avatar_file!=="{}"&&H.platform_avatar_file.trim()!==""?H.platform_avatar_file:null)(L);return t("div",{className:"flex items-center space-x-3",children:[P?e("img",{src:P,alt:L.platform_name||L.platform,className:"w-[60px] h-[30px] rounded object-contain border border-slate-200 bg-white shadow-sm",onError:H=>{H.target.style.display="none",H.target.nextSibling.style.display="flex"}}):null,e("div",{className:`w-[60px] h-[30px] rounded flex items-center justify-center text-white font-bold shadow-sm ${P?"bg-white border border-slate-200":"bg-gradient-to-br from-cyan-500 to-blue-500"}`,style:{display:P?"none":"flex"},children:e(Ft,{className:`w-5 h-5 ${P?"text-slate-600":"text-white"}`})}),e("span",{className:"text-cyan-800 dark:text-cyan-300 text-xs font-bold",children:L.platform_name||L.platform||"N/A"})]})}},{key:"status",label:"Status",sortable:!0,render:L=>{var P,H;const I=((P=L.status)==null?void 0:P.toLowerCase())==="activ"||((H=L.status)==null?void 0:H.toLowerCase())==="active";return e("span",{className:`px-4 py-2 rounded-2xl text-xs font-bold shadow-lg ${I?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-green-500/25":"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-500/25"}`,children:I?"Activ":"Inactiv"})}},{key:"created_at",label:"Data Creare",sortable:!0,render:L=>e("div",{className:"text-sm text-slate-600",children:new Date(L.created_at).toLocaleDateString("ro-RO")})},{key:"created_by",label:"Creat de",sortable:!0,render:L=>{var I,P;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shadow-lg",children:((P=(I=L.created_by)==null?void 0:I.charAt(0))==null?void 0:P.toUpperCase())||"A"}),e("span",{className:"text-sm font-medium text-slate-700",children:L.created_by||"Sistem"})]})}}];h.useState({});const j=()=>{S(null),d(!0)},N=()=>{S(null),g(!0)},f=L=>{S(L),D==="cabinets"?d(!0):g(!0)},w=async L=>{const I=D==="cabinets"?"cabinets":"platforms";u?await o(I,u.id,L):await s(I,L),d(!1),g(!1)},k=async L=>{const I=D==="cabinets"?"cabinets":"platforms";window.confirm(`Sigur vrei să ștergi acest ${D==="cabinets"?"cabinet":"platformă"}?`)&&await i(I,L)};return t(ve,{children:[t("div",{className:"space-y-6",children:[e("div",{className:"card p-4",children:t("div",{className:"flex space-x-2 bg-slate-100 rounded-xl p-1",children:[e("button",{onClick:()=>{z("cabinets"),v("")},className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${D==="cabinets"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg shadow-purple-500/25 scale-105":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Je,{size:20}),e("span",{children:"CABINETE"}),e("span",{className:`px-2 py-1 rounded-full text-xs ${D==="cabinets"?"bg-white/20":"bg-slate-200 text-slate-700"}`,children:a.length})]})}),e("button",{onClick:()=>{z("platforms"),v("")},className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${D==="platforms"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg shadow-cyan-500/25 scale-105":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Ft,{size:20}),e("span",{children:"PLATFORME"}),e("span",{className:`px-2 py-1 rounded-full text-xs ${D==="platforms"?"bg-white/20":"bg-slate-200 text-slate-700"}`,children:(l==null?void 0:l.length)||0})]})})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e("div",{className:"flex-1 max-w-md",children:t("div",{className:"relative",children:[e($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),e("input",{type:"text",placeholder:`Caută ${D==="cabinets"?"cabinete":"platforme"}...`,value:b,onChange:L=>v(L.target.value),className:"input-field pl-12"})]})}),t("div",{className:"flex gap-3",children:[t("button",{onClick:()=>n(D==="cabinets"?"cabinets":"platforms"),className:"btn-secondary flex items-center space-x-2",children:[e(Le,{size:18}),e("span",{className:"hidden sm:inline",children:"Export"})]}),R&&D==="cabinets"&&t(Ne,{children:[t("button",{onClick:U,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:A,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:D==="cabinets"?j:N,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{size:18}),e("span",{children:D==="cabinets"?"Adaugă Cabinet":"Adaugă Platformă"})]})]})]})}),D==="cabinets"?e("div",{className:"card p-6",children:e(Ue,{data:M,columns:T,onEdit:f,onDelete:k,loading:m,selectedItems:y,onSelectAll:C,onSelectItem:F,moduleColor:"teal"})}):e(Jo,{locationId:null,locationName:"Toate Platformele",hideSearchAndAdd:!0})]}),x&&e(qo,{item:u,onClose:()=>d(!1),onSave:w}),c&&e(xl,{item:u,onClose:()=>g(!1),onSave:w})]})},Wo=({item:a,onClose:l,onSave:r})=>{const{providers:s}=me(),[o,i]=h.useState({name:"",provider:"",games:"",rtp:"",denomination:.01,max_bet:"",gaming_places:1,status:"Active",notes:""});h.useEffect(()=>{if(a){let d="";try{if(typeof a.games=="string"){const c=JSON.parse(a.games);d=Array.isArray(c)?c.join(`
`):""}else Array.isArray(a.games)&&(d=a.games.join(`
`))}catch(c){console.error("Error parsing games:",c),d=""}i({name:a.name||"",provider:a.provider||"",games:d,rtp:a.rtp||"",denomination:a.denomination||.01,max_bet:a.max_bet||"",gaming_places:a.gaming_places||1,status:a.status||"Active",notes:a.notes||""})}},[a]);const n=d=>{const{name:c,value:g}=d.target;i(u=>({...u,[c]:g}))},m=()=>o.games.trim()?o.games.split(`
`).filter(d=>d.trim()).length:0;return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-indigo-800 to-blue-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600/20 to-blue-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl shadow-lg",children:e(Rt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Game Mix":"Adaugă Game Mix"}),e("p",{className:"text-indigo-100 text-sm font-medium",children:"Completează informațiile despre game mix"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:d=>{d.preventDefault();const c=o.games.split(`
`).map(u=>u.trim()).filter(u=>u.length>0),g={...o,games:c,rtp:o.rtp?parseFloat(o.rtp):null,denomination:o.denomination?parseFloat(o.denomination):.01,max_bet:o.max_bet?parseFloat(o.max_bet):null,gaming_places:o.gaming_places?parseInt(o.gaming_places):1};console.log("🎮 GameMix submitData:",g),r(g)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Nume Game Mix *"}),e("input",{type:"text",name:"name",value:o.name,onChange:n,className:"input-field",placeholder:"ex: Mix Clasice Novomatic",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Furnizor"}),t("select",{name:"provider",value:o.provider,onChange:n,className:"input-field",children:[e("option",{value:"",children:"Selectează furnizor"}),s==null?void 0:s.map(d=>e("option",{value:d.name,children:d.name},d.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"RTP (%)"}),e("input",{type:"number",step:"0.01",name:"rtp",value:o.rtp,onChange:n,className:"input-field",placeholder:"ex: 96.5"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Status *"}),t("select",{name:"status",value:o.status,onChange:n,className:"input-field",required:!0,children:[e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Jocuri în Mix"}),t("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:[e("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white font-bold shadow-lg",children:m()}),t("div",{children:[t("div",{className:"font-bold text-slate-900",children:[m()," jocuri"]}),e("div",{className:"text-sm text-slate-500",children:"în acest mix"})]})]})]})]}),e("div",{className:"space-y-4",children:t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Jocuri în Mix *"}),e("textarea",{name:"games",value:o.games,onChange:n,className:"input-field",rows:6,placeholder:`Introdu numele jocurilor, separate pe rânduri diferite:
Book of Ra
Sizzling Hot
Lucky Lady Charm
Dolphins Pearl`,required:!0}),t("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[e("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-green-50 text-green-700",children:"💡 Exemplu: Un joc pe fiecare rând"}),e("span",{className:"text-slate-400",children:"•"}),t("span",{children:[m()," jocuri adăugate"]})]})]})}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Configurație Tehnică"}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Denomination"}),e("input",{type:"number",step:"0.01",name:"denomination",value:o.denomination,onChange:n,className:"input-field",placeholder:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Max Bet"}),e("input",{type:"number",step:"0.01",name:"max_bet",value:o.max_bet,onChange:n,className:"input-field",placeholder:"100.00"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Gaming Places"}),e("input",{type:"number",name:"gaming_places",value:o.gaming_places,onChange:n,className:"input-field",placeholder:"1"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:o.notes,onChange:n,className:"input-field",rows:3,placeholder:"Note adiționale despre acest game mix..."})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Rt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Game Mix"]})]})]})]})})]})})},Yo=()=>{const a=et();me();const[l,r]=h.useState([]),[s,o]=h.useState(!1),[i,n]=h.useState(""),[m,x]=h.useState(""),[d,c]=h.useState(""),[g,u]=h.useState(""),[S,b]=h.useState("grid"),[v,y]=h.useState("name"),_=[{game_id:"00000004-0000-5000-9000-000000000001",name:"10 Burning Heart",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"fruits",volatility:"low - medium",lines:10,layout:"5x3",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000001.png"},{game_id:"00000004-0000-5000-9000-000000000002",name:"100 Burning Hot",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"fruits",volatility:"medium",lines:100,layout:"5x4",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000002.png"},{game_id:"00000004-0000-5000-9000-000000000003",name:"100 Cats",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"animals and nature and wildlife",volatility:"low - medium",lines:100,layout:"5x4",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000003.png"},{game_id:"00000004-0000-5000-9000-000000000005",name:"2 Dragons",provider:"Amusnet",provider_id:"00000005-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"video slot",mechanic:"rng",theme:"dragons and mythical creatures;asian cultures;oriental and asian prosperity",volatility:"high",lines:20,layout:"5x3",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000005.png"},{game_id:"00000004-0000-5000-9000-000000000099",name:"Mini Burning Hot",provider:"Egypt Quest",provider_id:"00000555-dc86-47af-8013-c46b4c5105af",category:"Slots",type:"slots",product:"Casino",classification:"n/a",mechanic:"n/a",theme:"n/a",volatility:"n/a",lines:5,layout:"n/a",image_url:"https://cdn.cashpot.ro/cashpot/t1/thumbnail_games/00000004-0000-5000-9000-000000000099.png"}];h.useEffect(()=>{R()},[]);const R=async()=>{o(!0);try{const T=await fetch("/api/games");if(!T.ok)throw new Error("Failed to load games");const j=await T.json();r(j)}catch(T){console.error("Error loading games:",T),r(_)}finally{o(!1)}},p=[...new Set(l.map(T=>T.provider))],C=[...new Set(l.map(T=>T.volatility).filter(T=>T&&T!=="n/a"))];[...new Set(l.map(T=>T.theme).filter(T=>T&&T!=="n/a"))];const F=l.filter(T=>{const j=T.name.toLowerCase().includes(i.toLowerCase()),N=!m||T.provider===m,f=!d||T.volatility===d,w=!g||T.theme.includes(g);return j&&N&&f&&w}),A=[...F].sort((T,j)=>{switch(v){case"provider":return T.provider.localeCompare(j.provider);case"volatility":const N={low:1,"low - medium":2,medium:3,high:4};return(N[T.volatility]||5)-(N[j.volatility]||5);default:return T.name.localeCompare(j.name)}}),U=T=>{switch(T){case"low":return"bg-green-100 text-green-800";case"low - medium":return"bg-blue-100 text-blue-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=T=>{switch(T){case"low":return e(ft,{className:"w-3 h-3"});case"low - medium":return e(Yt,{className:"w-3 h-3"});case"medium":return e(zr,{className:"w-3 h-3"});case"high":return e(Yt,{className:"w-3 h-3"});default:return e(ft,{className:"w-3 h-3"})}};return t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-2xl shadow-lg shadow-purple-500/25",children:e(Je,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Biblioteca Jocuri"}),e("p",{className:"text-slate-600",children:"Toate jocurile disponibile de la toți furnizorii"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>{console.log("Export games library")},className:"btn-secondary flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Exportă"})]}),t("button",{onClick:()=>{console.log("Import games from Google Sheets")},className:"btn-primary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă din Sheets"})]})]})]})}),t("div",{className:"card p-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[t("div",{className:"lg:col-span-2 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută jocuri...",value:i,onChange:T=>n(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t("select",{value:m,onChange:T=>x(T.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e("option",{value:"",children:"Toți furnizorii"}),p.map(T=>e("option",{value:T,children:T},T))]}),t("select",{value:d,onChange:T=>c(T.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e("option",{value:"",children:"Toate volatilitățile"}),C.map(T=>e("option",{value:T,children:T},T))]}),t("select",{value:v,onChange:T=>y(T.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e("option",{value:"name",children:"Sortare: Nume"}),e("option",{value:"provider",children:"Sortare: Furnizor"}),e("option",{value:"volatility",children:"Sortare: Volatilitate"})]})]}),t("div",{className:"flex items-center justify-between mt-4",children:[e("div",{className:"flex items-center space-x-2",children:t("span",{className:"text-sm text-slate-600",children:[F.length," jocuri din ",l.length," total"]})}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>b("grid"),className:`p-2 rounded-lg transition-colors ${S==="grid"?"bg-purple-100 text-purple-600":"text-slate-400 hover:text-slate-600"}`,children:e(Tl,{className:"w-4 h-4"})}),e("button",{onClick:()=>b("list"),className:`p-2 rounded-lg transition-colors ${S==="list"?"bg-purple-100 text-purple-600":"text-slate-400 hover:text-slate-600"}`,children:e(zl,{className:"w-4 h-4"})})]})]})]}),e("div",{className:"card p-6",children:s?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):F.length===0?t("div",{className:"text-center py-12",children:[e(Je,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există jocuri"}),e("p",{className:"text-slate-500",children:"Importă jocurile din Google Sheets pentru a începe"})]}):e("div",{className:S==="grid"?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4":"space-y-4",children:A.map(T=>S==="grid"?e("div",{className:"group cursor-pointer",onClick:()=>a(`/games/${T.game_id}`),children:t("div",{className:"bg-white rounded-xl border border-slate-200 p-3 hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t("div",{className:"w-full h-64 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg mb-3 overflow-hidden flex items-center justify-center",children:[e("img",{src:T.image_url,alt:T.name,className:"max-w-full max-h-full object-contain group-hover:scale-105 transition-transform duration-300",style:{imageRendering:"crisp-edges"},onError:j=>{j.target.style.display="none",j.target.nextSibling.style.display="flex"}}),e("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center",style:{display:"none"},children:e(Je,{className:"w-8 h-8 text-purple-400"})})]}),t("div",{className:"space-y-2",children:[e("h3",{className:"font-semibold text-slate-800 text-sm line-clamp-2 group-hover:text-purple-600 transition-colors",children:T.name}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full",children:T.provider}),T.volatility&&T.volatility!=="n/a"&&t("span",{className:`text-xs px-2 py-1 rounded-full flex items-center space-x-1 ${U(T.volatility)}`,children:[D(T.volatility),e("span",{children:T.volatility})]})]}),T.lines&&T.lines!=="n/a"&&t("div",{className:"text-xs text-slate-500",children:[T.lines," linii • ",T.layout]})]})]})},T.game_id):t("div",{className:"flex items-center space-x-4 p-4 bg-white rounded-xl border border-slate-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>a(`/games/${T.game_id}`),children:[t("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:[e("img",{src:T.image_url,alt:T.name,className:"max-w-full max-h-full object-contain",style:{imageRendering:"crisp-edges"},onError:j=>{j.target.style.display="none",j.target.nextSibling.style.display="flex"}}),e("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center",style:{display:"none"},children:e(Je,{className:"w-6 h-6 text-purple-400"})})]}),t("div",{className:"flex-1 min-w-0",children:[e("h3",{className:"font-semibold text-slate-800 group-hover:text-purple-600 transition-colors",children:T.name}),e("p",{className:"text-sm text-slate-500 truncate",children:T.theme}),t("div",{className:"flex items-center space-x-2 mt-1",children:[e("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full",children:T.provider}),T.volatility&&T.volatility!=="n/a"&&t("span",{className:`text-xs px-2 py-1 rounded-full flex items-center space-x-1 ${U(T.volatility)}`,children:[D(T.volatility),e("span",{children:T.volatility})]}),T.lines&&T.lines!=="n/a"&&t("span",{className:"text-xs text-slate-500",children:[T.lines," linii"]})]})]}),e("button",{onClick:j=>{j.stopPropagation(),a(`/games/${T.game_id}`)},className:"p-2 text-slate-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:e(je,{className:"w-4 h-4"})})]},T.game_id))})})]})},Xo=()=>{const{gameMixes:a,createItem:l,updateItem:r,deleteItem:s,refreshData:o}=me(),[i,n]=h.useState("mixes"),[m,x]=h.useState(!1),[d,c]=h.useState(null),[g,u]=h.useState(""),[S,b]=h.useState("all"),[v,y]=h.useState([]),[_,R]=h.useState(!1);h.useEffect(()=>{R(v.length>0)},[v]);const p=()=>{c(null),x(!0)},C=f=>{c(f),x(!0)},F=()=>{x(!1),c(null)},A=async f=>{try{console.log("🎮 GameMixes handleSave:",{selectedItem:d,formData:f}),d?(console.log("🎮 Updating game mix:",d.id,f),await r("gameMixes",d.id,f)):(console.log("🎮 Creating game mix:",f),await l("gameMixes",f)),await o(),F()}catch(w){console.error("Error saving game mix:",w)}},U=async f=>{if(window.confirm("Ești sigur că vrei să ștergi acest game mix?"))try{await s("gameMixes",f)}catch(w){console.error("Error deleting game mix:",w)}},D=f=>{y(f?j.map(w=>w.id):[])},z=(f,w)=>{y(w?[...v,f]:v.filter(k=>k!==f))},M=async()=>{if(v.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${v.length} game mix-uri?`))try{for(const f of v)await s("gameMixes",f);y([]),R(!1)}catch(f){console.error("Error bulk deleting game mixes:",f)}},T=()=>{v.length!==0&&console.log("Bulk edit for:",v)},j=a.filter(f=>{var L,I;const w=((L=f.name)==null?void 0:L.toLowerCase().includes(g.toLowerCase()))||((I=f.provider)==null?void 0:I.toLowerCase().includes(g.toLowerCase())),k=S==="all"||f.status===S;return w&&k}),N=[{key:"name",label:"Nume Game Mix",sortable:!0,render:f=>t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:e(Rt,{className:"w-5 h-5"})}),t("div",{children:[e("div",{className:"font-bold text-slate-900",children:f.name}),t("div",{className:"text-sm text-slate-500",children:["ID: ",f.id]})]})]})},{key:"provider",label:"Furnizor",sortable:!0,render:f=>e("span",{className:"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-800 px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm",children:f.provider||"N/A"})},{key:"games",label:"Jocuri",render:f=>{const w=typeof f.games=="string"?JSON.parse(f.games):f.games,k=Array.isArray(w)?w.length:0;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white font-bold shadow-lg",children:k}),t("span",{className:"text-sm font-medium text-slate-700",children:[k," jocuri"]})]})}},{key:"status",label:"Status",sortable:!0,render:f=>{var L;const w=((L=f.status)==null?void 0:L.toLowerCase())||"";return e("span",{className:`px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm ${w==="activ"||w==="active"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800":"bg-gradient-to-r from-red-100 to-pink-100 text-red-800"}`,children:f.status})}},{key:"created_at",label:"Data Creare",sortable:!0,render:f=>e("div",{className:"text-sm text-slate-600",children:new Date(f.created_at).toLocaleDateString("ro-RO")})},{key:"created_by",label:"Creat de",sortable:!0,render:f=>{var w,k;return t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shadow-lg",children:((k=(w=f.created_by)==null?void 0:w.charAt(0))==null?void 0:k.toUpperCase())||"A"}),e("span",{className:"text-sm font-medium text-slate-700",children:f.created_by||"Sistem"})]})}}];return e(ve,{children:t("div",{className:"space-y-6",children:[t("div",{className:"card p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl shadow-lg shadow-red-500/25",children:e(Rt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Game Mixes"}),e("p",{className:"text-slate-600",children:"Gestionează mixurile de jocuri și biblioteca de jocuri"})]})]}),t("div",{className:"flex items-center space-x-3",children:[i==="mixes"&&_&&t(Ne,{children:[t("button",{onClick:T,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),t("span",{children:["Bulk Edit (",v.length,")"]})]}),t("button",{onClick:M,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),t("span",{children:["Bulk Delete (",v.length,")"]})]})]}),i==="mixes"&&t("button",{onClick:p,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-5 h-5"}),e("span",{children:"Adaugă Game Mix"})]})]})]}),t("div",{className:"flex space-x-1 bg-slate-100 p-1 rounded-lg",children:[t("button",{onClick:()=>n("mixes"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-md transition-all duration-200 ${i==="mixes"?"bg-white text-red-600 shadow-sm":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"}`,children:[e(Rt,{className:"w-4 h-4"}),e("span",{className:"font-medium",children:"Game Mixes"})]}),t("button",{onClick:()=>n("games"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-md transition-all duration-200 ${i==="games"?"bg-white text-purple-600 shadow-sm":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"}`,children:[e(Je,{className:"w-4 h-4"}),e("span",{className:"font-medium",children:"Biblioteca Jocuri"})]})]})]}),i==="mixes"?t(Ne,{children:[e("div",{className:"card p-6",children:t("div",{className:"flex flex-wrap gap-4 items-center",children:[e("div",{className:"flex-1 min-w-64",children:t("div",{className:"relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută game mix sau furnizor...",value:g,onChange:f=>u(f.target.value),className:"input-field pl-10"})]})}),t("div",{className:"flex items-center space-x-2",children:[e(Xt,{className:"w-5 h-5 text-slate-500"}),t("select",{value:S,onChange:f=>b(f.target.value),className:"input-field",children:[e("option",{value:"all",children:"Toate statusurile"}),e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"})]})]}),t("div",{className:"flex items-center space-x-2",children:[t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Export"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Import"})]})]})]})}),e("div",{className:"card",children:e(Ue,{data:j,columns:N,onEdit:C,onDelete:U,searchTerm:g,emptyMessage:"Nu există game mixes în sistem",selectedItems:v,onSelectAll:D,onSelectItem:z,moduleColor:"indigo"})})]}):e(Yo,{}),m&&e(Wo,{item:d,onClose:F,onSave:A})]})})},Ko=()=>{const{gameId:a}=Kt(),l=et(),{slots:r,gameMixes:s,providers:o,companies:i,locations:n,cabinets:m}=me(),[x,d]=h.useState(null),[c,g]=h.useState(!0),[u,S]=h.useState(null),[b,v]=h.useState([]);h.useEffect(()=>{C(),y()},[a,r,s]);const y=()=>{if(!x||!r||!s)return;const D=[];r.forEach(z=>{if(z.game_mix){const M=s.find(T=>T.name===z.game_mix||T.id===z.game_mix);if(M&&M.games){let T=[];try{T=typeof M.games=="string"?JSON.parse(M.games):M.games}catch{T=[M.games]}T.includes(x.name)&&D.push({...z,gameMixName:M.name,providerName:_(z.provider),locationName:R(z.location),cabinetName:p(z.cabinet)})}}}),v(D)},_=D=>{const z=o==null?void 0:o.find(M=>M.id===D||M.name===D);return z?z.name:D},R=D=>{const z=n==null?void 0:n.find(M=>M.id===D||M.name===D);return z?z.name:D},p=D=>{const z=m==null?void 0:m.find(M=>M.id===D||M.name===D);return z?z.name||z.model:D},C=async()=>{g(!0);try{const D=await fetch(`/api/games/${a}`);if(!D.ok)throw new Error("Game not found");const z=await D.json();d(z),F(z)}catch(D){console.error("Error loading game details:",D)}finally{g(!1)}},F=D=>{const z=r.filter(N=>{if(!N.game_mix)return!1;const f=s.find(k=>k.name===N.game_mix||k.id===N.game_mix);if(!f||!f.games)return!1;let w=[];try{w=typeof f.games=="string"?JSON.parse(f.games):f.games}catch{w=[f.games]}return w.includes(D.name)}),M={};z.forEach(N=>{const f=N.location||"Unknown";M[f]||(M[f]={count:0,cabinets:new Set,gameMixes:new Set,slots:[]}),M[f].count++,M[f].cabinets.add(N.cabinet||"Unknown"),M[f].gameMixes.add(N.game_mix||"None"),M[f].slots.push(N)});const T={};z.forEach(N=>{const f=N.cabinet||"Unknown";T[f]||(T[f]={count:0,locations:new Set,gameMixes:new Set,slots:[]}),T[f].count++,T[f].locations.add(N.location||"Unknown"),T[f].gameMixes.add(N.game_mix||"None"),T[f].slots.push(N)});const j={};z.forEach(N=>{const f=N.game_mix||"None";j[f]||(j[f]={count:0,locations:new Set,cabinets:new Set,slots:[]}),j[f].count++,j[f].locations.add(N.location||"Unknown"),j[f].cabinets.add(N.cabinet||"Unknown"),j[f].slots.push(N)}),S({totalSlots:z.length,uniqueLocations:Object.keys(M).length,uniqueCabinets:Object.keys(T).length,uniqueGameMixes:Object.keys(j).length,locationStats:M,cabinetStats:T,gameMixStats:j,allSlots:z})},A=D=>{switch(D){case"low":return"bg-green-100 text-green-800";case"low - medium":return"bg-blue-100 text-blue-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=D=>{switch(D){case"low":return e(ft,{className:"w-4 h-4"});case"low - medium":return e(Yt,{className:"w-4 h-4"});case"medium":return e(zr,{className:"w-4 h-4"});case"high":return e(Yt,{className:"w-4 h-4"});default:return e(ft,{className:"w-4 h-4"})}};return c?e(ve,{children:e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})})}):x?e(ve,{children:t("div",{className:"space-y-6",children:[t("div",{className:"card p-6",children:[e("div",{className:"flex items-center justify-between mb-6",children:t("button",{onClick:()=>l("/game-mixes/games-library"),className:"flex items-center space-x-2 text-slate-600 hover:text-purple-600 transition-colors",children:[e(lt,{className:"w-4 h-4"}),e("span",{children:"Înapoi la Biblioteca Jocuri"})]})}),t("div",{className:"flex items-start space-x-6",children:[e("div",{className:"flex-shrink-0",children:t("div",{className:"w-40 h-40 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-2xl overflow-hidden shadow-lg flex items-center justify-center",children:[e("img",{src:x.image_url,alt:x.name,className:"max-w-full max-h-full object-contain",style:{imageRendering:"crisp-edges"},onError:D=>{D.target.style.display="none",D.target.nextSibling.style.display="flex"}}),e("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center",style:{display:"none"},children:e(Je,{className:"w-16 h-16 text-purple-400"})})]})}),t("div",{className:"flex-1",children:[e("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:x.name}),e("p",{className:"text-slate-600 mb-4",children:x.theme}),t("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Furnizor"}),e("div",{className:"font-semibold text-slate-800",children:x.provider})]}),t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Linii"}),e("div",{className:"font-semibold text-slate-800",children:x.lines||"N/A"})]}),t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Layout"}),e("div",{className:"font-semibold text-slate-800",children:x.layout||"N/A"})]}),t("div",{className:"bg-slate-50 rounded-lg p-3",children:[e("div",{className:"text-sm text-slate-500 mb-1",children:"Tip"}),e("div",{className:"font-semibold text-slate-800",children:x.classification})]})]}),x.volatility&&x.volatility!=="n/a"&&t("div",{className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full ${A(x.volatility)}`,children:[U(x.volatility),e("span",{className:"font-medium",children:x.volatility})]})]})]})]}),u&&t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl inline-block mb-4",children:e(He,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.totalSlots}),e("p",{className:"text-slate-600",children:"Sloturi totale"})]}),t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl inline-block mb-4",children:e(tt,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.uniqueLocations}),e("p",{className:"text-slate-600",children:"Locații"})]}),t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl inline-block mb-4",children:e(Pe,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.uniqueCabinets}),e("p",{className:"text-slate-600",children:"Cabinete"})]}),t("div",{className:"card p-6 text-center",children:[e("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl inline-block mb-4",children:e(st,{className:"w-6 h-6 text-white"})}),e("h3",{className:"text-2xl font-bold text-slate-800",children:u.uniqueGameMixes}),e("p",{className:"text-slate-600",children:"Game Mixes"})]})]}),u&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Object.keys(u.locationStats).length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(tt,{className:"w-5 h-5 text-green-500"}),e("span",{children:"Locații"})]}),e("div",{className:"space-y-3",children:Object.entries(u.locationStats).map(([D,z])=>t("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-green-800 mb-2",children:D}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-green-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-green-800",children:z.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-green-600",children:"Cabinete:"}),e("span",{className:"font-semibold text-green-800",children:z.cabinets.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-green-600",children:"Game Mixes:"}),e("span",{className:"font-semibold text-green-800",children:z.gameMixes.size})]})]})]},D))})]}),Object.keys(u.cabinetStats).length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(Pe,{className:"w-5 h-5 text-purple-500"}),e("span",{children:"Cabinete"})]}),e("div",{className:"space-y-3",children:Object.entries(u.cabinetStats).map(([D,z])=>t("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-purple-800 mb-2",children:D}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-purple-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-purple-800",children:z.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-purple-600",children:"Locații:"}),e("span",{className:"font-semibold text-purple-800",children:z.locations.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-purple-600",children:"Game Mixes:"}),e("span",{className:"font-semibold text-purple-800",children:z.gameMixes.size})]})]})]},D))})]}),Object.keys(u.gameMixStats).length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(st,{className:"w-5 h-5 text-orange-500"}),e("span",{children:"Game Mixes"})]}),e("div",{className:"space-y-3",children:Object.entries(u.gameMixStats).map(([D,z])=>t("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-orange-800 mb-2",children:D}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-orange-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-orange-800",children:z.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-orange-600",children:"Locații:"}),e("span",{className:"font-semibold text-orange-800",children:z.locations.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-orange-600",children:"Cabinete:"}),e("span",{className:"font-semibold text-orange-800",children:z.cabinets.size})]})]})]},D))})]}),u&&u.allSlots.length>0&&t("div",{className:"card p-4",children:[t("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center space-x-2",children:[e(Pe,{className:"w-5 h-5 text-blue-500"}),e("span",{children:"Furnizori"})]}),e("div",{className:"space-y-3",children:(()=>{const D={};return u.allSlots.forEach(z=>{z.provider&&(D[z.provider]||(D[z.provider]={count:0,locations:new Set,cabinets:new Set}),D[z.provider].count++,z.location&&D[z.provider].locations.add(z.location),z.cabinet&&D[z.provider].cabinets.add(z.cabinet))}),Object.entries(D).map(([z,M])=>t("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:[e("h4",{className:"font-semibold text-blue-800 mb-2",children:z}),t("div",{className:"space-y-1 text-sm",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-blue-600",children:"Sloturi:"}),e("span",{className:"font-semibold text-blue-800",children:M.count})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-blue-600",children:"Locații:"}),e("span",{className:"font-semibold text-blue-800",children:M.locations.size})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-blue-600",children:"Cabinete:"}),e("span",{className:"font-semibold text-blue-800",children:M.cabinets.size})]})]})]},z))})()})]})]}),u&&u.allSlots.length>0&&t("div",{className:"card p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center space-x-2",children:[e(ct,{className:"w-5 h-5 text-blue-500"}),t("span",{children:["Toate sloturile cu acest joc (",u.allSlots.length,")"]})]}),e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{children:t("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Serial Number"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Locație"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Furnizor"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Cabinet"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Game Mix"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Status"}),e("th",{className:"text-left py-3 px-4 font-semibold text-slate-700 dark:text-slate-300",children:"Denomination"})]})}),e("tbody",{children:u.allSlots.map(D=>t("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700",children:[e("td",{className:"py-3 px-4",children:e("button",{onClick:()=>l(`/slots/${D.id}`),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold hover:underline transition-colors",children:D.serial_number||"N/A"})}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:D.location||"N/A"}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:D.provider||"N/A"}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:D.cabinet||"N/A"}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:D.game_mix||"N/A"}),e("td",{className:"py-3 px-4",children:e("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:D.status||"N/A"})}),e("td",{className:"py-3 px-4 text-slate-800 dark:text-slate-200",children:D.denomination||"N/A"})]},D.id))})]})})]})]})}):e(ve,{children:t("div",{className:"text-center py-12",children:[e(Je,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Jocul nu a fost găsit"}),e("button",{onClick:()=>l("/game-mixes/games-library"),className:"btn-primary",children:"Înapoi la Biblioteca Jocuri"})]})})},Zo=({item:a,onClose:l,onSave:r})=>{const{locations:s,cabinets:o,gameMixes:i,providers:n}=me(),[m,x]=h.useState({serial_number:"",provider:"",location:"",game:"",cabinet:"",game_mix:"",denomination:.01,max_bet:"",rtp:"",gaming_places:1,commission_date:"",invoice_number:"",status:"Active",notes:""});h.useEffect(()=>{a&&x({serial_number:a.serial_number||"",provider:a.provider||"",location:a.location||"",game:a.game||"",cabinet:a.cabinet||"",game_mix:a.game_mix||"",denomination:a.denomination||.01,max_bet:a.max_bet||"",rtp:a.rtp||"",gaming_places:a.gaming_places||1,commission_date:a.commission_date||"",invoice_number:a.invoice_number||"",status:a.status||"Active",notes:a.notes||""})},[a]);const d=g=>{const{name:u,value:S}=g.target;x(b=>{const v={...b,[u]:S};if(u==="provider")v.cabinet="",v.game_mix="";else if(u==="cabinet"){v.game_mix="";const y=o.find(_=>_.name===S);y&&y.provider&&y.provider!==v.provider&&(v.provider=y.provider)}return v})};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-emerald-800 to-green-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-600/20 to-green-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl shadow-lg",children:e(He,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Slot":"Adaugă Slot Nou"}),e("p",{className:"text-emerald-100 text-sm font-medium",children:"Completează informațiile despre slot"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:g=>{g.preventDefault(),r(m)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numărul de serie *"}),e("input",{type:"text",name:"serial_number",value:m.serial_number,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Serial number unic",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Locație *"}),t("select",{name:"location",value:m.location,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează locația"}),s==null?void 0:s.map(g=>e("option",{value:g.name,children:g.name},g.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:m.provider,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),n==null?void 0:n.map(g=>e("option",{value:g.name,children:g.name},g.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet"}),t("select",{name:"cabinet",value:m.cabinet,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează cabinetul"}),o.filter(g=>!m.provider||g.provider===m.provider).map(g=>e("option",{value:g.name,children:g.name},g.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix"}),t("select",{name:"game_mix",value:m.game_mix,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează game mix-ul"}),i.filter(g=>!(m.provider&&g.provider!==m.provider)).map(g=>e("option",{value:g.name,children:g.name},g.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:m.status,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0,children:[e("option",{value:"Active",children:"Activ"}),e("option",{value:"Inactive",children:"Inactiv"}),e("option",{value:"Maintenance",children:"Mentenanță"})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Denomination"}),e("input",{type:"number",step:"0.01",name:"denomination",value:m.denomination,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Max Bet"}),e("input",{type:"number",step:"0.01",name:"max_bet",value:m.max_bet,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Max bet"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"RTP (%)"}),e("input",{type:"number",step:"0.01",name:"rtp",value:m.rtp,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"RTP"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Gaming Places"}),e("input",{type:"number",name:"gaming_places",value:m.gaming_places,onChange:d,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"1"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[t("div",{className:"space-y-1",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip proprietate"}),e("input",{type:"text",value:"Se actualizează automat din Facturi",readOnly:!0,disabled:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg bg-slate-100 text-slate-500 cursor-not-allowed"})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-xs font-medium text-slate-600",children:"Data comisionării"}),e("input",{type:"text",value:m.commission_date||"Auto din Comisii",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-slate-100 text-slate-600 cursor-not-allowed",readOnly:!0,disabled:!0})]}),t("div",{className:"space-y-1",children:[e("label",{className:"block text-xs font-medium text-slate-600",children:"Numărul facturii"}),e("input",{type:"text",value:m.invoice_number||"Se actualizează automat din Facturi",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-slate-100 text-slate-600 cursor-not-allowed",readOnly:!0,disabled:!0})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:m.notes,onChange:d,rows:2,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Note adiționale despre slot"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(He,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Slot"]})]})]})]})})]})})},Qo=()=>{const{slots:a,invoices:l,warehouse:r,loading:s,createItem:o,updateItem:i,deleteItem:n,exportToExcel:m,exportToPDF:x}=me(),{user:d}=Ut(),c=et(),[g,u]=h.useState(""),[S,b]=h.useState("all"),[v,y]=h.useState("all"),[_,R]=h.useState("all"),[p,C]=h.useState(!1),[F,A]=h.useState(null),[U,D]=h.useState([]),[z,M]=h.useState(!1),[T,j]=h.useState(!1),[N,f]=h.useState(!1),[w,k]=h.useState(null),[L,I]=h.useState({totalSlots:!1,activeSlots:!1,inactiveSlots:!1,maintenanceSlots:!1,ownedSlots:!1,rentedSlots:!1});h.useEffect(()=>{(async()=>{var pe;if(d!=null&&d.id)try{const De=(await ye.get(`/api/users/${d.id}`)).data.preferences||{};(pe=De.slots)!=null&&pe.cardVisibility&&I(De.slots.cardVisibility)}catch(ce){console.error("Error loading slots preferences:",ce)}})()},[d==null?void 0:d.id]);const P=async G=>{if(d!=null&&d.id)try{await ye.put(`/api/users/${d.id}/preferences`,{preferences:{slots:{cardVisibility:G}}})}catch(pe){console.error("Error saving slots preferences:",pe)}},[H,Z]=h.useState(!1);h.useEffect(()=>{M(U.length>0)},[U]);const le=G=>{const pe={...L,[G]:!L[G]};I(pe),P(pe)},ue=()=>{const G={totalSlots:!0,activeSlots:!0,inactiveSlots:!0,maintenanceSlots:!0,ownedSlots:!0,rentedSlots:!0};I(G),P(G)},O=()=>{const G={totalSlots:!1,activeSlots:!1,inactiveSlots:!1,maintenanceSlots:!1,ownedSlots:!1,rentedSlots:!1};I(G),P(G)},W=a.filter(G=>{var Ge,nt,ot,ut,vt;const pe=((Ge=G.name)==null?void 0:Ge.toLowerCase().includes(g.toLowerCase()))||((nt=G.model)==null?void 0:nt.toLowerCase().includes(g.toLowerCase()))||((ot=G.provider)==null?void 0:ot.toLowerCase().includes(g.toLowerCase()))||((ut=G.location)==null?void 0:ut.toLowerCase().includes(g.toLowerCase()))||((vt=G.serial_number)==null?void 0:vt.toLowerCase().includes(g.toLowerCase())),ce=S==="all"||G.status===S,Ie=v==="all"||G.provider===v,De=_==="all"||G.property_type===_;return pe&&ce&&Ie&&De}),V=[...new Set(a.map(G=>G.provider).filter(Boolean))],te=a.length,ne=a.filter(G=>G.status==="Active").length,_e=a.filter(G=>G.status==="Inactive").length,Xe=a.filter(G=>G.status==="Maintenance").length,Ke=a.filter(G=>G.property_type==="Owned").length,he=a.filter(G=>G.property_type==="Rented").length,ge=[{key:"serial_number",label:"SERIAL NUMBER",sortable:!0,render:G=>e("button",{onClick:()=>c(`/slots/${G.id}`),className:"text-blue-600 hover:text-blue-800 font-semibold text-base hover:underline transition-colors text-left",children:G.serial_number||"N/A"})},{key:"provider",label:"FURNIZOR",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.provider||"N/A"})},{key:"location",label:"LOCAȚIE",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.location||"N/A"})},{key:"cabinet",label:"CABINET",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.cabinet||"N/A"})},{key:"game_mix",label:"GAME MIX",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.game_mix||"N/A"})},{key:"property_type",label:"TIP PROPRIETATE",sortable:!0,render:G=>{const pe=l==null?void 0:l.find(De=>{if(!De.serial_number||!G.serial_number)return!1;let Ge=[];try{typeof De.serial_number=="string"?Ge=JSON.parse(De.serial_number):Array.isArray(De.serial_number)?Ge=De.serial_number:Ge=[De.serial_number]}catch{Ge=[De.serial_number.toString()]}return Ge.some(nt=>nt.toString()===G.serial_number.toString())});let ce=G.property_type||"Necunoscut";return pe&&pe.invoice_type&&(pe.invoice_type==="Vânzare"?ce="Proprietate":pe.invoice_type==="Chirie"?ce="Închiriat":ce=pe.invoice_type),e("div",{className:"text-slate-800 dark:text-slate-200 font-medium text-sm",children:ce==="Owned"?"Proprietate":ce==="Rented"?"Închiriat":ce==="Proprietate"?"Proprietate":ce==="Închiriat"?"Închiriat":ce})}},{key:"invoice",label:"FACTURĂ",sortable:!1,render:G=>{const pe=l==null?void 0:l.find(ce=>{if(!ce.serial_number||!G.serial_number)return!1;let Ie=[];try{typeof ce.serial_number=="string"?Ie=JSON.parse(ce.serial_number):Array.isArray(ce.serial_number)?Ie=ce.serial_number:Ie=[ce.serial_number]}catch{Ie=[ce.serial_number.toString()]}return Ie.some(De=>De.toString()===G.serial_number.toString())});return pe?t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>c(`/invoices/${pe.id}`),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium text-sm hover:underline transition-colors",children:pe.invoice_number}),pe.file_path&&e("button",{onClick:()=>window.open(pe.file_path,"_blank"),className:"p-1 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Vezi factura",children:e(je,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 dark:text-slate-500 text-sm",children:"-"})}},{key:"status",label:"STATUS",sortable:!0,render:G=>{var De;const pe=async()=>{var ut;const Ge=((ut=G.status)==null?void 0:ut.toLowerCase())||"",ot=Ge==="activ"||Ge==="active"?"Inactive":"Active";try{ot==="Inactive"?(await o("warehouse",{serial_number:G.serial_number,provider:G.provider,location:"Depozit",cabinet:G.cabinet,game_mix:G.game_mix,status:"Inactive",notes:"Mutat automat din sloturi când a devenit inactiv"}),await n("slots",G.id),X.success("Slot mutat în Depozit")):(await i("slots",G.id,{...G,status:ot}),X.success(`Status schimbat în ${ot}`))}catch(vt){X.error("Eroare la actualizare status"),console.error("Error updating slot status:",vt)}},ce=((De=G.status)==null?void 0:De.toLowerCase())||"",Ie=ce==="activ"||ce==="active";return t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:pe,className:`relative inline-flex h-5 w-10 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${Ie?"bg-green-500":"bg-gray-300"}`,children:e("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${Ie?"translate-x-6":"translate-x-1"}`})}),e("span",{className:`text-xs font-bold ${Ie?"text-green-600":"text-gray-600"}`,children:Ie?"ON":"OFF"})]})}},{key:"created_at",label:"DATA CREARE",sortable:!0,render:G=>e("div",{className:"text-slate-800 font-medium text-base",children:G.created_at?new Date(G.created_at).toLocaleDateString("ro-RO"):"N/A"})}],be=()=>{A(null),C(!0)},re=G=>{A(G),C(!0)},J=G=>{c(`/slots/${G.id}`)},ee=G=>{D(G?W.map(pe=>pe.id):[])},se=(G,pe)=>{D(pe?[...U,G]:U.filter(ce=>ce!==G))},ae=async()=>{U.length!==0&&f(!0)},fe=async()=>{try{for(const G of U)await n("slots",G);D([]),M(!1),f(!1),X.success(`${U.length} sloturi șterse cu succes!`)}catch(G){console.error("Error bulk deleting slots:",G),X.error("Eroare la ștergerea sloturilor!")}},xe=()=>{U.length!==0&&(console.log("Bulk edit for slots:",U),X.info("Funcționalitatea de editare în masă va fi implementată în curând!"))},E=async G=>{k(G),j(!0)},Y=async()=>{try{await n("slots",w),j(!1),k(null),X.success("Slot șters cu succes!")}catch(G){X.error("Eroare la ștergerea slotului"),console.error("Error deleting slot:",G)}},Ce=async G=>{try{F?(await i("slots",F.id,G),X.success("Slot actualizat cu succes!")):(await o("slots",G),X.success("Slot adăugat cu succes!")),C(!1),A(null)}catch(pe){X.error("Eroare la salvarea slotului"),console.error("Error saving slot:",pe)}},Ze=()=>{try{m("slots")}catch(G){X.error("Eroare la exportarea în Excel"),console.error("Error exporting to Excel:",G)}},We=()=>{try{x("slots")}catch(G){X.error("Eroare la exportarea în PDF"),console.error("Error exporting to PDF:",G)}},Ve=()=>{X.info("Funcționalitatea de import va fi implementată în curând")};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl shadow-lg shadow-emerald-500/25",children:e(He,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Sloturi"}),e("p",{className:"text-slate-600",children:"Gestionează sloturile de gaming din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>Z(!H),className:"btn-secondary flex items-center space-x-2",children:[e(Xt,{className:"w-4 h-4"}),e("span",{children:"Setări Carduri"})]}),e(mt,{onExportExcel:Ze,onExportPDF:We,entity:"slots"}),t("div",{className:"flex space-x-3",children:[z&&t(Ne,{children:[t("button",{onClick:xe,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:ae,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:()=>c("/slots/history"),className:"btn-secondary flex items-center space-x-2",children:[e(Ja,{className:"w-4 h-4"}),e("span",{children:"Istoric Sloturi"})]}),t("button",{onClick:()=>c("/slots/cyber-import"),className:"btn-success flex items-center space-x-2",children:[e(St,{className:"w-4 h-4"}),e("span",{children:"Import Cyber"})]}),t("button",{onClick:be,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Slot"})]})]})]})]})}),H&&e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md",children:[t("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Setări Carduri"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Selectează ce carduri să afișezi"})]}),t("div",{className:"p-6 space-y-4",children:[t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Selectează tot"}),t("div",{className:"flex space-x-2",children:[e("button",{onClick:ue,className:"text-xs px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Selectează tot"}),e("button",{onClick:O,className:"text-xs px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Deselectează tot"})]})]}),e("div",{className:"space-y-3",children:[{key:"totalSlots",label:"Total Sloturi"},{key:"activeSlots",label:"Active"},{key:"inactiveSlots",label:"Inactive"},{key:"maintenanceSlots",label:"Mentenanță"},{key:"ownedSlots",label:"Proprietate"},{key:"rentedSlots",label:"Închiriate"}].map(G=>t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:G.label}),e("input",{type:"checkbox",checked:L[G.key],onChange:()=>le(G.key),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})]},G.key))})]}),e("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e("button",{onClick:()=>Z(!1),className:"btn-primary px-6 py-2",children:"Salvează"})})]})}),L.totalSlots&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(yt,{title:"Total Sloturi",value:te,icon:He,color:"blue",trend:null}),L.activeSlots&&e(yt,{title:"Active",value:ne,icon:Et,color:"green",trend:null}),L.inactiveSlots&&e(yt,{title:"Inactive",value:_e,icon:wt,color:"red",trend:null}),L.maintenanceSlots&&e(yt,{title:"Mentenanță",value:Xe,icon:Jt,color:"yellow",trend:null})]}),(L.ownedSlots||L.rentedSlots)&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[L.ownedSlots&&e(yt,{title:"Proprietate",value:Ke,icon:Et,color:"emerald",trend:null}),L.rentedSlots&&e(yt,{title:"Închiriate",value:he,icon:wt,color:"orange",trend:null})]}),e("div",{className:"card p-6",children:t("div",{className:"flex flex-col lg:flex-row items-start lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[t("div",{className:"relative flex-1 lg:max-w-md",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută după nume, model, furnizor, locație sau numărul de serie...",value:g,onChange:G=>u(G.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),t("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[t("div",{className:"flex items-center space-x-2",children:[e(Xt,{className:"w-4 h-4 text-slate-500"}),e("span",{className:"text-sm font-semibold text-slate-700",children:"Filtre:"})]}),t("select",{value:S,onChange:G=>b(G.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm",children:[e("option",{value:"all",children:"Toate Statusurile"}),e("option",{value:"Active",children:"Active"}),e("option",{value:"Inactive",children:"Inactive"}),e("option",{value:"Maintenance",children:"Mentenanță"})]}),t("select",{value:v,onChange:G=>y(G.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm",children:[e("option",{value:"all",children:"Toți Furnizorii"}),V.map(G=>e("option",{value:G,children:G},G))]}),t("select",{value:_,onChange:G=>R(G.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm",children:[e("option",{value:"all",children:"Toate Tipurile"}),e("option",{value:"Owned",children:"Proprietate"}),e("option",{value:"Rented",children:"Închiriate"})]}),t("button",{onClick:Ve,className:"btn-secondary flex items-center space-x-2 text-sm",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})]})}),e("div",{className:"card p-6",children:s?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})}):W.length===0?t("div",{className:"text-center py-12",children:[e(He,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există sloturi"}),e("p",{className:"text-slate-500",children:"Adaugă primul slot pentru a începe"})]}):e(Ue,{data:W,columns:ge,onEdit:re,onDelete:E,onView:J,searchTerm:g,selectedItems:U,onSelectAll:ee,onSelectItem:se})}),p&&e(Zo,{item:F,onClose:()=>C(!1),onSave:Ce}),T&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Oe,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[e("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Șterge Slot"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),e("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:"Ești sigur că vrei să ștergi acest slot? Toate datele asociate vor fi șterse permanent."}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>{j(!1),k(null)},className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),e("button",{onClick:Y,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Șterge"})]})]})}),N&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Oe,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[t("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Șterge ",U.length," Sloturi"]}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),t("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:["Ești sigur că vrei să ștergi ",U.length," sloturi selectate? Toate datele asociate vor fi șterse permanent."]}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),t("button",{onClick:fe,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:["Șterge ",U.length," Sloturi"]})]})]})})]})})},ei=()=>{const{id:a}=Kt(),l=et(),{slots:r,locations:s,companies:o,providers:i,cabinets:n,gameMixes:m,platforms:x,metrology:d,invoices:c,jackpots:g,loading:u}=me();console.log("🔍 useData Debug:",{loading:u,slots:r==null?void 0:r.length,locations:s==null?void 0:s.length,companies:o==null?void 0:o.length,providers:i==null?void 0:i.length,cabinets:n==null?void 0:n.length,gameMixes:m==null?void 0:m.length,platforms:x==null?void 0:x.length,metrology:d==null?void 0:d.length,invoices:c==null?void 0:c.length,jackpots:g==null?void 0:g.length});const[S,b]=h.useState(!1),[v,y]=h.useState(!0),[_,R]=h.useState([]),p=r==null?void 0:r.find(f=>{const w=f.id==a,k=f.serial_number===a;return console.log(`🔍 Checking slot ${f.id}/${f.serial_number} against ${a}: ${w}/${k}`),w||k});console.log("🔍 SlotDetail Debug:",{id:a,idType:typeof a,slotsCount:r==null?void 0:r.length,slot:p,allSlots:r==null?void 0:r.map(f=>({id:f.id,serial_number:f.serial_number}))}),h.useEffect(()=>{const f=localStorage.getItem("showAttachments");f!==null&&y(JSON.parse(f))},[]),h.useEffect(()=>{(async()=>{if(!(!(p!=null&&p.id)&&!(p!=null&&p.serial_number)))try{const w=await ye.get("/api/slot-history",{params:{slot_id:p.id,limit:3,offset:0}});R(w.data.data||w.data||[])}catch(w){console.error("Error fetching slot history:",w),R([])}})()},[p==null?void 0:p.id,p==null?void 0:p.serial_number]);const C=f=>{y(f),localStorage.setItem("showAttachments",JSON.stringify(f))};if(u)return e(ve,{children:e("div",{className:"flex items-center justify-center min-h-screen",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă detaliile slotului..."})]})})});const F=f=>{const w=s.find(k=>k.id===f||k.name===f);return w?w.name:f},A=f=>{const w=i.find(k=>k.id===f||k.name===f);return w?w.name:f},U=f=>{const w=n.find(k=>k.id===f);return w?w.name||w.model:f},D=f=>{const w=m.find(k=>k.id===f||k.name===f);return w?w.name:f},z=f=>{const w=m.find(k=>k.id===f||k.name===f);return w&&w.platform?w.platform:"N/A"},M=(d==null?void 0:d.filter(f=>f.serial_number===(p==null?void 0:p.serial_number)))||[],T=(c==null?void 0:c.filter(f=>{if(!f.serial_number||!(p!=null&&p.serial_number))return!1;try{return(typeof f.serial_number=="string"?JSON.parse(f.serial_number):Array.isArray(f.serial_number)?f.serial_number:[f.serial_number]).includes(p.serial_number)}catch{return f.serial_number===p.serial_number}}))||[],j=(g==null?void 0:g.filter(f=>f.slot_id===(p==null?void 0:p.id)))||[],N=T.length>0&&T[0].invoice_type==="Vânzare"?"Owned":"Rented";return p?e(ve,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:t("div",{className:"container mx-auto px-4 py-6",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 mb-6",children:e("div",{className:"bg-gradient-to-r from-emerald-800 via-green-800 to-teal-800 px-6 py-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("button",{onClick:()=>l("/slots"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e(lt,{className:"w-5 h-5 text-white"})}),e("div",{className:"p-2 bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl",children:e(He,{className:"w-6 h-6 text-white"})}),t("div",{children:[t("h1",{className:"text-2xl font-bold text-white",children:["Slot ",p.serial_number]}),t("p",{className:"text-emerald-100",children:["Serial: ",p.serial_number]})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>b(!0),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Setări",children:e(gt,{className:"w-5 h-5 text-white"})}),e("button",{onClick:()=>l(`/slots/${p.id}/edit`),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Editează",children:e(Ye,{className:"w-5 h-5 text-white"})}),e("button",{onClick:()=>{window.confirm("Sigur vrei să ștergi acest slot?")&&(X.success("Slot șters cu succes!"),l("/slots"))},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Șterge",children:e(Oe,{className:"w-5 h-5 text-white"})})]})]})})}),S&&e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md",children:[e("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Setări Afișare"})}),e("div",{className:"p-6 space-y-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:"Afișare automată atașamente"}),e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Afișează automat PDF-urile în pagina de detalii"})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:v,onChange:f=>C(f.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),e("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e("button",{onClick:()=>b(!1),className:"btn-primary",children:"Închide"})})]})}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e("div",{children:t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[e(gt,{className:"w-4 h-4 mr-2 text-indigo-600"}),"Informații Slot"]}),t("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t("div",{className:"space-y-2",children:[t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Serial Number"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:p.serial_number})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Locație"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:F(p.location)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Furnizor"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:A(p.provider)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Cabinet"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:U(p.cabinet)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Platformă"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:z(p.game_mix)})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Game Mix"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:D(p.game_mix)})]})]}),t("div",{className:"space-y-2",children:[t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Status"}),e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:p.status})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Denomination"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:p.denomination||"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"RTP"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:p.rtp||"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Gaming Places"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:p.gaming_places||"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Max Bet"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:p.max_bet||"N/A"})]})]})]}),e("div",{className:"border-t border-slate-200 dark:border-slate-700 my-4"}),t("div",{className:"grid grid-cols-3 gap-4",children:[t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tip proprietate"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:N})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Data comisionării"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:p.commissioning_date?new Date(p.commissioning_date).toLocaleDateString("ro-RO"):"N/A"})]}),t("div",{children:[e("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Numărul facturii"}),e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:T.length>0?T[0].invoice_number:"N/A"}),T.length>0&&e("button",{onClick:()=>l(`/invoices/${T[0].id}`),className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 mt-1",children:"Vezi factura →"})]})]})]})}),p.game_mix&&t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[e(Je,{className:"w-4 h-4 mr-2 text-purple-600"}),"Jocuri din Game Mix"]}),t("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg border border-purple-200 dark:border-purple-700 mb-3",children:[e("h4",{className:"font-semibold text-purple-800 dark:text-purple-300 text-sm",children:p.game_mix}),e("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Game Mix activ"})]}),(()=>{const f=m.find(w=>w.name===p.game_mix);if(f&&f.games){const w=typeof f.games=="string"?JSON.parse(f.games):f.games;return t("div",{children:[e("div",{className:"mb-2 p-2 bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/30 dark:to-indigo-900/30 rounded",children:t("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:[t("strong",{children:[w.length," jocuri"]})," în acest game mix",f.rtp&&t("span",{children:[" • RTP mediu: ",f.rtp,"%"]})]})}),e("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:w.map((k,L)=>t("div",{className:"p-2 bg-white dark:bg-slate-700 rounded border border-slate-200 dark:border-slate-600",children:[e("p",{className:"font-medium text-slate-800 dark:text-slate-200 text-xs",children:k}),t("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Joc #",L+1]})]},L))})]})}return e("p",{className:"text-center py-4 text-slate-500 dark:text-slate-400 text-sm",children:"Nu s-au găsit jocuri pentru acest game mix"})})()]}),j.length>0&&t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[e(He,{className:"w-4 h-4 mr-2 text-yellow-600"}),"Jackpots (",j.length,")"]}),e("div",{className:"space-y-2",children:j.map((f,w)=>e("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:f.name}),t("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[f.amount," ",f.currency]}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:f.triggered_date?`Declanșat: ${new Date(f.triggered_date).toLocaleDateString("ro-RO")}`:"Nu a fost declanșat"})]}),e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${f.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:f.status})]})},w))})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("div",{className:"flex items-center justify-between mb-3",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 flex items-center",children:[e(Ja,{className:"w-4 h-4 mr-2 text-indigo-600"}),"Istoric Modificări"]}),e("button",{onClick:()=>l("/slots/history"),className:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:"Vezi toate →"})]}),e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full text-sm",children:[e("thead",{children:t("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Data"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Câmp"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Valoare veche"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Valoare nouă"}),e("th",{className:"text-left py-2 px-2 font-medium text-slate-700 dark:text-slate-300",children:"Utilizator"})]})}),e("tbody",{children:_.length===0?e("tr",{children:e("td",{colSpan:"5",className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:"Nu există modificări înregistrate pentru acest slot."})}):_.map((f,w)=>t("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:new Date(f.created_at).toLocaleDateString("ro-RO")}),e("td",{className:"py-2 px-2",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${f.field_name==="location"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":f.field_name==="status"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":f.field_name==="game_mix"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":f.field_name==="serial_number"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400":f.field_name==="provider"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":f.field_name==="cabinet"?"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"}`,children:f.field_name})}),e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:f.old_value||"N/A"}),e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:f.new_value||"N/A"}),e("td",{className:"py-2 px-2 text-slate-600 dark:text-slate-400",children:f.username||"Sistem"})]},f.id||w))})]})}),e("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:t("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:["Afișate ultimele 3 modificări pentru slot ",p==null?void 0:p.serial_number," •",e("button",{onClick:()=>l("/slots/history"),className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 ml-1",children:"Vezi istoricul complet"})]})})]})]}),(M.length>0||T.length>0)&&e("div",{className:"mt-6",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 p-4",children:[t("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(de,{className:"w-4 h-4 mr-2 text-indigo-600"}),"Atașamente (",M.length+T.length,")"]}),v&&e("div",{className:"mb-4",children:t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[M.length>0&&M[0]&&M[0].cvtFile&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[t("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center",children:[e(de,{className:"w-3 h-3 mr-1 text-orange-600"}),"CVT ",M[0].cvt_number]}),e("div",{className:"h-64 border border-slate-200 dark:border-slate-600 rounded overflow-hidden",children:e("iframe",{src:`http://localhost:5001/api/cvt-pdf/${M[0].id}`,className:"w-full h-full",title:`CVT Document ${M[0].cvt_number}`})})]}),T.length>0&&T[0]&&T[0].file_path&&t("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[t("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center",children:[e(de,{className:"w-3 h-3 mr-1 text-blue-600"}),"Factură ",T[0].invoice_number]}),e("div",{className:"h-64 border border-slate-200 dark:border-slate-600 rounded overflow-hidden",children:e("iframe",{src:T[0].file_path,className:"w-full h-full",title:`Factură ${T[0].invoice_number}`})})]})]})}),t("div",{className:"space-y-3",children:[M.length>0&&t("div",{children:[t("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 flex items-center",children:[e(de,{className:"w-3 h-3 mr-1 text-orange-600"}),"Certificat CVT"]}),e("div",{className:"space-y-2",children:M.map((f,w)=>t("div",{className:"p-2 bg-slate-50 dark:bg-slate-700 rounded-lg flex items-center justify-between",children:[t("div",{className:"flex-1",children:[e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:f.cvt_number}),t("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["CVT: ",new Date(f.cvt_date).toLocaleDateString("ro-RO")," • Expirare: ",f.expiry_date?new Date(f.expiry_date).toLocaleDateString("ro-RO"):"N/A"]})]}),e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${f.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:f.status})]},w))})]}),T.length>0&&t("div",{children:[t("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 flex items-center",children:[e(de,{className:"w-3 h-3 mr-1 text-blue-600"}),"Facturi"]}),e("div",{className:"space-y-2",children:T.map((f,w)=>t("div",{className:"p-2 bg-slate-50 dark:bg-slate-700 rounded-lg flex items-center justify-between",children:[t("div",{className:"flex-1",children:[e("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:f.invoice_number}),t("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[f.amount," ",f.currency," • ",f.invoice_type]})]}),e("button",{onClick:()=>l(`/invoices/${f.id}`),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium text-xs",children:"Vezi →"})]},w))})]})]})]})})]})})}):e(ve,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă..."})]})})})},ti=()=>{const a=et(),{slots:l,users:r,loading:s}=me(),[o,i]=h.useState([]),[n,m]=h.useState(!0),[x,d]=h.useState(null),[c,g]=h.useState(!1),[u,S]=h.useState({slot_id:"",serial_number:"",field_name:"",user_id:"",username:"",start_date:"",end_date:"",change_type:""}),[b,v]=h.useState({limit:20,offset:0,total:0,currentPage:1,totalPages:1}),[y,_]=h.useState("created_at"),[R,p]=h.useState("DESC"),C=h.useCallback(async()=>{m(!0),d(null);try{const w={...u,limit:b.limit,offset:(b.currentPage-1)*b.limit,sort_by:y,sort_order:R};Object.keys(w).forEach(L=>{(w[L]===""||w[L]===null||w[L]===void 0)&&delete w[L]});const k=await ye.get("/api/slot-history",{params:w});i(k.data.data||k.data.history||[]),v(L=>{var I,P;return{...L,total:((I=k.data.pagination)==null?void 0:I.total)||k.data.total||0,totalPages:Math.ceil((((P=k.data.pagination)==null?void 0:P.total)||k.data.total||0)/L.limit)}})}catch(w){console.error("Error fetching slot history:",w),d("Eroare la încărcarea istoricului sloturilor."),X.error("Eroare la încărcarea istoricului sloturilor.")}finally{m(!1)}},[u,b.limit,b.currentPage,y,R]);h.useEffect(()=>{C()},[C]);const F=w=>{const{name:k,value:L}=w.target;S(I=>({...I,[k]:L})),v(I=>({...I,currentPage:1,offset:0}))},A=w=>{const k=w.getFullYear(),L=String(w.getMonth()+1).padStart(2,"0"),I=String(w.getDate()).padStart(2,"0");return`${k}-${L}-${I}`},U=()=>{if(!u.start_date||!u.end_date)return"all";const w=new Date,k=new Date(w.getFullYear(),w.getMonth(),w.getDate()),L=A(k);if(u.start_date===L&&u.end_date===L)return"today";const I=k.getDay(),P=I===0?-6:1-I,H=new Date(k);H.setDate(k.getDate()+P);const Z=new Date(H);if(Z.setDate(H.getDate()+6),u.start_date===A(H)&&u.end_date===A(Z))return"thisWeek";const le=A(new Date(w.getFullYear(),w.getMonth(),1)),ue=A(new Date(w.getFullYear(),w.getMonth()+1,0));if(u.start_date===le&&u.end_date===ue)return"thisMonth";const O=A(new Date(w.getFullYear(),0,1)),W=A(new Date(w.getFullYear(),11,31));if(u.start_date===O&&u.end_date===W)return"thisYear";const V=A(new Date(w.getFullYear()-1,0,1)),te=A(new Date(w.getFullYear()-1,11,31));return u.start_date===V&&u.end_date===te?"lastYear":"custom"},D=w=>{const k=new Date,L=new Date(k.getFullYear(),k.getMonth(),k.getDate());let I="",P="";switch(w){case"today":I=A(L),P=A(L);break;case"thisWeek":const H=new Date(L),Z=L.getDay(),le=Z===0?-6:1-Z;H.setDate(L.getDate()+le),I=A(H);const ue=new Date(H);ue.setDate(H.getDate()+6),P=A(ue);break;case"thisMonth":I=A(new Date(k.getFullYear(),k.getMonth(),1));const O=new Date(k.getFullYear(),k.getMonth()+1,0);P=A(O);break;case"thisYear":I=A(new Date(k.getFullYear(),0,1));const W=new Date(k.getFullYear(),11,31);P=A(W);break;case"lastYear":I=A(new Date(k.getFullYear()-1,0,1));const V=new Date(k.getFullYear()-1,11,31);P=A(V);break;case"all":I="",P="";break}S(H=>({...H,start_date:I,end_date:P})),v(H=>({...H,currentPage:1,offset:0}))},z=w=>{y===w?p(k=>k==="ASC"?"DESC":"ASC"):(_(w),p("ASC"))},M=w=>{w>0&&w<=b.totalPages&&v(k=>({...k,currentPage:w,offset:(w-1)*k.limit}))},T=(w,k=null)=>{if(k)return k;const L=l==null?void 0:l.find(I=>I.id===w);return L?L.serial_number:"N/A"},j=w=>{const k=r==null?void 0:r.find(L=>L.id===w);return k?k.username:"Sistem"},N=w=>{switch(w.toLowerCase()){case"location":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"status":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"game_mix":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"serial_number":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400";case"provider":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"cabinet":return"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400";default:return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"}},f=w=>w==null?"N/A":typeof w=="boolean"?w?"Da":"Nu":typeof w=="object"?JSON.stringify(w):String(w);return s||n?e(ve,{children:e("div",{className:"flex items-center justify-center min-h-screen",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă istoricul modificărilor..."})]})})}):x?e(ve,{children:e("div",{className:"flex items-center justify-center min-h-screen",children:t("div",{className:"text-center",children:[e("p",{className:"text-red-600 dark:text-red-400 text-lg",children:x}),e("button",{onClick:()=>C(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Reîncearcă"})]})})}):e(ve,{children:t("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 bg-white dark:bg-slate-900 rounded-xl shadow-lg min-h-screen",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[e(Ja,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Istoric Modificări Sloturi"]}),t("button",{onClick:()=>a(-1),className:"inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-700 rounded-md shadow-sm text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e(lt,{className:"w-4 h-4 mr-2"}),"Înapoi"]})]}),t("div",{className:"flex items-center gap-3 mb-6",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",name:"serial_number",value:u.serial_number,onChange:F,placeholder:"Caută după număr serie slot...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:text-slate-200"})]}),e("button",{onClick:()=>g(!c),className:`p-3 rounded-full transition-all duration-200 shadow-lg hover:shadow-xl ${c?"bg-blue-600 text-white hover:bg-blue-700":"bg-blue-500 text-white hover:bg-blue-600"}`,title:"Filtre",children:e(Xt,{className:"w-5 h-5"})})]}),c&&t("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow-inner mb-6",children:[t("div",{className:"mb-4",children:[e("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtre rapide:"}),t("div",{className:"flex flex-wrap gap-2",children:[e("button",{onClick:()=>D("today"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${U()==="today"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Azi"}),e("button",{onClick:()=>D("thisWeek"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${U()==="thisWeek"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Săptămâna curentă"}),e("button",{onClick:()=>D("thisMonth"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${U()==="thisMonth"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Luna curentă"}),e("button",{onClick:()=>D("thisYear"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${U()==="thisYear"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Anul curent"}),e("button",{onClick:()=>D("lastYear"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${U()==="lastYear"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Anul precedent"}),e("button",{onClick:()=>D("all"),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${U()==="all"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"} border border-slate-300 dark:border-slate-600`,children:"Toate"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[t("div",{children:[e("label",{htmlFor:"serial_number",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Număr Serie Slot"}),e("input",{type:"text",name:"serial_number",id:"serial_number",value:u.serial_number,onChange:F,placeholder:"Caută după număr serie",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"field_name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Câmp Modificat"}),e("input",{type:"text",name:"field_name",id:"field_name",value:u.field_name,onChange:F,placeholder:"Ex: location, status",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Utilizator"}),e("input",{type:"text",name:"username",id:"username",value:u.username,onChange:F,placeholder:"Nume utilizator",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"change_type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tip Modificare"}),t("select",{name:"change_type",id:"change_type",value:u.change_type,onChange:F,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200",children:[e("option",{value:"",children:"Toate"}),e("option",{value:"CREATE",children:"Creare"}),e("option",{value:"UPDATE",children:"Actualizare"}),e("option",{value:"DELETE",children:"Ștergere"})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("label",{htmlFor:"start_date",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Data Început"}),e("input",{type:"date",name:"start_date",id:"start_date",value:u.start_date,onChange:F,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]}),t("div",{children:[e("label",{htmlFor:"end_date",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Data Sfârșit"}),e("input",{type:"date",name:"end_date",id:"end_date",value:u.end_date,onChange:F,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200"})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow border border-slate-200 dark:border-slate-700 flex items-center",children:[e(ft,{className:"w-6 h-6 text-indigo-500 mr-3"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Modificări"}),e("p",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:b.total})]})]}),t("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow border border-slate-200 dark:border-slate-700 flex items-center",children:[e(St,{className:"w-6 h-6 text-green-500 mr-3"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Sloturi Modificate"}),e("p",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:new Set(o.map(w=>w.slot_id)).size})]})]}),t("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow border border-slate-200 dark:border-slate-700 flex items-center",children:[e(jt,{className:"w-6 h-6 text-blue-500 mr-3"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Utilizatori Unici"}),e("p",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:new Set(o.map(w=>w.user_id)).size})]})]})]}),e("div",{className:"overflow-x-auto bg-white dark:bg-slate-800 rounded-lg shadow border border-slate-200 dark:border-slate-700",children:t("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e("thead",{className:"bg-slate-50 dark:bg-slate-700",children:t("tr",{children:[t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>z("created_at"),children:["Data",y==="created_at"&&e("span",{className:"ml-1",children:R==="ASC"?"▲":"▼"})]}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>z("serial_number"),children:["Slot",y==="serial_number"&&e("span",{className:"ml-1",children:R==="ASC"?"▲":"▼"})]}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>z("field_name"),children:["Câmp",y==="field_name"&&e("span",{className:"ml-1",children:R==="ASC"?"▲":"▼"})]}),e("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Valoare Veche"}),e("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Valoare Nouă"}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>z("username"),children:["Utilizator",y==="username"&&e("span",{className:"ml-1",children:R==="ASC"?"▲":"▼"})]}),t("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider cursor-pointer",onClick:()=>z("change_type"),children:["Tip",y==="change_type"&&e("span",{className:"ml-1",children:R==="ASC"?"▲":"▼"})]})]})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.length===0?e("tr",{children:e("td",{colSpan:"7",className:"px-4 py-4 text-center text-slate-500 dark:text-slate-400",children:"Nu s-au găsit modificări."})}):o.map(w=>t("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(w.created_at).toLocaleString("ro-RO")}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-indigo-600 dark:text-indigo-400",children:e("button",{onClick:()=>a(`/slots/${w.slot_id}`),className:"hover:underline",children:w.slot_serial||T(w.slot_id,w.serial_number)})}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${N(w.field_name)}`,children:w.field_name})}),e("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300 max-w-xs truncate",children:f(w.old_value)}),e("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300 max-w-xs truncate",children:f(w.new_value)}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:w.username||j(w.user_id)}),e("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${w.change_type==="CREATE"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":w.change_type==="DELETE"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:w.change_type})})]},w.id))})]})}),b.totalPages>1&&t("nav",{className:"flex items-center justify-between px-4 py-3 sm:px-6 mt-4 bg-white dark:bg-slate-800 rounded-lg shadow border border-slate-200 dark:border-slate-700","aria-label":"Pagination",children:[t("div",{className:"flex-1 flex justify-between sm:justify-end",children:[e("button",{onClick:()=>M(b.currentPage-1),disabled:b.currentPage===1,className:"relative inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e("button",{onClick:()=>M(b.currentPage+1),disabled:b.currentPage===b.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Următor"})]}),t("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e("div",{children:t("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Afișez"," ",e("span",{className:"font-medium",children:(b.currentPage-1)*b.limit+1})," ","până la"," ",e("span",{className:"font-medium",children:Math.min(b.currentPage*b.limit,b.total)})," ","din"," ",e("span",{className:"font-medium",children:b.total})," ","rezultate"]})}),e("div",{children:e("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:b.totalPages},(w,k)=>k+1).map(w=>e("button",{onClick:()=>M(w),"aria-current":w===b.currentPage?"page":void 0,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${w===b.currentPage?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-600 dark:text-indigo-400":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-600"}`,children:w},w))})})]})]}),e("div",{className:"mt-6 text-right",children:t("button",{className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e(Le,{className:"w-4 h-4 mr-2"}),"Exportă CSV"]})})]})})},ai=()=>{const a=et(),l=h.useRef(null),[r,s]=h.useState([]),[o,i]=h.useState([]),[n,m]=h.useState([]),[x,d]=h.useState([]),[c,g]=h.useState([]),[u,S]=h.useState([]),[b,v]=h.useState([]),[y,_]=h.useState([]),[R,p]=h.useState([]),[C,F]=h.useState([]),[A,U]=h.useState(!1),[D,z]=h.useState(""),[M,T]=h.useState(new Set),[j,N]=h.useState(new Set);h.useState(new Set),h.useState(new Set),h.useState(new Set);const[f,w]=h.useState(!1),[k,L]=h.useState("slots");h.useState(!0);const[I,P]=h.useState({provider:"",cabinet:"",gameMix:"",status:""}),[H,Z]=h.useState({company:"",city:"",status:""}),le=E=>{const Y=E.target.files[0];if(!Y)return;const Ce=new FileReader;Ce.onload=Ze=>{try{const Ve=JSON.parse(Ze.target.result).map(G=>({id:G.id,serial_number:G.serial_number||G.slot_id,provider:G.provider||"N/A",cabinet:G.cabinet||"N/A",game_mix:G.game_mix||"N/A",status:G.status||"Active",location:G.location||"N/A",last_updated:G.updated_at||G.created_at,created_at:G.created_at}));s(Ve),S(Ve),X.success(`Încărcate ${Ve.length} sloturi din fișier`)}catch(We){console.error("Error parsing JSON:",We),X.error("Eroare la citirea fișierului. Verifică că este un JSON valid.")}},Ce.readAsText(Y)},ue=async()=>{U(!0);try{const E=await ye.get("/api/cyber/slots",{timeout:1e4}),Y=Array.isArray(E.data)?E.data:[];s(Y),S(Y),X.success(`Încărcate ${Y.length} sloturi din Cyber DB`)}catch(E){console.error("Error fetching Cyber slots:",E),X.error("Eroare la conectarea la Cyber DB. Verifică backend-ul."),s([]),S([])}finally{U(!1)}},O=async()=>{U(!0);try{const E=await ye.get("/api/cyber/locations",{timeout:1e4}),Y=Array.isArray(E.data)?E.data:[];i(Y),v(Y),X.success(`Încărcate ${Y.length} locații din Cyber DB`)}catch(E){console.error("Error fetching Cyber locations:",E),X.error("Eroare la conectarea la Cyber DB. Verifică backend-ul."),i([]),v([])}finally{U(!1)}},W=async()=>{U(!0);try{const E=await ye.get("/api/cyber/cabinets",{timeout:5e3}),Y=Array.isArray(E.data)?E.data:[];m(Y),_(Y),X.success(`Încărcate ${Y.length} cabinete din Cyber`)}catch(E){console.error("Error fetching Cyber cabinets:",E),X.error("Eroare la încărcarea cabinetelor din Cyber"),m([]),_([])}finally{U(!1)}},V=async()=>{U(!0);try{const E=await ye.get("/api/cyber/game-mixes",{timeout:5e3}),Y=Array.isArray(E.data)?E.data:[];d(Y),p(Y),X.success(`Încărcate ${Y.length} game mix-uri din Cyber`)}catch(E){console.error("Error fetching Cyber game mixes:",E),X.error("Eroare la încărcarea game mix-urilor din Cyber"),d([]),p([])}finally{U(!1)}},te=async()=>{U(!0);try{const E=await ye.get("/api/cyber/providers",{timeout:5e3}),Y=Array.isArray(E.data)?E.data:[];g(Y),F(Y),X.success(`Încărcați ${Y.length} furnizori din Cyber`)}catch(E){console.error("Error fetching Cyber providers:",E),X.error("Eroare la încărcarea furnizorilor din Cyber"),g([]),F([])}finally{U(!1)}};h.useEffect(()=>{ue(),O()},[]),h.useEffect(()=>{let E=r;D&&(E=E.filter(Y=>{var Ce,Ze,We,Ve;return((Ce=Y.serial_number)==null?void 0:Ce.toLowerCase().includes(D.toLowerCase()))||((Ze=Y.provider)==null?void 0:Ze.toLowerCase().includes(D.toLowerCase()))||((We=Y.cabinet)==null?void 0:We.toLowerCase().includes(D.toLowerCase()))||((Ve=Y.game_mix)==null?void 0:Ve.toLowerCase().includes(D.toLowerCase()))})),I.provider&&(E=E.filter(Y=>Y.provider===I.provider)),I.cabinet&&(E=E.filter(Y=>Y.cabinet===I.cabinet)),I.gameMix&&(E=E.filter(Y=>Y.game_mix===I.gameMix)),I.status&&(E=E.filter(Y=>Y.status===I.status)),S(E)},[r,D,I]),h.useEffect(()=>{let E=o;D&&(E=E.filter(Y=>{var Ce,Ze,We,Ve;return((Ce=Y.name)==null?void 0:Ce.toLowerCase().includes(D.toLowerCase()))||((Ze=Y.address)==null?void 0:Ze.toLowerCase().includes(D.toLowerCase()))||((We=Y.city)==null?void 0:We.toLowerCase().includes(D.toLowerCase()))||((Ve=Y.company)==null?void 0:Ve.toLowerCase().includes(D.toLowerCase()))})),H.company&&(E=E.filter(Y=>Y.company===H.company)),H.city&&(E=E.filter(Y=>Y.city===H.city)),H.status&&(E=E.filter(Y=>Y.status===H.status)),v(E)},[o,D,H]);const ne=E=>[...new Set(r.map(Y=>Y[E]).filter(Boolean))],_e=E=>[...new Set(o.map(Y=>Y[E]).filter(Boolean))],Xe=E=>{const Y=new Set(M);Y.has(E)?Y.delete(E):Y.add(E),T(Y)},Ke=E=>{const Y=new Set(j);Y.has(E)?Y.delete(E):Y.add(E),N(Y)},he=()=>{const E=u.map(Y=>Y.id);T(new Set(E))},ge=()=>{const E=b.map(Y=>Y.id);N(new Set(E))},be=()=>{T(new Set)},re=()=>{N(new Set)},J=async()=>{if(M.size===0){X.error("Selectează cel puțin un element pentru import");return}try{const E=u.filter(Ce=>M.has(Ce.id)),Y=await ye.post("/api/slots/import-marina",{items:E});X.success(`${Y.data.imported} sloturi importate cu succes!`),T(new Set),ue()}catch(E){console.error("Error importing slots:",E),X.error("Eroare la importarea sloturilor")}},ee=async()=>{if(j.size===0){X.error("Selectează cel puțin o locație pentru import");return}try{const E=b.filter(Ce=>j.has(Ce.id)),Y=await ye.post("/api/locations/import-marina",{items:E});X.success(`${Y.data.imported} locații importate cu succes!`),N(new Set),O()}catch(E){console.error("Error importing locations:",E),X.error("Eroare la importarea locațiilor")}},se=async()=>{if(u.length===0){X.error("Nu există date de importat");return}try{const E=await ye.post("/api/slots/import-marina",{items:u});X.success(`${E.data.imported} sloturi importate cu succes!`),T(new Set),ue()}catch(E){console.error("Error importing all slots:",E),X.error("Eroare la importarea sloturilor")}},ae=async()=>{if(b.length===0){X.error("Nu există locații de importat");return}try{const E=await ye.post("/api/locations/import-marina",{items:b});X.success(`${E.data.imported} locații importate cu succes!`),N(new Set),O()}catch(E){console.error("Error importing all locations:",E),X.error("Eroare la importarea locațiilor")}};h.useEffect(()=>{ue(),O()},[]);const fe=[{key:"select",title:"",sortable:!1,render:E=>e("input",{type:"checkbox",checked:M.has(E.id),onChange:()=>Xe(E.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})},{key:"serial_number",title:"Serial Number",sortable:!0,render:E=>e("div",{className:"font-mono text-sm font-medium text-slate-800 dark:text-slate-200",children:E.serial_number||"N/A"})},{key:"provider",title:"Provider",sortable:!0,render:E=>e("div",{className:"text-slate-800 dark:text-slate-200 font-medium",children:E.provider||"N/A"})},{key:"cabinet",title:"Cabinet",sortable:!0,render:E=>e("div",{className:"text-slate-800 dark:text-slate-200",children:E.cabinet||"N/A"})},{key:"game_mix",title:"Game Mix",sortable:!0,render:E=>e("div",{className:"text-slate-800 dark:text-slate-200",children:E.game_mix||"N/A"})},{key:"status",title:"Status",sortable:!0,render:E=>e("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.status==="Active"?"bg-green-100 text-green-800":E.status==="Inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:E.status||"N/A"})},{key:"location",title:"Location",sortable:!0,render:E=>e("div",{className:"text-slate-600 dark:text-slate-400",children:E.location||"N/A"})},{key:"last_updated",title:"Last Updated",sortable:!0,render:E=>e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:E.last_updated?new Date(E.last_updated).toLocaleDateString("ro-RO"):"N/A"})}],xe=[{key:"select",title:"",sortable:!1,render:E=>e("input",{type:"checkbox",checked:j.has(E.id),onChange:()=>Ke(E.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})},{key:"name",title:"Nume Locație",sortable:!0,render:E=>e("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:E.name||"N/A"})},{key:"address",title:"Adresă",sortable:!0,render:E=>e("div",{className:"text-slate-800 dark:text-slate-200",children:E.address||"N/A"})},{key:"city",title:"Oraș",sortable:!0,render:E=>e("div",{className:"text-slate-800 dark:text-slate-200",children:E.city||"N/A"})},{key:"company",title:"Companie",sortable:!0,render:E=>e("div",{className:"text-slate-800 dark:text-slate-200 font-medium",children:E.company||"N/A"})},{key:"surface_area",title:"Suprafață (m²)",sortable:!0,render:E=>e("div",{className:"text-slate-600 dark:text-slate-400",children:E.surface_area?`${E.surface_area} m²`:"N/A"})},{key:"status",title:"Status",sortable:!0,render:E=>e("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.status==="Active"?"bg-green-100 text-green-800":E.status==="Inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:E.status||"N/A"})},{key:"last_updated",title:"Ultima Actualizare",sortable:!0,render:E=>e("div",{className:"text-slate-600 dark:text-slate-400 text-sm",children:E.last_updated?new Date(E.last_updated).toLocaleDateString("ro-RO"):"N/A"})}];return e(ve,{children:t("div",{className:"p-6 space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>a("/slots"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e(lt,{className:"w-5 h-5"})}),t("div",{children:[t("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 flex items-center space-x-2",children:[e(St,{className:"w-6 h-6"}),e("span",{children:"Import Cyber"})]}),e("p",{className:"text-slate-600 dark:text-slate-400",children:"Importează datele din serverul Cyber"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>{var E;return(E=l.current)==null?void 0:E.click()},className:"btn-success flex items-center space-x-2",children:[e(Pl,{className:"w-4 h-4"}),e("span",{children:"Încarcă JSON"})]}),e("input",{ref:l,type:"file",accept:".json",onChange:le,className:"hidden"}),t("button",{onClick:()=>{k==="slots"?ue():k==="locations"?O():k==="cabinets"?W():k==="gameMixes"?V():k==="providers"&&te()},disabled:A,className:"btn-secondary flex items-center space-x-2",children:[e(at,{className:`w-4 h-4 ${A?"animate-spin":""}`}),e("span",{children:"Refresh Cyber DB"})]})]})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:e("div",{className:"border-b border-slate-200 dark:border-slate-700",children:t("nav",{className:"-mb-px flex space-x-8 px-6",children:[t("button",{onClick:()=>L("slots"),className:`py-4 px-1 border-b-2 font-medium text-sm ${k==="slots"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Sloturi (",r.length,")"]}),t("button",{onClick:()=>L("locations"),className:`py-4 px-1 border-b-2 font-medium text-sm ${k==="locations"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Locații (",o.length,")"]}),t("button",{onClick:()=>L("cabinets"),className:`py-4 px-1 border-b-2 font-medium text-sm ${k==="cabinets"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Cabinete (",n.length,")"]}),t("button",{onClick:()=>L("gameMixes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${k==="gameMixes"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Game Mixes (",x.length,")"]}),t("button",{onClick:()=>L("providers"),className:`py-4 px-1 border-b-2 font-medium text-sm ${k==="providers"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Furnizori (",c.length,")"]})]})})}),t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:k==="slots"?r.length:o.length}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total înregistrări"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-blue-600",children:k==="slots"?u.length:b.length}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Filtrate"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-green-600",children:k==="slots"?M.size:j.size}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Selectate"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e("div",{className:"text-2xl font-bold text-purple-600",children:k==="slots"?ne("provider").length:_e("company").length}),e("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:k==="slots"?"Provideri":"Companii"})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[t("div",{className:"flex flex-col lg:flex-row gap-4",children:[e("div",{className:"flex-1",children:t("div",{className:"relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),e("input",{type:"text",placeholder:k==="slots"?"Caută după serial, provider, cabinet...":"Caută după nume, adresă, oraș, companie...",value:D,onChange:E=>z(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})}),t("button",{onClick:()=>w(!f),className:"btn-secondary flex items-center space-x-2",children:[e(Xt,{className:"w-4 h-4"}),e("span",{children:"Filtre"})]})]}),f&&e("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:e("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:k==="slots"?t(Ne,{children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Provider"}),t("select",{value:I.provider,onChange:E=>P({...I,provider:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),ne("provider").map(E=>e("option",{value:E,children:E},E))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cabinet"}),t("select",{value:I.cabinet,onChange:E=>P({...I,cabinet:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),ne("cabinet").map(E=>e("option",{value:E,children:E},E))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Game Mix"}),t("select",{value:I.gameMix,onChange:E=>P({...I,gameMix:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),ne("game_mix").map(E=>e("option",{value:E,children:E},E))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),t("select",{value:I.status,onChange:E=>P({...I,status:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),ne("status").map(E=>e("option",{value:E,children:E},E))]})]})]}):t(Ne,{children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Companie"}),t("select",{value:H.company,onChange:E=>Z({...H,company:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),_e("company").map(E=>e("option",{value:E,children:E},E))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Oraș"}),t("select",{value:H.city,onChange:E=>Z({...H,city:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),_e("city").map(E=>e("option",{value:E,children:E},E))]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),t("select",{value:H.status,onChange:E=>Z({...H,status:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"Toate"}),_e("status").map(E=>e("option",{value:E,children:E},E))]})]}),e("div",{})]})})})]}),t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:k==="slots"?he:ge,className:"btn-secondary flex items-center space-x-2",children:[e(Et,{className:"w-4 h-4"}),e("span",{children:"Selectează toate"})]}),t("button",{onClick:k==="slots"?be:re,className:"btn-secondary flex items-center space-x-2",children:[e(Dr,{className:"w-4 h-4"}),e("span",{children:"Deselectează toate"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:k==="slots"?J:ee,disabled:k==="slots"?M.size===0:j.size===0,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e(Se,{className:"w-4 h-4"}),t("span",{children:["Importă selectate (",k==="slots"?M.size:j.size,")"]})]}),t("button",{onClick:k==="slots"?se:ae,disabled:k==="slots"?u.length===0:b.length===0,className:"btn-success flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e(Le,{className:"w-4 h-4"}),t("span",{children:["Importă toate (",k==="slots"?u.length:b.length,")"]})]})]})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e("tr",{children:(k==="slots"?fe:xe).map(E=>e("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:E.title},E.key))})}),e("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:A?e("tr",{children:e("td",{colSpan:(k==="slots"?fe:xe).length,className:"px-6 py-12 text-center",children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(at,{className:"w-5 h-5 animate-spin text-blue-600"}),e("span",{className:"text-slate-600 dark:text-slate-400",children:"Se încarcă datele din Cyber..."})]})})}):(k==="slots"?u:b).length===0?e("tr",{children:e("td",{colSpan:(k==="slots"?fe:xe).length,className:"px-6 py-12 text-center",children:e("div",{className:"text-slate-500 dark:text-slate-400",children:k==="slots"?r.length===0?"Nu există sloturi în Cyber":"Nu există rezultate pentru filtrele aplicate":o.length===0?"Nu există locații în Cyber":"Nu există rezultate pentru filtrele aplicate"})})}):(k==="slots"?u:b).map((E,Y)=>e("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:(k==="slots"?fe:xe).map(Ce=>e("td",{className:"px-6 py-4 whitespace-nowrap",children:Ce.render?Ce.render(E):E[Ce.key]},Ce.key))},E.id||Y))})]})})})]})})},ri=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",category:"",quantity:"",location:"",status:"Available",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",category:a.category||"",quantity:a.quantity||"",location:a.location||"",status:a.status||"Available",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;o(c=>({...c,[x]:d}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-orange-800 to-amber-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600/20 to-amber-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-amber-500 rounded-2xl shadow-lg",children:e(nr,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Produs":"Adaugă Produs în Depozit"}),e("p",{className:"text-orange-100 text-sm font-medium",children:"Completează informațiile despre produs"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Produs *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Nume produs",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Categorie *"}),e("input",{type:"text",name:"category",value:s.category,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Categoria produsului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cantitate *"}),e("input",{type:"number",name:"quantity",value:s.quantity,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Cantitatea",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Locație *"}),e("input",{type:"text",name:"location",value:s.location,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Locația în depozit",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",required:!0,children:[e("option",{value:"Available",children:"Disponibil"}),e("option",{value:"Out of Stock",children:"Stoc epuizat"}),e("option",{value:"Reserved",children:"Rezervat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(nr,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Produs"]})]})]})]})})]})})},li=()=>{const{warehouse:a,slots:l,loading:r,createItem:s,updateItem:o,deleteItem:i,exportToExcel:n,exportToPDF:m}=me(),[x,d]=h.useState(""),[c,g]=h.useState([]),[u,S]=h.useState(!1),[b,v]=h.useState(!1);h.useEffect(()=>{S(c.length>0)},[c]);const y=P=>{g(P?z.map(H=>H.id):[])},_=(P,H)=>{g(H?[...c,P]:c.filter(Z=>Z!==P))},R=async()=>{c.length!==0&&v(!0)},p=async()=>{try{for(const P of c)await i("warehouse",P);g([]),S(!1),v(!1),X.success(`${c.length} elemente șterse cu succes!`)}catch(P){console.error("Error bulk deleting:",P),X.error("Eroare la ștergerea elementelor!")}},C=()=>{c.length!==0&&console.log("Bulk edit for:",c)},[F,A]=h.useState(!1),[U,D]=h.useState(null),z=a.filter(P=>{var H,Z,le,ue,O;return((H=P.serial_number)==null?void 0:H.toLowerCase().includes(x.toLowerCase()))||((Z=P.provider)==null?void 0:Z.toLowerCase().includes(x.toLowerCase()))||((le=P.location)==null?void 0:le.toLowerCase().includes(x.toLowerCase()))||((ue=P.cabinet)==null?void 0:ue.toLowerCase().includes(x.toLowerCase()))||((O=P.game_mix)==null?void 0:O.toLowerCase().includes(x.toLowerCase()))}),M=a.length,T=a.filter(P=>P.status==="Inactive").length,j=[{key:"serial_number",label:"SERIAL NUMBER",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-semibold text-base",children:P.serial_number||"N/A"})},{key:"provider",label:"FURNIZOR",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.provider||"N/A"})},{key:"location",label:"LOCAȚIE",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.location||"N/A"})},{key:"cabinet",label:"CABINET",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.cabinet||"N/A"})},{key:"game_mix",label:"GAME MIX",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.game_mix||"N/A"})},{key:"status",label:"STATUS",sortable:!0,render:P=>{var ue;const H=async()=>{var te;const O=((te=P.status)==null?void 0:te.toLowerCase())||"",V=O==="activ"||O==="active"?"Inactive":"Active";try{V==="Active"?(await s("slots",{name:"Slot Machine",serial_number:P.serial_number,provider:P.provider,location:"Locație principală",game:"",cabinet:P.cabinet,game_mix:P.game_mix,denomination:.01,max_bet:null,rtp:null,gaming_places:1,property_type:"Owned",commission_date:null,invoice_number:null,status:"Active",notes:"Mutat automat din depozit când a devenit activ"}),await i("warehouse",P.id),X.success("Slot mutat înapoi în sloturi")):(await o("warehouse",P.id,{...P,status:V}),X.success(`Status schimbat în ${V}`))}catch(ne){X.error("Eroare la actualizare status"),console.error("Error updating warehouse slot status:",ne)}},Z=((ue=P.status)==null?void 0:ue.toLowerCase())||"",le=Z==="activ"||Z==="active";return t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:H,className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${le?"bg-green-500":"bg-gray-300"}`,children:e("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${le?"translate-x-9":"translate-x-1"}`})}),e("span",{className:`text-xs font-bold ${le?"text-green-600":"text-gray-600"}`,children:le?"ON":"OFF"})]})}},{key:"created_by",label:"CREAT DE",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:P=>e("div",{className:"text-slate-800 font-medium text-base",children:P.created_at?new Date(P.created_at).toLocaleDateString("ro-RO"):"N/A"})}],N=P=>{D(P),A(!0)},f=async P=>{if(window.confirm("Sigur vrei să ștergi acest slot din depozit?"))try{await i("warehouse",P),X.success("Slot șters din depozit cu succes!")}catch(H){X.error("Eroare la ștergerea slotului"),console.error("Error deleting slot from warehouse:",H)}},w=()=>{D(null),A(!0)},k=async P=>{try{U?(await o("warehouse",U.id,P),X.success("Slot actualizat cu succes!")):(await s("warehouse",P),X.success("Slot adăugat în depozit cu succes!")),A(!1),D(null)}catch(H){X.error("Eroare la salvarea slotului"),console.error("Error saving slot to warehouse:",H)}};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-slate-500 to-gray-500 rounded-2xl shadow-lg shadow-slate-500/25",children:e(Wt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Depozit Sloturi"}),e("p",{className:"text-slate-600",children:"Sloturile inactive din depozit"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{n("warehouse")}catch(P){console.error("Error exporting to Excel:",P)}},onExportPDF:()=>{try{m("warehouse")}catch(P){console.error("Error exporting to PDF:",P)}},entity:"warehouse"}),u&&t(Ne,{children:[t("button",{onClick:C,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:R,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:w,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Slot"})]})]})]})}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(yt,{title:"Total Sloturi",value:M,icon:He,color:"blue",trend:null}),e(yt,{title:"Inactive",value:T,icon:wt,color:"red",trend:null})]}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută după numărul de serie, furnizor, locație, cabinet sau game mix...",value:x,onChange:P=>d(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:r?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-500"})}):z.length===0?t("div",{className:"text-center py-12",children:[e(Wt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există sloturi în depozit"}),e("p",{className:"text-slate-500",children:"Sloturile inactive vor apărea aici automat"})]}):e(Ue,{data:z,columns:j,onEdit:N,onDelete:f,searchTerm:x,selectedItems:c,onSelectAll:y,onSelectItem:_,moduleColor:"red"})}),F&&e(ri,{item:U,onClose:()=>A(!1),onSave:k}),b&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{className:"flex items-center space-x-3 mb-4",children:[e("div",{className:"flex-shrink-0",children:e("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e(Oe,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),t("div",{children:[t("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Șterge ",c.length," Elemente"]}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Această acțiune nu poate fi anulată"})]})]}),t("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:["Ești sigur că vrei să ștergi ",c.length," elemente selectate din depozit? Toate datele asociate vor fi șterse permanent."]}),t("div",{className:"flex space-x-3 justify-end",children:[e("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Anulează"}),t("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:["Șterge ",c.length," Elemente"]})]})]})})]})})},si=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState([]),[i,n]=h.useState([]),[m,x]=h.useState([]),[d,c]=h.useState([]),[g,u]=h.useState([]),[S,b]=h.useState([]),[v,y]=h.useState({cvt_number:"",serial_number:"",cvt_type:"Periodică",cvt_date:"",expiry_date:"",issuing_authority:"",provider:"",cabinet:"",game_mix:"",approval_type:"",software:"",cvtFile:null,cvtPreview:null,notes:""});h.useEffect(()=>{if((async()=>{try{const[M,T,j,N,f,w]=await Promise.all([fetch("/api/authorities"),fetch("/api/providers"),fetch("/api/cabinets"),fetch("/api/gameMixes"),fetch("/api/approvals"),fetch("/api/software")]),[k,L,I,P,H,Z]=await Promise.all([M.json(),T.json(),j.json(),N.json(),f.json(),w.json()]);o(Array.isArray(k)?k:[]),n(Array.isArray(L)?L:[]),x(Array.isArray(I)?I:[]),c(Array.isArray(P)?P:[]),u(Array.isArray(H)?H:[]),b(Array.isArray(Z)?Z:[])}catch(M){console.error("Error loading data:",M)}})(),a){const M=T=>{if(!T)return"";const j=new Date(T);return isNaN(j.getTime())?"":j.toISOString().split("T")[0]};y({cvt_number:a.cvt_number||"",serial_number:a.serial_number||"",cvt_type:a.cvt_type||"Periodică",cvt_date:M(a.cvt_date),expiry_date:M(a.expiry_date),issuing_authority:a.issuing_authority||"",provider:a.provider||"",cabinet:a.cabinet||"",game_mix:a.game_mix||"",approval_type:a.approval_type||"",software:a.software||"",cvtFile:a.cvtFile||null,cvtPreview:a.cvtFile||null,notes:a.notes||""})}},[a]);const _=()=>v.provider?m.filter(z=>z.provider===v.provider||z.provider_name===v.provider):m,R=()=>v.provider?d.filter(z=>z.provider===v.provider||z.provider_name===v.provider):d,p=()=>{if(!v.cabinet)return g;const z=m.find(M=>M.name===v.cabinet||M.model===v.cabinet);return z?g.filter(M=>M.cabinet===v.cabinet||M.model===z.model):g},C=()=>{if(!v.game_mix)return S;const z=d.find(M=>M.name===v.game_mix);return z?S.filter(M=>M.game_mix===v.game_mix||M.provider===z.provider):S},F=z=>{const{name:M,value:T}=z.target;y(j=>{const N={...j,[M]:T};if(M==="provider"?(N.cabinet="",N.game_mix="",N.approval_type="",N.software=""):M==="cabinet"?(N.approval_type="",N.software=""):M==="game_mix"&&(N.software=""),(M==="cvt_type"||M==="cvt_date")&&(N.cvt_type==="Periodică"||N.cvt_type==="Inițială")&&N.cvt_date){const f=new Date(N.cvt_date),w=new Date(f);w.setFullYear(w.getFullYear()+1),w.setDate(w.getDate()-1),N.expiry_date=w.toISOString().split("T")[0]}return N})},A=z=>{const M=z.target.files[0];if(M){const T=new FileReader;T.onload=j=>{y(N=>({...N,cvtFile:j.target.result,cvtPreview:j.target.result}))},T.readAsDataURL(M)}},U=()=>{window.confirm("Sigur doriți să ștergeți documentul CVT?")&&y(z=>({...z,cvtFile:null,cvtPreview:null}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-cyan-800 to-teal-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-600/20 to-teal-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-cyan-500 to-teal-500 rounded-2xl shadow-lg",children:e(ct,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Certificat":"Adaugă Certificat Nou"}),e("p",{className:"text-cyan-100 text-sm font-medium",children:"Completează informațiile despre certificatul de metrologie"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:z=>{z.preventDefault(),r(v)},className:"p-6 space-y-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații CVT"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Număr CVT *"}),e("input",{type:"text",name:"cvt_number",value:v.cvt_number,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"Numărul CVT",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Număr de Serie *"}),e("input",{type:"text",name:"serial_number",value:v.serial_number,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"Serial number slot",required:!0}),e("p",{className:"text-xs text-slate-500",children:"Numărul de serie care leagă CVT-ul cu slot-ul din aplicație"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip CVT *"}),t("select",{name:"cvt_type",value:v.cvt_type,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0,children:[e("option",{value:"Periodică",children:"Periodică"}),e("option",{value:"Inițială",children:"Inițială"}),e("option",{value:"Reparație",children:"Reparație"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data CVT *"}),e("input",{type:"date",name:"cvt_date",value:v.cvt_date,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data expirării *"}),e("input",{type:"date",name:"expiry_date",value:v.expiry_date,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0,disabled:v.cvt_type==="Periodică"||v.cvt_type==="Inițială"}),v.cvt_type==="Periodică"||v.cvt_type==="Inițială"?e("p",{className:"text-xs text-slate-500",children:"Calculat automat: 1 an - 1 zi"}):e("p",{className:"text-xs text-slate-500",children:"Completează manual pentru Reparație"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Autoritatea emitentă"}),t("select",{name:"issuing_authority",value:v.issuing_authority,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează autoritatea emitentă"}),s.map(z=>e("option",{value:z.name,children:z.name},z.id))]})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații Dispozitiv"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor"}),t("select",{name:"provider",value:v.provider,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e("option",{value:"",children:"Selectează furnizorul"}),i.map(z=>e("option",{value:z.name,children:z.name},z.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet"}),t("select",{name:"cabinet",value:v.cabinet,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.provider,children:[e("option",{value:"",children:v.provider?"Selectează cabinetul":"Selectează mai întâi furnizorul"}),_().map(z=>e("option",{value:z.name,children:z.name},z.id))]}),!v.provider&&e("p",{className:"text-xs text-slate-500",children:"Cabinetul depinde de furnizorul selectat"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix"}),t("select",{name:"game_mix",value:v.game_mix,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.provider,children:[e("option",{value:"",children:v.provider?"Selectează game mix-ul":"Selectează mai întâi furnizorul"}),R().map(z=>e("option",{value:z.name,children:z.name},z.id))]}),!v.provider&&e("p",{className:"text-xs text-slate-500",children:"Game mix-ul depinde de furnizorul selectat"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Aprobare de Tip"}),t("select",{name:"approval_type",value:v.approval_type,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.cabinet,children:[e("option",{value:"",children:v.cabinet?"Selectează aprobarea de tip":"Selectează mai întâi cabinetul"}),p().map(z=>e("option",{value:z.name,children:z.name},z.id))]}),!v.cabinet&&e("p",{className:"text-xs text-slate-500",children:"Aprobarea de tip depinde de cabinetul selectat"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Software"}),t("select",{name:"software",value:v.software,onChange:F,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:!v.game_mix,children:[e("option",{value:"",children:v.game_mix?"Selectează software-ul":"Selectează mai întâi game mix-ul"}),C().map(z=>e("option",{value:z.name,children:z.name},z.id))]}),!v.game_mix&&e("p",{className:"text-xs text-slate-500",children:"Software-ul depinde de game mix-ul selectat"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Document CVT (PDF)"}),e("input",{type:"file",name:"cvtFile",accept:".pdf",onChange:A,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100"}),v.cvtPreview&&t("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{className:"flex items-center space-x-3",children:[e(xt,{className:"w-5 h-5 text-cyan-600"}),t("div",{children:[e("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:typeof v.cvtPreview=="string"&&v.cvtPreview.includes("data:")?"Document CVT încărcat":"Document CVT existent"}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PDF Document"})]})]}),e("button",{type:"button",onClick:U,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Șterge documentul",children:e(we,{className:"w-4 h-4"})})]}),e(Lt,{pdfUrl:v.cvtPreview,title:`CVT Document ${v.cvt_number}`,placeholder:"Documentul CVT nu este disponibil",placeholderSubtext:"Atașează documentul CVT pentru vizualizare"})]}),e("p",{className:"text-xs text-slate-500",children:"Încărcați documentul CVT în format PDF"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:v.notes,onChange:F,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(ct,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Certificat"]})]})]})]})})]})})},ni=({item:a,onClose:l})=>{if(!a)return null;const s=(()=>{if(!a.expiry_date)return null;const n=new Date,x=new Date(a.expiry_date)-n;return Math.ceil(x/(1e3*60*60*24))})(),o=()=>s===null?"text-slate-400":s<0?"text-red-600":s<=30?"text-orange-600":"text-green-600",i=()=>s===null?"N/A":s<0?`Expirat (${Math.abs(s)} zile)`:`${s} zile rămase`;return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl",children:[t("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-500 px-6 py-4 flex justify-between items-center",children:[t("h3",{className:"text-xl font-bold text-white flex items-center",children:[e(de,{className:"w-6 h-6 mr-2"}),"Detalii Certificat CVT - ",a.cvt_number]}),e("button",{onClick:l,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e(we,{className:"w-6 h-6"})})]}),e("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-6",children:[t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Informații CVT"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Număr CVT"}),e("p",{className:"text-base font-medium text-slate-900",children:a.cvt_number})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Tip CVT"}),e("p",{className:"text-base font-medium text-slate-900",children:a.cvt_type})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Autoritatea Emitentă"}),e("p",{className:"text-base font-medium text-slate-900",children:a.issuing_authority||"N/A"})]})]})]}),t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Informații Dispozitiv"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Furnizor"}),e("p",{className:"text-base font-medium text-slate-900",children:a.provider||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Cabinet"}),e("p",{className:"text-base font-medium text-slate-900",children:a.cabinet||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Game Mix"}),e("p",{className:"text-base font-medium text-slate-900",children:a.game_mix||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Aprobare de Tip"}),e("p",{className:"text-base font-medium text-slate-900",children:a.approval_type||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Software"}),e("p",{className:"text-base font-medium text-slate-900",children:a.software||"N/A"})]})]})]}),t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Date & Status"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Data CVT"}),t("p",{className:"text-base font-medium text-slate-900 flex items-center",children:[e(rt,{className:"w-4 h-4 mr-2 text-cyan-500"}),a.cvt_date?new Date(a.cvt_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Data Expirării"}),t("p",{className:"text-base font-medium text-slate-900 flex items-center",children:[e(rt,{className:"w-4 h-4 mr-2 text-orange-500"}),a.expiry_date?new Date(a.expiry_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Status"}),t("p",{className:`text-base font-bold flex items-center ${o()}`,children:[s!==null&&s>=0?e(Et,{className:"w-4 h-4 mr-2"}):e(wt,{className:"w-4 h-4 mr-2"}),i()]})]})]})]}),a.notes&&t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Note"}),e("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:a.notes})]})]}),t("div",{className:"space-y-4",children:[t("div",{className:"bg-slate-50 rounded-2xl p-6",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2 mb-4",children:"Document CVT"}),e(Lt,{pdfUrl:a.cvtFile||null,title:"CVT Document",placeholder:"Nu există document CVT",placeholderSubtext:"Atașează documentul CVT pentru vizualizare"})]}),t("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-3",children:[e("h4",{className:"text-lg font-bold text-slate-800 border-b border-slate-200 pb-2",children:"Informații Adiționale"}),t("div",{className:"space-y-2",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Creat de"}),e("p",{className:"text-base font-medium text-slate-900",children:a.created_by||"N/A"})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Data creării"}),e("p",{className:"text-base font-medium text-slate-900",children:a.created_at?new Date(a.created_at).toLocaleDateString("ro-RO"):"N/A"})]})]})]})]})]})})]})})},oi=({item:a,onClose:l,onSave:r})=>{const{providers:s,cabinets:o,gameMixes:i}=me(),[n,m]=h.useState({name:"",provider:"",cabinet:"",gameMix:"",checksumMD5:"",checksumSHA256:"",notes:""});h.useEffect(()=>{a&&m({name:a.name||"",provider:a.provider||"",cabinet:a.cabinet||"",gameMix:a.gameMix||"",checksumMD5:a.checksumMD5||"",checksumSHA256:a.checksumSHA256||"",notes:a.notes||""})},[a]);const x=g=>{const{name:u,value:S}=g.target;m(b=>{const v={...b,[u]:S};return u==="provider"&&(v.gameMix=""),v})},d=i.filter(g=>!(n.provider&&g.provider!==n.provider));return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-6 rounded-t-2xl",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:e(xt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-white",children:a?"Editează Aprobare de Tip":"Adaugă Aprobare de Tip"}),e("p",{className:"text-green-100",children:a?"Modifică datele aprobării":"Adaugă o aprobare de tip nouă"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(we,{className:"w-6 h-6 text-white"})})]})}),t("form",{onSubmit:g=>{g.preventDefault(),r(n)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:n.name,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Introdu numele aprobării",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:n.provider,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),s.map(g=>e("option",{value:g.name,children:g.name},g.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet *"}),t("select",{name:"cabinet",value:n.cabinet,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează cabinetul"}),o.filter(g=>!n.provider||g.provider===n.provider).map(g=>e("option",{value:g.name,children:g.name},g.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix"}),t("select",{name:"gameMix",value:n.gameMix,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:!n.provider,children:[e("option",{value:"",children:"Selectează game mix-ul"}),d.map(g=>e("option",{value:g.name,children:g.name},g.id))]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Checksum MD5"}),e("input",{type:"text",name:"checksumMD5",value:n.checksumMD5,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Introdu checksum MD5"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Checksum SHA256"}),e("input",{type:"text",name:"checksumSHA256",value:n.checksumSHA256,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Introdu checksum SHA256"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:n.notes,onChange:x,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Adaugă note suplimentare"})]}),t("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-green-500/25",children:t("div",{className:"flex items-center space-x-2",children:[e(At,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Salvează"})]})})]})]})]})})},ii=({item:a,onClose:l,onSave:r})=>{me();const[s,o]=h.useState({name:"",serial_numbers:"",commission_date:"",expiry_date:"",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",serial_numbers:a.serial_numbers||"",commission_date:a.commission_date||"",expiry_date:a.expiry_date||"",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;if(o(c=>({...c,[x]:d})),x==="commission_date"&&d){const c=new Date(d),g=new Date(c);g.setFullYear(g.getFullYear()+1),g.setDate(g.getDate()-1),o(u=>({...u,expiry_date:g.toISOString().split("T")[0]}))}};return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 p-6 rounded-t-2xl",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:e(gt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-white",children:a?"Editează Comisie":"Adaugă Comisie"}),e("p",{className:"text-blue-100",children:a?"Modifică datele comisiei":"Adaugă o comisie nouă"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(we,{className:"w-6 h-6 text-white"})})]})}),t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Introdu numele comisiei",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data Comisiei *"}),e("input",{type:"date",name:"commission_date",value:s.commission_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data Valabilității *"}),e("input",{type:"date",name:"expiry_date",value:s.expiry_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numerele de Serie *"}),e("textarea",{name:"serial_numbers",value:s.serial_numbers,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Introdu numerele de serie separate prin rânduri nouă",required:!0}),e("p",{className:"text-sm text-slate-500",children:"Separă numerele de serie prin rânduri nouă"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adaugă note suplimentare"})]}),t("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all shadow-lg hover:shadow-blue-500/25",children:t("div",{className:"flex items-center space-x-2",children:[e(At,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Salvează"})]})})]})]})]})})},ci=({item:a,onClose:l,onSave:r})=>{const{providers:s,cabinets:o,gameMixes:i}=me(),[n,m]=h.useState({name:"",provider:"",cabinet:"",game_mix:"",version:"",notes:""});h.useEffect(()=>{a&&m({name:a.name||"",provider:a.provider||"",cabinet:a.cabinet||"",game_mix:a.game_mix||"",version:a.version||"",notes:a.notes||""})},[a]);const x=c=>{const{name:g,value:u}=c.target;m(S=>{const b={...S,[g]:u};return g==="provider"?(b.cabinet="",b.game_mix=""):g==="cabinet"&&(b.game_mix=""),b})};return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 p-6 rounded-t-2xl",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:e(Jt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-white",children:a?"Editează Software":"Adaugă Software"}),e("p",{className:"text-purple-100",children:a?"Modifică datele software-ului":"Adaugă un software nou"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(we,{className:"w-6 h-6 text-white"})})]})}),t("form",{onSubmit:c=>{c.preventDefault(),r(n)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:n.name,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Introdu numele software-ului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Versiunea"}),e("input",{type:"text",name:"version",value:n.version,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"ex: v1.0.0"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Furnizor *"}),t("select",{name:"provider",value:n.provider,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),s.map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cabinet *"}),t("select",{name:"cabinet",value:n.cabinet,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează cabinetul"}),o.filter(c=>!n.provider||c.provider===n.provider).map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Game Mix *"}),t("select",{name:"game_mix",value:n.game_mix,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează game mix-ul"}),i.filter(c=>!(n.provider&&c.provider!==n.provider)).map(c=>e("option",{value:c.name,children:c.name},c.id))]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:n.notes,onChange:x,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Adaugă note suplimentare"})]}),t("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-violet-500 text-white rounded-lg hover:from-purple-600 hover:to-violet-600 transition-all shadow-lg hover:shadow-purple-500/25",children:t("div",{className:"flex items-center space-x-2",children:[e(At,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Salvează"})]})})]})]})]})})},di=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",address:"",price_initiala:"",price_reparatie:"",price_periodica:"",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",address:a.address||"",price_initiala:a.price_initiala||"",price_reparatie:a.price_reparatie||"",price_periodica:a.price_periodica||"",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;o(c=>({...c,[x]:d}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[t("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-500 p-8 text-white",children:[t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm",children:e(xt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Autoritatea Emitentă":"Adaugă Autoritate Emitentă"}),e("p",{className:"text-orange-100 text-sm font-medium",children:"Completează informațiile despre autoritatea emitentă"})]})]}),e("button",{onClick:l,className:"absolute top-4 right-4 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații de bază"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numele *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Numele autorității",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Adresa"}),e("input",{type:"text",name:"address",value:s.address,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Adresa autorității"})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Prețuri (opțional)"}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Preț Inițială (LEI)"}),e("input",{type:"number",name:"price_initiala",value:s.price_initiala,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Preț Reparație (LEI)"}),e("input",{type:"number",name:"price_reparatie",value:s.price_reparatie,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Preț Periodică (LEI)"}),e("input",{type:"number",name:"price_periodica",value:s.price_periodica,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[t("button",{type:"button",onClick:l,className:"btn-secondary",children:[e(we,{className:"w-4 h-4"}),"Anulează"]}),t("button",{type:"submit",className:"btn-primary",children:[e(At,{className:"w-4 h-4"}),a?"Actualizează":"Adaugă"," Autoritate"]})]})]})})]})})},mi=({isOpen:a,onClose:l})=>{const[r,s]=h.useState([]),[o,i]=h.useState(!1),[n,m]=h.useState(null),[x,d]=h.useState(new Date().getMonth()),[c,g]=h.useState(new Date().getFullYear()),u=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],S=[{id:1,title:"Comisia de Autorizare - Sloturi Electronice",date:"2025-10-15",time:"09:00",location:"București, Bd. Magheru 28-30",type:"Autorizare",status:"Programată",description:"Examinarea cererilor de autorizare pentru sloturi electronice"},{id:2,title:"Comisia de Metrologie - Verificare CVT",date:"2025-10-22",time:"10:30",location:"București, Bd. Magheru 28-30",type:"Metrologie",status:"Programată",description:"Verificarea certificatelor de verificare tehnică"},{id:3,title:"Comisia de Control - Inspecții Teren",date:"2025-11-05",time:"08:00",location:"Cluj-Napoca, Str. Memorandumului 28",type:"Control",status:"Programată",description:"Inspecții de control la operatorii de jocuri de noroc"},{id:4,title:"Comisia de Autorizare - Licențe",date:"2025-11-12",time:"14:00",location:"București, Bd. Magheru 28-30",type:"Autorizare",status:"Programată",description:"Examinarea cererilor de licențiere pentru operatori"}];h.useEffect(()=>{a&&b()},[a,x,c]);const b=async()=>{i(!0),m(null);try{await new Promise(C=>setTimeout(C,1e3));const p=S.filter(C=>{const F=new Date(C.date);return F.getMonth()===x&&F.getFullYear()===c});s(p)}catch(p){m("Eroare la încărcarea calendarului ONJN"),console.error("Error loading ONJN calendar:",p)}finally{i(!1)}},v=p=>{switch(p){case"Programată":return"bg-blue-100 text-blue-800";case"În desfășurare":return"bg-yellow-100 text-yellow-800";case"Finalizată":return"bg-green-100 text-green-800";case"Anulată":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=p=>{switch(p){case"Autorizare":return"bg-purple-100 text-purple-800";case"Metrologie":return"bg-indigo-100 text-indigo-800";case"Control":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},_=p=>new Date(p).toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"}),R=p=>p;return a?e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-white bg-opacity-20 rounded-xl",children:e(rt,{className:"w-6 h-6"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold",children:"Calendar ONJN"}),e("p",{className:"text-blue-100",children:"Comisiile organizate de Oficiul Național pentru Jocuri de Noroc"})]})]}),e("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors",children:e(we,{className:"w-6 h-6"})})]})}),e("div",{className:"p-6 border-b border-gray-200",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex items-center space-x-2",children:[e("label",{className:"text-sm font-medium text-gray-700",children:"Luna:"}),e("select",{value:x,onChange:p=>d(parseInt(p.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.map((p,C)=>e("option",{value:C,children:p},C))})]}),t("div",{className:"flex items-center space-x-2",children:[e("label",{className:"text-sm font-medium text-gray-700",children:"Anul:"}),e("select",{value:c,onChange:p=>g(parseInt(p.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[2024,2025,2026].map(p=>e("option",{value:p,children:p},p))})]})]}),t("button",{onClick:b,disabled:o,className:"btn-secondary flex items-center space-x-2",children:[e(at,{className:`w-4 h-4 ${o?"animate-spin":""}`}),e("span",{children:"Actualizează"})]})]})}),e("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:o?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?e("div",{className:"flex items-center justify-center py-12",children:t("div",{className:"text-center",children:[e(wt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Eroare la încărcare"}),e("p",{className:"text-gray-500 mb-4",children:n}),e("button",{onClick:b,className:"btn-primary",children:"Încearcă din nou"})]})}):r.length===0?t("div",{className:"text-center py-12",children:[e(rt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nu există comisii programate"}),t("p",{className:"text-gray-500",children:["Pentru luna ",u[x]," ",c]})]}):e("div",{className:"space-y-4",children:r.map(p=>e("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow",children:t("div",{className:"flex items-start justify-between",children:[t("div",{className:"flex-1",children:[t("div",{className:"flex items-center space-x-3 mb-3",children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:p.title}),e("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y(p.type)}`,children:p.type}),e("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v(p.status)}`,children:p.status})]}),e("p",{className:"text-gray-600 mb-4",children:p.description}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("div",{className:"flex items-center space-x-2 text-gray-600",children:[e(rt,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:_(p.date)})]}),t("div",{className:"flex items-center space-x-2 text-gray-600",children:[e(ft,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:R(p.time)})]}),t("div",{className:"flex items-center space-x-2 text-gray-600",children:[e(tt,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:p.location})]})]})]}),e("button",{onClick:()=>window.open("https://onjn.gov.ro/structura-organizatorica/autorizare/","_blank"),className:"ml-4 p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Vezi pe site-ul ONJN",children:e(La,{className:"w-5 h-5"})})]})},p.id))})}),e("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:t("div",{className:"flex items-center justify-between",children:[e("div",{className:"text-sm text-gray-500",children:"Datele sunt preluate de pe site-ul oficial ONJN"}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>window.open("https://onjn.gov.ro/structura-organizatorica/autorizare/","_blank"),className:"btn-secondary flex items-center space-x-2",children:[e(La,{className:"w-4 h-4"}),e("span",{children:"Site ONJN"})]}),e("button",{onClick:l,className:"btn-primary",children:"Închide"})]})]})})]})}):null},ui=()=>{const{metrology:a,providers:l,cabinets:r,gameMixes:s,loading:o,createItem:i,updateItem:n,deleteItem:m,exportToExcel:x,exportToPDF:d}=me(),[c,g]=h.useState(""),[u,S]=h.useState([]),[b,v]=h.useState(!1),[y,_]=h.useState(null),[R,p]=h.useState(!1),[C,F]=h.useState(null),[A,U]=h.useState(!1),[D,z]=h.useState(null),[M,T]=h.useState([]),[j,N]=h.useState([]),[f,w]=h.useState([]),[k,L]=h.useState([]),[I,P]=h.useState(!1),[H,Z]=h.useState(!1),[le,ue]=h.useState(!1),[O,W]=h.useState(!1),[V,te]=h.useState(null),[ne,_e]=h.useState(null),[Xe,Ke]=h.useState(null),[he,ge]=h.useState(null),[be,re]=h.useState(!1);h.useEffect(()=>{v(u.length>0)},[u]),h.useEffect(()=>{y&&(async()=>{try{if(y==="approvals"){const Te=await(await fetch("/api/approvals")).json();T(Te)}else if(y==="commissions"){const Te=await(await fetch("/api/commissions")).json();N(Te)}else if(y==="software"){const Te=await(await fetch("/api/software")).json();w(Te)}else if(y==="authorities"){const Te=await(await fetch("/api/authorities")).json();L(Te)}}catch(oe){console.error("Error loading sub-page data:",oe)}})()},[y]);const J=a.filter(q=>{var Te,Re,ht;return((Te=q.serial_number)==null?void 0:Te.toLowerCase().includes(c.toLowerCase()))||((Re=q.provider)==null?void 0:Re.toLowerCase().includes(c.toLowerCase()))||((ht=q.cabinet)==null?void 0:ht.toLowerCase().includes(c.toLowerCase()))}),ee=q=>{S(q?J.map(oe=>oe.id):[])},se=(q,oe)=>{S(oe?[...u,q]:u.filter(Te=>Te!==q))},ae=async()=>{if(u.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${u.length} elemente?`))try{for(const q of u)await m("metrology",q);S([]),v(!1)}catch(q){console.error("Error bulk deleting:",q)}},fe=()=>{u.length!==0&&console.log("Bulk edit for:",u)},xe=()=>{F(null),p(!0)},E=q=>{F(q),p(!0)},Y=async q=>{window.confirm("Sigur vrei să ștergi acest element?")&&await m("metrology",q.id)},Ce=async q=>{C?await n("metrology",C.id,q):await i("metrology",q),p(!1),F(null)},Ze=async q=>{try{const oe=V?`/api/approvals/${V.id}`:"/api/approvals";if((await fetch(oe,{method:V?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok){P(!1),te(null);const Dt=await(await fetch("/api/approvals")).json();T(Dt)}}catch(oe){console.error("Error saving approval:",oe)}},We=async q=>{try{const oe=ne?`/api/commissions/${ne.id}`:"/api/commissions";if((await fetch(oe,{method:ne?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok){Z(!1),_e(null);const Dt=await(await fetch("/api/commissions")).json();N(Dt)}}catch(oe){console.error("Error saving commission:",oe)}},Ve=async q=>{try{const oe=Xe?`/api/software/${Xe.id}`:"/api/software";if((await fetch(oe,{method:Xe?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok){ue(!1),Ke(null);const Dt=await(await fetch("/api/software")).json();w(Dt)}}catch(oe){console.error("Error saving software:",oe)}},[G,pe]=h.useState(!1),[ce,Ie]=h.useState(null),De=q=>{Ie(q),pe(!0)},Ge=async()=>{if(ce)try{if((await fetch(`/api/approvals/${ce.id}`,{method:"DELETE"})).ok){const Te=await(await fetch("/api/approvals")).json();T(Te)}}catch(q){console.error("Error deleting approval:",q)}pe(!1),Ie(null)},nt=async q=>{if(window.confirm("Sigur vrei să ștergi această comisie?"))try{if((await fetch(`/api/commissions/${q.id}`,{method:"DELETE"})).ok){const Re=await(await fetch("/api/commissions")).json();N(Re)}}catch(oe){console.error("Error deleting commission:",oe)}},ot=async q=>{if(window.confirm("Sigur vrei să ștergi acest software?"))try{if((await fetch(`/api/software/${q.id}`,{method:"DELETE"})).ok){const Re=await(await fetch("/api/software")).json();w(Re)}}catch(oe){console.error("Error deleting software:",oe)}},ut=async q=>{try{if((await fetch("/api/authorities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok){const Re=await(await fetch("/api/authorities")).json();L(Re),W(!1)}}catch(oe){console.error("Error saving authority:",oe)}},vt=async q=>{if(window.confirm("Sigur vrei să ștergi această autoritate?"))try{if((await fetch(`/api/authorities/${q.id}`,{method:"DELETE"})).ok){const Re=await(await fetch("/api/authorities")).json();L(Re)}}catch(oe){console.error("Error deleting authority:",oe)}},aa=[{key:"cvt_number",label:"NUMĂR CVT",sortable:!0,render:q=>e("button",{onClick:()=>{z(q),U(!0)},className:"text-cyan-600 hover:text-cyan-800 font-semibold hover:underline transition-colors",children:q.cvt_number})},{key:"cvt_type",label:"TIP CVT",sortable:!0},{key:"approval_type",label:"APROBARE DE TIP",sortable:!0},{key:"software",label:"SOFTWARE",sortable:!0},{key:"cvt_dates_combined",label:"DATE CVT & EXPIRARE",sortable:!0,render:q=>{const oe=q.cvt_date?new Date(q.cvt_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",Te=q.expiry_date?new Date(q.expiry_date).toLocaleDateString("ro-RO",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A";let Re="N/A",ht="text-green-600 bg-green-50";if(q.expiry_date){const Dt=new Date,bl=new Date(q.expiry_date)-Dt,Vt=Math.ceil(bl/(1e3*60*60*24));Vt<0?(ht="text-red-600 bg-red-50",Re=`Expirat (${Math.abs(Vt)} zile)`):Vt<=30?(ht="text-orange-600 bg-orange-50",Re=`${Vt} zile`):(ht="text-green-600 bg-green-50",Re=`${Vt} zile`)}return t("div",{className:"space-y-2",children:[t("div",{className:"text-slate-600 text-sm space-y-1",children:[t("div",{children:["CVT: ",oe]}),t("div",{children:["Expirare: ",Te]})]}),Re!=="N/A"&&e("div",{className:`text-sm ${ht.split(" ")[0]}`,children:Re})]})}},{key:"issuing_authority",label:"AUTORITATEA EMITENTĂ",sortable:!0},{key:"cvtFile",label:"DOCUMENT CVT",sortable:!1,render:q=>e("div",{className:"flex items-center space-x-2",children:q.cvtFile?t(Ne,{children:[e("button",{onClick:()=>{if(q.cvtFile){const oe=document.createElement("a");oe.href=q.cvtFile,oe.download=`CVT-${q.cvt_number}.pdf`,oe.click()}},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Vizualizează documentul CVT",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>{if(q.cvtFile){const oe=document.createElement("a");oe.href=q.cvtFile,oe.download=`CVT-${q.cvt_number}.pdf`,oe.click()}},className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Descarcă documentul CVT",children:e(Le,{className:"w-4 h-4"})})]}):e("span",{className:"text-slate-400 text-sm italic",children:"Nu există document"})})},{key:"created_by",label:"CREAT DE",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-sm",children:new Date(q.created_at).toLocaleDateString("ro-RO")})}],ra=[{key:"name",label:"NUMELE",sortable:!0},{key:"provider",label:"FURNIZOR",sortable:!0},{key:"cabinet",label:"CABINET",sortable:!0},{key:"game_mix",label:"GAME MIX",sortable:!0,render:q=>e("div",{className:"text-slate-700 text-sm",children:q.game_mix||"-"})},{key:"checksum_md5",label:"CHECKSUM MD5",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-xs font-mono",children:q.checksum_md5?`${q.checksum_md5.substring(0,8)}...`:"-"})},{key:"checksum_sha256",label:"CHECKSUM SHA256",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-xs font-mono",children:q.checksum_sha256?`${q.checksum_sha256.substring(0,8)}...`:"-"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-sm",children:new Date(q.created_at).toLocaleDateString("ro-RO")})}],la=[{key:"name",label:"NUMELE",sortable:!0},{key:"serial_numbers",label:"NUMERELE DE SERIE",sortable:!1,render:q=>e("div",{className:"text-slate-800 font-medium text-sm",children:q.serial_numbers||"N/A"})},{key:"commission_date",label:"DATA COMISIEI",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.commission_date?new Date(q.commission_date).toLocaleDateString("ro-RO"):"N/A"})},{key:"expiry_date",label:"DATA VALABILITĂȚII",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.expiry_date?new Date(q.expiry_date).toLocaleDateString("ro-RO"):"N/A"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-sm",children:new Date(q.created_at).toLocaleDateString("ro-RO")})}],sa=[{key:"name",label:"NUMELE",sortable:!0},{key:"provider",label:"FURNIZOR",sortable:!0},{key:"cabinet",label:"CABINET",sortable:!0},{key:"game_mix",label:"GAME MIX",sortable:!0},{key:"version",label:"VERSIUNEA",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-sm",children:new Date(q.created_at).toLocaleDateString("ro-RO")})}],B=[{key:"name",label:"NUMELE",sortable:!0},{key:"address",label:"ADRESA",sortable:!0},{key:"price_initiala",label:"PREȚ INIȚIALĂ (LEI)",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.price_initiala?`${q.price_initiala} LEI`:"-"})},{key:"price_reparatie",label:"PREȚ REPARAȚIE (LEI)",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.price_reparatie?`${q.price_reparatie} LEI`:"-"})},{key:"price_periodica",label:"PREȚ PERIODICĂ (LEI)",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.price_periodica?`${q.price_periodica} LEI`:"-"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:q=>e("div",{className:"text-slate-800 font-medium text-base",children:q.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:q=>e("div",{className:"text-slate-600 text-sm",children:new Date(q.created_at).toLocaleDateString("ro-RO")})}];return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl shadow-lg shadow-cyan-500/25",children:e(ct,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Metrologie CVT"}),e("p",{className:"text-slate-600",children:"Gestionează aprobările, comisiile și software-ul pentru sloturi"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{x("metrology")}catch(q){console.error("Error exporting to Excel:",q)}},onExportPDF:()=>{try{d("metrology")}catch(q){console.error("Error exporting to PDF:",q)}},entity:"metrology"}),b&&t(Ne,{children:[t("button",{onClick:fe,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:ae,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:xe,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex space-x-1 bg-slate-100 p-1 rounded-lg",children:[t("button",{onClick:()=>_("approvals"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="approvals"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg shadow-green-500/25":"text-slate-600 hover:text-green-600 hover:bg-green-50"}`,children:[e(xt,{className:"w-4 h-4"}),e("span",{children:"Aprobări de Tip"})]}),t("button",{onClick:()=>_("commissions"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="commissions"?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/25":"text-slate-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e(gt,{className:"w-4 h-4"}),e("span",{children:"Comisii"})]}),t("button",{onClick:()=>_("software"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="software"?"bg-gradient-to-r from-purple-500 to-violet-500 text-white shadow-lg shadow-purple-500/25":"text-slate-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[e(Jt,{className:"w-4 h-4"}),e("span",{children:"Software"})]}),t("button",{onClick:()=>_("authorities"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-md transition-all ${y==="authorities"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg shadow-orange-500/25":"text-slate-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[e(xt,{className:"w-4 h-4"}),e("span",{children:"Autoritatea Emitentă"})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută în metrologie...",value:c,onChange:q=>g(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),!y||y==="metrology"?e("div",{className:"card p-6",children:o?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):J.length===0?t("div",{className:"text-center py-12",children:[e(ct,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există înregistrări de metrologie"}),e("p",{className:"text-slate-500",children:"Adaugă prima înregistrare pentru a începe"})]}):e(Ue,{data:J,columns:aa,onEdit:E,onDelete:Y,searchTerm:c,selectedItems:u,onSelectAll:ee,onSelectItem:se,moduleColor:"blue"})}):null,y==="approvals"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>_(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(lt,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl shadow-lg shadow-green-500/25",children:e(xt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Aprobări de Tip"}),e("p",{className:"text-slate-600",children:"Gestionează aprobările de tip pentru sloturi"})]})]}),t("button",{onClick:()=>{te(null),P(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Aprobare"})]})]}),M.length===0?t("div",{className:"text-center py-12",children:[e(xt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există aprobări de tip"}),e("p",{className:"text-slate-500",children:"Adaugă prima aprobare pentru a începe"})]}):e(Ue,{data:M,columns:ra,onEdit:q=>{te(q),P(!0)},onDelete:De})]})}),y==="commissions"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>_(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(lt,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(gt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Comisii"}),e("p",{className:"text-slate-600",children:"Gestionează comisiile pentru sloturi"})]})]}),t("div",{className:"flex items-center space-x-3",children:[t("button",{onClick:()=>re(!0),className:"btn-secondary flex items-center space-x-2",children:[e(rt,{className:"w-4 h-4"}),e("span",{children:"Calendar ONJN"})]}),t("button",{onClick:()=>{_e(null),Z(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Comisie"})]})]})]}),j.length===0?t("div",{className:"text-center py-12",children:[e(gt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există comisii"}),e("p",{className:"text-slate-500",children:"Adaugă prima comisie pentru a începe"})]}):e(Ue,{data:j,columns:la,onEdit:q=>{_e(q),Z(!0)},onDelete:nt})]})}),y==="software"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>_(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(lt,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg shadow-purple-500/25",children:e(Jt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Software"}),e("p",{className:"text-slate-600",children:"Gestionează software-ul pentru sloturi"})]})]}),t("button",{onClick:()=>{Ke(null),ue(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Software"})]})]}),f.length===0?t("div",{className:"text-center py-12",children:[e(Jt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există software"}),e("p",{className:"text-slate-500",children:"Adaugă primul software pentru a începe"})]}):e(Ue,{data:f,columns:sa,onEdit:q=>{Ke(q),ue(!0)},onDelete:ot})]})}),y==="authorities"&&e("div",{className:"card p-6",children:t("div",{className:"space-y-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>_(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Înapoi la Metrologie CVT",children:e(lt,{className:"w-5 h-5 text-slate-600"})}),e("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl shadow-lg shadow-orange-500/25",children:e(xt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Autoritatea Emitentă"}),e("p",{className:"text-slate-600",children:"Gestionează autoritățile emitente pentru CVT"})]})]}),t("button",{onClick:()=>{ge(null),W(!0)},className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Autoritate"})]})]}),k.length===0?t("div",{className:"text-center py-12",children:[e(xt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există autorități"}),e("p",{className:"text-slate-500",children:"Adaugă prima autoritate pentru a începe"})]}):e(Ue,{data:k,columns:B,onEdit:q=>{ge(q),W(!0)},onDelete:vt})]})}),R&&e(si,{item:C,onClose:()=>p(!1),onSave:Ce}),A&&e(ni,{item:D,onClose:()=>{U(!1),z(null)}}),I&&e(oi,{item:V,onClose:()=>P(!1),onSave:Ze}),H&&e(ii,{item:ne,onClose:()=>Z(!1),onSave:We}),le&&e(ci,{item:Xe,onClose:()=>ue(!1),onSave:Ve}),O&&e(di,{item:he,onClose:()=>W(!1),onSave:ut}),be&&e(mi,{isOpen:be,onClose:()=>re(!1)}),G&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:t("div",{className:"p-6",children:[t("div",{className:"flex items-center space-x-4 mb-6",children:[e("div",{className:"p-3 bg-red-100 rounded-2xl",children:e(xt,{className:"w-6 h-6 text-red-600"})}),t("div",{children:[e("h3",{className:"text-xl font-bold text-slate-800",children:"Șterge Aprobarea"}),e("p",{className:"text-slate-600",children:"Această acțiune nu poate fi anulată"})]})]}),t("div",{className:"bg-slate-50 rounded-lg p-4 mb-6",children:[t("p",{className:"text-slate-700",children:[e("span",{className:"font-semibold",children:"Numele:"})," ",ce==null?void 0:ce.name]}),t("p",{className:"text-slate-600 text-sm mt-1",children:[e("span",{className:"font-semibold",children:"Furnizor:"})," ",ce==null?void 0:ce.provider," |",e("span",{className:"font-semibold",children:" Cabinet:"})," ",ce==null?void 0:ce.cabinet]})]}),t("div",{className:"flex justify-end space-x-3",children:[e("button",{onClick:()=>pe(!1),className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Anulează"}),e("button",{onClick:Ge,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Șterge"})]})]})})})]})})},hi=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({serial_number:"",jackpot_name:"",jackpot_type:"Progressive",current_amount:0,max_amount:"",progress_percentage:0,status:"Active",winner:"",triggered_date:"",notes:""});h.useEffect(()=>{a&&o({serial_number:a.serial_number||"",jackpot_name:a.jackpot_name||"",jackpot_type:a.jackpot_type||"Progressive",current_amount:a.current_amount||0,max_amount:a.max_amount||"",progress_percentage:a.progress_percentage||0,status:a.status||"Active",winner:a.winner||"",triggered_date:a.triggered_date||"",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;o(c=>({...c,[x]:d}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-yellow-800 to-amber-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-600/20 to-amber-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-2xl shadow-lg",children:e(Pt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Jackpot":"Adaugă Jackpot Nou"}),e("p",{className:"text-yellow-100 text-sm font-medium",children:"Completează informațiile despre jackpot"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații de bază"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Numărul de serie *"}),e("input",{type:"text",name:"serial_number",value:s.serial_number,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Serial number slot",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Jackpot *"}),e("input",{type:"text",name:"jackpot_name",value:s.jackpot_name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"ex: Mega Jackpot",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip Jackpot"}),t("select",{name:"jackpot_type",value:s.jackpot_type,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",children:[e("option",{value:"Progressive",children:"Progresiv"}),e("option",{value:"Fixed",children:"Fix"}),e("option",{value:"Mystery",children:"Mystery"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",children:[e("option",{value:"Active",children:"Activ"}),e("option",{value:"Triggered",children:"Declanșat"}),e("option",{value:"Reset",children:"Resetat"}),e("option",{value:"Maintenance",children:"Mentenanță"})]})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații financiare"}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Suma curentă"}),e("input",{type:"number",step:"0.01",name:"current_amount",value:s.current_amount,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"0.00"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Suma maximă"}),e("input",{type:"number",step:"0.01",name:"max_amount",value:s.max_amount,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"1000000.00"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Progres (%)"}),e("input",{type:"number",step:"0.01",name:"progress_percentage",value:s.progress_percentage,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"0.00"})]})]})]}),t("div",{className:"space-y-4",children:[e("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Informații câștigător"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Câștigător"}),e("input",{type:"text",name:"winner",value:s.winner,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Numele câștigătorului"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data declanșării"}),e("input",{type:"datetime-local",name:"triggered_date",value:s.triggered_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Note adiționale despre jackpot..."})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(Pt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Jackpot"]})]})]})]})})]})})},pi=()=>{const{jackpots:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=me(),[m,x]=h.useState(""),[d,c]=h.useState([]),[g,u]=h.useState(!1);h.useEffect(()=>{u(d.length>0)},[d]);const S=N=>{c(N?F.map(f=>f.id):[])},b=(N,f)=>{c(f?[...d,N]:d.filter(w=>w!==N))},v=async()=>{if(d.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${d.length} elemente?`))try{for(const N of d)await o("jackpots",N);c([]),u(!1)}catch(N){console.error("Error bulk deleting:",N)}},y=()=>{d.length!==0&&console.log("Bulk edit for:",d)},[_,R]=h.useState(!1),[p,C]=h.useState(null),F=a.filter(N=>{var f,w,k;return((f=N.name)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((w=N.game)==null?void 0:w.toLowerCase().includes(m.toLowerCase()))||((k=N.location)==null?void 0:k.toLowerCase().includes(m.toLowerCase()))}),A=[{key:"id",label:"#",sortable:!0},{key:"name",label:"NUME JACKPOT",sortable:!0},{key:"game",label:"JOC",sortable:!0},{key:"amount",label:"SUMA",sortable:!0},{key:"location",label:"LOCAȚIE",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})},{key:"actions",label:"ACȚIUNI",sortable:!1}],U=N=>{C(N),R(!0)},D=async N=>{window.confirm("Sigur vrei să ștergi acest jackpot?")&&await o("jackpots",N)},z=()=>{C(null),R(!0)},M=async N=>{p?await s("jackpots",p.id,N):await r("jackpots",N),R(!1),C(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg shadow-yellow-500/25",children:e(Pt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Jackpots"}),e("p",{className:"text-slate-600",children:"Gestionează jackpot-urile din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{i("jackpots")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("jackpots")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"jackpots"}),g&&t(Ne,{children:[t("button",{onClick:y,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:v,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Jackpot"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută jackpot-uri...",value:m,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):F.length===0?t("div",{className:"text-center py-12",children:[e(Pt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există jackpot-uri"}),e("p",{className:"text-slate-500",children:"Adaugă primul jackpot pentru a începe"})]}):e(Ue,{data:F,columns:A,onEdit:U,onDelete:D,searchTerm:m,selectedItems:d,onSelectAll:S,onSelectItem:b,moduleColor:"orange"})}),_&&e(hi,{item:p,onClose:()=>R(!1),onSave:M})]})})},xi=({item:a,onClose:l,onSave:r})=>{const{companies:s,locations:o,providers:i}=me(),[n,m]=h.useState({invoice_number:"",serial_numbers:"",buyer:"",seller:"",type:"Sale",amount:"",currency:"RON",rates:"",locations:[],pdf_file:null});h.useEffect(()=>{a&&m({invoice_number:a.invoice_number||"",serial_numbers:a.serial_number?typeof a.serial_number=="string"?JSON.parse(a.serial_number).join(`
`):a.serial_number.join(`
`):"",buyer:a.company||"",seller:a.seller||"",type:a.invoice_type||"Sale",amount:a.amount||"",currency:a.currency||"RON",rates:a.rates||"",locations:a.location?typeof a.location=="string"?JSON.parse(a.location):a.location:[],pdf_file:a.pdf_file||null})},[a]);const x=c=>{const{name:g,value:u,type:S,checked:b,files:v}=c.target;S==="checkbox"?g==="location"&&m(y=>({...y,locations:b?[...y.locations,u]:y.locations.filter(_=>_!==u)})):m(S==="file"?y=>({...y,[g]:v[0]||null}):y=>({...y,[g]:u}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-indigo-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(Il,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Factură":"Adaugă Factură Nouă"}),e("p",{className:"text-blue-100 text-sm font-medium",children:"Completează informațiile despre factură"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:c=>{c.preventDefault();const g=new FormData;Object.keys(n).forEach(u=>{u==="locations"?g.append(u,JSON.stringify(n[u])):u==="pdf_file"?n[u]&&g.append(u,n[u]):g.append(u,n[u])}),r(g)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Număr Factură *"}),e("input",{type:"text",name:"invoice_number",value:n.invoice_number,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: INV-2024-001",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Serii"}),e("textarea",{name:"serial_numbers",value:n.serial_numbers,onChange:x,rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Introduceți seriile, câte una pe rând"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Cumpărător *"}),t("select",{name:"buyer",value:n.buyer,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează compania"}),s==null?void 0:s.map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Vânzător *"}),t("select",{name:"seller",value:n.seller,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează furnizorul"}),i==null?void 0:i.map(c=>e("option",{value:c.name,children:c.name},c.id))]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip *"}),t("select",{name:"type",value:n.type,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e("option",{value:"Sale",children:"Vânzare"}),e("option",{value:"Rental",children:"Chirie"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Suma *"}),e("input",{type:"number",name:"amount",value:n.amount,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Valută"}),t("select",{name:"currency",value:n.currency,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e("option",{value:"RON",children:"RON"}),e("option",{value:"EUR",children:"EUR"}),e("option",{value:"USD",children:"USD"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Rate (opțional)"}),e("input",{type:"text",name:"rates",value:n.rates,onChange:x,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: 3 rate de 1000 RON"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"PDF Factură *"}),e("input",{type:"file",name:"pdf_file",onChange:x,accept:".pdf",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),n.pdf_file&&t("p",{className:"text-sm text-green-600",children:["Fișier selectat: ",n.pdf_file.name]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Locații"}),e("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o==null?void 0:o.map(c=>t("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",name:"location",value:c.name,checked:n.locations.includes(c.name),onChange:x,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e("span",{className:"text-sm text-slate-700",children:c.name})]},c.id))}),n.locations.length===o.length&&e("p",{className:"text-sm text-blue-600 font-medium",children:"Toate locațiile"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(At,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Factură"]})]})]})]})})]})})},bi=()=>{const a=et(),{invoices:l,loading:r,createItem:s,updateItem:o,deleteItem:i,exportToExcel:n,exportToPDF:m}=me(),[x,d]=h.useState(""),[c,g]=h.useState([]),[u,S]=h.useState(!1);h.useEffect(()=>{S(c.length>0)},[c]);const b=f=>{g(f?A.map(w=>w.id):[])},v=(f,w)=>{g(w?[...c,f]:c.filter(k=>k!==f))},y=async()=>{if(c.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${c.length} elemente?`))try{for(const f of c)await i("invoices",f);g([]),S(!1)}catch(f){console.error("Error bulk deleting:",f)}},_=()=>{c.length!==0&&console.log("Bulk edit for:",c)},[R,p]=h.useState(!1),[C,F]=h.useState(null),A=l.filter(f=>{var w,k,L;return((w=f.invoice_number)==null?void 0:w.toLowerCase().includes(x.toLowerCase()))||((k=f.company)==null?void 0:k.toLowerCase().includes(x.toLowerCase()))||((L=f.status)==null?void 0:L.toLowerCase().includes(x.toLowerCase()))}),U=[{key:"id",label:"#",sortable:!0},{key:"invoice_number",label:"NUMĂR FACTURĂ",sortable:!0,render:f=>e("button",{onClick:()=>a(`/invoices/${f.id}`),className:"text-blue-600 hover:text-blue-800 font-medium underline",children:f.invoice_number})},{key:"company",label:"COMPANIE",sortable:!0},{key:"amount",label:"SUMA",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:f=>e("div",{className:"text-slate-800 font-medium text-base",children:f.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:f=>e("div",{className:"text-slate-800 font-medium text-base",children:f.created_at?new Date(f.created_at).toLocaleDateString("ro-RO"):"N/A"})}],D=f=>{F(f),p(!0)},z=async f=>{window.confirm("Sigur vrei să ștergi această factură?")&&await i("invoices",f)},M=()=>{F(null),p(!0)},T=async f=>{C?await o("invoices",C.id,f):await s("invoices",f),p(!1),F(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl shadow-lg shadow-red-500/25",children:e(de,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Facturi"}),e("p",{className:"text-slate-600",children:"Gestionează facturile din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{n("invoices")}catch(f){console.error("Error exporting to Excel:",f)}},onExportPDF:()=>{try{m("invoices")}catch(f){console.error("Error exporting to PDF:",f)}},entity:"invoices"}),u&&t(Ne,{children:[t("button",{onClick:_,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:y,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:M,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Factură"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută facturi...",value:x,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:r?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):A.length===0?t("div",{className:"text-center py-12",children:[e(de,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există facturi"}),e("p",{className:"text-slate-500",children:"Adaugă prima factură pentru a începe"})]}):e(Ue,{data:A,columns:U,onEdit:D,onDelete:z,searchTerm:x,selectedItems:c,onSelectAll:b,onSelectItem:v,moduleColor:"pink"})}),R&&e(xi,{item:C,onClose:()=>p(!1),onSave:T})]})})},gi=()=>{const{id:a}=Kt(),l=et(),{slots:r,companies:s,locations:o,providers:i,cabinets:n,gameMixes:m}=me(),[x,d]=h.useState(null),[c,g]=h.useState(!0);h.useEffect(()=>{u()},[a]);const u=async()=>{try{const _=await fetch(`/api/invoices/${a}`);if(_.ok){const R=await _.json();d(R)}}catch(_){console.error("Error fetching invoice:",_)}finally{g(!1)}},S=_=>r.find(R=>R.serial_number===_)||null,b=()=>{if(x!=null&&x.file_path){const _=document.createElement("a");_.href=x.file_path,_.download=`factura_${x.invoice_number}.pdf`,_.target="_blank",_.click()}};if(c)return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e("p",{className:"mt-4 text-slate-600",children:"Se încarcă..."})]})});if(!x)return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Factura nu a fost găsită"}),e("button",{onClick:()=>l("/invoices"),className:"btn-primary",children:"Înapoi la Facturi"})]})});const v=x.serial_number?typeof x.serial_number=="string"?JSON.parse(x.serial_number):x.serial_number:[],y=x.location?typeof x.location=="string"?(()=>{try{const _=JSON.parse(x.location);return typeof _=="string"?JSON.parse(_):_}catch{return[]}})():x.location:[];return e(ve,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:t("div",{className:"container mx-auto px-4 py-8",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 mb-8 overflow-hidden",children:e("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:()=>l("/invoices"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e(lt,{className:"w-6 h-6 text-white"})}),e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(de,{className:"w-8 h-8 text-white"})}),t("div",{children:[t("h1",{className:"text-3xl font-bold text-white mb-1",children:["Factura ",x.invoice_number]}),e("p",{className:"text-blue-100",children:"Detalii complete despre factură"})]})]}),t("button",{onClick:b,className:"btn-primary flex items-center space-x-2",children:[e(Le,{className:"w-5 h-5"}),e("span",{children:"Descarcă PDF"})]})]})})}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t("div",{className:"lg:col-span-1",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(de,{className:"w-5 h-5 mr-2 text-blue-600"}),"Informații Factură"]}),t("div",{className:"space-y-4",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Număr Factură"}),e("p",{className:"text-slate-800 font-medium",children:x.invoice_number})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Cumpărător"}),e("p",{className:"text-slate-800",children:x.company})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Vânzător"}),e("p",{className:"text-slate-800 dark:text-slate-200",children:x.invoice_type})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Tip"}),e("p",{className:"text-slate-800 dark:text-slate-200",children:x.invoice_type})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Suma"}),t("p",{className:"text-slate-800 font-bold text-lg",children:[x.amount," ",x.currency]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Status"}),e("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${x.status==="Paid"?"bg-green-100 text-green-800":x.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:x.status})]}),x.description&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600",children:"Descriere"}),e("p",{className:"text-slate-800",children:x.description})]})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(tt,{className:"w-5 h-5 mr-2 text-green-600"}),"Locații"]}),e("div",{className:"space-y-2",children:Array.isArray(y)&&y.length>0?y.map((_,R)=>t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e("span",{className:"text-slate-700",children:_})]},R)):e("p",{className:"text-slate-500",children:"Toate locațiile"})})]})]}),t("div",{className:"lg:col-span-2",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(de,{className:"w-5 h-5 mr-2 text-red-600"}),"PDF Factură"]}),e(Lt,{pdfUrl:x.file_path,title:`PDF ${x.invoice_number}`,placeholder:"PDF-ul facturii nu este disponibil",placeholderSubtext:"Atașează PDF-ul facturii pentru vizualizare"})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e(He,{className:"w-5 h-5 mr-2 text-purple-600"}),"Serii Asociate (",v.length,")"]}),v.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-slate-50 border-b border-slate-200",children:t("tr",{children:[e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Serial Number"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Locație"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Furnizor"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Cabinet"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Game Mix"}),e("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700",children:"Status"})]})}),e("tbody",{className:"divide-y divide-slate-200",children:v.map((_,R)=>{const p=S(_);return t("tr",{className:"hover:bg-slate-50",children:[e("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:_}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:p?p.location:"Necunoscută"}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:p?p.provider:"Necunoscut"}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:p?p.cabinet:"Necunoscut"}),e("td",{className:"px-4 py-3 text-sm text-slate-600",children:p?p.game_mix:"Necunoscut"}),e("td",{className:"px-4 py-3",children:p?e("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.status==="Active"?"bg-green-100 text-green-800":p.status==="Inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:p.status}):e("span",{className:"text-slate-400",children:"N/A"})})]},R)})})]})}):t("div",{className:"text-center py-8 text-slate-500",children:[e(He,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),e("p",{children:"Nu există serii asociate cu această factură"})]})]})]})]})]})})})},fi=()=>{var _,R,p;const{id:a}=Kt(),l=et(),{companies:r,loading:s,updateItem:o,refreshData:i}=me(),[n,m]=h.useState(null),[x,d]=h.useState(!1),[c,g]=h.useState(!1),[u,S]=h.useState({name:"",type:"Contract",file:null});h.useEffect(()=>{const C=r.find(F=>F.id===parseInt(a));C&&m(C)},[a,r]),h.useEffect(()=>{const C=r.find(F=>F.id===parseInt(a));C&&m(C)},[r,a]);const b=async C=>{if(C.preventDefault(),!(!u.file||!u.name)){g(!0);try{const F=new FormData;F.append("file",u.file),F.append("name",u.name),F.append("type",u.type);const A=await fetch(`/api/companies/${n.id}/documents`,{method:"POST",body:F});if(A.ok){const U=await A.json();if(m(U),d(!1),S({name:"",type:"Contract",file:null}),U.compression){const{originalSize:D,compressedSize:z,compressionRatio:M,savedBytes:T}=U.compression,j=(D/1024/1024).toFixed(2),N=(z/1024/1024).toFixed(2),f=(T/1024).toFixed(2);X.success(`Document încărcat cu succes! PDF comprimat: ${j}MB → ${N}MB (${M}% reducere, ${f}KB economisite)`,{duration:6e3})}else X.success("Document încărcat cu succes!");setTimeout(()=>{i()},500)}}catch(F){console.error("Error uploading document:",F)}finally{g(!1)}}},v=C=>{const F=C.createElement("a");F.href=C.file_path,F.download=C.name,F.target="_blank",F.click()},y=async C=>{if(window.confirm("Sigur vrei să ștergi acest document?"))try{const F=await fetch(`/api/companies/${n.id}/documents/${C}`,{method:"DELETE"});if(F.ok){const A=await F.json();m(A),setTimeout(()=>{i()},500)}}catch(F){console.error("Error deleting document:",F)}};return s?e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{className:"text-slate-600 dark:text-slate-300",children:"Se încarcă..."})]})}):n?t(ve,{children:[e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:t("div",{className:"container mx-auto px-4 py-8",children:[t("div",{className:"mb-8",children:[t("button",{onClick:()=>l("/companies"),className:"btn-secondary flex items-center space-x-2 mb-4",children:[e(lt,{className:"w-4 h-4"}),e("span",{children:"Înapoi la Companii"})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:t("div",{className:"flex items-start justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(Pe,{className:"w-8 h-8 text-white"})}),t("div",{children:[e("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:n.name}),e("p",{className:"text-slate-600 dark:text-slate-300 text-lg",children:"Detalii complete despre companie"})]})]}),t("button",{onClick:()=>d(!0),className:"btn-primary flex items-center space-x-2",children:[e(Se,{className:"w-5 h-5"}),e("span",{children:"Atașează Document"})]})]})})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t("div",{className:"lg:col-span-1",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(Pe,{className:"w-5 h-5 mr-2 text-blue-600"}),"Informații Companie"]}),t("div",{className:"space-y-4",children:[t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Nume Companie"}),e("p",{className:"text-slate-800 dark:text-slate-200 font-medium",children:n.name})]}),n.cui&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"CUI"}),e("p",{className:"text-slate-800 dark:text-slate-200 font-medium",children:n.cui}),n.cuiFile&&t("div",{className:"mt-2 flex items-center space-x-2",children:[t("button",{onClick:()=>{if(n.cui_file){const C=document.createElement("a");C.href=n.cui_file,C.download=`CUI-${n.name}.pdf`,C.click()}},className:"inline-flex items-center px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors text-sm font-medium",title:"Previzualizează CUI",children:[e(je,{className:"w-4 h-4 mr-1"}),"Vezi Document"]}),t("button",{onClick:()=>{if(n.cui_file){const C=document.createElement("a");C.href=n.cui_file,C.download=`CUI-${n.name}.pdf`,C.click()}},className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm font-medium",title:"Descarcă CUI",children:[e(Le,{className:"w-4 h-4 mr-1"}),"Descarcă"]})]})]}),n.contact_person&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Persoană de Contact"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(jt,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.contact_person]})]}),n.phone&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Telefon"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(Ga,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.phone]})]}),n.email&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Email"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(qa,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.email]})]}),n.address&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Adresă"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(tt,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),n.address]})]}),t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Data Creării"}),t("p",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center",children:[e(rt,{className:"w-4 h-4 mr-2 text-slate-500 dark:text-slate-400"}),new Date(n.created_at).toLocaleDateString("ro-RO")]})]}),n.status&&t("div",{children:[e("label",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400 block mb-1",children:"Status"}),e("span",{className:`px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm ${n.status==="Active"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800":"bg-gradient-to-r from-red-100 to-pink-100 text-red-800"}`,children:n.status})]})]})]}),n.notes&&t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(de,{className:"w-5 h-5 mr-2 text-amber-600"}),"Note"]}),e("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:n.notes})]})]}),e("div",{className:"lg:col-span-2",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(de,{className:"w-5 h-5 mr-2 text-red-600"}),"Documente Atașate"]}),n.documents&&n.documents.length>0||n.cuiFile?t("div",{className:"space-y-6",children:[(n.cuiFile||n.documents&&n.documents.length>0)&&t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(de,{className:"w-5 h-5 mr-2 text-blue-600"}),"Vizualizare Document"]}),e("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 mb-4",children:e(Lt,{pdfUrl:n.cui_file||(n.documents&&((_=n.documents[0])!=null&&_.file_path)?n.documents[0].file_path:null),title:n.cui_file?`CUI Document ${n.name}`:n.documents&&n.documents[0]?`PDF ${n.documents[0].name}`:"Document PDF",placeholder:"Nu există documente de afișat",placeholderSubtext:"Atașează primul document sau CUI pentru a începe"})}),t("div",{className:"flex items-center justify-between",children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:n.cuiFile?`Document: CUI ${n.name}`:`Document: ${(R=n.documents[0])==null?void 0:R.name} (${(p=n.documents[0])==null?void 0:p.type})`}),t("button",{onClick:()=>{if(n.cui_file){const C=document.createElement("a");C.href=n.cui_file,C.download=`CUI-${n.name}.pdf`,C.click()}else n.documents&&n.documents[0]&&v(n.documents[0])},className:"btn-primary flex items-center space-x-2",children:[e(Le,{className:"w-4 h-4"}),e("span",{children:"Descarcă PDF"})]})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[t("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[e(de,{className:"w-5 h-5 mr-2 text-green-600"}),"Toate Documentele (",n.cuiFile?1:0," + ",n.documents?n.documents.length:0,")"]}),t("div",{className:"space-y-4",children:[n.cuiFile&&e("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e(de,{className:"w-5 h-5 text-blue-600"})}),t("div",{children:[t("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:["CUI ",n.name]}),t("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Document CUI • ",new Date(n.created_at).toLocaleDateString("ro-RO")]})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>{const C=document.querySelector("iframe");C&&(C.src=n.cuiFile)},className:"p-2 text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Vezi în viewer",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const C=document.createElement("a");C.href=n.cuiFile,C.download=`CUI_${n.name||"company"}.pdf`,C.click()},className:"p-2 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors",title:"Descarcă",children:e(Le,{className:"w-4 h-4"})})]})]})}),n.documents&&n.documents.map((C,F)=>e("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e(de,{className:"w-5 h-5 text-red-600"})}),t("div",{children:[e("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.name}),t("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[C.type," • ",new Date(C.uploadedAt||C.uploaded_at).toLocaleDateString("ro-RO")]})]})]}),t("div",{className:"flex items-center space-x-2",children:[e("button",{onClick:()=>{const A=document.querySelector("iframe");A&&(A.src=C.url||C.file_path)},className:"p-2 text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Vezi în viewer",children:e(je,{className:"w-4 h-4"})}),e("button",{onClick:()=>{const A=document.createElement("a");A.href=C.url||C.file_path,A.download=C.name,A.click()},className:"p-2 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors",title:"Descarcă",children:e(Le,{className:"w-4 h-4"})}),e("button",{onClick:()=>y(C._id||C.id),className:"p-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg transition-colors",title:"Șterge",children:e(Oe,{className:"w-4 h-4"})})]})]})},C._id||C.id||F))]})]})]}):t("div",{className:"text-center py-12 text-slate-500",children:[e(de,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),e("p",{className:"text-lg font-medium mb-2",children:"Nu există documente atașate"}),e("p",{className:"text-sm",children:"Atașează primul document sau CUI pentru a începe"})]})]})})]})]})}),x&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-md mx-4",children:[e("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Atașează Document"}),t("form",{onSubmit:b,className:"space-y-4",children:[t("div",{children:[e("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nume Document"}),e("input",{type:"text",value:u.name,onChange:C=>S({...u,name:C.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ex: Contract de Colaborare",required:!0})]}),t("div",{children:[e("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Fișier PDF"}),e("input",{type:"file",accept:".pdf",onChange:C=>S({...u,file:C.target.files[0]}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t("div",{className:"flex space-x-3 pt-4",children:[e("button",{type:"button",onClick:()=>d(!1),className:"flex-1 btn-secondary",disabled:c,children:"Anulează"}),e("button",{type:"submit",className:"flex-1 btn-primary flex items-center justify-center space-x-2",disabled:c,children:c?t(Ne,{children:[e("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e("span",{children:"Se încarcă..."})]}):t(Ne,{children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Atașează"})]})})]})]})]})})]}):e(ve,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t("div",{className:"text-center",children:[e(Pe,{className:"w-16 h-16 text-slate-400 dark:text-slate-500 mx-auto mb-4"}),e("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Compania nu a fost găsită"}),e("p",{className:"text-slate-600 dark:text-slate-300 mb-6",children:"Compania pe care o căutați nu există în sistem."}),t("button",{onClick:()=>l("/companies"),className:"btn-primary flex items-center space-x-2 mx-auto",children:[e(lt,{className:"w-4 h-4"}),e("span",{children:"Înapoi la Companii"})]})]})})})},vi=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",type:"",period:"",status:"Draft",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",type:a.type||"",period:a.period||"",status:a.status||"Draft",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;o(c=>({...c,[x]:d}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-blue-800 to-indigo-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-indigo-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg",children:e(He,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Raport ONJN":"Adaugă Raport ONJN Nou"}),e("p",{className:"text-blue-100 text-sm font-medium",children:"Completează informațiile despre raportul ONJN"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Raport *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Numele raportului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip *"}),t("select",{name:"type",value:s.type,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează tipul"}),e("option",{value:"Monthly",children:"Lunar"}),e("option",{value:"Quarterly",children:"Trimestrial"}),e("option",{value:"Annual",children:"Anual"}),e("option",{value:"Special",children:"Special"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Perioada *"}),e("input",{type:"text",name:"period",value:s.period,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"ex: Ianuarie 2025",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e("option",{value:"Draft",children:"Draft"}),e("option",{value:"Submitted",children:"Trimis"}),e("option",{value:"Approved",children:"Aprobat"}),e("option",{value:"Rejected",children:"Respins"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"px-6 py-3 text-slate-600 hover:text-slate-800 font-semibold transition-colors",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(At,{className:"w-4 h-4"}),e("span",{children:a?"Actualizează":"Adaugă"})]})]})]})})]})})},Ni=()=>{const{onjnReports:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=me(),[m,x]=h.useState(""),[d,c]=h.useState([]),[g,u]=h.useState(!1);h.useEffect(()=>{u(d.length>0)},[d]);const S=N=>{c(N?F.map(f=>f.id):[])},b=(N,f)=>{c(f?[...d,N]:d.filter(w=>w!==N))},v=async()=>{if(d.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${d.length} elemente?`))try{for(const N of d)await o("onjnReports",N);c([]),u(!1)}catch(N){console.error("Error bulk deleting:",N)}},y=()=>{d.length!==0&&console.log("Bulk edit for:",d)},[_,R]=h.useState(!1),[p,C]=h.useState(null),F=a.filter(N=>{var f,w,k;return((f=N.name)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((w=N.type)==null?void 0:w.toLowerCase().includes(m.toLowerCase()))||((k=N.status)==null?void 0:k.toLowerCase().includes(m.toLowerCase()))}),A=[{key:"id",label:"#",sortable:!0},{key:"name",label:"NUME RAPORT",sortable:!0},{key:"type",label:"TIP",sortable:!0},{key:"period",label:"PERIOADA",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})},{key:"actions",label:"ACȚIUNI",sortable:!1}],U=N=>{C(N),R(!0)},D=async N=>{window.confirm("Sigur vrei să ștergi acest raport ONJN?")&&await o("onjnReports",N)},z=()=>{C(null),R(!0)},M=async N=>{p?await s("onjnReports",p.id,N):await r("onjnReports",N),R(!1),C(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl shadow-lg shadow-blue-500/25",children:e(Ot,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Rapoarte ONJN"}),e("p",{className:"text-slate-600",children:"Generează și gestionează rapoartele ONJN"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{i("onjnreports")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("onjnreports")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"onjnreports"}),g&&t(Ne,{children:[t("button",{onClick:y,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:v,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Raport"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută rapoarte...",value:m,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):F.length===0?t("div",{className:"text-center py-12",children:[e(Ot,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există rapoarte ONJN"}),e("p",{className:"text-slate-500",children:"Adaugă primul raport pentru a începe"})]}):e(Ue,{data:F,columns:A,onEdit:U,onDelete:D,searchTerm:m,selectedItems:d,onSelectAll:S,onSelectItem:b,moduleColor:"indigo"})}),_&&e(vi,{item:p,onClose:()=>R(!1),onSave:M})]})})},yi=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({name:"",type:"",status:"Valid",expiry_date:"",notes:""});h.useEffect(()=>{a&&o({name:a.name||"",type:a.type||"",status:a.status||"Valid",expiry_date:a.expiry_date||"",notes:a.notes||""})},[a]);const i=m=>{const{name:x,value:d}=m.target;o(c=>({...c,[x]:d}))};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-red-800 to-rose-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/20 to-rose-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-red-500 to-rose-500 rounded-2xl shadow-lg",children:e(or,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Document Legal":"Adaugă Document Legal Nou"}),e("p",{className:"text-red-100 text-sm font-medium",children:"Completează informațiile despre documentul legal"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:m=>{m.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Document *"}),e("input",{type:"text",name:"name",value:s.name,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Numele documentului",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Tip *"}),t("select",{name:"type",value:s.type,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[e("option",{value:"",children:"Selectează tipul"}),e("option",{value:"License",children:"Licență"}),e("option",{value:"Permit",children:"Autorizație"}),e("option",{value:"Contract",children:"Contract"}),e("option",{value:"Certificate",children:"Certificat"}),e("option",{value:"Other",children:"Altele"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Data Expirării"}),e("input",{type:"date",name:"expiry_date",value:s.expiry_date,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:i,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[e("option",{value:"Valid",children:"Valid"}),e("option",{value:"Expired",children:"Expirat"}),e("option",{value:"Expiring Soon",children:"Expiră în curând"}),e("option",{value:"Invalid",children:"Invalid"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:i,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(or,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Document"]})]})]})]})})]})})},wi=()=>{const{legalDocuments:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=me(),[m,x]=h.useState(""),[d,c]=h.useState([]),[g,u]=h.useState(!1);h.useEffect(()=>{u(d.length>0)},[d]);const S=N=>{c(N?F.map(f=>f.id):[])},b=(N,f)=>{c(f?[...d,N]:d.filter(w=>w!==N))},v=async()=>{if(d.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${d.length} elemente?`))try{for(const N of d)await o("legalDocuments",N);c([]),u(!1)}catch(N){console.error("Error bulk deleting:",N)}},y=()=>{d.length!==0&&console.log("Bulk edit for:",d)},[_,R]=h.useState(!1),[p,C]=h.useState(null),F=a.filter(N=>{var f,w,k;return((f=N.name)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((w=N.type)==null?void 0:w.toLowerCase().includes(m.toLowerCase()))||((k=N.status)==null?void 0:k.toLowerCase().includes(m.toLowerCase()))}),A=[{key:"id",label:"#",sortable:!0},{key:"name",label:"NUME DOCUMENT",sortable:!0},{key:"type",label:"TIP",sortable:!0},{key:"status",label:"STATUS",sortable:!0},{key:"expiry_date",label:"DATA EXPIRARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.expiry_date?new Date(N.expiry_date).toLocaleDateString("ro-RO"):"N/A"})},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})},{key:"actions",label:"ACȚIUNI",sortable:!1}],U=N=>{C(N),R(!0)},D=async N=>{window.confirm("Sigur vrei să ștergi acest document legal?")&&await o("legalDocuments",N)},z=()=>{C(null),R(!0)},M=async N=>{p?await s("legalDocuments",p.id,N):await r("legalDocuments",N),R(!1),C(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-gray-500 to-slate-500 rounded-2xl shadow-lg shadow-gray-500/25",children:e(de,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Documente Legale"}),e("p",{className:"text-slate-600",children:"Gestionează documentele legale din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{i("legaldocuments")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("legaldocuments")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"legaldocuments"}),g&&t(Ne,{children:[t("button",{onClick:y,className:"btn-secondary flex items-center space-x-2",children:[e(Edit,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:v,className:"btn-danger flex items-center space-x-2",children:[e(Trash2,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Document"})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută documente...",value:m,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-500"})}):F.length===0?t("div",{className:"text-center py-12",children:[e(de,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există documente legale"}),e("p",{className:"text-slate-500",children:"Adaugă primul document pentru a începe"})]}):e(Ue,{data:F,columns:A,onEdit:U,onDelete:D,searchTerm:m,selectedItems:d,onSelectAll:S,onSelectItem:b,moduleColor:"teal"})}),_&&e(yi,{item:p,onClose:()=>R(!1),onSave:M})]})})},ki=({item:a,onClose:l,onSave:r})=>{const[s,o]=h.useState({username:"",full_name:"",email:"",password:"",role:"user",status:"active",notes:"",avatar:null,avatarPreview:null,permissions:za("user")}),[i,n]=h.useState(!1);h.useEffect(()=>{a&&o({username:a.username||"",full_name:a.full_name||"",email:a.email||"",role:a.role||"user",status:a.status||"active",notes:a.notes||"",avatar:a.avatar||null,avatarPreview:a.avatar||null,permissions:a.permissions||za(a.role||"user")})},[a]);const m=u=>{const{name:S,value:b}=u.target;o(v=>{const y={...v,[S]:b};return S==="role"&&(y.permissions=za(b)),y})},x=(u,S)=>{o(b=>{var v;return{...b,permissions:{...b.permissions,[u]:{...b.permissions[u],[S]:!((v=b.permissions[u])!=null&&v[S])}}}})},d=(u,S)=>{const b=pa[u];o(v=>({...v,permissions:{...v.permissions,[u]:b.actions.reduce((y,_)=>(y[_]=S,y),{})}}))},c=u=>{const S=u.target.files[0];if(S){const b=new FileReader;b.onload=v=>{o(y=>({...y,avatar:v.target.result,avatarPreview:v.target.result}))},b.readAsDataURL(S)}};return e("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white/90 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl w-full max-w-4xl overflow-hidden shadow-2xl shadow-slate-500/20 border border-white/30 dark:border-slate-700/50",children:[t("div",{className:"bg-gradient-to-r from-slate-800 via-indigo-800 to-blue-800 px-8 py-6 flex justify-between items-center relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600/20 to-blue-600/20"}),t("div",{className:"relative z-10 flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-2xl shadow-lg",children:e(jt,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-3xl font-bold text-white mb-1",children:a?"Editează Utilizator":"Adaugă Utilizator Nou"}),e("p",{className:"text-indigo-100 text-sm font-medium",children:"Completează informațiile despre utilizator"})]})]}),e("button",{onClick:l,className:"relative z-10 text-white hover:bg-white/20 rounded-2xl p-3 transition-all duration-200 group",children:e(we,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),e("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:t("form",{onSubmit:u=>{u.preventDefault(),r(s)},className:"p-6 space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Username *"}),e("input",{type:"text",name:"username",value:s.username,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Username",required:!0})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Nume Complet *"}),e("input",{type:"text",name:"full_name",value:s.full_name,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Numele complet",required:!0})]}),t("div",{className:"space-y-2 md:col-span-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Avatar"}),t("div",{className:"flex items-center space-x-4",children:[s.avatarPreview?t("div",{className:"relative",children:[e("img",{src:s.avatarPreview,alt:"Avatar preview",className:"w-16 h-16 rounded-full object-cover border-2 border-slate-300"}),e("button",{type:"button",onClick:()=>o(u=>({...u,avatar:null,avatarPreview:null})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]}):e("div",{className:"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center",children:e(jt,{className:"w-8 h-8 text-slate-400"})}),t("div",{className:"flex-1",children:[e("input",{type:"file",accept:"image/*",onChange:c,className:"hidden",id:"avatar-upload"}),t("label",{htmlFor:"avatar-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[e(Se,{className:"w-4 h-4 mr-2"}),s.avatarPreview?"Schimbă Avatar":"Upload Avatar"]}),e("p",{className:"text-xs text-slate-500 mt-1",children:"JPG, PNG sau GIF (max 2MB)"})]})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Email *"}),e("input",{type:"email",name:"email",value:s.email,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Adresa de email",required:!0})]}),t("div",{className:"space-y-2",children:[t("label",{className:"block text-sm font-semibold text-slate-700",children:["Parolă ",!a&&"*"]}),e("input",{type:"password",name:"password",value:s.password,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:a?"Lasă gol pentru a păstra parola actuală":"Minim 6 caractere",required:!a,minLength:a?void 0:6})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Rol *"}),t("select",{name:"role",value:s.role,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",required:!0,children:[e("option",{value:"admin",children:"Administrator"}),e("option",{value:"manager",children:"Manager"}),e("option",{value:"user",children:"Utilizator"})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Status *"}),t("select",{name:"status",value:s.status,onChange:m,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",required:!0,children:[e("option",{value:"active",children:"Activ"}),e("option",{value:"inactive",children:"Inactiv"}),e("option",{value:"suspended",children:"Suspendat"})]})]})]}),t("div",{className:"space-y-3 border-t border-slate-200 pt-6",children:[t("div",{className:"flex items-center justify-between",children:[t("label",{className:"block text-sm font-semibold text-slate-700 flex items-center space-x-2",children:[e(Ot,{className:"w-5 h-5 text-indigo-600"}),e("span",{children:"Permisiuni Detaliate"})]}),t("button",{type:"button",onClick:()=>n(!i),className:"flex items-center space-x-2 px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:[e("span",{children:i?"Ascunde":"Arată"}),i?e(Ll,{className:"w-4 h-4"}):e(Fl,{className:"w-4 h-4"})]})]}),i&&t("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 space-y-4 max-h-96 overflow-y-auto",children:[e("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Bifează permisiunile pentru fiecare modul. Permisiunile se actualizează automat când schimbi rolul."}),e("div",{className:"grid grid-cols-1 gap-4",children:Object.keys(pa).map(u=>{const S=pa[u],b=s.permissions[u]||{};return S.actions.every(v=>b[v]),S.actions.some(v=>b[v]),t("div",{className:"bg-white dark:bg-slate-700 rounded-lg p-3 border border-slate-200 dark:border-slate-600",children:[t("div",{className:"flex items-center justify-between mb-2",children:[e("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:S.label}),t("div",{className:"flex space-x-2",children:[e("button",{type:"button",onClick:()=>d(u,!0),className:"text-xs px-2 py-1 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Selectează toate",children:"Toate"}),e("button",{type:"button",onClick:()=>d(u,!1),className:"text-xs px-2 py-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Deselectează toate",children:"Niciuna"})]})]}),e("div",{className:"flex flex-wrap gap-2",children:S.actions.map(v=>t("label",{className:"flex items-center space-x-2 px-3 py-1.5 bg-slate-50 dark:bg-slate-600 rounded-lg cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-500 transition-colors",children:[e("input",{type:"checkbox",checked:b[v]||!1,onChange:()=>x(u,v),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),e("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-200",children:bo[v]})]},v))})]},u)})})]})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-slate-700",children:"Note"}),e("textarea",{name:"notes",value:s.notes,onChange:m,rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Note adiționale"})]}),t("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200",children:[e("button",{type:"button",onClick:l,className:"btn-secondary",children:"Anulează"}),t("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e(jt,{className:"w-4 h-4"}),t("span",{children:[a?"Actualizează":"Creează"," Utilizator"]})]})]})]})})]})})},Ci=()=>{const{users:a,loading:l,createItem:r,updateItem:s,deleteItem:o,exportToExcel:i,exportToPDF:n}=me(),[m,x]=h.useState(""),[d,c]=h.useState([]),[g,u]=h.useState(!1),[S,b]=h.useState(!1),[v,y]=h.useState(null);h.useEffect(()=>{u(d.length>0)},[d]);const _=N=>{c(N?F.map(f=>f.id):[])},R=(N,f)=>{c(f?[...d,N]:d.filter(w=>w!==N))},p=async()=>{if(d.length!==0&&window.confirm(`Ești sigur că vrei să ștergi ${d.length} utilizatori?`))try{for(const N of d)await o("users",N);c([]),u(!1)}catch(N){console.error("Error bulk deleting users:",N)}},C=()=>{d.length!==0&&console.log("Bulk edit for users:",d)},F=a.filter(N=>{var f,w,k,L;return((f=N.username)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((w=N.full_name)==null?void 0:w.toLowerCase().includes(m.toLowerCase()))||((k=N.email)==null?void 0:k.toLowerCase().includes(m.toLowerCase()))||((L=N.role)==null?void 0:L.toLowerCase().includes(m.toLowerCase()))}),A=[{key:"full_name",label:"NUME COMPLET",sortable:!0,render:N=>t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"flex-shrink-0",children:N.avatar?e("img",{src:N.avatar,alt:N.full_name||N.username,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200"}):e("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm",children:(N.full_name||N.username||"U").charAt(0).toUpperCase()})}),t("div",{className:"min-w-0 flex-1",children:[e("p",{className:"text-sm font-medium text-slate-900 truncate",children:N.full_name||"N/A"}),t("p",{className:"text-sm text-slate-500 truncate",children:["@",N.username]})]})]})},{key:"email",label:"EMAIL",sortable:!0},{key:"role",label:"ROL",sortable:!0},{key:"created_by",label:"CREAT DE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_by||"N/A"})},{key:"created_at",label:"DATA CREARE",sortable:!0,render:N=>e("div",{className:"text-slate-800 font-medium text-base",children:N.created_at?new Date(N.created_at).toLocaleDateString("ro-RO"):"N/A"})}],U=N=>{y(N),b(!0)},D=async N=>{if(window.confirm("Sigur vrei să ștergi acest utilizator?"))try{(await o("users",N.id)).success||Be.error("Eroare la ștergerea utilizatorului")}catch(w){console.error("Error deleting user:",w),Be.error("Eroare la ștergerea utilizatorului")}},z=()=>{y(null),b(!0)},M=async N=>{v?await s("users",v.id,N):await r("users",N),b(!1),y(null)};return e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-500 rounded-2xl shadow-lg shadow-purple-500/25",children:e(st,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h2",{className:"text-2xl font-bold text-slate-800",children:"Management Utilizatori"}),e("p",{className:"text-slate-600",children:"Gestionează utilizatorii din sistem"})]})]}),t("div",{className:"flex items-center space-x-3",children:[e(mt,{onExportExcel:()=>{try{i("users")}catch(N){console.error("Error exporting to Excel:",N)}},onExportPDF:()=>{try{n("users")}catch(N){console.error("Error exporting to PDF:",N)}},entity:"users"}),t("div",{className:"flex space-x-3",children:[g&&t(Ne,{children:[t("button",{onClick:C,className:"btn-secondary flex items-center space-x-2",children:[e(Ye,{className:"w-4 h-4"}),e("span",{children:"Bulk Edit"})]}),t("button",{onClick:p,className:"btn-danger flex items-center space-x-2",children:[e(Oe,{className:"w-4 h-4"}),e("span",{children:"Bulk Delete"})]})]}),t("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e(Ae,{className:"w-4 h-4"}),e("span",{children:"Adaugă Utilizator"})]})]})]})]})}),e("div",{className:"card p-6",children:t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-1 relative",children:[e($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e("input",{type:"text",placeholder:"Caută utilizatori...",value:m,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t("button",{className:"btn-secondary flex items-center space-x-2",children:[e(Se,{className:"w-4 h-4"}),e("span",{children:"Importă"})]})]})}),e("div",{className:"card p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):F.length===0?t("div",{className:"text-center py-12",children:[e(st,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Nu există utilizatori"}),e("p",{className:"text-slate-500",children:"Adaugă primul utilizator pentru a începe"})]}):e(Ue,{data:F,columns:A,onEdit:U,onDelete:D,searchTerm:m,selectedItems:d,onSelectAll:_,onSelectItem:R,moduleColor:"purple"})}),S&&e(ki,{item:v,onClose:()=>b(!1),onSave:M})]})})},Si=()=>{var A,U,D,z,M,T,j,N,f,w,k,L,I,P,H,Z,le,ue,O,W,V,te,ne,_e,Xe,Ke,he,ge,be,re,J,ee,se,ae,fe,xe,E,Y,Ce,Ze,We,Ve,G,pe,ce,Ie,De,Ge,nt,ot,ut,vt,aa,ra,la,sa;const[a,l]=h.useState("header"),[r,s]=h.useState({logo:{type:"upload",url:"",file:null},favicon:{type:"upload",url:"",file:null},headerColor:{primary:"#2563eb",secondary:"#4f46e5",useGradient:!0},background:{type:"color",color:"#f1f5f9",imageUrl:"",imageFile:null},loginImage:{type:"upload",url:"",file:null},loginButtonColor:{primary:"#FF7A00",secondary:"#FF9500",useGradient:!1},loginPageColor:{primary:"#FFFFFF",secondary:"#F5F5F5",useGradient:!1},loginCardColor:{primary:"#8B5CF6",secondary:"#A855F7",useGradient:!0},loginTextColor:{title:"#1e293b",labels:"#334155",text:"#64748b"},appTitle:"CASHPOT V7",appSubtitle:"Gaming Management System",loginTexts:{title:"Login",emailLabel:"Email",passwordLabel:"Password",buttonText:"Log In",forgotPassword:"Forgot Password?",termsText:"By clicking login you agree to the terms of the Club Membership Agreement and the Independent Partner Agreement",joinText:"Got an invitation? Join Now",supportText:"Need help? Contact us at login-support@in.group"}});h.useEffect(()=>{const B=localStorage.getItem("appSettings");B&&s(JSON.parse(B))},[]);const o=B=>{s({...r,logo:{...r.logo,type:B}})},i=B=>{s({...r,logo:{...r.logo,url:B}})},n=B=>{const ke=B.target.files[0];if(ke){const Me=new FileReader;Me.onloadend=()=>{s({...r,logo:{...r.logo,file:Me.result}})},Me.readAsDataURL(ke)}},m=B=>{s({...r,favicon:{...r.favicon,type:B}})},x=B=>{s({...r,favicon:{...r.favicon,url:B}})},d=B=>{const ke=B.target.files[0];if(ke){const Me=new FileReader;Me.onloadend=()=>{s({...r,favicon:{...r.favicon,file:Me.result}});const q=document.querySelector("link[rel~='icon']");q&&(q.href=Me.result)},Me.readAsDataURL(ke)}},c=(B,ke)=>{s({...r,headerColor:{...r.headerColor,[B]:ke}})},g=B=>{s({...r,background:{...r.background,type:B}})},u=B=>{s({...r,background:{...r.background,color:B}}),document.body.style.backgroundColor=B},S=B=>{s({...r,background:{...r.background,imageUrl:B}})},b=B=>{const ke=B.target.files[0];if(ke){const Me=new FileReader;Me.onloadend=()=>{s({...r,background:{...r.background,imageFile:Me.result}}),document.body.style.backgroundImage=`url(${Me.result})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed"},Me.readAsDataURL(ke)}},v=B=>{s({...r,loginImage:{...r.loginImage,type:B}})},y=B=>{s({...r,loginImage:{...r.loginImage,url:B}})},_=B=>{const ke=B.target.files[0];if(ke){const Me=new FileReader;Me.onloadend=()=>{s({...r,loginImage:{...r.loginImage,file:Me.result}})},Me.readAsDataURL(ke)}},R=(B,ke)=>{s({...r,loginButtonColor:{...r.loginButtonColor,[B]:ke}})},p=()=>{localStorage.setItem("appSettings",JSON.stringify(r)),F(),alert("Setările au fost salvate cu succes!")},C=()=>{window.confirm("Sigur doriți să resetați toate setările la valorile implicite?")&&(s({logo:{type:"upload",url:"",file:null},favicon:{type:"upload",url:"",file:null},headerColor:{primary:"#2563eb",secondary:"#4f46e5",useGradient:!0},background:{type:"color",color:"#f1f5f9",imageUrl:"",imageFile:null},loginImage:{type:"upload",url:"",file:null},loginButtonColor:{primary:"#FF7A00",secondary:"#FF9500",useGradient:!1},loginPageColor:{primary:"#FFFFFF",secondary:"#F5F5F5",useGradient:!1},loginCardColor:{primary:"#8B5CF6",secondary:"#A855F7",useGradient:!0},loginTextColor:{title:"#1e293b",labels:"#334155",text:"#64748b"},appTitle:"CASHPOT V7",appSubtitle:"Gaming Management System",loginTexts:{title:"Login",emailLabel:"Email",passwordLabel:"Password",buttonText:"Log In",forgotPassword:"Forgot Password?",termsText:"By clicking login you agree to the terms of the Club Membership Agreement and the Independent Partner Agreement",joinText:"Got an invitation? Join Now",supportText:"Need help? Contact us at login-support@in.group"}}),localStorage.removeItem("appSettings"),document.body.style.backgroundColor="#f1f5f9",document.body.style.backgroundImage="none",alert("Setările au fost resetate!"))},F=()=>{if(r.headerColor.useGradient){const ke=document.querySelector("header");ke&&(ke.style.background=`linear-gradient(to right, ${r.headerColor.primary}, ${r.headerColor.secondary})`)}else{const ke=document.querySelector("header");ke&&(ke.style.background=r.headerColor.primary)}if(r.background.type==="color")document.body.style.backgroundColor=r.background.color,document.body.style.backgroundImage="none";else if(r.background.type==="image"){const ke=r.background.imageFile||r.background.imageUrl;ke&&(document.body.style.backgroundImage=`url(${ke})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed")}const B=r.favicon.file||r.favicon.url;if(B){const ke=document.querySelector("link[rel~='icon']");ke&&(ke.href=B)}};return h.useEffect(()=>{F()},[r]),e(ve,{children:t("div",{className:"space-y-6",children:[e("div",{className:"card p-6",children:t("div",{className:"flex space-x-1 bg-slate-100 rounded-xl p-1",children:[e("button",{onClick:()=>l("header"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="header"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Rl,{size:20}),e("span",{children:"Header"})]})}),e("button",{onClick:()=>l("main"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="main"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(Tr,{size:20}),e("span",{children:"Pagina Principală"})]})}),e("button",{onClick:()=>l("login"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="login"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(jl,{size:20}),e("span",{children:"Login Page"})]})}),e("button",{onClick:()=>l("backup"),className:`flex-1 py-3 px-6 rounded-lg font-bold transition-all duration-200 ${a==="backup"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:t("div",{className:"flex items-center justify-center space-x-2",children:[e(St,{size:20}),e("span",{children:"Backup BD"})]})})]})}),a==="header"&&e("div",{className:"space-y-6",children:t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(qt,{className:"w-5 h-5 text-blue-600"}),e("span",{children:"Logo Aplicație"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-4",children:[t("button",{onClick:()=>o("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.logo.type==="upload"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(Se,{className:"w-4 h-4 inline mr-2"}),"Upload"]}),t("button",{onClick:()=>o("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.logo.type==="link"?"bg-blue-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(na,{className:"w-4 h-4 inline mr-2"}),"Link"]})]}),r.logo.type==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Logo"}),e("input",{type:"file",accept:"image/*",onChange:n,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300 dark:hover:file:bg-blue-800/40"}),r.logo.file&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.logo.file,alt:"Logo Preview",className:"h-16 object-contain"})})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Logo"}),e("input",{type:"text",value:r.logo.url,onChange:B=>i(B.target.value),className:"input-field",placeholder:"https://example.com/logo.png"}),r.logo.url&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.logo.url,alt:"Logo Preview",className:"h-16 object-contain"})})]})]})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-purple-600"}),e("span",{children:"Culoare Header"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"gradientToggle",checked:r.headerColor.useGradient,onChange:B=>c("useGradient",B.target.checked),className:"form-checkbox rounded text-purple-600"}),e("label",{htmlFor:"gradientToggle",className:"text-sm font-semibold text-slate-700",children:"Folosește Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:r.headerColor.primary,onChange:B=>c("primary",B.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:r.headerColor.primary,onChange:B=>c("primary",B.target.value),className:"input-field flex-1",placeholder:"#2563eb"})]})]}),r.headerColor.useGradient&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:r.headerColor.secondary,onChange:B=>c("secondary",B.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:r.headerColor.secondary,onChange:B=>c("secondary",B.target.value),className:"input-field flex-1",placeholder:"#4f46e5"})]})]}),e("div",{className:"p-4 rounded-lg",style:{background:r.headerColor.useGradient?`linear-gradient(to right, ${r.headerColor.primary}, ${r.headerColor.secondary})`:r.headerColor.primary},children:e("p",{className:"text-white font-bold text-center",children:"Preview Header"})})]})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-teal-600"}),e("span",{children:"Texte Header"})]}),e("div",{className:"space-y-4",children:t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Titlu Aplicație"}),e("input",{type:"text",value:r.appTitle,onChange:B=>s({...r,appTitle:B.target.value}),className:"input-field",placeholder:"CASHPOT V7"}),e("p",{className:"text-xs text-slate-500",children:"Textul afișat în header"})]})})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(qt,{className:"w-5 h-5 text-green-600"}),e("span",{children:"Favicon"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-4",children:[t("button",{onClick:()=>m("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.favicon.type==="upload"?"bg-green-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(Se,{className:"w-4 h-4 inline mr-2"}),"Upload"]}),t("button",{onClick:()=>m("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${r.favicon.type==="link"?"bg-green-500 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[e(na,{className:"w-4 h-4 inline mr-2"}),"Link"]})]}),r.favicon.type==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Favicon"}),e("input",{type:"file",accept:"image/*,.ico",onChange:d,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 dark:file:bg-green-900/30 dark:file:text-green-300 dark:hover:file:bg-green-800/40"}),r.favicon.file&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.favicon.file,alt:"Favicon Preview",className:"h-8 w-8 object-contain"})})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Favicon"}),e("input",{type:"text",value:r.favicon.url,onChange:B=>x(B.target.value),className:"input-field",placeholder:"https://example.com/favicon.ico"}),r.favicon.url&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.favicon.url,alt:"Favicon Preview",className:"h-8 w-8 object-contain"})})]})]})]})]})}),a==="main"&&e("div",{className:"space-y-6",children:t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(qt,{className:"w-5 h-5 text-orange-600"}),e("span",{children:"Fundal Pagină"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-2",children:[e("button",{onClick:()=>g("color"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${r.background.type==="color"?"bg-orange-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Culoare"}),e("button",{onClick:()=>g("image"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${r.background.type==="image"?"bg-orange-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Imagine"})]}),r.background.type==="color"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Fundal"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:r.background.color,onChange:B=>u(B.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:r.background.color,onChange:B=>u(B.target.value),className:"input-field flex-1",placeholder:"#f1f5f9"})]})]}):t("div",{className:"space-y-4",children:[t("div",{className:"flex space-x-4",children:[t("button",{onClick:()=>s({...r,background:{...r.background,imageType:"upload"}}),className:"flex-1 py-2 px-3 text-sm rounded-lg bg-slate-100 hover:bg-slate-200 font-semibold",children:[e(Se,{className:"w-4 h-4 inline mr-1"}),"Upload"]}),t("button",{onClick:()=>s({...r,background:{...r.background,imageType:"link"}}),className:"flex-1 py-2 px-3 text-sm rounded-lg bg-slate-100 hover:bg-slate-200 font-semibold",children:[e(na,{className:"w-4 h-4 inline mr-1"}),"Link"]})]}),r.background.imageType==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Imagine"}),e("input",{type:"file",accept:"image/*",onChange:b,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100 dark:file:bg-orange-900/30 dark:file:text-orange-300 dark:hover:file:bg-orange-800/40"})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Imagine"}),e("input",{type:"text",value:r.background.imageUrl,onChange:B=>S(B.target.value),className:"input-field",placeholder:"https://example.com/background.jpg"})]})]})]})]})}),a==="login"&&t("div",{className:"space-y-6",children:[t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-teal-600"}),e("span",{children:"Texte Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Titlu Login"}),e("input",{type:"text",value:((A=r.loginTexts)==null?void 0:A.title)||"Login",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},title:B.target.value}}),className:"input-field",placeholder:"Login"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Etichetă Email"}),e("input",{type:"text",value:((U=r.loginTexts)==null?void 0:U.emailLabel)||"Email",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},emailLabel:B.target.value}}),className:"input-field",placeholder:"Email"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Etichetă Parolă"}),e("input",{type:"text",value:((D=r.loginTexts)==null?void 0:D.passwordLabel)||"Password",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},passwordLabel:B.target.value}}),className:"input-field",placeholder:"Password"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Text Buton"}),e("input",{type:"text",value:((z=r.loginTexts)==null?void 0:z.buttonText)||"Log In",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},buttonText:B.target.value}}),className:"input-field",placeholder:"Log In"})]}),t("div",{className:"space-y-2 lg:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:'Text "Forgot Password"'}),e("input",{type:"text",value:((M=r.loginTexts)==null?void 0:M.forgotPassword)||"Forgot Password?",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},forgotPassword:B.target.value}}),className:"input-field",placeholder:"Forgot Password?"})]}),t("div",{className:"space-y-2 lg:col-span-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Text Termeni"}),e("textarea",{value:((T=r.loginTexts)==null?void 0:T.termsText)||"",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},termsText:B.target.value}}),className:"input-field min-h-[60px] resize-none",placeholder:"By clicking login you agree to the terms..."})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:'Text "Join Now"'}),e("input",{type:"text",value:((j=r.loginTexts)==null?void 0:j.joinText)||"Got an invitation? Join Now",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},joinText:B.target.value}}),className:"input-field",placeholder:"Got an invitation? Join Now"})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-bold text-slate-700",children:"Text Support"}),e("input",{type:"text",value:((N=r.loginTexts)==null?void 0:N.supportText)||"Need help? Contact us at...",onChange:B=>s({...r,loginTexts:{...r.loginTexts||{},supportText:B.target.value}}),className:"input-field",placeholder:"Need help? Contact us at..."})]})]})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-pink-600"}),e("span",{children:"Culori Text Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Titlu"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((f=r.loginTextColor)==null?void 0:f.title)||"#1e293b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},title:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((w=r.loginTextColor)==null?void 0:w.title)||"#1e293b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},title:B.target.value}}),className:"input-field flex-1",placeholder:"#1e293b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-bold text-2xl text-center",style:{color:((k=r.loginTextColor)==null?void 0:k.title)||"#1e293b"},children:"Login"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Etichete"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((L=r.loginTextColor)==null?void 0:L.labels)||"#334155",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((I=r.loginTextColor)==null?void 0:I.labels)||"#334155",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:B.target.value}}),className:"input-field flex-1",placeholder:"#334155"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-semibold text-sm",style:{color:((P=r.loginTextColor)==null?void 0:P.labels)||"#334155"},children:"Email *"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Text Secundar"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((H=r.loginTextColor)==null?void 0:H.text)||"#64748b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},text:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((Z=r.loginTextColor)==null?void 0:Z.text)||"#64748b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},text:B.target.value}}),className:"input-field flex-1",placeholder:"#64748b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"text-xs text-center",style:{color:((le=r.loginTextColor)==null?void 0:le.text)||"#64748b"},children:"Terms & Support"})})]})]})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-indigo-600"}),e("span",{children:"Culori Fundal Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Fundal Formular"}),t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"loginPageGradient",checked:((ue=r.loginPageColor)==null?void 0:ue.useGradient)||!1,onChange:B=>s({...r,loginPageColor:{...r.loginPageColor,useGradient:B.target.checked}}),className:"form-checkbox rounded text-indigo-600"}),e("label",{htmlFor:"loginPageGradient",className:"text-sm font-semibold text-slate-700",children:"Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((O=r.loginPageColor)==null?void 0:O.primary)||"#FFFFFF",onChange:B=>s({...r,loginPageColor:{...r.loginPageColor,primary:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((W=r.loginPageColor)==null?void 0:W.primary)||"#FFFFFF",onChange:B=>s({...r,loginPageColor:{...r.loginPageColor,primary:B.target.value}}),className:"input-field flex-1"})]})]}),((V=r.loginPageColor)==null?void 0:V.useGradient)&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((te=r.loginPageColor)==null?void 0:te.secondary)||"#F5F5F5",onChange:B=>s({...r,loginPageColor:{...r.loginPageColor,secondary:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((ne=r.loginPageColor)==null?void 0:ne.secondary)||"#F5F5F5",onChange:B=>s({...r,loginPageColor:{...r.loginPageColor,secondary:B.target.value}}),className:"input-field flex-1"})]})]}),e("div",{className:"p-4 rounded-lg",style:{background:(_e=r.loginPageColor)!=null&&_e.useGradient?`linear-gradient(to right, ${r.loginPageColor.primary}, ${r.loginPageColor.secondary})`:((Xe=r.loginPageColor)==null?void 0:Xe.primary)||"#FFFFFF"},children:e("p",{className:"text-slate-800 font-bold text-center",children:"Preview Fundal"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Card Sub Logo"}),t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"loginCardGradient",checked:((Ke=r.loginCardColor)==null?void 0:Ke.useGradient)||!1,onChange:B=>s({...r,loginCardColor:{...r.loginCardColor,useGradient:B.target.checked}}),className:"form-checkbox rounded text-purple-600"}),e("label",{htmlFor:"loginCardGradient",className:"text-sm font-semibold text-slate-700",children:"Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((he=r.loginCardColor)==null?void 0:he.primary)||"#8B5CF6",onChange:B=>s({...r,loginCardColor:{...r.loginCardColor,primary:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((ge=r.loginCardColor)==null?void 0:ge.primary)||"#8B5CF6",onChange:B=>s({...r,loginCardColor:{...r.loginCardColor,primary:B.target.value}}),className:"input-field flex-1",placeholder:"#8B5CF6"})]})]}),((be=r.loginCardColor)==null?void 0:be.useGradient)&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((re=r.loginCardColor)==null?void 0:re.secondary)||"#A855F7",onChange:B=>s({...r,loginCardColor:{...r.loginCardColor,secondary:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((J=r.loginCardColor)==null?void 0:J.secondary)||"#A855F7",onChange:B=>s({...r,loginCardColor:{...r.loginCardColor,secondary:B.target.value}}),className:"input-field flex-1",placeholder:"#A855F7"})]})]}),e("div",{className:"rounded-2xl shadow-2xl p-8",style:{background:(ee=r.loginCardColor)!=null&&ee.useGradient?`linear-gradient(to right, ${r.loginCardColor.primary}, ${r.loginCardColor.secondary})`:((se=r.loginCardColor)==null?void 0:se.primary)||"#8B5CF6"},children:e("p",{className:"text-white font-bold text-2xl text-center",children:"Login"})})]})]})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-orange-600"}),e("span",{children:"Culoare Buton Login"})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Buton"}),t("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:"loginButtonGradient",checked:((ae=r.loginButtonColor)==null?void 0:ae.useGradient)||!1,onChange:B=>R("useGradient",B.target.checked),className:"form-checkbox rounded text-indigo-600"}),e("label",{htmlFor:"loginButtonGradient",className:"text-sm font-semibold text-slate-700",children:"Gradient"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Primară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((fe=r.loginButtonColor)==null?void 0:fe.primary)||"#FF7A00",onChange:B=>R("primary",B.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((xe=r.loginButtonColor)==null?void 0:xe.primary)||"#FF7A00",onChange:B=>R("primary",B.target.value),className:"input-field flex-1"})]})]}),((E=r.loginButtonColor)==null?void 0:E.useGradient)&&t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Culoare Secundară"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Y=r.loginButtonColor)==null?void 0:Y.secondary)||"#FF9500",onChange:B=>R("secondary",B.target.value),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((Ce=r.loginButtonColor)==null?void 0:Ce.secondary)||"#FF9500",onChange:B=>R("secondary",B.target.value),className:"input-field flex-1"})]})]}),e("div",{className:"p-4 rounded-lg",style:{background:(Ze=r.loginButtonColor)!=null&&Ze.useGradient?`linear-gradient(to right, ${r.loginButtonColor.primary}, ${r.loginButtonColor.secondary})`:((We=r.loginButtonColor)==null?void 0:We.primary)||"#FF7A00"},children:e("p",{className:"text-white font-bold text-center",children:"Preview Button"})})]})})]}),t("div",{className:"card p-6 space-y-6",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(Tt,{className:"w-5 h-5 text-pink-600"}),e("span",{children:"Culori Text Login"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Titlu"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Ve=r.loginTextColor)==null?void 0:Ve.title)||"#1e293b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},title:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((G=r.loginTextColor)==null?void 0:G.title)||"#1e293b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},title:B.target.value}}),className:"input-field flex-1",placeholder:"#1e293b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-bold text-2xl text-center",style:{color:((pe=r.loginTextColor)==null?void 0:pe.title)||"#1e293b"},children:"Login"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Culoare Etichete"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((ce=r.loginTextColor)==null?void 0:ce.labels)||"#334155",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((Ie=r.loginTextColor)==null?void 0:Ie.labels)||"#334155",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},labels:B.target.value}}),className:"input-field flex-1",placeholder:"#334155"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"font-semibold text-sm text-center",style:{color:((De=r.loginTextColor)==null?void 0:De.labels)||"#334155"},children:"Email *"})})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-bold text-slate-700",children:"Text Secundar"}),t("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:((Ge=r.loginTextColor)==null?void 0:Ge.text)||"#64748b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},text:B.target.value}}),className:"h-12 w-20 rounded-lg border-2 border-slate-200 cursor-pointer"}),e("input",{type:"text",value:((nt=r.loginTextColor)==null?void 0:nt.text)||"#64748b",onChange:B=>s({...r,loginTextColor:{...r.loginTextColor||{},text:B.target.value}}),className:"input-field flex-1",placeholder:"#64748b"})]}),e("div",{className:"p-4 rounded-lg bg-slate-50",children:e("p",{className:"text-xs text-center",style:{color:((ot=r.loginTextColor)==null?void 0:ot.text)||"#64748b"},children:"Terms"})})]})]})]}),t("div",{className:"card p-6 space-y-4",children:[t("h3",{className:"text-xl font-bold text-slate-800 flex items-center space-x-2 border-b border-slate-200 pb-4",children:[e(qt,{className:"w-5 h-5 text-indigo-600"}),e("span",{children:"Imagine Fundal Login"})]}),t("div",{className:"flex space-x-4 mb-4",children:[t("button",{onClick:()=>v("upload"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${((ut=r.loginImage)==null?void 0:ut.type)==="upload"?"bg-indigo-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e(Se,{className:"w-4 h-4 inline mr-2"}),"Upload"]}),t("button",{onClick:()=>v("link"),className:`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${((vt=r.loginImage)==null?void 0:vt.type)==="link"?"bg-indigo-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e(na,{className:"w-4 h-4 inline mr-2"}),"Link"]})]}),((aa=r.loginImage)==null?void 0:aa.type)==="upload"?t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Încarcă Imagine"}),e("input",{type:"file",accept:"image/*",onChange:_,className:"input-field file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-300 dark:hover:file:bg-indigo-800/40"}),((ra=r.loginImage)==null?void 0:ra.file)&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.loginImage.file,alt:"Login Preview",className:"h-32 w-full object-cover rounded"})})]}):t("div",{children:[e("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"URL Imagine"}),e("input",{type:"text",value:((la=r.loginImage)==null?void 0:la.url)||"",onChange:B=>y(B.target.value),className:"input-field",placeholder:"https://example.com/login-bg.jpg"}),((sa=r.loginImage)==null?void 0:sa.url)&&e("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:e("img",{src:r.loginImage.url,alt:"Login Preview",className:"h-32 w-full object-cover rounded"})})]})]})]}),a==="backup"&&e(pl,{compact:!1}),a!=="backup"&&e("div",{className:"card p-6",children:t("div",{className:"flex justify-end space-x-4",children:[t("button",{onClick:C,className:"btn-secondary flex items-center space-x-2",children:[e(at,{size:18}),e("span",{children:"Resetează"})]}),t("button",{onClick:p,className:"btn-primary flex items-center space-x-2",children:[e(At,{size:18}),e("span",{children:"Salvează Setări"})]})]})})]})})};function Ei(){return e(ho,{children:e(po,{children:e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:t(vl,{children:[e(Ee,{path:"/login",element:e(fo,{})}),e(Ee,{path:"/",element:e(Ht,{to:"/login",replace:!0})}),e(Ee,{path:"/dashboard",element:e(xo,{children:e(zo,{})})}),e(Ee,{path:"/companies",element:e(ze,{module:Q.COMPANIES,children:e(Fo,{})})}),e(Ee,{path:"/companies/:id",element:e(ze,{module:Q.COMPANIES,children:e(fi,{})})}),e(Ee,{path:"/locations",element:e(ze,{module:Q.LOCATIONS,children:e(Bo,{})})}),e(Ee,{path:"/locations/:id",element:e(ze,{module:Q.LOCATIONS,children:e(Uo,{})})}),e(Ee,{path:"/providers",element:e(ze,{module:Q.PROVIDERS,children:e(Go,{})})}),e(Ee,{path:"/cabinets",element:e(ze,{module:Q.CABINETS,children:e(Ho,{})})}),e(Ee,{path:"/game-mixes",element:e(ze,{module:Q.GAME_MIXES,children:e(Xo,{})})}),e(Ee,{path:"/games/:gameId",element:e(ze,{module:Q.SLOTS,children:e(Ko,{})})}),e(Ee,{path:"/slots",element:e(ze,{module:Q.SLOTS,children:e(Qo,{})})}),e(Ee,{path:"/slots/history",element:e(ze,{module:Q.SLOTS,children:e(ti,{})})}),e(Ee,{path:"/slots/cyber-import",element:e(ze,{module:Q.CYBER_IMPORT,children:e(ai,{})})}),e(Ee,{path:"/slots/:id",element:e(ze,{module:Q.SLOTS,children:e(ei,{})})}),e(Ee,{path:"/warehouse",element:e(ze,{module:Q.WAREHOUSE,children:e(li,{})})}),e(Ee,{path:"/metrology",element:e(ze,{module:Q.METROLOGY,children:e(ui,{})})}),e(Ee,{path:"/jackpots",element:e(ze,{module:Q.JACKPOTS,children:e(pi,{})})}),e(Ee,{path:"/invoices",element:e(ze,{module:Q.INVOICES,children:e(bi,{})})}),e(Ee,{path:"/invoices/:id",element:e(ze,{module:Q.INVOICES,children:e(gi,{})})}),e(Ee,{path:"/onjn-reports",element:e(ze,{module:Q.ONJN,children:e(Ni,{})})}),e(Ee,{path:"/legal-documents",element:e(ze,{module:Q.LEGAL,children:e(wi,{})})}),e(Ee,{path:"/users",element:e(ze,{requiredRole:"admin",children:e(Ci,{})})}),e(Ee,{path:"/settings",element:e(ze,{module:Q.SETTINGS,children:e(Si,{})})}),e(Ee,{path:"*",element:e(Ht,{to:"/login",replace:!0})})]})})})})}Ra.createRoot(document.getElementById("root")).render(e(Pa.StrictMode,{children:e(Is,{children:t(Nl,{children:[e(Ei,{}),e(zs,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"12px",padding:"16px",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));
