services:
  - type: web
    name: cashpot-backend
    env: node
    plan: free
    buildCommand: cd backend && npm install && echo "BUILD $(date +%s) - $(date)" > build-trigger.txt
    startCommand: cd backend && echo "ðŸš€ STARTING BUILD $(cat build-trigger.txt)" && npm start
    healthCheckPath: /health # CRITICAL REDEPLOY 2025-01-17 16:35 - CYBER ENDPOINTS 404 - MUST FIX NOW
    envVars:
      - key: DATABASE_URL
        value: postgresql://cashpot_user:V8Usuj5Do5KKQzMPHfQU3RXKLbnYSJ4X@dpg-d3ee3s6r433s73eijgig-a.frankfurt-postgres.render.com/cashpot
      - key: PORT
        value: 5001
      - key: NODE_ENV
        value: production
      - key: JWT_SECRET
        value: cashpot-secret-key-2024-very-secure
      - key: CORS_ORIGIN
        value: https://w1n.ro
      - key: AWS_ACCESS_KEY_ID
        sync: false
      - key: AWS_SECRET_ACCESS_KEY
        sync: false
      - key: AWS_REGION
        value: eu-central-1
      - key: S3_BUCKET_NAME
        value: cashpot-documents
      - key: S3_PUBLIC_BASE_URL
        value: https://cashpot-documents.s3.eu-central-1.amazonaws.com
      - key: FORCE_REDEPLOY_TRIGGER
        value: "1760697467-FIX: Software dropdown + backend endpoints + database schema"